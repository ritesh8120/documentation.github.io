<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="Description" content="Enter your description here" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="prism.css">
    <script src="prism.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans+Condensed:wght@300&display=swap" rel="stylesheet">
    <title>myportalx.com || Yogi Coach Documentation</title>
    <style>
        * {
            font-family: Poppins, sans-serif;
        }

        h2 {
            font-weight: 800;
        }

        p {
            font-weight: 400;
        }

        pre[class*=language-] {
            background: #272822;
            height: 200px;
        }
    </style>
    <div class="container">
        <h1>Yogi Coach</h1>
        <p>Coach Dashboard</p>
        <img class="img-fluid" src="image/dashboardcoach.png" alt="Login Page" height="100">
        <br><br>
        <p>Dashboard controller page</p>
        <code>application/controllers/yogicoach.php</code>
        <pre><code class="language-html"><xmp><?php
        defined('BASEPATH') OR exit('No direct script access allowed');
        
        class Yogiccoach extends CI_Controller {
        	private $userid;
        	private $adminid;
            private $modulelist;
            private $moduleMultiRow = array();
        	public function __construct()
        	{
        		parent::__construct();
        		$currentMethod = $this->router->fetch_method();
        
        		// $this->load->library('session');
        		$session = $this->session->userdata();
        		if(isset($session['user_id'])) {
        			$this->userid = $session['user_id'];
        		}
        		else {
        			 redirect(base_url());                   
        			die();
        		}
        		if(!isset($session["user_type"]))
        		{
        			redirect(base_url());
        			die();
        		}
        		else if($session['user_type']=="member"){
        			redirect(base_url()."member");
        			die();
        		}else if($session['user_type']!="yogiccoach"){
        			redirect(base_url());
        			die();
        		}
        $member=$this->db->get_where('users',array('fld_id'=>$this->userid));
                if ($member->num_rows()>0) {
            		$row=$member->row_array();
        	        $timezone = $row['fld_timezone'];
                }
        		date_default_timezone_set($timezone);
        		$exclude_methods = array("subscription","thank_you","check_promotion_code");
        
                $userDetails = $this->db->get_where("users",array("fld_id"=>$this->userid));
        		$userDetails = $userDetails->row();
        		$session["payment_status"] = $userDetails->fld_payment_status;
                
        		if(!in_array($currentMethod,$exclude_methods)) {
        			if(!isset($session["payment_status"])){
                        redirect(base_url()."yogiccoach/subscription");
                    }
                    else if($session["payment_status"] !="1"){
                        redirect(base_url()."yogiccoach/subscription");
                    }
        			//else if($session["due_date"] ){
                        //redirect(base_url()."yogiccoach/subscription");
                    //}
        		}
        
        
        
                reset($this->moduleMultiRow);
                if(isset($session["ModuleList"]) && sizeof($session["ModuleList"]) > 0){
                    $this->modulelist = $session["ModuleList"];
                    $this->moduleMultiRow = $session["moduleMultiRow"];
                }
                else{
                    //, "daily_score"=>"Daily Accountibility Score"
                    $this->modulelist = array("wheeloflife_record"=>"Wheel of life"
                        );
        
                    $this->load->model("user_model");
        
                    $coaching_forms1 = $this->user_model->get_marketing_forms($this->userid,'', true);
                    foreach($coaching_forms1 as $forms){
                         $this->modulelist[$forms->table_name]= 'BUSINESS - '.$forms->title; 
                        if($forms->multirow == "1")
                            array_push($this->moduleMultiRow,$forms->table_name);
                    }
        
                    $coaching_forms = $this->user_model->get_coaching_forms($this->userid,'', true);
                    foreach($coaching_forms as $form){
                         $this->modulelist[$form->table_name]= 'PERSONAL - '.$form->title; 
                        if($form->multirow == "1")
                            array_push($this->moduleMultiRow,$form->table_name);
                    }
                     $session["ModuleList"] = $this->modulelist;
                     $session["moduleMultiRow"] = $this->moduleMultiRow;
                }
        		//  var_dump($this->modulelist);
        		
        	}
        	
        	public function index()
        	{
        		$coaching_forms_count['coaching_forms_count'] = $this->user_model->get_marketing_forms_count($this->userid);
        		$this->load->view('yogiccoach/dashboard',$coaching_forms_count);
        	}</xmp></code></pre>
            <p>Dashboard view page</p>
            <code>application/views/yogiccoach/dashboard.php</code>
            <pre><code class="language-html"><xmp><?php 
              defined('BASEPATH') OR exit('No direct script access allowed');
              $this->lang->load('date', 'english');
              $session = $this->session->get_userdata();
              $login_id=$session['user_id'];
              $this->load->view('yogiccoach/sitebars'); 
            $this->db->order_by("fld_id", "desc");
            $getData=$this->db->get_where('users',array('fld_parent'=>$login_id));
            $get = $getData->result();
            $num_client = $getData->num_rows();
            
            $userData = $this->db->get_where('chat',array('receiver_id'=> $login_id ,'status'=>'0'));
                if ($userData->num_rows()>0) {
              $countMsg=$userData->num_rows();  
            }else{
              $countMsg=0;
            }
            
            foreach ($get as $row) {
            }
            ?>
            <div id="callincoming"></div>
            <audio id="myAudio">
                <source src="horse.ogg" type="audio/ogg">
                <source src="<?= base_url('assets/audio/skype-27014.mp3') ?>" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
            <!-- Begin Page Content -->
            <div class="container-fluid main-container">
            
                <!-- Page Heading -->
                <div class="d-sm-flex align-items-center justify-content-between mb-4">
                    <h1 class="h3 mb-0 text-gray-800">Coach Dashboard</h1>
                    <a href="http://help.myportalx.com/" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i
                            class="fas fa-question fa-sm text-white-50"></i> Help Me!</a>
                </div>
            
                <!-- Content Row <i class="fas fa-question"></i>-->
                <div class="row text-center">
                    <!-- Earnings (Monthly) Card Example -->
                    <div class="col-xl-4 col-md-6 col-sm-4 mb-4">
                        <div class="card border-primary shadow h-100 py-2">
                            <a href="<?php echo base_url().'messages' ?>">
                                <div class="card-body">
                                    <div class="col ">
                                        <div class="h5 mb-0 font-weight-bold text-gray-800">Messages</div>
                                    </div>
                                    <hr>
                                    <div class="col-auto">
                                        <img src="<?php echo base_url().'assets/';?>new_client_dashboard/images/email.png"
                                            width="100">
                                    </div>
                                    <hr>
                                    <div class="card-text">
                                        <span>
                                            <?php echo $countMsg?>
                                        </span>
                                    </div>
            
                                </div>
                            </a>
                        </div>
                    </div>
            
                    <!-- Earnings (Monthly) Card Example -->
                    <div class="col-xl-4 col-md-6 mb-4">
                        <div class="card border-success shadow h-100 py-2">
                            <a href="<?= base_url()?>/Appointment_Calendar">
                                <div class="card-body">
                                    <div class="col">
                                        <div class="h5 mb-0 font-weight-bold text-gray-800">Appointments</div>
                                    </div>
                                    <hr>
                                    <div class="col-auto">
                                        <img src="<?php echo base_url().'assets/';?>new_client_dashboard/images/calendar (1).png"
                                            width="100">
                                    </div>
                                    <hr>
                                    <div class="card-text">
                                        <span>
                                            <?php $query = $this->db->query('SELECT * FROM mys_ea_appointments WHERE `id_users_provider`= "'.$login_id.'" ');
            echo $query->num_rows(); ?>
                                        </span>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
            
                    <!-- Earnings (Monthly) Card Example -->
                    <div class="col-xl-4 col-md-6 mb-4">
                        <div class="card border-info shadow h-100 py-2">
                            <a href="<?= base_url() ?>ClientList">
                                <div class="card-body">
                                    <div class="col">
                                        <div class="h5 mb-0 font-weight-bold text-gray-800">Clients</div>
                                    </div>
                                    <hr>
                                    <div class="col-auto">
                                        <img src="<?php echo base_url().'assets/';?>new_client_dashboard/images/customer (1).png"
                                            width="100">
                                    </div>
                                    <hr>
                                    <div class="card-text">
                                        <span>
                                            <?= $num_client?>
                                        </span>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
            
                    <!-- Pending Requests Card Example -->
                </div>
            
                <!-- Content Row -->
            
                <div class="row">
                    <div class="col-lg-4 mb-4">
                        <a href="#" data-toggle="modal" data-target="#message-form-modal">
                            <div class="card">
                                <h5 class="card-header">
                                    Maya
                                </h5>
                                <div class="card-body">
                                    <p class="card-text">
                                        <img src="<?= base_url('/assets/images/Portal.png') ?>" height="140" class="img-responsive">
                                    </p>
                                </div>
                            </div>
                        </a>
                    </div>
            
                    <!-- client journey form Modal-->
                    <div class="modal fade" id="message-form-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content" style="align-items: center;">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Choose how you want to connect</h5>
                                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">×</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="cards shadow mb-1  p-2">
                                        <a href="<?php echo base_url(" yogiccoach/maya") ?>" class="btn btn-info">Maya Video
                                            Chat</a>
                                        <a href="<?php echo base_url(" Messages") ?>" class="btn btn-info pull-right">Messenger
                                            Chat</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            
                    <!-- Area Chart -->
                    <div class="col-xl-4 col-lg-4">
                        <!--<div class="card shadow pb-4">-->
                        <!-- Card Header - Dropdown -->
                        <a href="#" data-toggle="modal" data-target="#client-journey-form-modal">
                            <div class="card">
                                <h5 class="card-header">Client Journey</h5>
                                <div class="card-body ">
                                    <p class="card-text">
                                        <img src="<?php echo base_url().'assets/';?>new_client_dashboard/images/promotion.png"
                                            width="140" class="img-responsive">
                                    </p>
                                </div>
                            </div>
                        </a>
                    </div>
            
            
                    <div class="col-xl-4 col-lg-4">
            
                        <a href="<?= base_url('yogiccoach/greenmashin'); ?>">
                            <div class="card">
                                <h5 class="card-header">
                                    The Green Machine
                                </h5>
                                <div class="card-body">
                                    <p class="card-text">
                                        <img src="<?php echo base_url().'assets/';?>new_client_dashboard/images/Maanas Icon.png"
                                            width="140">
                                    </p>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            
            
                <div class="row">
                    <div class="col-xl-4 col-lg-4">
            
                        <a href="<?= base_url('yogiccoach/session_notes1').'/'.$login_id?>">
                            <div class="card">
                                <h5 class="card-header">
                                    Notes
                                </h5>
                                <div class="card-body">
                                    <p class="card-text">
                                        <img src="<?php echo base_url().'assets/';?>new_client_dashboard/images/notepad (1).png"
                                            width="140">
                                    </p>
                                </div>
                            </div>
                        </a>
                    </div>
                    <!--<div class="col-md-4">-->
                    <!--  <a href="<?= base_url() ?>/Profile">-->
                    <!--   <div class="card">-->
                    <!--     <h5 class="card-header">-->
                    <!--       Profile-->
                    <!--     </h5>-->
                    <!--     <div class="card-body">-->
                    <!--       <p class="card-text">-->
                    <!--          <img src="<?php echo base_url().'assets/';?>new_client_dashboard/images/user (2).png" width="150">-->
                    <!--       </p>-->
                    <!--     </div>-->
                    <!--   </div>-->
                    <!--   </a>-->
                    <!-- </div>-->
                    <div class="col-md-4">
                        <?php
                     $coach = $this->db->get_where('site_creater',array('fld_user_id'=>$login_id));
            
                     if ($coach->num_rows()>0) 
                     {
                        $row = $coach->row_array();
                        $fld_url = $row["fld_url"];
                        echo '<a href="'.base_url().'sites/editor.php?foldername='.$fld_url.'" >';
                     }else
                     {
                         echo '<a href="'.base_url().'sites?id='.$login_id.'">';
                     }
                    ?>
            
                        <div class="card">
                            <h5 class="card-header">
                                Site Creator
                            </h5>
                            <div class="card-body">
                                <p class="card-text">
                                    <img src="<?php echo base_url().'assets/';?>new_client_dashboard/images/browser (1).png"
                                        width="150">
                                </p>
                            </div>
                        </div>
                        </a>
                    </div>
            
                    <div class="col-md-4">
                        <a href="<?= base_url()?>/library/index.php?user_id=<?=$login_id?>">
                            <div class="card">
                                <h5 class="card-header">
                                    Library
                                </h5>
                                <div class="card-body">
                                    <p class="card-text">
                                        <img src="<?php echo base_url().'assets/';?>new_client_dashboard/images/library.png"
                                            width="150">
                                    </p>
                                </div>
                            </div>
                        </a>
                    </div>
            
            
            
                </div>
            
            
            </div>
            </div>
            
            
            
            
            <!-- client journey form Modal-->
            <div class="modal fade" id="client-journey-form-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Choose Map Type Client Journey</h5>
                            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="cards shadow mb-1">
                                <!--  <h6 class="m-0 font-weight-bold text-primary">Choose Client Journey</h6> -->
                                <form style="padding: 5px 5px;">
                                    <div class="form-group">
            
            
                                        <select class="form-control client_select">
                                            <option selected disabled>Choose Client</option>
                                            <?php $this->db->order_by("fld_id", "desc");
            $getData=$this->db->get_where('users',array('fld_parent'=>$login_id,'fld_status'=> '1'))->result();
            foreach($getData as $row){
              $client_name = $row->fld_first_name.' '. $row->fld_last_name;
                               if(trim($client_name) == "")
                                 $client_name = $row->fld_username;
              echo '<option class="red" value="'.$row->fld_id.'"> '.$client_name.' </option>';
              }
             ?>
                                        </select>
            
                                        <br>
                                        <div class="red box">
                                            <select class="form-control">
                                                <option selected disabled>Choose Personal/Business</option>
                                                <option class="green">Personal Map</option>
                                                <option class="green">Business Map</option>
            
                                            </select>
                                            <br>
                                        </div>
                                        <div class="green box">
                                            <select class="form-control" id="sel2">
                                                <option selected disabled>Choose Personal/Busniess</option>
                                                <option value="business_journey" class="blue">Linear Map</option>
                                                <option value="personal_journey" class="blue">Strategic Map</option>
            
                                            </select>
                                        </div>
            
            
                                        <!-- =========== script ==============  -->
                                        <script>
                                            $(document).ready(function () {
                                                $("select").change(function () {
                                                    $(this).find("option:selected").each(function () {
                                                        var optionclass = $(this).attr("class");
                                                        if (optionclass) {
                                                            $(".red .box").not("." + optionclass).show();
                                                            $("." + optionclass).show();
                                                        }

                                                        else {
                                                            $(".box").hide();
                                                        }
                                                    });
                                                }).change();

                                            });
                                        </script>
                                        <!-- =========== script ==============  -->
            
                                    </div>
            
                                    <input type="button" name="submit" value="Next" class="btn-warning map">
                                </form>
            
                            </div>
                        </div>
                        <script>
                            $(document).ready(function () {
                                setInterval(function () { update_profile(); }, 3000);

                                function update_profile() {
                                    var x = document.getElementById("myAudio");
                                    $.ajax({

                                        url: "<?=base_url()?>yogiccoach/update_profile",

                                        method: "post",

                                        type: "json",

                                        success: function (response) {
                                            data = JSON.parse(response);
                                            console.log(data.status);
                                            if (data.status == 1) {
                                                x.play();
                                                $('#callincoming').html('<div class="alert alert-dark" style="height: 50px;line-height: 50px;padding:0px;"><a href="' + data.url + '" style="margin-right:12px;float:right;"><img src="<?= base_url('assets / img / 0e475bb9b17b3fa4f94f31fba1635b8f - telephone - call - icon - logo - by - vexels.png'); ?>" alt="callend" width="30"></a><a href="<?= base_url('yogiccoach / callend / ') ?>/' + data.fld_id + '" style="margin-right:12px;float:right;"><img src="<?= base_url('assets / img / png - clipart - end - call - button - telephone - call - button - computer - icons - button - text - trademark.png') ?>" alt="callend" width="25"></a></div>');
                                            } else {
                                                $('#callincoming').html("");
                                                x.pause();

                                            }
                                            // x.play();
                                        }

                                    });

                                }

                                $('.map').click(function () {
                                    var id = $('.client_select').val();
                                    //   alert(id);
                                    var link = $('#sel2').val();
                                    window.open("<?= base_url('yogiccoach/') ?>/" + link + "/" + id);
                                });
                            });
                        </script>
            
                        <!-- <div class="modal-footer">
                      <button class="btn btn-secondary" type="button" data-dismiss="modal">Submit</button>
                    </div> -->
                    </div>
                </div>
            </div>
            <?php $this->load->view('yogiccoach/foot'); ?></xmp></code></pre>
            <p>Appointment Calender</p>
            <img class="img-fluid" src="image/appointmentcalendercoach.png" alt="Login Page" height="100">
            <br><br>
            <p>appointment calender controller page</p>
            <code>application/controllers/yogiccoach.php</code>
            <pre><code class="language-html"><xmp>public function appointment_calendar($appointment_hash = ''){
            $this->lang->load('translations', $this->config->item('language'));
            
            $this->load->model('appointments_model');
            $this->load->model('coach_model'); //provide model
            $this->load->model('services_model');
            //$this->load->model('customers_model');
            $this->load->model('appointment_settings_model');
            $this->load->model('roles_model');
            $this->load->model('user_model');
            //$this->load->model('secretaries_model');
            
            
            $view['coachID'] = $this->userid;
            $view['base_url'] = $this->config->item('base_url');
            $view['base_url_api'] = $this->config->item('base_url_api');
            $view['user_display_name'] = $this->user_model->get_user_display_name($this->userid);
            $view['active_menu'] = PRIV_APPOINTMENTS;
            $view['book_advance_timeout'] = $this->appointment_settings_model->get_setting('book_advance_timeout');
            $view['date_format'] = $this->appointment_settings_model->get_setting('date_format');
            $view['company_name'] =
            $this->user_model->get_user_display_name($this->userid);//$this->appointment_settings_model->get_setting('company_name');
            $view['available_providers'] = $this->coach_model->get_coach_details($this->userid);
            $view['available_services'] = $this->services_model->get_available_services($this->userid);
            $view['customers'] = $this->user_model->get_batch('',$this->userid);
            $view['secretary_providers'] = array();
            $this->set_user_data($view);
            
            $results = $this->appointments_model->get_batch(array('hash' => $appointment_hash));
            if ($appointment_hash != '' && count($results) > 0) {
            $appointment = $results[0];
            $appointment['customer'] = $this->user_model->get_row($appointment['id_users_customer']);
            $view['edit_appointment'] = $appointment; // This will display the appointment edit dialog on page load.
            } else {
            $view['edit_appointment'] = NULL;
            }
            
            $this->load->view('yogiccoach/appointment_calendar',$view);
            
            }</xmp></code></pre>
            <p>appointment calender view</p>
            <code>application/views/yogiccoach/appointment_calendar.php</code>
            <pre><code class="language-html"><xmp><?php
            $this->load->view('yogiccoach/sidebar');
            ?>
            <link rel="stylesheet" type="text/css"
                href="<?php echo  base_url();  ?>/assets/appointment/ext/jquery-ui/jquery-ui.min.css">
            <link rel="stylesheet" type="text/css"
                href="<?php echo  base_url();  ?>/assets/appointment/ext/jquery-qtip/jquery.qtip.min.css">
            <link rel="stylesheet" type="text/css"
                href="<?php echo  base_url();  ?>/assets/appointment/ext/jquery-jscrollpane/jquery.jscrollpane.css">
            <link rel="stylesheet" type="text/css" href="<?php echo  base_url();  ?>/assets/appointment/css/backend.css">
            <link rel="stylesheet" type="text/css" href="<?php echo  base_url();  ?>/assets/appointment/css/general.css">
            <script type="text/javascript" src="<?php echo base_url(); ?>/assets/appointment/ext/datejs/date.js"></script>
            <script type="text/javascript">
                // Global JavaScript Variables - Used in all backend pages.
                var availableLanguages = <?php echo json_encode($this -> config -> item('available_languages')); ?>;
                var EALang = <?php echo json_encode($this -> lang -> language); ?>;
            </script>
            <script type="text/javascript" src="<?php echo base_url(); ?>/assets/appointment/ext/jquery/jquery.min.js"></script>
            <script type="text/javascript"
                src="<?php echo base_url(); ?>/assets/appointment/ext/jquery-ui/jquery-ui.min.js"></script>
            <script type="text/javascript"
                src="<?php echo base_url(); ?>/assets/appointment/ext/jquery-qtip/jquery.qtip.min.js"></script>
            <script type="text/javascript"
                src="<?php echo base_url(); ?>/assets/appointment/ext/bootstrap/js/bootstrap.min.js"></script>
            <script type="text/javascript" src="<?php echo base_url(); ?>/assets/appointment/ext/datejs/date.js"></script>
            <script type="text/javascript"
                src="<?php echo base_url(); ?>/assets/appointment/ext/jquery-jscrollpane/jquery.jscrollpane.min.js"></script>
            <script type="text/javascript"
                src="<?php echo base_url(); ?>/assets/appointment/ext/jquery-mousewheel/jquery.mousewheel.js"></script>
            
            <link rel="stylesheet" type="text/css"
                href="<?php echo base_url(); ?>/assets/appointment/ext/jquery-fullcalendar/jquery.fullcalendar.css" />
            <script type="text/javascript"
                src="<?php echo base_url(); ?>/assets/appointment/ext/jquery-fullcalendar/jquery.fullcalendar.min.js"></script>
            <script type="text/javascript"
                src="<?php echo base_url(); ?>/assets/appointment/ext/jquery-ui/jquery-ui-timepicker-addon.js"></script>
            <script type="text/javascript" src="<?php echo base_url(); ?>/assets/appointment/js/backend_calendar.js"></script>
            <script type="text/javascript">
                var GlobalVariables = {
                    'csrfToken': <?php echo json_encode($this->security->get_csrf_hash()); ?>,
                    'availableProviders' : <?php echo json_encode($available_providers); ?>,
                    'availableServices'     : <?php echo json_encode($available_services); ?>,
                    'baseUrl'               : <?php echo '"'.$base_url. '"'; ?>,
                                    'baseAPIUrl'               : <?php echo '"'.$base_url_api. '"'; ?>,
                                        'bookAdvanceTimeout'    : <?php echo $book_advance_timeout; ?>,
                                            'dateFormat'            : <?php echo json_encode($date_format); ?>,
                                                'editAppointment'       : <?php echo json_encode($edit_appointment); ?>,
                                                    'customers'             : <?php echo json_encode($customers); ?>,
                                                        'secretaryProviders'    : <?php echo json_encode($secretary_providers); ?>,
                                                            'user'                  : {
                    'id'        : <?php echo $user_id; ?>,
                        'email'     : <?php echo '"'.$user_email. '"'; ?>,
                            'role_slug' : <?php echo '"'.$role_slug. '"'; ?>,
                                'privileges': <?php echo json_encode($privileges); ?>
                    }
                };

                $(document).ready(function () {
                    BackendCalendar.initialize(true);
                });
            </script>
            <style>
                .ui-datepicker {
                    position: relative;
                    z-index: 10000 !important;
                }
            </style>
            <!-- START BREADCRUMB -->
            <ul class="breadcrumb push-down-0">
                <li><a href="<?php echo base_url()." yogiccoach/";?>">Dashboard</a></li>
                <li>Appointment Scheduler</li>
                <li class="active">Calendar</li>
            </ul>
            <!-- END BREADCRUMB -->
            <div id="error_container"></div>
            <div class="content-frame" onload="deletnotifiction()">
                <!-- START CONTENT FRAME TOP -->
                <div class="content-frame-top hide">
                    <div class="page-title"></div>
                </div>
                <!-- END CONTENT FRAME TOP -->
                <!-- START CONTENT FRAME BODY -->
                <div class="row1">
                    <div class="col-md-12 text-center">
            
                        <div id="calendar-page">
                            <div id="calendar-toolbar">
                                <div id="calendar-filter" class="form-group form-inline ">
                                    <label for="select-filter-item">
                                        <?php echo $this->lang->line('display_calendar'); ?>
                                    </label>
                                    <select id="select-filter-item" class="form-control">
                                        title="
                                        <?php echo $this->lang->line('select_filter_item_hint'); ?>">
                                    </select>
                                </div>
            
                                <div id="calendar-actions">
                                    <div class="btn-group">
                                        <a href="https://calendar.google.com/" target="_blank"><img
                                                src="<?php echo base_url();?>assets/img/google-calendar.jpg"
                                                alt="Google Calendar" /></a>&nbsp;&nbsp;
                                    </div>
                                    <div class="btn-group">
                                        <button id="reload-appointments" class="btn btn-default"
                                            title="<?php echo $this->lang->line('reload_appointments_hint'); ?>">
                                            <span class="glyphicon glyphicon-repeat"></span>
                                            <?php echo $this->lang->line('reload'); ?>
                                        </button>
                                    </div>
                                    <div class="btn-group">
                                        <button id="insert-appointment" class="btn btn-primary"
                                            title="<?php echo $this->lang->line('new_appointment_hint'); ?>">
                                            <span class="glyphicon glyphicon-plus"></span>
                                            <?php echo $this->lang->line('appointment'); ?>
                                        </button>
                                        <button id="insert-unavailable" class="btn btn-default"
                                            title="<?php echo $this->lang->line('unavailable_periods_hint'); ?>">
                                            <span class="glyphicon glyphicon-plus"></span>
                                            <?php echo $this->lang->line('unavailable'); ?>
                                        </button>
                                    </div>
                                </div>
                            </div>
            
                            <div id="calendar"></div>
                            <?php // Main calendar container ?>
                        </div>
            
                        <?php
                        // --------------------------------------------------------------------
                        //
                        // MANAGE APPOINTMENT
                        //
                        // --------------------------------------------------------------------
                        ?>
                        <div id="manage-appointment" class="modal fades" data-keyboard="true" tabindex="-1">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="wrapper">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal"
                                                aria-hidden="true">&times;</button>
                                            <h3 class="modal-title">
                                                <?php echo $this->lang->line('edit_appointment_title'); ?>
                                            </h3>
                                        </div>
            
                                        <div class="modal-body">
                                            <div class="modal-message alert hidden"></div>
                                            <div class="clearfix"></div>
            
                                            <form class="form-horizontal">
                                                <fieldset class="">
                                                    <legend>
                                                        <?php echo $this->lang->line('appointment_details_title'); ?>
                                                    </legend>
            
                                                    <input id="appointment-id" type="hidden" />
            
            
                                                    <div class="form-group">
                                                        <label for="select-service" class="col-sm-4 control-label"
                                                            style="width: 160px">
                                                            <?php echo $this->lang->line('service'); ?> *
                                                        </label>
                                                        <div class="col-sm-7">
                                                            <select id="select-service" class="required form-control">
                                                                <?php
                                                                // Group services by category, only if there is at least one service
                                                                // with a parent category.
                                                                $has_category = FALSE;
                                                                foreach($available_services as $service) {
                                                                    if ($service['category_id'] != NULL) {
                                                                        $has_category = TRUE;
                                                                        break;
                                                                    }
                                                                }
            
                                                                if ($has_category) {
                                                                    $grouped_services = array();
            
                                                                    foreach($available_services as $service) {
                                                                        if ($service['category_id'] != NULL) {
                                                                            if (!isset($grouped_services[$service['category_name']])) {
                                                                                $grouped_services[$service['category_name']] = array();
                                                                            }
            
                                                                            $grouped_services[$service['category_name']][] = $service;
                                                                        }
                                                                    }
            
                                                                    // We need the uncategorized services at the end of the list so
                                                                    // we will use another iteration only for the uncategorized services.
                                                                    $grouped_services['uncategorized'] = array();
                                                                    foreach($available_services as $service) {
                                                                        if ($service['category_id'] == NULL) {
                                                                            $grouped_services['uncategorized'][] = $service;
                                                                        }
                                                                    }
            
                                                                    foreach($grouped_services as $key => $group) {
                                                                        $group_label = ($key != 'uncategorized')
                                                                            ? $group[0]['category_name'] : 'Uncategorized';
            
                                                                        if (count($group) > 0) {
                                                                            echo '<optgroup label="' . $group_label . '">';
                                                                            foreach($group as $service) {
                                                                                echo '<option value="' . $service['id'] . '">'
                                                                                    . $service['name'] . '</option>';
                                                                            }
                                                                            echo '</optgroup>';
                                                                        }
                                                                    }
                                                                }  else {
                                                                    foreach($available_services as $service) {
                                                                        echo '<option value="' . $service['id'] . '">'
                                                                            . $service['name'] . '</option>';
                                                                    }
                                                                }
                                                                ?>
                                                            </select>
                                                        </div>
                                                    </div>
            
                                                    <div class="form-group">
                                                        <label for="select-customer" class="col-sm-5 control-label"
                                                            style="width: 160px">Client *</label>
                                                        <div class="col-md-7">
                                                            <select id="select-customer" class="required form-control">
                                                                <option value="">-Select Client-</option>
                                                                <?php
                                                                foreach($customers as $customer) {
                                                                    echo '<option value="' . $customer['fld_id'] . '">'
                                                                        . $customer['fld_first_name'] . ' ' .  $customer['fld_last_name'] . '</option>';
                                                                }
                                                                ?>
                                                            </select>
                                                        </div>
                                                    </div>
            
                                                    <div class="form-group">
                                                        <label for="start-datetime" class="col-sm-5 control-label"
                                                            style="width: 160px">
                                                            <?php echo $this->lang->line('start_date_time'); ?>
                                                        </label>
                                                        <div class="col-sm-7">
                                                            <input type="text" id="start-datetime" class="form-control" />
                                                        </div>
                                                    </div>
            
                                                    <div class="form-group">
                                                        <label for="end-datetime" class="control-label col-sm-3"
                                                            style="width: 160px">
                                                            <?php echo $this->lang->line('end_date_time'); ?>
                                                        </label>
                                                        <div class="col-sm-7">
                                                            <input type="text" id="end-datetime" class="form-control" />
                                                        </div>
                                                    </div>
            
                                                    <div class="form-group">
                                                        <label for="appointment-notes" class="control-label col-sm-3"
                                                            style="width: 160px">
                                                            <?php echo $this->lang->line('notes'); ?>
                                                        </label>
                                                        <div class="col-sm-7">
                                                            <textarea id="appointment-notes" class="form-control"
                                                                rows="3"></textarea>
                                                        </div>
                                                    </div>
                                                </fieldset>
            
                                            </form>
                                        </div>
            
                                    </div>
                                    <div class="modal-footer footer">
                                        <button id="save-appointment" class="btn btn-primary">
                                            <?php echo $this->lang->line('save'); ?>
                                        </button>
                                        <button id="cancel-appointment" class="btn btn-default" data-dismiss="modal">
                                            <?php echo $this->lang->line('cancel'); ?>
                                        </button>
            
                                    </div>
                                </div>
            
                            </div>
                        </div>
            
                        <?php
                        // --------------------------------------------------------------------
                        //
                        // MANAGE UNAVAILABLE
                        //
                        // --------------------------------------------------------------------
                        ?>
                        <div id="manage-unavailable" class="modal fade">
                            <div class="modal-dialog">
                                <div class="modal-content">
            
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                        <h3 class="modal-title">
                                            <?php echo $this->lang->line('new_unavailable_title'); ?>
                                        </h3>
                                    </div>
            
                                    <div class="modal-body">
                                        <div class="modal-message alert hidden"></div>
                                        <div class="clearfix"></div>
            
                                        <form class="form-horizontal">
                                            <fieldset>
                                                <input id="unavailable-id" type="hidden" />
            
                                                <div class="form-group">
                                                    <label for="unavailable-start" class="control-label col-sm-3">
                                                        <?php echo $this->lang->line('start'); ?>
                                                    </label>
                                                    <div class="col-sm-8">
                                                        <input type="text" id="unavailable-start" class="form-control" />
                                                    </div>
                                                </div>
            
                                                <div class="form-group">
                                                    <label for="unavailable-end" class="control-label col-sm-3">
                                                        <?php echo $this->lang->line('end'); ?>
                                                    </label>
                                                    <div class="col-sm-8">
                                                        <input type="text" id="unavailable-end" class="form-control" />
                                                    </div>
                                                </div>
            
                                                <div class="form-group">
                                                    <label for="unavailable-notes" class="control-label col-sm-3">
                                                        <?php echo $this->lang->line('notes'); ?>
                                                    </label>
                                                    <div class="col-sm-8">
                                                        <textarea id="unavailable-notes" rows="3" class="form-control"></textarea>
                                                    </div>
                                                </div>
                                            </fieldset>
                                        </form>
                                    </div>
            
                                    <div class="modal-footer">
                                        <button id="save-unavailable" class="btn btn-primary">
                                            <?php echo $this->lang->line('save'); ?>
                                        </button>
                                        <button id="cancel-unavailable" class="btn btn-default" data-dismiss="modal">
                                            <?php echo $this->lang->line('cancel'); ?>
                                        </button>
                                    </div>
            
                                </div>
                            </div>
                        </div>
            
                        <?php
                        // --------------------------------------------------------------------
                        //
                        // SELECT GOOGLE CALENDAR
                        //
                        // --------------------------------------------------------------------
                        ?>
                        <div id="select-google-calendar" class="modal fade">
                            <div class="modal-dialog">
                                <div class="modal-content">
            
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                        <h3 class="modal-title">
                                            <?php echo $this->lang->line('select_google_calendar'); ?>
                                        </h3>
                                    </div>
            
                                    <div class="modal-body">
                                        <p>
                                            <?php echo $this->lang->line('select_google_calendar_prompt'); ?>
                                        </p>
                                        <select id="google-calendar"></select>
                                    </div>
            
                                    <div class="modal-footer">
                                        <button id="select-calendar" class="btn btn-primary">
                                            <?php echo $this->lang->line('select'); ?>
                                        </button>
                                        <button id="close-calendar" class="btn btn-default" data-dismiss="modal">
                                            <?php echo $this->lang->line('close'); ?>
                                        </button>
                                    </div>
            
                                </div>
                            </div>
                        </div>
                    </div>
            
            
            
            
                </div>
            
            
            
            </div>
            <script type="text/javascript" src="<?php echo base_url(); ?>/assets/appointment/js/backend.js"></script>
            <script type="text/javascript" src="<?php echo base_url(); ?>/assets/appointment/js/general_functions.js"></script>
            <script>
                $(document).ready(function () {
                    $.ajax({
                        url: "<?php echo base_url(); ?>yogiccoach/delet_appointment_notifiction",
                        success: function (result) {
                        }
                    });
                });
            </script>
            <?php
            $this->load->view('yogiccoach/footer');
            ?>
</xmp></code></pre>
<p>In this page login three type of user.</p>
<img class="img-fluid" src="image/appointmentservicecoach.png" alt="Login Page" height="100">
<br><br>
<p>Login page View</p>
<code>application/views/site/login.php</code>
<pre><code class="language-html"><xmp>public function appointment_services()
{
$this->lang->load('translations', $this->config->item('language'));
$this->load->model('user_model');
$this->load->model('services_model');
$this->load->model('appointment_settings_model');


$view['base_url'] = $this->config->item('base_url');
$view['base_url_api'] = $this->config->item('base_url_api');
$view['user_display_name'] = $this->user_model->get_user_display_name($this->session->userdata('user_id'));
$view['active_menu'] = PRIV_SERVICES;
$view['company_name'] = $this->user_model->get_user_display_name($this->session->userdata('user_id'));
$view['date_format'] = $this->appointment_settings_model->get_setting('date_format');
$view['services'] = $this->services_model->get_batch();
$view['categories'] = $this->services_model->get_all_categories();
$this->set_user_data($view);


$this->load->view('yogiccoach/appointment_services',$view);
}</xmp></code></pre>
<p>Appointment Service view</p>
<code>application/views/yogiccoach/appointment_services.php</code>
<pre><code class="language-html"><xmp><?php

$this->load->view('yogiccoach/sidebar');

?>
<link rel="stylesheet" type="text/css"
    href="<?php echo  base_url();  ?>/assets/appointment/ext/jquery-ui/jquery-ui.min.css">
<link rel="stylesheet" type="text/css"
    href="<?php echo  base_url();  ?>/assets/appointment/ext/jquery-qtip/jquery.qtip.min.css">
<link rel="stylesheet" type="text/css"
    href="<?php echo  base_url();  ?>/assets/appointment/ext/jquery-jscrollpane/jquery.jscrollpane.css">
<link rel="stylesheet" type="text/css" href="<?php echo  base_url();  ?>/assets/appointment/css/backend.css">
<link rel="stylesheet" type="text/css" href="<?php echo  base_url();  ?>/assets/appointment/css/general.css">
<script type="text/javascript" src="<?php echo base_url(); ?>/assets/appointment/ext/datejs/date.js"></script>
<script type="text/javascript" src="<?php echo base_url(); ?>/assets/appointment/ext/jquery/jquery.min.js"></script>
<script type="text/javascript"
    src="<?php echo base_url(); ?>/assets/appointment/ext/jquery-ui/jquery-ui.min.js"></script>
<script type="text/javascript"
    src="<?php echo base_url(); ?>/assets/appointment/ext/jquery-qtip/jquery.qtip.min.js"></script>
<script type="text/javascript"
    src="<?php echo base_url(); ?>/assets/appointment/ext/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="<?php echo base_url(); ?>/assets/appointment/ext/datejs/date.js"></script>
<script type="text/javascript"
    src="<?php echo base_url(); ?>/assets/appointment/ext/jquery-jscrollpane/jquery.jscrollpane.min.js"></script>
<script type="text/javascript"
    src="<?php echo base_url(); ?>/assets/appointment/ext/jquery-mousewheel/jquery.mousewheel.js"></script>
<script type="text/javascript">
    // Global JavaScript Variables - Used in all backend pages.
    var availableLanguages = <?php echo json_encode($this -> config -> item('available_languages')); ?>;
    var EALang = <?php echo json_encode($this -> lang -> language); ?>;
</script>
<script type="text/javascript" src="<?php echo $base_url; ?>/assets/appointment/js/backend_services.js"></script>
<script type="text/javascript">
    var GlobalVariables = {
        'csrfToken': <?php echo json_encode($this-> security -> get_csrf_hash()); ?>,
            'baseUrl'       : <?php echo '"'.$base_url. '"'; ?>,
                'baseAPIUrl'    : <?php echo '"'.$base_url_api. '"'; ?>,
                    'dateFormat'    : <?php echo json_encode($date_format); ?>,
                        'services'      : <?php echo json_encode($services); ?>,
                            'categories'    : <?php echo json_encode($categories); ?>,
                                'user'          : {
        'id'        : <?php echo $user_id; ?>,
            'email'     : <?php echo '"'.$user_email. '"'; ?>,
                'role_slug' : <?php echo '"'.$role_slug. '"'; ?>,
                    'privileges': <?php echo json_encode($privileges); ?>
        }
    };

    $(document).ready(function () {
        BackendServices.initialize(true);
    });
</script>
<!-- START BREADCRUMB -->
<ul class="breadcrumb push-down-0">
    <li><a href="<?php echo base_url()." yogiccoach/";?>">Dashboard</a></li>
    <li>Appointment Scheduler</li>
    <li><a href="<?php echo base_url()." yogiccoach/appointment_calendar";?>">Calendar</a></li>
    <li class="active">Services</li>
</ul>
<!-- END BREADCRUMB -->
<div id="error_container"></div>
<div class="content-frame"">
    <!-- START CONTENT FRAME TOP -->
    <div class=" content-frame-top hide">
    <div class="page-title"></div>
</div>
<div class="page-content-wrap">

    <div class="row">
        <div class="col-md-12">
            <!-- START JUSTIFIED TABS -->
            <div class="panel panel-default tabs">
                <ul class="nav nav-tabs nav-justified" id="servicesTabs">
                    <li class="services-tab tab active"><a href="#services" data-toggle="tab">Services</a></li>
                    <li class="categories-tab tab"><a href="#categories" data-toggle="tab">Categories</a></li>
                </ul>

                <div class="panel-body tab-content" id="services-page">
                    <div id="services" class="tab-pane active">
                        <?php // FILTER SERVICES ?>
                        <div class="row">
                            <div id="filter-services" class="filter-records column col-md-4">
                                <form class="input-append hidden">
                                    <input class="key" type="text" />
                                    <div class="btn-group">
                                        <button class="filter btn btn-default btn-sm" type="submit"
                                            title="<?php echo $this->lang->line('filter'); ?>">
                                            <span
                                                class="glyphglyphicon glyphicon glyphglyphicon glyphicon-search"></span>
                                        </button>
                                        <button class="clear btn btn-default btn-sm" type="button"
                                            title="<?php echo $this->lang->line('clear'); ?>">
                                            <span
                                                class="glyphglyphicon glyphicon glyphglyphicon glyphicon-repeat"></span>
                                        </button>
                                    </div>
                                </form>

                                <h3>
                                    <?php echo $this->lang->line('services'); ?>
                                </h3>
                                <div class="results"></div>
                            </div>

                            <div class="details column col-md-7">
                                <div class="btn-toolbar">
                                    <div class="add-edit-delete-group btn-group">
                                        <button id="add-service" class="btn btn-primary">
                                            <span class="glyphicon glyphicon-plus"></span>
                                            <?php echo $this->lang->line('add'); ?>
                                        </button>
                                        <button id="edit-service" class="btn btn-default" disabled="disabled">
                                            <span class="glyphicon glyphicon-pencil"></span>
                                            <?php echo $this->lang->line('edit'); ?>
                                        </button>
                                        <button id="delete-service" class="btn btn-default" disabled="disabled">
                                            <span class="glyphicon glyphicon-remove"></span>
                                            <?php echo $this->lang->line('delete'); ?>
                                        </button>
                                    </div>

                                    <div class="save-cancel-group btn-group" style="display:none;">
                                        <button id="save-service" class="btn btn-primary">
                                            <span class="glyphicon glyphicon-ok"></span>
                                            <?php echo $this->lang->line('save'); ?>
                                        </button>
                                        <button id="cancel-service" class="btn btn-default">
                                            <span class="glyphicon glyphicon-ban-circle"></span>
                                            <?php echo $this->lang->line('cancel'); ?>
                                        </button>
                                    </div>
                                </div>

                                <h3>
                                    <?php echo $this->lang->line('details'); ?>
                                </h3>
                                <div class="form-message alert" style="display:none;"></div>

                                <input type="hidden" id="service-id" />

                                <div class="form-group">
                                    <label for="service-name">
                                        <?php echo $this->lang->line('name'); ?> *
                                    </label>
                                    <input type="text" id="service-name" class="form-control required" />
                                </div>

                                <div class="form-group">
                                    <label for="service-duration">
                                        <?php echo $this->lang->line('duration_minutes'); ?> *
                                    </label>
                                    <input type="number" id="service-duration" class="form-control required" />
                                </div>

                                <div class="form-group">
                                    <label for="service-price">
                                        <?php echo $this->lang->line('price'); ?> *
                                    </label>
                                    <input type="text" id="service-price" class="form-control required"
                                        style="width: 180px" />
                                </div>

                                <!-- <div class="form-group">
                    <label for="service-currency"><?php echo $this->lang->line('currency'); ?></label> -->
                                <input type="hidden" id="service-currency" class="form-control" style="width: 150px"
                                    value="$" />
                                <!-- </div> -->

                                <div class="form-group">
                                    <label for="service-category">
                                        <?php echo $this->lang->line('category'); ?>
                                    </label>
                                    <select id="service-category" class="form-control"></select>
                                </div>

                                <div class="form-group">
                                    <label for="service-description">
                                        <?php echo $this->lang->line('description'); ?>
                                    </label>
                                    <textarea id="service-description" rows="4" class="form-control"></textarea>
                                </div>


                                <br /><br />
                                <em id="form-message" class="text-error">
                                    <?php echo $this->lang->line('fields_are_required'); ?>
                                </em>
                            </div>
                        </div>
                    </div>

                    <?php
                            // --------------------------------------------------------------
                            //
                            // CATEGORIES TAB
                            //
                            // --------------------------------------------------------------
                            ?>
                    <div id="categories" class="tab-pane" style="">
                        <div class="row">
                            <div id="filter-categories" class="filter-records column col-md-4">
                                <form class="input-append hide">
                                    <input class="key" type="text" />
                                    <div class="btn-group">
                                        <button class="filter btn btn-default btn-sm" type="submit"
                                            title="<?php echo $this->lang->line('filter'); ?>">
                                            <span class="glyphicon glyphicon-search"></span>
                                        </button>
                                        <button class="clear btn btn-default btn-sm" type="button"
                                            title="<?php echo $this->lang->line('clear'); ?>">
                                            <span class="glyphicon glyphicon-repeat"></span>
                                        </button>
                                    </div>
                                </form>

                                <h3>
                                    <?php echo $this->lang->line('categories'); ?>
                                </h3>
                                <div class="results"></div>
                            </div>

                            <div class="details col-md-7">
                                <div class="btn-toolbar">
                                    <div class="add-edit-delete-group btn-group">
                                        <button id="add-category" class="btn btn-primary">
                                            <span class="glyphicon glyphicon-plus glyphicon glyphicon-white"></span>
                                            <?php echo $this->lang->line('add'); ?>
                                        </button>
                                        <button id="edit-category" class="btn btn-default" disabled="disabled">
                                            <span class="glyphicon glyphicon-pencil"></span>
                                            <?php echo $this->lang->line('edit'); ?>
                                        </button>
                                        <button id="delete-category" class="btn btn-default" disabled="disabled">
                                            <span class="glyphicon glyphicon-remove"></span>
                                            <?php echo $this->lang->line('delete'); ?>
                                        </button>
                                    </div>

                                    <div class="save-cancel-group btn-group" style="display:none;">
                                        <button id="save-category" class="btn btn-primary">
                                            <span class="glyphicon glyphicon-ok glyphicon glyphicon-white"></span>
                                            <?php echo $this->lang->line('save'); ?>
                                        </button>
                                        <button id="cancel-category" class="btn btn-default">
                                            <span class="glyphicon glyphicon-ban-circle"></span>
                                            <?php echo $this->lang->line('cancel'); ?>
                                        </button>
                                    </div>
                                </div>

                                <h3>
                                    <?php echo $this->lang->line('details'); ?>
                                </h3>
                                <div class="form-message alert" style="display:none;"></div>

                                <input type="hidden" id="category-id" />

                                <div class="form-group">
                                    <label for="category-name">
                                        <?php echo $this->lang->line('name'); ?> *
                                    </label>
                                    <input type="text" id="category-name" class="form-control required" />
                                </div>

                                <div class="form-group">
                                    <label for="category-description">
                                        <?php echo $this->lang->line('description'); ?>
                                    </label>
                                    <textarea id="category-description" rows="4" class="form-control"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<script type="text/javascript" src="<?php echo base_url(); ?>/assets/appointment/js/backend.js"></script>
<script type="text/javascript" src="<?php echo base_url(); ?>/assets/appointment/js/general_functions.js"></script>
<?php
$this->load->view('yogiccoach/footer');
?>
</xmp></code></pre>
<p>Appointment Setting</p>
<img class="img-fluid" src="image/appointmentsettingcoach .png" alt="Login Page" height="100">
<br><br>
<p>appointment setting controller</p>
<code>application/controller/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function appointment_settings()
{
$this->lang->load('translations', $this->config->item('language'));

$this->load->model('appointment_settings_model');
$this->load->model('coach_model');
$this->load->model('services_model');
$this->load->model('user_model');

$view['base_url'] = $this->config->item('base_url');
$view['base_url_api'] = $this->config->item('base_url_api');
$view['user_display_name'] = $this->coach_model->get_user_display_name($this->userid);
$view['active_menu'] = PRIV_USERS;
$view['company_name'] = $this->coach_model->get_user_display_name($this->userid);
$view['date_format'] = $this->appointment_settings_model->get_setting('date_format');
//$view['admins'] = array();
//$view['providers'] = $this->coach_model->get_coach_details($this->userid);
//$view['secretaries'] = array();
//$view['services'] = $this->services_model->get_available_services($this->userid);
//$view['working_plan'] = $this->appointment_settings_model->get_setting('company_working_plan');
$system_settings = $this->appointment_settings_model->get_settings();
$user_settings = $this->coach_model->get_settings($this->userid);
foreach ($system_settings as $key => $system_setting) {
if($system_setting['name'] == "company_working_plan") {
$system_settings[$key]['value'] = $user_settings['settings']['working_plan'];
}
}
$view['system_settings'] = $system_settings;
$view['user_settings'] = $user_settings;
$this->set_user_data($view);

$this->load->view('yogiccoach/appointment_settings',$view);
}</xmp></code></pre>
<p>appointment setting view</p>
<code>application/views/yogicccoach/appointment_settings.php</code>
<pre><code class="language-html"><xmp><?php

$this->load->view('yogiccoach/sidebar');
?>
<link rel="stylesheet" type="text/css"
    href="<?php echo  base_url();  ?>assets/appointment/ext/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css"
    href="<?php echo  base_url();  ?>assets/appointment/ext/jquery-ui/jquery-ui.min.css">
<link rel="stylesheet" type="text/css"
    href="<?php echo  base_url();  ?>assets/appointment/ext/jquery-qtip/jquery.qtip.min.css">
<link rel="stylesheet" type="text/css"
    href="<?php echo  base_url();  ?>assets/appointment/ext/jquery-jscrollpane/jquery.jscrollpane.css">
<link rel="stylesheet" type="text/css" href="<?php echo  base_url();  ?>assets/appointment/css/backend.css">
<link rel="stylesheet" type="text/css" href="<?php echo  base_url();  ?>assets/appointment/css/general.css">
<script type="text/javascript" src="<?php echo base_url(); ?>assets/appointment/ext/datejs/date.js"></script>
<script type="text/javascript" src="<?php echo base_url(); ?>assets/appointment/ext/jquery/jquery.min.js"></script>
<script type="text/javascript"
    src="<?php echo base_url(); ?>assets/appointment/ext/jquery-ui/jquery-ui.min.js"></script>
<script type="text/javascript"
    src="<?php echo base_url(); ?>assets/appointment/ext/jquery-qtip/jquery.qtip.min.js"></script>
<script type="text/javascript"
    src="<?php echo base_url(); ?>assets/appointment/ext/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="<?php echo base_url(); ?>assets/appointment/ext/datejs/date.js"></script>
<script type="text/javascript"
    src="<?php echo base_url(); ?>assets/appointment/ext/jquery-jscrollpane/jquery.jscrollpane.min.js"></script>
<script type="text/javascript"
    src="<?php echo base_url(); ?>assets/appointment/ext/jquery-mousewheel/jquery.mousewheel.js"></script>

<script type="text/javascript" src="<?php echo base_url() ?>assets/appointment/js/backend_settings.js"></script>
<script type="text/javascript" src="<?php echo base_url() ?>assets/appointment/js/working_plan.js"></script>
<script type="text/javascript"
    src="<?php echo base_url() ?>assets/appointment/ext/jquery-ui/jquery-ui-timepicker-addon.js"></script>
<script type="text/javascript"
    src="<?php echo base_url() ?>assets/appointment/ext/jquery-jeditable/jquery.jeditable.min.js"></script>

<script type="text/javascript">
    // Global JavaScript Variables - Used in all backend pages.
    var availableLanguages = <?php echo json_encode($this -> config -> item('available_languages')); ?>;
    var EALang = <?php echo json_encode($this -> lang -> language); ?>;
</script>
<script type="text/javascript">
    var GlobalVariables = {
        'csrfToken': <?php echo json_encode($this-> security -> get_csrf_hash()); ?>,
            'baseUrl'       : <?php echo '"'.$base_url. '"'; ?>,
                'baseAPIUrl'    : <?php echo '"'.$base_url_api. '"'; ?>,
                    'dateFormat'    : <?php echo json_encode($date_format); ?>,
                        'settings'      : {
        'system'    : <?php echo json_encode($system_settings); ?>,
            'user'      : <?php echo json_encode($user_settings); ?>
            },
    'user'          : {
        'id'        : <?php echo $user_id; ?>,
            'email'     : <?php echo '"'.$user_email. '"'; ?>,
                'role_slug' : <?php echo '"'.$role_slug. '"'; ?>,
                    'privileges': <?php echo json_encode($privileges); ?>
            }
        };

    $(document).ready(function () {
        BackendSettings.initialize(true);

    });
</script>

<!-- START BREADCRUMB -->
<ul class="breadcrumb push-down-0">
    <li><a href="<?php echo base_url()." yogiccoach/";?>">Dashboard</a></li>
    <li>Appointment Scheduler</li>
    <li><a href="<?php echo base_url()." yogiccoach/appointment_calendar";?>">Calendar</a></li>
    <li class="active">Settings</li>
</ul>
<!-- END BREADCRUMB -->

<div id="error_container"></div>
<div class="content-frame">
    <!-- START CONTENT FRAME TOP -->
    <div class="content-frame-top hide">
        <div class="page-title"></div>
    </div>
    <div id="business-logic" class="page-content-wrap">
        <div class="col-md-12">
            <div id="notification" style="display: none;"></div>
            <form>
                <!-- START JUSTIFIED TABS -->
                <div class="panel panel-default tabs">

                    <div class="panel-body">

                        <fieldset>
                            <legend>
                                Settings
                                <button type="button" id="save-provider" class="save-settings btn btn-primary"
                                    style="margin:0px 150px 10px" title="<?php echo $this->lang->line('save'); ?>">
                                    Save Settings
                                </button>
                            </legend>


                            <div class="row-fluid">
                                <div class="col-md-7 working-plan-wrapper">
                                    <div class="working-plan-view provider-view">
                                        <h3>
                                            <?php echo $this->lang->line('working_plan'); ?>

                                        </h3>
                                        <table class="working-plan table table-striped">
                                            <thead>
                                                <tr>
                                                    <th>
                                                        <?php echo $this->lang->line('day'); ?>
                                                    </th>
                                                    <th>
                                                        <?php echo $this->lang->line('start'); ?>
                                                    </th>
                                                    <th>
                                                        <?php echo $this->lang->line('end'); ?>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <div class="checkbox">
                                                            <label><input type="checkbox" id="monday" />
                                                                <?php echo $this->lang->line('monday'); ?>
                                                            </label>
                                                        </div>
                                                    </td>
                                                    <td><input type="text" id="monday-start" class="work-start" /></td>
                                                    <td><input type="text" id="monday-end" class="work-end" /></td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="checkbox">
                                                            <label><input type="checkbox" id="tuesday" />
                                                                <?php echo $this->lang->line('tuesday'); ?>
                                                            </label>
                                                        </div>
                                                    </td>
                                                    <td><input type="text" id="tuesday-start" class="work-start " />
                                                    </td>
                                                    <td><input type="text" id="tuesday-end" class="work-end " /></td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="checkbox">
                                                            <label><input type="checkbox" id="wednesday" />
                                                                <?php echo $this->lang->line('wednesday'); ?>
                                                            </label>
                                                        </div>
                                                    </td>
                                                    <td><input type="text" id="wednesday-start" class="work-start" />
                                                    </td>
                                                    <td><input type="text" id="wednesday-end" class="work-end" /></td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="checkbox">
                                                            <label><input type="checkbox" id="thursday" />
                                                                <?php echo $this->lang->line('thursday'); ?>
                                                            </label>
                                                        </div>
                                                    </td>
                                                    <td><input type="text" id="thursday-start" class="work-start" />
                                                    </td>
                                                    <td><input type="text" id="thursday-end" class="work-end" /></td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="checkbox">
                                                            <label><input type="checkbox" id="friday" />
                                                                <?php echo $this->lang->line('friday'); ?>
                                                            </label>
                                                        </div>
                                                    </td>
                                                    <td><input type="text" id="friday-start" class="work-start" /></td>
                                                    <td><input type="text" id="friday-end" class="work-end" /></td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="checkbox">
                                                            <label><input type="checkbox" id="saturday" />
                                                                <?php echo $this->lang->line('saturday'); ?>
                                                            </label>
                                                        </div>
                                                    </td>
                                                    <td><input type="text" id="saturday-start" class="work-start" />
                                                    </td>
                                                    <td><input type="text" id="saturday-end" class="work-end" /></td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="checkbox">
                                                            <label><input type="checkbox" id="sunday" />
                                                                <?php echo $this->lang->line('sunday'); ?>
                                                            </label>
                                                        </div>
                                                    </td>
                                                    <td><input type="text" id="sunday-start" class="work-start" /></td>
                                                    <td><input type="text" id="sunday-end" class="work-end" /></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                </div>
                                <div class="col-md-5 breaks-wrapper">
                                    <h4>
                                        <?php echo $this->lang->line('breaks'); ?>
                                        <button type="button" class="add-break btn btn-primary pull-right"
                                            style="margin:0 10px 10px">
                                            <span class="glyphicon glyphicon-white glyphicon glyphicon-plus"></span>
                                            <?php echo $this->lang->line('add_break');?>
                                        </button>
                                    </h4>


                                    <table class="breaks table table-striped">
                                        <thead>
                                            <tr>
                                                <th>
                                                    <?php echo $this->lang->line('day'); ?>
                                                </th>
                                                <th>
                                                    <?php echo $this->lang->line('start'); ?>
                                                </th>
                                                <th>
                                                    <?php echo $this->lang->line('end'); ?>
                                                </th>
                                                <th>
                                                    <?php echo $this->lang->line('actions'); ?>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </fieldset>
                    </div>

                </div>

            </form>
        </div>
    </div>
</div>
<!-- <div id="loading" style="display: none;">
        <img src="<?php echo base_url() ?>assets/appointment/img/loading.gif" />
    </div> -->

</div>
<script type="text/javascript" src="<?php echo base_url() ?>/assets/appointment/js/backend.js"></script>
<script type="text/javascript" src="<?php echo base_url(); ?>/assets/appointment/js/general_functions.js"></script>
<?php
$this->load->view('yogiccoach/footer');
</xmp></code></pre>
<p>Message/chat</p>
<img class="img-fluid" src="image/messagecoach.png" alt="Login Page" height="100">
<br><br>
<p>message controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function messages($member_id=0)
{ $data['member_id']=$member_id;

$this->load->view('yogiccoach/messages',$data);
}
public function send_text_message(){

$messageTxt = $_POST['messageTxt'];
$sender_id = $this->userid;
$receiver_id = $_POST['receiver_id'];
$date = date('Y-m-d H:i:s');
$ip_address = $this->input->ip_address();

$res = "INSERT INTO `mys_chat`(`sender_id`, `receiver_id`, `massage`, `message_date_time`, `ip_address`) VALUES
('$sender_id','$receiver_id','$messageTxt' ,'$date','$ip_address')";
$this->db->query($res);
}

public function get_chat_history(){

$receiver_id = $_POST['receiver_id'];
$senderid = $this->userid;
$Logged_sender_id = $this->userid;


$query =$this->db->query("SELECT * FROM `mys_chat` WHERE `sender_id`= '$senderid' AND `receiver_id` = '$receiver_id' OR
`sender_id`= '$receiver_id' AND `receiver_id` = '$senderid' ORDER BY `fld_id`");

$history = $query->result_array();
// print_r($history);
// exit();
foreach($history as $chat):

$message_id = $chat['fld_id'];
$sender_id = $chat['sender_id'];

$userData = $this->db->get_where('users',array('fld_id'=> $sender_id));
if ($userData->num_rows()>0) {
$userRow = $userData->row_array();
$image_path=($userRow['fld_file_name']!='')?$userRow['fld_file_name']:'assets/images/user_thumb.png';
$image = base_url().$image_path;
}


$this->load->model('user_model');
$sendername = $this->user_model->GetName($chat['sender_id']);
$messageBody = $chat['massage'];
$messagedatetime = date('d M H:i A',strtotime($chat['message_date_time']));

if($Logged_sender_id!=$sender_id){ ?>
<!-- Message. Default to the left -->
<div class="chat friend">
    <div class="chats">
        <div class="user-photo"><img src="<?php echo $image ?>" alt="John Doe" /></div>
        <p class="chat-massage">
            <?=$messageBody;?><br><span class="username">
                <?=$sendername?>
                <?=$messagedatetime;?>
            </span>
        </p>
    </div>
</div>
<!-- /.direct-chat-msg -->
<?php }else{?>
<!-- Message to the right -->
<div class="chat self">
    <div class="chates">
        <div class="user-photo"><img src="<?php echo $image ?>" alt="John Doe" /></div>
        <p class="chat-massage">
            <?=$messageBody;?><br><span class="username">
                <?=$sendername?>
                <?=$messagedatetime;?>
            </span>
        </p>
    </div>
</div>
<!-- /.direct-chat-msg -->
<?php }
			endforeach;				
			$this->db->where(array('receiver_id' => $senderid,  'sender_id' =>$receiver_id));
			$this->db->set("status","1");
			$this->db->update("chat");
	}   


	public function delet_chat(){
		$receiver_id = $_POST['receiver_id'];
		$senderid = $this->userid;

		$query =$this->db->query("SELECT * FROM `mys_chat` WHERE `sender_id`= '$senderid' AND `receiver_id` = '$receiver_id' OR `sender_id`= '$receiver_id' AND `receiver_id` = '$senderid'");

		$history = $query->result_array();
		$date = date('d');
		// print_r($history);
		// exit();
		foreach($history as $chat):
			
			$message_id = $chat['id'];
			$sender_id = $chat['sender_id'];
	
			$this->load->model('user_model');
			$sendername = $this->user_model->GetName($chat['sender_id']);
			$messageBody = $chat['massage'];
			$messagedatetime = date('d',strtotime($chat['message_date_time']));
			
			if ($messagedatetime < $date) {
				$diffDays = abs($date - $messagedatetime);
				if($diffDays > '30'){
					$this->db->delete('mys_chat', array('id' => $message_id));
				}
			}
			endforeach;	
	}
</xmp></code></pre>
<p>message View</p>
<code>application/views/yogiccoach/messages.php</code>
<pre><code class="language-html"><xmp><?php
 $noImg=base_url().'assets/images/user_thumb.png';
 $this->load->view('yogiccoach/sidebar');
 error_reporting(0);
 $session=$this->session->get_userdata();
 $user_id=$session['user_id'];

 $this->db->order_by("fld_id", "desc");
 $this->db->where('fld_user_type','admin');

 $getAdminData=$this->db->get('users');
 $this->db->order_by("fld_id", "desc");

 $this->db->where('fld_parent', $user_id); 
 $getData=$this->db->get('users');
 $member_id;
  if($getData->num_rows()>0) {
	  foreach($getData->result() as $getRow){
		// print_r($getRow); 
	    // print_r($member_id=$getRow->fld_id);
	  }
  }	 
 $cuttime = date('Y-m-d H:i:s',strtotime('-10second'));
  
 ?>
<div id="callincoming"></div>
<audio id="myAudio">
    <source src="horse.ogg" type="audio/ogg">
    <source src="<?= base_url('assets/audio/skype-27014.mp3') ?>" type="audio/mpeg">
    Your browser does not support the audio element.
</audio>
<!-- START BREADCRUMB -->
<ul class="breadcrumb push-down-0">
    <li><a href="#">Home</a></li>
    <li><a href="#">Pages</a></li>
    <li class="active">Messages</li>
</ul>
<!-- END BREADCRUMB -->

<!-- START CONTENT FRAME -->
<div class="content-frame">
    <!-- START CONTENT FRAME TOP -->
    <div class="content-frame-top">
        <div class="page-title">
            <h2><span class="fa fa-comments"></span> Messages</h2>
            <!-- <a href="skype:USERNAME?chat">Chat with Skype</a> -->
        </div>
        <div class="pull-right">
            <button class="btn btn-default content-frame-right-toggle"><span class="fa fa-bars"></span></button>
        </div>
    </div>
    <!-- END CONTENT FRAME TOP -->


    <!-- START CONTENT FRAME BODY -->
    <div class="content-frame-right">
        <div class="list-group list-group-contacts border-bottom push-down-10">
            <ul class="users-list">
                <?php
        if($getData->num_rows()>0) {
            foreach($getData->result() as $getRow){ 
                 $this->db->limit(1);
            $this->db->order_by("ustatus", "desc"); 
            $this->db->where(array('user_id'=>$getRow->fld_id));
            $active=$this->db->get('status');
            foreach($active->result() as $act){
            $current = $date = date('Y-m-d H:i:s', $act->ustatus);
            if ($current > $cuttime) {
                    $status = "<span class='btn btn-success'>online</span>";
                }else{
                    $status = "<span class='btn btn-danger'>Offline</span>";
                }
             }
                ?>
                <li class="selectVendor" id="<?=$getRow->fld_id;?>"
                    title="<?php echo $getRow->fld_username.'&nbsp;'; echo $getRow->fld_last_name; ?>">
                    <a href="#" class="list-group-item">
                        <img src="<?php $image_path=$getRow->fld_file_name; $image = base_url().$image_path; if(!empty($image_path)){echo $image;}else{ echo $noImg;} ?>"
                            class="pull-left" alt="Dmitry Ivaniuk">
                        <span class="contacts-title">
                            <?php echo $getRow->fld_username.'&nbsp;'; echo $getRow->fld_last_name; ?>
                        </span>
                        <p>
                            <?=$status?>
                        </p>
                    </a>
                </li>
                <?php } }else{ ?>
                <li>
                    <a class="users-list-name" href="#">No Vendor's Find...</a>
                </li>
                <?php }  if($getAdminData->num_rows()>0){
                foreach($getAdminData->result() as $adminData){ 
                    $this->db->limit(1);
            $this->db->order_by("ustatus", "desc"); 
            $this->db->where(array('user_id'=>$adminData->fld_id));
            $actives=$this->db->get('status');
            foreach($actives->result() as $acts){
            // $current = $act->ustatus;
            $current = date('Y-m-d H:i:s', $acts->ustatus);
            if ($current > $cuttime) {
                    $statuss = "<span class='btn btn-success'>online</span>";
                }else{
                    $statuss = "<span class='btn btn-danger'>Offline</span>";
                }
             }
                    ?>
                <h3>Admin</h3>
                <li class="selectVendor" id="<?=$adminData->fld_id;?>"
                    title="<?php echo $adminData->fld_username.'&nbsp;'; echo $adminData->fld_last_name; ?>">
                    <a href="#" class="list-group-item">
                        <img src="<?php $image_path=$adminData->fld_file_name; $image = base_url().$image_path; if(!empty($image_path)){echo $image;}else{ echo $noImg;} ?>"
                            class="pull-left" alt="Dmitry Ivaniuk">
                        <span class="contacts-title">
                            <?php echo $adminData->fld_username.'&nbsp;'; echo $adminData->fld_last_name; ?>
                        </span>
                        <p>
                            <?= $statuss ?>
                        </p>
                    </a>
                </li>
                <?php }}else{ ?>
                <li>
                    <a class="users-list-name" href="#">No Vendor's Find...</a>
                </li>
                <?php } ?>
            </ul>
        </div>
    </div>

    <div class="content-frame-body content-frame-body-left">
        <div class="chatbox">
            <div class="chatlogs">
                <div id="ReciverName_txt"></div>
                <div id="dumppy"></div>
                <div id="selectcontent" style="text-align: center;font-size: 50px;">please select admin/client</div>
            </div>
            <input type="hidden" id="Sender_Name" value="<?=$memberName;?>">
            <input type="hidden" id="ReciverId_txt">
            <div class="chat-from">
                <textarea></textarea>
                <button class="submit">Send</button>
            </div>
        </div>
    </div>
    <!-- END PAGE CONTENT FRAME -->

    <script>
        $(function () {


            $('textarea').keypress(function (event) {
                var keycode = (event.keyCode ? event.keyCode : event.which);
                if (keycode == '13') {
                    sendTxtMessage($(this).val());
                }
            });
            $('.submit').click(function () {
                sendTxtMessage($('textarea').val());
            });
            $('.selectVendor').click(function () {
                ChatSection(1);
                var receiver_id = $(this).attr('id');
                //alert(receiver_id);
                $('#ReciverId_txt').val(receiver_id);
                $('#ReciverName_txt').html($(this).attr('title'));

                GetChatHistory(receiver_id);
                deletchat(receiver_id);

            });
        });

        function sendTxtMessage(message) {
            var messageTxt = message.trim();
            if (messageTxt != '') {
                //console.log(message);
                DisplayMessage(messageTxt);

                var receiver_id = $('#ReciverId_txt').val();
                $.ajax({
                    url: home_url + 'yogiccoach/send_text_message',
                    type: 'post',
                    data: { messageTxt: messageTxt, receiver_id: receiver_id },
                    dataType: "text",
                    success: function (data) {
                        // console.log();
                        GetChatHistory(receiver_id)
                    },
                    error: function (jqXHR, status, err) {
                        // alert('Local error callback');
                    },
                });

                var height = 0;
                $('.chatlogs div').each(function (i, value) {
                    height += parseInt($(this).height());
                });

                height += '';

                $('.chatlogs').animate({ scrollTop: height });
                // $(".chatlogs").animate({ scrollTop: $(document).height() }, "fast");
                $('textarea').val('');
                $('textarea').focus();
            } else {
                $('textarea').focus();
            }
        }

        function deletchat(receiver_id) {
            // alert(receiver_id);
            $.ajax({
                type: "post",
                dataType: "html",
                url: home_url + 'Member/delet_chat',
                data: { receiver_id: receiver_id },
                success: function (data) {
                    // console.log(data);
                }
            });
        }

        function GetChatHistory(receiver_id) {
            // alert(receiver_id);
            $.ajax({
                type: "post",
                dataType: "text",
                url: home_url + 'yogiccoach/get_chat_history',
                data: { receiver_id: receiver_id },
                success: function (data) {
                    // console.log(data);
                    $('#selectcontent').html("");
                    $('#dumppy').html(data);
                    var height = 0;
                    $('.chatlogs div').each(function (i, value) {
                        height += parseInt($(this).height());
                    });

                    height += '';

                    $('.chatlogs').animate({ scrollTop: height });
                    // $(".chatlogs").animate({ scrollTop: $(document).height() }, "fast");
                },
                error: function (jqXHR, status, err) {
                    // alert('Local error callback');
                }
            });
        }


        setInterval(function () {
            var receiver_id = $('#ReciverId_txt').val();
            if (receiver_id != '') { GetChatHistory(receiver_id); }
        }, 3000);

        function DisplayMessage(message) {
            var Sender_Name = $('#Sender_Name').val();
            var d = new Date();
            d.setDate(d.getDate() + 50);
            var str = '<div class="chat self">';
            str += '<div class="user-photo"><img src="<?php echo base_url('assets / images / user_thumb.png')?>" alt="John Doe"/></div>';
            str += '<p class="chat-massage">' + message;
            str += '<br><span class="username" >' + Sender_Name + ' ' + d;
            str += '</p></div>';
            $('#dumppy').append(str);
        }


        function ChatSection(status) {
            //chatSection
            if (status == 0) {
                $('.chatbox :input').attr('disabled', true);
            } else {
                $('.chatbox :input').removeAttr('disabled');
            }
        }
        ChatSection(0);
    </script>


    <style>
        #ReciverName_txt {
            color: #fff;
            text-align: center;
            font-weight: bolder;
            background: #2E4053;
            font-size: 20px;
            padding: 20px 0;
            margin: 0 50px 10px 55px;
            border-radius: 10px;
        }

        .select_id {
            width: 60px;
            height: 60px;
            background-color: #ccc;
            border-radius: 50%;
            overflow: hidden;

        }

        .select_id img {
            width: 100%;
        }

        ul li {
            list-style: none;
        }

        .chatbox {
            /*width:100%;*/
            min-width: 390px;
            height: 600px;
            background-color: #eae9e9;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 3px #ccc;

        }

        .chatlogs {
            height: 450px;
            background: #fff;
            overflow-x: hidden;
            overflow-y: scroll;
        }

        .users-list {
            height: 450px;
            overflow-x: hidden;
            overflow-y: scroll;
        }

        .chatlogs::-webkit-scrollbar {
            width: 10px;
        }

        .chatlogs::-webkit-scrollbar-thumb {
            border-radius: 5px;
            background: rgba(0, 0, 0, .1);
        }

        .chat {
            width: 105%;
        }

        .chats {
            width: 60%;
            display: flex;
            flex-flow: row wrap;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .chates {
            width: 60%;
            display: flex;
            flex-flow: row wrap;
            align-items: flex-start;
            margin-bottom: 20px;
            float: right;
        }

        .chat .user-photo {
            width: 40px;
            height: 40px;
            background-color: #ccc;
            border-radius: 50%;
            overflow: hidden;
        }

        .chat .user-photo img {
            width: 100%;
        }

        .chat .chat-massage {
            width: 70%;
            padding: 15px;
            margin: 20px 10px 0;
            color: #fff;
            font-size: 20px;
        }

        .friend .chat-massage {
            background-color: #F4F6F7;
            color: #000;
            text-align: left;
            border-radius: 0px 20px 20px 20px;
            padding: 5px;
        }

        .friend .user-photo {
            margin-left: 20px;
        }

        .self .chat-massage {
            background-color: #707B7C;
            order: -1;
            text-align: right;
            border-radius: 20px 0 20px 20px;
            padding: 5px;
        }

        .chat-from {
            margin-top: 30px;
            display: flex;
            align-items: flex-start;
        }

        .chat-from textarea {
            background: #fbfbfb;
            width: 90%;
            height: 50px;
            border: 2px solid #2d3945;
            border-right: none;
            resize: none;
            border-radius: 5px 0 0 5px;
            padding: 10px;
            font-size: 18px;
            color: #333;
        }

        .chat-from textarea::-webkit-scrollbar {
            width: 10px;
        }

        .chat-from textarea::-webkit-scrollbar-thumb {
            border-radius: 5px;
            background: rgba(0, 0, 0, .1);
        }

        .chat-from textarea:focus {
            background-color: #fff;
        }

        .chat-from button {
            background-color: #2d3945;
            padding: 4px 15px;
            border-radius: 0 5px 5px 0;
            font-size: 30px;
            color: #fff;
            border: none;
        }

        .friend .username {
            font-size: 8px;
            color: #cccccc;
        }

        .self .username {
            font-size: 8px;
            color: #f2f2f2;
        }
    </style>

    <!-- START SCRIPTS -->
    <!-- START PLUGINS -->
    <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery.min.js"></script>
    <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery - ui.min.js"></script>
    <script type="text/javascript" src="<?php echo base_url()."
        assets/";?>js / plugins / bootstrap / bootstrap.min.js"></script>
    <!-- END PLUGINS -->

    <!-- THIS PAGE PLUGINS -->
    <script type='text/javascript' src='<?php echo base_url()."assets/";?>js/plugins/icheck/icheck.min.js'></script>
    <script type="text/javascript" src="<?php echo base_url()."
        assets/";?>js / plugins / mcustomscrollbar / jquery.mCustomScrollbar.min.js"></script>
    <!-- END PAGE PLUGINS -->

    <!-- START TEMPLATE -->

    <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins.js"></script>
    <!--<script type="text/javascript" src="<?php echo base_url()."assets/";?>js/actions.js"></script>-->
    <!-- END TEMPLATE -->
    <!-- END SCRIPTS -->
    <style>
        .img-box {
            padding: 16px 20px;
            border: 1px solid #ddd;
            position: relative;
            display: inline-block
        }

        .img-box .file_link {
            position: absolute;
            left: 10px;
            top: 10px;
            z-index: 1;
            font-size: 14px;
        }

        .img-box1 {
            padding: 16px 21px;
            border: 1px solid #ddd;
            display: inline-block;
            position: relative;
        }

        .img-box1 img {
            position: absolute;
            left: 10px;
            top: 7px;
            z-index: 1;
            font-size: 14px;
        }
    </style>
    <?php
 $this->load->view('yogiccoach/footer');
 ?>
</xmp></code></pre>
<p>Payment</p>
<img class="img-fluid" src="image/paymentcoach.png" alt="Login Page" height="100">
<br><br>
<p>payment controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function payments(){
$this->db->order_by("fld_id", "desc");
$Payments = $this->db->get_where("payments",array("fld_user_id"=>$this->userid));
$Profiles = $this->db->get_where("payment_profile",array("fld_user_id"=>$this->userid));
$data = array(
"payments" => $Payments->result(),
"profiles" => $Profiles->result()
);
$this->load->view("yogiccoach/payments",$data);
}
public function ajax_list(){

$list = $this->db->get_where('payment',array('fld_parent_id'=>$this->userid))->result();
$data = array();
$no = 0;
foreach ($list as $purchase_view) {
$no++;
$this->load->model('user_model');
$sendername = $this->user_model->GetName($purchase_view->fld_client_id);
if($purchase_view->fld_status != 1)
{
$lblCSS ="label-default";
$status ="Not Paid";
}else
{
$lblCSS ="label-warning";
$status ="Paid";
}
$row = array();
$row[] = $no;
$row[] = $purchase_view->fld_date;
$row[] = $sendername;
$row[] = $purchase_view->fld_product_name;
$row[] = $purchase_view->fld_product_description;
$row[] = $purchase_view->fld_total_payment;
$row[] = $purchase_view->fld_promo;
$row[] = $purchase_view->fld_invoice;
$row[] = "<span class='label {$lblCSS}'>{$status}</span>";
$row[] = '<div class="btn-group">
    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
        aria-expanded="false">
        Action <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
        <li><a href="'.base_url(" yogiccoach/edit_purchase/".$purchase_view->fld_id).'"> <i
                    class="glyphicon glyphicon-edit"></i> Edit</a></li>
        <li><button type="button" onclick="javascript:payment_edit('.$purchase_view->fld_id.');"
                title="Download Report PDF"><i class="glyphicon glyphicon-save"></i> Payment</button></li>
        <li><button type="button" onclick="javascript:payment_send(this);" title"Send Report PDF"
                data-id="'.$purchase_view->fld_client_id.'" data-name="'.$purchase_view->fld_id.'"><i
                    class="glyphicon glyphicon-print"></i> Print</button></li>
        <li><a type="button" id="removeOrderModalBtn" onclick="purchase_cancel('."'".$purchase_view->fld_id."'".')"> <i
                    class="glyphicon glyphicon-trash"></i> Return</a></li>

    </ul>
</div>';

$data[] = $row;
}

$output = array(

"data" => $data,
);
//output to json format
echo json_encode($output) ;
}

public function payment_send($mod, $clientid)
{
$html = $this->load->view('yogiccoach/ajax/payment_download',$id,true);
$pdfFilePath = "report".$id.".pdf";
$this->load->library('m_pdf');
ob_clean();
$this->m_pdf->pdf->WriteHTML($html);
$pdfFile = $this->m_pdf->pdf->Output($pdfFilePath);

$clientDetails = $this->db->get_where("users", array("fld_id"=>$clientid),1,0);

$clientName = $clientDetails->fld_first_name.'-'.$clientDetails->fld_last_name;
$clientEmail = $clientDetails->fld_email;

$this->load->model('user_model');
$coachDetails =$this->user_model->get_row($this->userid);
$coachName ="";
$coachEmail="";

if(sizeof($coachDetails)>0){
$coachName =$coachDetails['fld_first_name'].' '. $coachDetails['fld_last_name'];
$coachEmail=$coachDetails['fld_email'];
}

$subject = "payment invoice";
$message= "download invoice";
$file = $pdfFilePath;
$file_size = filesize($file);
$handle = fopen($file, "r");
$content = fread($handle, $file_size);
fclose($handle);
//$content = chunk_split(base64_encode($content));
$from='MyPortalX';
$separator = md5(time());
$eol = PHP_EOL;
$filename = $clientName."-report".$id.".pdf";
$attachment = chunk_split(base64_encode($content));
$headers = "From: " . $from . $eol;
if($coachEmail !='')
$headers .= 'Cc: '. $coachName .'<'.$coachEmail.'>\r\n';
    /*$headers .= 'Bcc: test@test.com\r\n';*/
    $headers .= "MIME-Version: 1.0" . $eol;
    $headers .= "Content-Type: multipart/mixed; boundary=\"" . $separator . "\"" . $eol . $eol;
    $body = "";
    $body .= "Content-Transfer-Encoding: 7bit" . $eol;
    $body .= "This is a MIME encoded message." . $eol;
    $body .= "--" . $separator . $eol;
    $body .= "Content-Type: text/html; charset=\"iso-8859-1\"" . $eol;
    $body .= "Content-Transfer-Encoding: 8bit" . $eol . $eol;
    $body .= $message . $eol;
    $body .= "--" . $separator . $eol;
    $body .= "Content-Type: application/octet-stream; name=\"" . $filename . "\"" . $eol;
    $body .= "Content-Transfer-Encoding: base64" . $eol;
    $body .= "Content-Disposition: attachment" . $eol . $eol;
    $body .= $attachment . $eol;
    $body .= "--" . $separator . "--";

    /*******************pallavi code end*************************/

    $retval = mail ($clientEmail,$subject,$body,$headers);
    $response_message="sent";
    }

    public function payment_cancel($id){
    $this->db->delete('payment',array('fld_id'=>$id));
    $view1="Purchase Return Successfully";
    echo json_encode($view1);
    }

    public function payment_edit($id)
    {
    $html = $this->load->view('yogiccoach/ajax/payment_download',$id,true);
    $pdfFilePath = "report".$id.".pdf";
    $this->load->library('m_pdf');
    ob_clean();
    $this->m_pdf->pdf->WriteHTML($html);
    $pdfFile = $this->m_pdf->pdf->Output($pdfFilePath,"D");
    ob_end_clean();
    }

    public function add_payments()
    {
    // print_r($_POST);
    $data = array(
    'fld_date' => $_POST['fld_date'] ,
    'fld_client_id' => $_POST['fld_client_id'],
    'fld_product_name' => $_POST['fld_product_name'],
    'fld_product_description' => $_POST['fld_product_description'],
    'fld_total_payment' => $_POST['fld_total_payment'],
    'fld_promo' => $_POST['fld_promo'],
    'fld_invoice' => $_POST['fld_invoice'],
    'fld_status' => $_POST['fld_status'],
    'fld_parent_id' => $_POST['fld_parent_id'],
    );
    $this->db->insert('payment',$data);
    $data1 = "Payment Added";
    echo json_encode($data1);
    }</xmp></code></pre>
<p>payment view</p>
<code>application/views/yogiccoach/payments.php</code>
<pre><code class="language-html"><xmp><?php 

$this->load->view('yogiccoach/sidebar'); 

  defined('BASEPATH') OR exit('No direct script access allowed');

  $this->lang->load('date', 'english');

  $session = $this->session->get_userdata();

  $login_id=$session['user_id']; 

  ?>

<div class="content-wrapper">

    <!-- Content Header (Page header) -->

    <section class="content-header">
        <ol class="breadcrumb">

            <li><a href="#"><i class="fa fa-dashboard"></i> home</a></li>

            <li class="active">Purchase</li>

        </ol>

    </section>







    <button class="btn btn-success" onclick="add_customer()"><i class="glyphicon glyphicon-plus"></i> Add New
        Payment</button>

    <button class="btn btn-default" onclick="reload_table()"><i class="glyphicon glyphicon-refresh"></i> Reload</button>

    <div id="error_container"></div>



    <!-- Bootstrap modal -->

    <div class="modal fade" id="modal_form" role="dialog">

        <div class="modal-dialog">

            <div class="modal-content">

                <div class="modal-header">

                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>

                    <h3 class="modal-title">Add Payment</h3>

                </div>

                <div class="modal-body" id="add-brand-messages"></div>

                <div class="modal-body form">

                    <form action="#" id="form" class="form-horizontal">

                        <div class="form-body">

                            <div class="form-group">

                                <label class="control-label col-md-3">Date</label>

                                <div class="col-md-9">

                                    <input type="hidden" name="fld_parent_id" value="<?= $login_id ?>">

                                    <input type="date" class="form-control" name="fld_date" id="theDate">

                                </div>

                            </div>

                            <div class="form-group">

                                <label class="control-label col-md-3">select client</label>

                                <div class="col-md-9">

                                    <select name="fld_client_id" class="form-control client_select">

                                        <option>Choose Client</option>

                                        <?php $this->db->order_by("fld_id", "desc");

$getData=$this->db->get_where('users',array('fld_parent'=>$login_id,'fld_status'=> '1'))->result();

foreach($getData as $row){

  $client_name = $row->fld_first_name.' '. $row->fld_last_name;

                   if(trim($client_name) == "")

                     $client_name = $row->fld_username;

  echo '<option value="'.$row->fld_id.'"> '.$client_name.' </option>';

  }

 ?>

                                    </select>

                                </div>

                            </div>

                            <div class="form-group">

                                <label class="control-label col-md-3">Product</label>

                                <div class="col-md-9">

                                    <input type="text" class="form-control" id="Product" name="fld_product_name">

                                </div>

                            </div>

                            <div id="hide_pay">

                                <div class="form-group">

                                    <label class="control-label col-md-3">Product Description</label>

                                    <div class="col-md-9">

                                        <textarea name="fld_product_description" id="description"
                                            class="form-control"></textarea>

                                    </div>

                                </div>

                                <div class="form-group">

                                    <label class="control-label col-md-3">Payment</label>

                                    <div class="col-md-9">

                                        <input type="Number" name="fld_total_payment" id="pay" class="form-control">

                                    </div>

                                </div>

                                <div class="form-group">

                                    <label class="control-label col-md-3">promo code</label>

                                    <div class="col-md-9">

                                        <input type="text" name="fld_promo" id="promo" class="form-control">

                                    </div>

                                </div>

                                <div class="form-group">

                                    <label class="control-label col-md-3">Invoice No</label>

                                    <div class="col-md-9">

                                        <input type="text" name="fld_invoice" id="invoice" class="form-control">

                                    </div>

                                </div>

                                <div class="form-group">

                                    <label class="control-label col-md-3">status</label>

                                    <div class="col-md-9">

                                        paid

                                        <input type="radio" name="fld_status" value="1" id="status" checked="checked">

                                        No paid

                                        <input type="radio" name="fld_status" value="0" id="status">

                                    </div>

                                </div>

                            </div>





                        </div>

                    </form>

                </div>

                <div id="hide_pay1">

                    <div class="modal-footer">

                        <button type="button" id="btnSave" onclick="save()" class="btn btn-primary">Add Payment
                        </button>

                        <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>

                    </div>

                </div>

            </div><!-- /.modal-content -->

        </div><!-- /.modal-dialog -->

    </div><!-- /.modal -->

    <!-- End Bootstrap modal -->

















    <!-- Main content -->

    <section class="content container-fluid">



        <div class="row">

            <div class="box">

                <div class="box-header">

                    <h3 class="box-title">View Purchase</h3>

                </div>

                <!-- /.box-header -->

                <div class="box-body">

                    <table id="table" class="table table-striped table-bordered" cellspacing="0" width="100%">

                        <thead>

                            <tr>

                                <th>P_No</th>

                                <th>Date</th>

                                <th>Name</th>

                                <th>product Name</th>

                                <th>Description</th>

                                <th>Total</th>

                                <th>Promo</th>

                                <th>Invoice</th>

                                <th>status</th>

                                <th>Action</th>

                            </tr>

                        </thead>

                        <tbody>

                        </tbody>

                    </table>

                </div>

            </div>





    </section>



</div>

<script type="text/javascript">



    $(document).ready(function () {

        var date = new Date();



        var day = date.getDate();

        var month = date.getMonth() + 1;

        var year = date.getFullYear();



        if (month < 10) month = "0" + month;

        if (day < 10) day = "0" + day;



        var today = year + "-" + month + "-" + day;

        $("#theDate").attr("value", today);

    });

    $(document).ready(function () {

        //datatables

        table = $('#table').DataTable({



            // Load data for the table's content from an Ajax source

            "ajax": {

                "url": "<?php echo site_url('yogiccoach/ajax_list')?>",

                'order': []

            },



        });



        payment_send = function (obj) {

            var recid = $(obj).attr('data-id');

            var mod = $(obj).attr('data-name');

            $.get(home_url + "yogiccoach/payment_send/" + recid + "/" + mod + "/", "", function (response) {

                if (response = "sent") {

                    $('#error_container').html('<div class="alert alert-success fade in"><strong>Success!</strong>Mail has been sent.</div>').show();

                    $("#error_container").show().delay(3000).queue(function (n) {

                        //$(obj).hide();

                    });

                }

                else {

                    $('#error_container').html('<div class="alert alert-warning fade in"><strong></strong> ' + response + '</div>').show();

                    $("#error_container").show().delay(3000).queue(function (n) {

                        //$(this).hide();

                    });

                }



            });

        };



    });



    var table;



    function add_customer() {

        $(".text-danger").remove();

        // remove the form error

        $('.form-group').removeClass('has-error').removeClass('has-success');



        $("#btnSave").html('Save');



        save_method = 'add';

        $('#form')[0].reset(); // reset form on modals

        $('#modal_form').modal('show'); // show bootstrap modal

        //$('.modal-title').text('Add Person'); // Set Title to Bootstrap modal title





        // window.location.href = "<?php echo site_url('yogiccoach/'); ?>";



    }



    function reload_table() {

        table.ajax.reload(null, false);

    }



    function payment_edit(id) {

        url = "<?php echo site_url('yogiccoach/payment_edit')?>/" + id;

        window.location.assign(url);

    }





    function purchase_cancel(id) {

        if (confirm('Are you sure Cancel this Purchase?')) {



            $.ajax({

                url: "<?php echo site_url('yogiccoach/payment_cancel')?>/" + id,

                type: "POST",

                dataType: "JSON",

                success: function (data) {

                    //if success reload ajax table

                    alert('Purchase No : ' + id + ' Return Successfully');

                    reload_table();

                },

                error: function (jqXHR, textStatus, errorThrown) {

                    alert('Error deleting data');

                }

            });



        }

    }



    function save() {

        $(".text-danger").remove();

        // remove the form error

        $('.form-group').removeClass('has-error').removeClass('has-success');



        $.ajax({

            url: "<?php echo site_url('yogiccoach/add_payments')?>",

            type: "POST",

            data: $('#form').serialize(),

            dataType: "JSON",

            success: function (data) {



                // reset the form text

                $("#form")[0].reset();

                reload_table();

                //   // remove the error text

                $(".text-danger").remove();

                //   // remove the form error

                $('.form-group').removeClass('has-error').removeClass('has-success');



                $('#add-brand-messages').html('<div class="alert alert-success">' +

                    '<button type="button" class="close" data-dismiss="alert">&times;</button>' +

                    '<strong><i class="glyphicon glyphicon-ok-sign"></i></strong> ' + data +

                    '</div>');



                $(".alert-success").delay(500).show(10, function () {

                    $(this).delay(3000).hide(10, function () {

                        $(this).remove();
                        location.reload(true);

                    });

                }); // /.alert

            },

            error: function (jqXHR, textStatus, errorThrown) {

                alert('Error get data from ajax');

            }

        });

    }

</script>

<?php $this->load->view('yogiccoach/footer'); ?></xmp></code></pre>
<p>Edit payment</p>
<img class="img-fluid" src="image/editepaymentcoach.png" alt="Login Page" height="100">
<br><br>
<p>Edit payment controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function edit_purchase($id)
{
$data['id'] = $id;
$this->load->view('yogiccoach/edit_purchase',$data);
}

public function update_payments()
{
$fld_id = $_POST['fld_id'];
$data = array(
'fld_date' => $_POST['fld_date'] ,
'fld_client_id' => $_POST['fld_client_id'],
'fld_product_name' => $_POST['fld_product_name'],
'fld_product_description' => $_POST['fld_product_description'],
'fld_total_payment' => $_POST['fld_total_payment'],
'fld_promo' => $_POST['fld_promo'],
'fld_invoice' => $_POST['fld_invoice'],
'fld_status' => $_POST['fld_status'],
'fld_parent_id' => $_POST['fld_parent_id'],
);
$this->db->where('fld_id',$fld_id);
$this->db->update('payment',$data);
$data1 = "Payment updated";
echo json_encode($data1);
}</xmp></code></pre>
<p>Report list</p>
<img class="img-fluid" src="image/reportistcoach.png" alt="Login Page" height="100">
<br><br>
<p>report list controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function reports()
{
$this->load->view('yogiccoach/reports');
}</xmp></code></pre>
<p>report list view</p>
<code>application/views/yogiccoach/reports.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('yogiccoach/sidebar');
$session=$this->session->get_userdata();
$user_id=$session['user_id'];
?>

<!-- START BREADCRUMB -->
<ul class="breadcrumb">
    <li><a href="<?php echo base_url()." yogiccoach"; ?>">Home</a></li>
    <li class="active">Reports </li>
</ul>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <!-- PAGE TITLE -->
    <div class="page-title">
        <h2>Reports</h2>

    </div>
    <!-- END PAGE TITLE -->
    <!-- PAGE CONTENT WRAPPER -->
    <div class="page-content-wrap">
        <!-- START WIDGETS -->
        <div class="row">

            <div class="col-md-4">
                <div class="panel panel-default">
                    <div class="panel-body panel-body-image">
                        <a href="<?php echo base_url()." yogiccoach/view_member_list";?>"><img
                                src="<?php echo base_url()." assets/images/";?>members.jpg" alt="Members Details"/></a>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="panel panel-default">
                    <div class="panel-body panel-body-image">
                        <a href="<?php echo base_url()." yogiccoach/history_of_member";?>"><img
                                src="<?php echo base_url()." assets/images/";?>history1.png" alt="History"/></a>
                    </div>
                </div>
            </div>

            <!--<div class="col-md-4">
						<div class="panel panel-default">                            
                            <div class="panel-body panel-body-image">
                                <a href="<?php echo base_url()."yogiccoach/coaching_session_member_list";?>"><img src="<?php echo base_url()."assets/images/";?>coaching_session.png" alt="Coaching Session"/></a>
							</div>
						</div>
					</div>-->

            <!-- <div class="col-md-4">
						<div class="panel panel-default">                            
                            <div class="panel-body panel-body-image">
                                <a href="<?php echo base_url()."yogiccoach/event_schedule_member_status";?>"><img src="<?php echo base_url()."assets/images/";?>appointmentSch.jpg" alt="Appointment Scheduler"/></a>
							</div>
						</div>
					</div> -->

            <!-- <div class="col-md-4">
						<div class="panel panel-default">                            
                            <div class="panel-body panel-body-image">
                                <a href="<?php echo base_url()."yogiccoach/view_member_allForm/";?>"><img src="<?php echo base_url()."assets/";?>images/coaching-form.jpg" alt="Coaching-Form"/></a>
							</div>
						</div>
					</div> -->

            <!--<div class="col-md-4">
						<div class="panel panel-default">                            
                            <div class="panel-body panel-body-image">
                                <a href="<?php echo base_url()."yogiccoach/gratitude_journal_report/";?>"><img src="<?php echo base_url()."assets/";?>images/gratitude1.jpg" alt="Gratitude Journal"/></a>
							</div>
						</div>
					</div>
					
					<div class="col-md-4">
						<div class="panel panel-default">                            
                            <div class="panel-body panel-body-image">
                                <a href="<?php echo base_url()."yogiccoach/intention_setting_report/";?>"><img src="<?php echo base_url()."assets/";?>images/intention.jpg" alt="Intention Journal"/></a>
							</div>
						</div>
					</div>
					
					<div class="col-md-4">
							<div class="panel panel-default">                            
                                <div class="panel-body panel-body-image">
                                    <a href="<?php echo base_url()."yogiccoach/memberList/";?>"><img src="<?php echo base_url()."assets/";?>images/wheel_life.jpg" alt="wheel Of life"/></a>
								</div>
							</div>
						</div>-->

            <!--<div class="col-md-4">
						<div class="panel panel-default">                            
                            <div class="panel-body panel-body-image">
                                <a href="<?php echo base_url()."yogiccoach/daily_accountability_users/";?>"><img src="<?php echo base_url()."assets/";?>images/dailyaccount.jpg" alt="Daily Accountability Score"/></a>
							</div>
						</div>
					</div>-->


        </div>
        <!-- END WIDGETS -->
    </div>
    <!-- END PAGE CONTENT WRAPPER -->

    <!-- success -->
    <div class="message-box message-box-success animated fadeIn" id="message-box-success">
        <div class="mb-container">
            <div class="mb-middle">
                <div class="mb-title">Daily Accountability Score</div>
                <div class="mb-content">
                    <p>The daily measure has a score setting of 70 point ( this can be different) – the day is divided
                        into segments and each segment (inspired by Vedic -chaughadiyas + the 5 times of Namaz & daily
                        confession of church ) <br><br>
                        There are 6 segments –scoring is from 1-10 (10 being high) The last one is based on becoming
                        present 5 times per day ( set alarms in the phone- and when the alarm goes off- at that moment
                        or in a short time- take a moment to do 1 minute meditation—become focused and centered) This
                        has to be done five times in the waking hours
                        At the end of the day you give yourself a score—a value from 1-10 <br><br>
                        The total score is out of 70 – The total-final score is taken into account.<br><br>
                        On a daily basis—date based- it will be added ( we can set different matrix—or graphs to see the
                        result—based on the 7 matrix—wakeup / work etc the total can be viewed from a particular date to
                        another date. A monthly score or a graph will be nice. ( can be added in phase II)
                        The admin or the coach can monitor this graph and know where the problem lies—whether it is the
                        work area or daily routine of waking up or diet
                    </p>
                </div>
                <div class="mb-footer">
                    <button class="btn btn-default btn-lg pull-right mb-control-close">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- end success -->
    <!-- START SCRIPTS -->
    <!-- START PLUGINS -->
    <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery.min.js"></script>
    <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery - ui.min.js"></script>
    <script type="text/javascript" src="<?php echo base_url()."
        assets/";?>js / plugins / bootstrap / bootstrap.min.js"></script>
    <!-- END PLUGINS -->

    <!-- START THIS PAGE PLUGINS-->
    <script type='text/javascript' src='<?php echo base_url()."assets/";?>js/plugins/icheck/icheck.min.js'></script>
    <script type="text/javascript" src="<?php echo base_url()."
        assets/";?>js / plugins / mcustomscrollbar / jquery.mCustomScrollbar.min.js"></script>

    <script type="text/javascript" src="<?php echo base_url()."
        assets/";?>js / plugins / bootstrap / bootstrap - datepicker.js"></script>
    <script type="text/javascript" src="<?php echo base_url()."
        assets/";?>js / plugins / bootstrap / bootstrap - file - input.js"></script>
    <script type="text/javascript" src="<?php echo base_url()."
        assets/";?>js / plugins / bootstrap / bootstrap - select.js"></script>
    <script type="text/javascript" src="<?php echo base_url()."
        assets/";?>js / plugins / tagsinput / jquery.tagsinput.min.js"></script>
    <!-- END THIS PAGE PLUGINS-->

    <!-- START TEMPLATE -->

    <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins.js"></script>
    <!--<script type="text/javascript" src="<?php echo base_url()."assets/";?>js/actions.js"></script>-->

    <!-- END TEMPLATE -->
    <!-- END SCRIPTS -->


    <?php
$this->load->view('yogiccoach/footer');
?>
</xmp></code></pre>
<p>view member list</p>
<img class="img-fluid" src="image/viewmemberlistcoach.png" alt="Login Page" height="100">
<br><br>
<p>view member list controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function view_member_list()
{
$this->load->view('yogiccoach/view_member_list');
}</xmp></code></pre>
<p>view member list view</p>
<code>application/views/yogiccoach/view_member_list.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('yogiccoach/sidebar');
error_reporting(0);
$session = $this->session->get_userdata();
$yogi_id=$session['user_id'];
//print_r($yogi_id);
$cat_list=$this->Common_model->get_table_records('users',array('fld_parent'=>$yogi_id));
$row_cont=1;
$catRow='';
					
foreach ($cat_list as $Row){
		$timestamp=$Row->fld_added_date;
		$startDate=date('m/d/Y',$timestamp);
		$first=$Row->fld_first_name;
		$last=$Row->fld_last_name;
		$name= $first.' '.$last;
		if(($Row->fld_status)=='1'){
			$status= 'Active';
		}
		if(($Row->fld_status)=='0'){
			$status= 'Deactive';
		}
				
				
				$catRow.='<tr class="gradeA">
							<td>'.$row_cont.'</td>
							<td>'.$Row->fld_id.'</td>
							<td>'.$name.'</td>
							<td>'.$Row->fld_email.'</td>
							<td>'.$Row->fld_phone.'</td>
							<td>'.$status.'</td>
							<td>'.$startDate.'</td>
							<td>'.$Row->fld_location.'</td>
							<td>'.$Row->fld_last_date.'</td>
							<td>'.date("m/d/Y", strtotime(date("m/d/Y", $Row->fld_added_date).'+1 month')).'</td>
						 </tr>';
			$row_cont++;
								  
}

?>

<ul class="breadcrumb push-down-1">
    <li><a href="<?php echo base_url()." yogiccoach";?>">Dashboard</a></li>
    <li><a href="<?php echo base_url()." yogiccoach/reports";?>">Reports</a></li>
    <li class="active"><a href="#">View Member List</a></li>
</ul>
<h2>&nbsp;&nbsp; View Member List</h2>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <!-- START WIDGETS -->
    <form action="#" class="form-horizontal" method="post">
        <div class="row">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-body panel-body-table">
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped table-actions">
                                    <thead>
                                        <tr>
                                            <th>##</th>
                                            <th>Id</th>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Phone</th>
                                            <th>Status</th>
                                            <th>Date</th>
                                            <th>Location</th>
                                            <th>Last Payment</th>
                                            <th>Next Payment</th>
                                        </tr>
                                    </thead>
                                    <?php echo $catRow;?>
                                    <tbody>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!-- END WIDGETS -->
</div>
<!-- END PAGE CONTENT WRAPPER -->


<?php
 $this->load->view('yogiccoach/footer');
 ?>
</xmp></code></pre>
<p>history member list</p>
<img class="img-fluid" src="image/historymemberlistcoach.png" alt="Login Page" height="100">
<br><br>
<p>history member list controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function history_of_member()
{
$this->load->view('yogiccoach/history_of_member');
}</xmp></code></pre>
<p>history member list view</p>
<code>application/views/yogiccoach/history_of_member.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('yogiccoach/sidebar');
?>

<!-- START BREADCRUMB -->
<ul class="breadcrumb">
    <li><a href="<?php echo base_url()." yogiccoach"; ?>">Home</a></li>
    <li><a href="<?php echo base_url()." yogiccoach/reports"; ?>">Reports</a></li>
    <li class="active">History Report</li>
</ul>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <!-- PAGE TITLE -->
    <div class="page-title">
        <form action="#" class="form-horizontal" method="post">

            <h2>History Of Members</h2>
        </form>
    </div>
    <!-- END PAGE TITLE -->

    <!-- PAGE CONTENT WRAPPER -->
    <div class="page-content-wrap">
        <form action="" method="post" role="form" class="form-material form-horizontal" id="submit_final_form"
            autocomplete="off">
            <div class="row">
                <div class="col-md-12">
                    <!-- START BASIC ELEMENTS -->
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="form-group">
                                <div>
                                    <label style="text-align:center;">Search by date</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <form action="#" method="post" class="form-horizontal">
                                    <div class="col-md-3">
                                        <input type="text" name="formDate" id="formDate" class="form-control datepicker"
                                            placeholder="From">
                                    </div>
                                    <div class="col-md-3">
                                        <input type="text" name="toDate" id="toDate" class="form-control datepicker"
                                            placeholder="To">
                                    </div>
                                    <div class="col-md-3">
                                        <a href="#" class="btn btn-primary pull-right dateViewData">View</a>
                                    </div>
                                </form>
                            </div>

                            <div class="form-group">

                            </div>


                        </div>
                        <div class="panel-body">
                            <div class="form-group">
                                <div>
                                    <label style="text-align:center;">Search by Name</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <form action="#" method="post" class="form-horizontal">
                                    <div class="col-md-3">
                                        <input type="text" id="nameView" class="form-control" placeholder="Type Name">
                                    </div>
                                    <div class="col-md-6">
                                        <a href="#" class="btn btn-primary pull-right viewHistoryName">View</a>
                                    </div>
                                </form>
                            </div>

                            <div class="form-group">

                            </div>


                        </div>
                    </div>
                    <!-- END BASIC ELEMENTS -->
                </div>
            </div>
        </form>
    </div>
</div>
<!-- END PAGE CONTENT WRAPPER -->

<!-- START PLUGINS -->

<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / jquery - 1.6.2.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery - ui.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / bootstrap / bootstrap.min.js"></script>
<!-- END PLUGINS -->
<!-- START THIS PAGE PLUGINS-->
<script type='text/javascript' src="<?php echo base_url()." assets/";?>js / plugins / icheck / icheck.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / mcustomscrollbar / jquery.mCustomScrollbar.min.js"></script>

<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - datepicker.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - timepicker.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - colorpicker.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - file - input.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - select.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / tagsinput / jquery.tagsinput.min.js"></script>

<!-- END THIS PAGE PLUGINS-->

<!-- START TEMPLATE -->

<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins.js"></script>
<!--<script type="text/javascript" src="<?php echo base_url()."assets/";?>js/actions.js"></script>-->
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / fire - 0.62.min.js"></script>
<!-- END TEMPLATE -->


<?php
 $this->load->view('yogiccoach/footer');
 ?>
</xmp></code></pre>
<p>view history by date</p>
<img class="img-fluid" src="image/viewhistorybydatecoach.png" alt="Login Page" height="100">
<br><br>
<p>view history by date controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function view_history_date()
{
$this->load->view('yogiccoach/view_history_date');
}</xmp></code></pre>
<p>view history by date view</p>
<code>application/views/yogiccoach/view_history_date.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('yogiccoach/sidebar');
//error_reporting(0);
 $formDate=$_GET['fdate'];
 $toDate=$_GET['tdate'];
$this->db->where('fld_select_date >=',date("Y-m-d",strtotime($formDate)));
$this->db->where('fld_select_date <=',date("Y-m-d",strtotime($toDate)));
$resultValue=$this->db->get('yogi_history');
$row_cont=1;
$catRow='';
$result=$resultValue->result();

foreach ($result as $Row){
	$catRow.='<tr class="gradeA">
				<td>'.$row_cont.'</td>
				<td>'.$Row->fld_member_name.'</td>
				<td>'.date("m/d/Y",strtotime($Row->fld_select_date)).'</td>
				<td>'.$Row->fld_topic.'</td>
				<td>'.$Row->fld_details.'</td>
			  </tr>';
	$row_cont++;
	
	
}
?>

<!-- START BREADCRUMB -->
<ul class="breadcrumb">
    <li><a href="<?php echo base_url()." yogiccoach"; ?>">Home</a></li>
    <li class="active">History Report</li>
</ul>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <!-- PAGE TITLE -->
    <div class="page-title">
        <form action="#" class="form-horizontal" method="post">

            <h2>History Of Members</h2>
        </form>
    </div>
    <!-- END PAGE TITLE -->

    <!-- PAGE CONTENT WRAPPER -->
    <div class="page-content-wrap">
        <form action="" method="post" role="form" class="form-material form-horizontal">
            <div class="row">
                <div class="col-md-12">
                    <!-- START BASIC ELEMENTS -->
                    <div class="panel panel-default">
                        <div class="panel-body panel-body-table">
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped table-actions">
                                    <thead>
                                        <tr>
                                            <th>##</th>
                                            <th>Name</th>
                                            <th>Date</th>
                                            <th>Topic</th>
                                            <th>Details</th>
                                        </tr>
                                    </thead>
                                    <?php echo $catRow;?>
                                    <tbody>

                                    </tbody>
                                </table>
                            </div>
                        </div>

                    </div>
                    <!-- END BASIC ELEMENTS -->
                </div>
            </div>
        </form>
    </div>
</div>
<!-- END PAGE CONTENT WRAPPER -->

<!-- START PLUGINS -->

<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / jquery - 1.6.2.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery - ui.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / bootstrap / bootstrap.min.js"></script>
<!-- END PLUGINS -->
<!-- START THIS PAGE PLUGINS-->
<script type='text/javascript' src="<?php echo base_url()." assets/";?>js / plugins / icheck / icheck.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / mcustomscrollbar / jquery.mCustomScrollbar.min.js"></script>

<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - datepicker.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - timepicker.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - colorpicker.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - file - input.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - select.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / tagsinput / jquery.tagsinput.min.js"></script>

<!-- END THIS PAGE PLUGINS-->

<!-- START TEMPLATE -->

<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins.js"></script>
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / actions.js"></script>
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / fire - 0.62.min.js"></script>
<!-- END TEMPLATE -->
<script>
    var options = [];

    $('.dropdown-menu a').on('click', function (event) {

        var $target = $(event.currentTarget),
            val = $target.attr('data-value'),
            $inp = $target.find('input'),
            idx;
        options.push(val);
        setTimeout(function () { $inp.prop('checked', true) }, 0);
        $('#show_val').val($inp.attr('value'));
        $('#show_val').dropdown - menu('hide');
        $(event.target).blur();

        console.log(options);
        return false;
    });

</script>

<?php
 $this->load->view('yogiccoach/footer');
 ?>
</xmp></code></pre>
<p>view client history by name</p>
        <img class="img-fluid" src="image/viewhistorybynamecoach.png" alt="Login Page" height="100">
        <br><br>
        <p>view client history by name controller</p>
        <code>application/controllers/yogiccoach.php</code>
        <pre><code class="language-html"><xmp>public function view_history_name()
        {
        $this->load->view('yogiccoach/view_history_name');
        }</xmp></code></pre>
        <p>view client history by name view</p>
        <code>application/views/yogiccoach/view_history_name.php</code>
        <pre><code class="language-html"><xmp><?php
        $this->load->view('yogiccoach/sidebar');
        //error_reporting(0);
        $name=$_GET['name'];
        
        $record=$this->Common_model->get_table_records("yogi_history",array('fld_member_name'=>$name));
        $row_cont=1;
        $catRow='';
        
        
        foreach ($record as $Row){
        	$catRow.='<tr class="gradeA">
        				<td>'.$row_cont.'</td>
        				<td>'.$Row->fld_member_name.'</td>
        				<td>'.$Row->fld_select_date.'</td>
        				<td>'.$Row->fld_topic.'</td>
        				<td>'.$Row->fld_details.'</td>
        			  </tr>';
        	$row_cont++;
        	
        	
        }
        	
        	
        
        
        
        ?>
        
        <!-- START BREADCRUMB -->
        <ul class="breadcrumb">
            <li><a href="<?php echo base_url()." yogiccoach"; ?>">Home</a></li>
            <li class="active">History Report</li>
        </ul>
        <!-- END BREADCRUMB -->
        
        <!-- PAGE CONTENT WRAPPER -->
        <div class="page-content-wrap">
        
            <!-- PAGE TITLE -->
            <div class="page-title">
                <form action="#" class="form-horizontal" method="post">
        
                    <h2>History Of Members</h2>
                </form>
            </div>
            <!-- END PAGE TITLE -->
        
            <!-- PAGE CONTENT WRAPPER -->
            <div class="page-content-wrap">
                <form action="" method="post" role="form" class="form-material form-horizontal">
                    <div class="row">
                        <div class="col-md-12">
                            <!-- START BASIC ELEMENTS -->
                            <div class="panel panel-default">
                                <div class="panel-body panel-body-table">
                                    <div class="table-responsive">
                                        <table class="table table-bordered table-striped table-actions">
                                            <thead>
                                                <tr>
                                                    <th>##</th>
                                                    <th>Name</th>
                                                    <th>Date</th>
                                                    <th>Topic</th>
                                                    <th>Details</th>
                                                </tr>
                                            </thead>
                                            <?php echo $catRow;?>
                                            <tbody>
        
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
        
                            </div>
                            <!-- END BASIC ELEMENTS -->
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <!-- END PAGE CONTENT WRAPPER -->
        
        <!-- START PLUGINS -->
        
        <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / jquery - 1.6.2.min.js"></script>
        <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery.min.js"></script>
        <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery - ui.min.js"></script>
        <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / bootstrap / bootstrap.min.js"></script>
        <!-- END PLUGINS -->
        <!-- START THIS PAGE PLUGINS-->
        <script type='text/javascript' src="<?php echo base_url()." assets/";?>js / plugins / icheck / icheck.min.js"></script>
        <script type="text/javascript" src="<?php echo base_url()."
            assets/";?>js / plugins / mcustomscrollbar / jquery.mCustomScrollbar.min.js"></script>
        
        <script type="text/javascript" src="<?php echo base_url()."
            assets/";?>js / plugins / bootstrap / bootstrap - datepicker.js"></script>
        <script type="text/javascript" src="<?php echo base_url()."
            assets/";?>js / plugins / bootstrap / bootstrap - timepicker.min.js"></script>
        <script type="text/javascript" src="<?php echo base_url()."
            assets/";?>js / plugins / bootstrap / bootstrap - colorpicker.js"></script>
        <script type="text/javascript" src="<?php echo base_url()."
            assets/";?>js / plugins / bootstrap / bootstrap - file - input.js"></script>
        <script type="text/javascript" src="<?php echo base_url()."
            assets/";?>js / plugins / bootstrap / bootstrap - select.js"></script>
        <script type="text/javascript" src="<?php echo base_url()."
            assets/";?>js / plugins / tagsinput / jquery.tagsinput.min.js"></script>
        
        <!-- END THIS PAGE PLUGINS-->
        
        <!-- START TEMPLATE -->
        
        <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins.js"></script>
        <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / actions.js"></script>
        <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / fire - 0.62.min.js"></script>
        <!-- END TEMPLATE -->
        <script>
            var options = [];

            $('.dropdown-menu a').on('click', function (event) {

                var $target = $(event.currentTarget),
                    val = $target.attr('data-value'),
                    $inp = $target.find('input'),
                    idx;
                options.push(val);
                setTimeout(function () { $inp.prop('checked', true) }, 0);
                $('#show_val').val($inp.attr('value'));
                $('#show_val').dropdown - menu('hide');
                $(event.target).blur();

                console.log(options);
                return false;
            });

        </script>
        
        <?php
         $this->load->view('yogiccoach/footer');
         ?>
</xmp></code></pre>
<p>site creater</p>
<img class="img-fluid" src="image/sitecreatercoach.png" alt="Login Page" height="100">
<br><br>
<p>site create controller</p>
<code>sites/editor.php?foldername=coachname</code>
<pre><code class="language-html"><xmp><?php date_default_timezone_set("Asia/Bangkok"); ?>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">
    <base href="">
    <title>VvvebJs</title>

    <link href="css/editor.css" rel="stylesheet">
    <link href="css/line-awesome.css" rel="stylesheet">


<body>


    <div id="vvveb-builder">

        <div id="top-panel">
            <a href="https://www.myportalx.com/tool/coach">go to home</a>
            <img src="https://www.myportalx.com/tool/assets/new_client_dashboard/images/Myportalx logo 2.png"
                alt="Vvveb" class="float-left" width="35" id="logo">


            <div class="btn-group float-left" role="group">
                <button class="btn btn-light" title="Toggle file manager" id="toggle-file-manager-btn"
                    data-vvveb-action="toggleFileManager" data-toggle="button" aria-pressed="false">
                    <img src="libs/builder/icons/file-manager-layout.svg" width="20px" height="20px">
                </button>

                <button class="btn btn-light" title="Toggle left column" id="toggle-left-column-btn"
                    data-vvveb-action="toggleLeftColumn" data-toggle="button" aria-pressed="false">
                    <img src="libs/builder/icons/left-column-layout.svg" width="20px" height="20px">
                </button>

                <button class="btn btn-light" title="Toggle right column" id="toggle-right-column-btn"
                    data-vvveb-action="toggleRightColumn" data-toggle="button" aria-pressed="false">
                    <img src="libs/builder/icons/right-column-layout.svg" width="20px" height="20px">
                </button>
            </div>

            <div class="btn-group mr-3" role="group">
                <button class="btn btn-light" title="Undo (Ctrl/Cmd + Z)" id="undo-btn" data-vvveb-action="undo"
                    data-vvveb-shortcut="ctrl+z">
                    <i class="la la-undo"></i>
                </button>

                <button class="btn btn-light" title="Redo (Ctrl/Cmd + Shift + Z)" id="redo-btn" data-vvveb-action="redo"
                    data-vvveb-shortcut="ctrl+shift+z">
                    <i class="la la-undo la-flip-horizontal"></i>
                </button>
            </div>


            <div class="btn-group mr-3" role="group">
                <button class="btn btn-light" title="Designer Mode (Free component dragging)" id="designer-mode-btn"
                    data-toggle="button" aria-pressed="false" data-vvveb-action="setDesignerMode">
                    <i class="la la-hand-grab-o"></i>
                </button>

                <button class="btn btn-light" title="Preview" id="preview-btn" type="button" data-toggle="button"
                    aria-pressed="false" data-vvveb-action="preview">
                    <i class="la la-eye"></i>
                </button>

                <button class="btn btn-light" title="Fullscreen (F11)" id="fullscreen-btn" data-toggle="button"
                    aria-pressed="false" data-vvveb-action="fullscreen">
                    <i class="la la-arrows"></i>
                </button>

            </div>

            <div class="btn-group mr-3" role="group">
                <button class="btn btn-light" title="Export (Ctrl + E)" id="save-btn" data-vvveb-action="saveAjax"
                    data-vvveb-shortcut="ctrl+e">
                    <i class="la la-save"></i>
                </button>

                <!-- <button class="btn btn-light" title="Download" id="download-btn" data-vvveb-action="download" data-download="index.html">
						  <i class="la la-download"></i>
					  </button> -->
            </div>


            <div class="btn-group float-right responsive-btns" role="group">
                <button id="mobile-view" data-view="mobile" class="btn btn-light" title="Mobile view"
                    data-vvveb-action="viewport">
                    <i class="la la-mobile-phone"></i>
                </button>

                <button id="tablet-view" data-view="tablet" class="btn btn-light" title="Tablet view"
                    data-vvveb-action="viewport">
                    <i class="la la-tablet"></i>
                </button>

                <button id="desktop-view" data-view="" class="btn btn-light" title="Desktop view"
                    data-vvveb-action="viewport">
                    <i class="la la-laptop"></i>
                </button>

            </div>

        </div>

        <div id="left-panel">

            <div id="filemanager">
                <div class="header">
                    <a href="#" class="text-secondary">Pages</a>

                    <div class="btn-group responsive-btns mr-4 float-right" role="group">
                        <button class="btn btn-link btn-sm" title="New file" id="new-file-btn"
                            data-vvveb-action="newPage" data-vvveb-shortcut="">
                            <i class="la la-file"></i> <small>New page</small>
                        </button>

                        &ensp;
                        <button class="btn btn-link text-dark p-0" title="Delete file" id="delete-file-btn"
                            data-vvveb-action="deletePage" data-vvveb-shortcut="">
                            <i class="la la-trash"></i> <small>Delete</small>
                        </button>
                    </div>

                </div>

                <div class="tree">
                    <ol>
                    </ol>
                </div>
            </div>


            <div class="drag-elements">

                <div class="header">
                    <ul class="nav nav-tabs" id="elements-tabs" role="tablist">
                        <li class="nav-item component-tab">
                            <a class="nav-link active" id="components-tab" data-toggle="tab" href="#components"
                                role="tab" aria-controls="components" aria-selected="true"><i
                                    class="la la-lg la-cube"></i>
                                <div><small>Components</small></div>
                            </a>
                        </li>
                        <li class="nav-item blocks-tab">
                            <a class="nav-link" id="blocks-tab" data-toggle="tab" href="#blocks" role="tab"
                                aria-controls="blocks" aria-selected="false"><i class="la la-lg la-image"></i>
                                <div><small>Blocks</small></div>
                            </a>
                        </li>
                        <li class="nav-item component-properties-tab" style="display:none">
                            <a class="nav-link" id="properties-tab" data-toggle="tab" href="#properties" role="tab"
                                aria-controls="blocks" aria-selected="false"><i class="la la-lg la-cog"></i>
                                <div><small>Properties</small></div>
                            </a>
                        </li>
                    </ul>

                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="components" role="tabpanel"
                            aria-labelledby="components-tab">

                            <div class="search">
                                <input class="form-control form-control-sm component-search"
                                    placeholder="Search components" type="text" data-vvveb-action="componentSearch"
                                    data-vvveb-on="keyup">
                                <button class="clear-backspace" data-vvveb-action="clearComponentSearch">
                                    <i class="la la-close"></i>
                                </button>
                            </div>

                            <div class="drag-elements-sidepane sidepane">
                                <div>

                                    <ul class="components-list clearfix" data-type="leftpanel">
                                    </ul>

                                </div>
                            </div>

                        </div>
                        <div class="tab-pane fade" id="blocks" role="tabpanel" aria-labelledby="blocks-tab">

                            <div class="search">
                                <input class="form-control form-control-sm block-search" placeholder="Search blocks"
                                    type="text" data-vvveb-action="blockSearch" data-vvveb-on="keyup">
                                <button class="clear-backspace" data-vvveb-action="clearBlockSearch">
                                    <i class="la la-close"></i>
                                </button>
                            </div>

                            <div class="drag-elements-sidepane sidepane">
                                <div>

                                    <ul class="blocks-list clearfix" data-type="leftpanel">
                                    </ul>

                                </div>
                            </div>

                        </div>

                        <div class="tab-pane fade" id="properties" role="tabpanel" aria-labelledby="blocks-tab">
                            <div class="component-properties-sidepane">
                                <div>
                                    <div class="component-properties">
                                        <ul class="nav nav-tabs nav-fill" id="properties-tabs" role="tablist">
                                            <li class="nav-item content-tab">
                                                <a class="nav-link active" data-toggle="tab"
                                                    href="#content-left-panel-tab" role="tab" aria-controls="components"
                                                    aria-selected="true">
                                                    <i class="la la-lg la-cube"></i>
                                                    <div><span>Content</span></div>
                                                </a>
                                            </li>
                                            <li class="nav-item style-tab">
                                                <a class="nav-link" data-toggle="tab" href="#style-left-panel-tab"
                                                    role="tab" aria-controls="blocks" aria-selected="false">
                                                    <i class="la la-lg la-image"></i>
                                                    <div><span>Style</span></div>
                                                </a>
                                            </li>
                                            <li class="nav-item advanced-tab">
                                                <a class="nav-link" data-toggle="tab" href="#advanced-left-panel-tab"
                                                    role="tab" aria-controls="blocks" aria-selected="false">
                                                    <i class="la la-lg la-cog"></i>
                                                    <div><span>Advanced</span></div>
                                                </a>
                                            </li>
                                        </ul>

                                        <div class="tab-content">
                                            <div class="tab-pane fade show active" id="content-left-panel-tab"
                                                data-section="content" role="tabpanel" aria-labelledby="content-tab">
                                                <div class="mt-4 text-center">Click on an element to edit.</div>
                                            </div>

                                            <div class="tab-pane fade show" id="style-left-panel-tab"
                                                data-section="style" role="tabpanel" aria-labelledby="style-tab">
                                            </div>

                                            <div class="tab-pane fade show" id="advanced-left-panel-tab"
                                                data-section="advanced" role="tabpanel" aria-labelledby="advanced-tab">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>


        <div id="canvas">
            <div id="iframe-wrapper">
                <div id="iframe-layer">

                    <div id="highlight-box">
                        <div id="highlight-name"></div>

                        <div id="section-actions">
                            <a id="add-section-btn" href="" title="Add element"><i class="la la-plus"></i></a>
                        </div>
                    </div>

                    <div id="select-box">

                        <div id="wysiwyg-editor">
                            <a id="bold-btn" href="" title="Bold"><i><strong>B</strong></i></a>
                            <a id="italic-btn" href="" title="Italic"><i>I</i></a>
                            <a id="underline-btn" href="" title="Underline"><u>u</u></a>
                            <a id="strike-btn" href="" title="Strikeout"><del>S</del></a>
                            <a id="link-btn" href="" title="Create link"><strong>a</strong></a>
                        </div>

                        <div id="select-actions">
                            <a id="drag-btn" href="" title="Drag element"><i class="la la-arrows"></i></a>
                            <a id="parent-btn" href="" title="Select parent"><i
                                    class="la la-level-down la-rotate-180"></i></a>

                            <a id="up-btn" href="" title="Move element up"><i class="la la-arrow-up"></i></a>
                            <a id="down-btn" href="" title="Move element down"><i class="la la-arrow-down"></i></a>
                            <a id="clone-btn" href="" title="Clone element"><i class="la la-copy"></i></a>
                            <a id="delete-btn" href="" title="Remove element"><i class="la la-trash"></i></a>
                        </div>
                    </div>

                    <!-- add section box -->
                    <div id="add-section-box" class="drag-elements">

                        <div class="header">
                            <ul class="nav nav-tabs" id="box-elements-tabs" role="tablist">
                                <li class="nav-item component-tab">
                                    <a class="nav-link active" id="box-components-tab" data-toggle="tab"
                                        href="#box-components" role="tab" aria-controls="components"
                                        aria-selected="true"><i class="la la-lg la-cube"></i>
                                        <div><small>Components</small></div>
                                    </a>
                                </li>
                                <li class="nav-item blocks-tab">
                                    <a class="nav-link" id="box-blocks-tab" data-toggle="tab" href="#box-blocks"
                                        role="tab" aria-controls="blocks" aria-selected="false"><i
                                            class="la la-lg la-image"></i>
                                        <div><small>Blocks</small></div>
                                    </a>
                                </li>
                                <li class="nav-item component-properties-tab" style="display:none">
                                    <a class="nav-link" id="box-properties-tab" data-toggle="tab" href="#box-properties"
                                        role="tab" aria-controls="blocks" aria-selected="false"><i
                                            class="la la-lg la-cog"></i>
                                        <div><small>Properties</small></div>
                                    </a>
                                </li>
                            </ul>

                            <div class="section-box-actions">

                                <div id="close-section-btn" class="btn btn-light btn-sm bg-white btn-sm float-right"><i
                                        class="la la-close"></i></div>

                                <div class="small mt-1 mr-3 float-right">

                                    <div class="custom-control custom-radio custom-control-inline">
                                        <input type="radio" id="add-section-insert-mode-after" value="after"
                                            checked="checked" name="add-section-insert-mode"
                                            class="custom-control-input">
                                        <label class="custom-control-label"
                                            for="add-section-insert-mode-after">After</label>
                                    </div>

                                    <div class="custom-control custom-radio custom-control-inline">
                                        <input type="radio" id="add-section-insert-mode-inside" value="inside"
                                            name="add-section-insert-mode" class="custom-control-input">
                                        <label class="custom-control-label"
                                            for="add-section-insert-mode-inside">Inside</label>
                                    </div>

                                </div>

                            </div>

                            <div class="tab-content">
                                <div class="tab-pane fade show active" id="box-components" role="tabpanel"
                                    aria-labelledby="components-tab">

                                    <div class="search">
                                        <input class="form-control form-control-sm component-search"
                                            placeholder="Search components" type="text"
                                            data-vvveb-action="addBoxComponentSearch" data-vvveb-on="keyup">
                                        <button class="clear-backspace" data-vvveb-action="clearComponentSearch">
                                            <i class="la la-close"></i>
                                        </button>
                                    </div>

                                    <div>
                                        <div>

                                            <ul class="components-list clearfix" data-type="addbox">
                                            </ul>

                                        </div>
                                    </div>

                                </div>
                                <div class="tab-pane fade" id="box-blocks" role="tabpanel" aria-labelledby="blocks-tab">

                                    <div class="search">
                                        <input class="form-control form-control-sm block-search"
                                            placeholder="Search blocks" type="text"
                                            data-vvveb-action="addBoxBlockSearch" data-vvveb-on="keyup">
                                        <button class="clear-backspace" data-vvveb-action="clearBlockSearch">
                                            <i class="la la-close"></i>
                                        </button>
                                    </div>

                                    <div>
                                        <div>

                                            <ul class="blocks-list clearfix" data-type="addbox">
                                            </ul>

                                        </div>
                                    </div>

                                </div>

                                <div class="tab-pane fade" id="box-properties" role="tabpanel"
                                    aria-labelledby="blocks-tab">
                                    <div class="component-properties-sidepane">
                                        <div>
                                            <div class="component-properties">
                                                <div class="mt-4 text-center">Click on an element to edit.</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- //add section box -->
                </div>
                <iframe src="about:none" id="iframe1"></iframe>
            </div>


        </div>

        <div id="right-panel">
            <div class="component-properties">

                <ul class="nav nav-tabs nav-fill" id="properties-tabs" role="tablist">
                    <li class="nav-item content-tab">
                        <a class="nav-link active" data-toggle="tab" href="#content-tab" role="tab"
                            aria-controls="components" aria-selected="true">
                            <i class="la la-lg la-cube"></i>
                            <div><span>Content</span></div>
                        </a>
                    </li>
                    <li class="nav-item style-tab">
                        <a class="nav-link" data-toggle="tab" href="#style-tab" role="tab" aria-controls="blocks"
                            aria-selected="false">
                            <i class="la la-lg la-image"></i>
                            <div><span>Style</span></div>
                        </a>
                    </li>
                    <li class="nav-item advanced-tab">
                        <a class="nav-link" data-toggle="tab" href="#advanced-tab" role="tab" aria-controls="blocks"
                            aria-selected="false">
                            <i class="la la-lg la-cog"></i>
                            <div><span>Advanced</span></div>
                        </a>
                    </li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane fade show active" id="content-tab" data-section="content" role="tabpanel"
                        aria-labelledby="content-tab">
                    </div>

                    <div class="tab-pane fade show" id="style-tab" data-section="style" role="tabpanel"
                        aria-labelledby="style-tab">
                    </div>

                    <div class="tab-pane fade show" id="advanced-tab" data-section="advanced" role="tabpanel"
                        aria-labelledby="advanced-tab">
                    </div>


                </div>



            </div>
        </div>

        <div id="bottom-panel">

            <div class="btn-group" role="group">

                <button id="code-editor-btn" data-view="mobile" class="btn btn-sm btn-light btn-sm" title="Code editor"
                    data-vvveb-action="toggleEditor">
                    <i class="la la-code"></i> Code editor
                </button>

                <div id="toggleEditorJsExecute" class="custom-control custom-checkbox mt-1" style="display:none">
                    <input type="checkbox" class="custom-control-input" id="customCheck" name="example1"
                        data-vvveb-action="toggleEditorJsExecute">
                    <label class="custom-control-label" for="customCheck"><small>Run javascript code on
                            edit</small></label>
                </div>
            </div>

            <div id="vvveb-code-editor">
                <textarea class="form-control"></textarea>
                <div>

                </div>
            </div>
        </div>


        <!-- templates -->

        <script id="vvveb-input-textinput" type="text/html">

	<div>
		<input name="{%=key%}" type="text" class="form-control"/>
	</div>
	
</script>

        <script id="vvveb-input-textareainput" type="text/html">

	<div>
		<textarea name="{%=key%}" rows="3" class="form-control"/>
	</div>
	
</script>

        <script id="vvveb-input-checkboxinput" type="text/html">

	<div class="custom-control custom-checkbox">
		  <input name="{%=key%}" class="custom-control-input" type="checkbox" id="{%=key%}_check">
		  <label class="custom-control-label" for="{%=key%}_check">{% if (typeof text !== 'undefined') { %} {%=text%} {% } %}</label>
	</div>
	
</script>

        <script id="vvveb-input-radioinput" type="text/html">

	<div>
	
		{% for ( var i = 0; i < options.length; i++ ) { %}

		<label class="custom-control custom-radio  {% if (typeof inline !== 'undefined' && inline == true) { %}custom-control-inline{% } %}"  title="{%=options[i].title%}">
		  <input name="{%=key%}" class="custom-control-input" type="radio" value="{%=options[i].value%}" id="{%=key%}{%=i%}" {%if (options[i].checked) { %}checked="{%=options[i].checked%}"{% } %}>
		  <label class="custom-control-label" for="{%=key%}{%=i%}">{%=options[i].text%}</label>
		</label>

		{% } %}

	</div>
	
</script>

        <script id="vvveb-input-radiobuttoninput" type="text/html">

	<div class="btn-group btn-group-toggle  {%if (extraclass) { %}{%=extraclass%}{% } %} clearfix" data-toggle="buttons">
	
		{% for ( var i = 0; i < options.length; i++ ) { %}

		<label class="btn  btn-outline-primary  {%if (options[i].checked) { %}active{% } %}  {%if (options[i].extraclass) { %}{%=options[i].extraclass%}{% } %}" for="{%=key%}{%=i%} " title="{%=options[i].title%}">
		  <input name="{%=key%}" class="custom-control-input" type="radio" value="{%=options[i].value%}" id="{%=key%}{%=i%}" {%if (options[i].checked) { %}checked="{%=options[i].checked%}"{% } %}>
		  {%if (options[i].icon) { %}<i class="{%=options[i].icon%}"></i>{% } %}
		  {%=options[i].text%}
		</label>

		{% } %}
				
	</div>
	
</script>


        <script id="vvveb-input-toggle" type="text/html">

    <div class="toggle">
        <input type="checkbox" name="{%=key%}" value="{%=on%}" data-value-off="{%=off%}" data-value-on="{%=on%}" class="toggle-checkbox" id="{%=key%}">
        <label class="toggle-label" for="{%=key%}">
            <span class="toggle-inner"></span>
            <span class="toggle-switch"></span>
        </label>
    </div>
	
</script>

        <script id="vvveb-input-header" type="text/html">

		<h6 class="header">{%=header%}</h6>
	
</script>


        <script id="vvveb-input-select" type="text/html">

	<div>

		<select class="form-control custom-select">
			{% for ( var i = 0; i < options.length; i++ ) { %}
			<option value="{%=options[i].value%}">{%=options[i].text%}</option>
			{% } %}
		</select>
	
	</div>
	
</script>


        <script id="vvveb-input-listinput" type="text/html">

	<div class="row">

		{% for ( var i = 0; i < options.length; i++ ) { %}
		<div class="col-6">
			<div class="input-group">
				<input name="{%=key%}_{%=i%}" type="text" class="form-control" value="{%=options[i].text%}"/>
				<div class="input-group-append">
					<button class="input-group-text btn btn-sm btn-danger">
						<i class="la la-trash la-lg"></i>
					</button>
				</div>
			  </div>
			  <br/>
		</div>
		{% } %}


		{% if (typeof hide_remove === 'undefined') { %}
		<div class="col-12">
		
			<button class="btn btn-sm btn-outline-primary">
				<i class="la la-trash la-lg"></i> Add new
			</button>
			
		</div>
		{% } %}
			
	</div>
	
</script>

        <script id="vvveb-input-grid" type="text/html">

	<div class="row">
		<div class="mb-1 col-12">
		
			<label>Flexbox</label>
			<select class="form-control custom-select" name="col">
				
				<option value="">None</option>
				{% for ( var i = 1; i <= 12; i++ ) { %}
				<option value="{%=i%}" {% if ((typeof col !== 'undefined') && col == i) { %} selected {% } %}>{%=i%}</option>
				{% } %}
				
			</select>
			<br/>
		</div>

		<div class="col-6">
			<label>Extra small</label>
			<select class="form-control custom-select" name="col-xs">
				
				<option value="">None</option>
				{% for ( var i = 1; i <= 12; i++ ) { %}
				<option value="{%=i%}" {% if ((typeof col_xs !== 'undefined') && col_xs == i) { %} selected {% } %}>{%=i%}</option>
				{% } %}
				
			</select>
			<br/>
		</div>
		
		<div class="col-6">
			<label>Small</label>
			<select class="form-control custom-select" name="col-sm">
				
				<option value="">None</option>
				{% for ( var i = 1; i <= 12; i++ ) { %}
				<option value="{%=i%}" {% if ((typeof col_sm !== 'undefined') && col_sm == i) { %} selected {% } %}>{%=i%}</option>
				{% } %}
				
			</select>
			<br/>
		</div>
		
		<div class="col-6">
			<label>Medium</label>
			<select class="form-control custom-select" name="col-md">
				
				<option value="">None</option>
				{% for ( var i = 1; i <= 12; i++ ) { %}
				<option value="{%=i%}" {% if ((typeof col_md !== 'undefined') && col_md == i) { %} selected {% } %}>{%=i%}</option>
				{% } %}
				
			</select>
			<br/>
		</div>
		
		<div class="col-6 mb-1">
			<label>Large</label>
			<select class="form-control custom-select" name="col-lg">
				
				<option value="">None</option>
				{% for ( var i = 1; i <= 12; i++ ) { %}
				<option value="{%=i%}" {% if ((typeof col_lg !== 'undefined') && col_lg == i) { %} selected {% } %}>{%=i%}</option>
				{% } %}
				
			</select>
			<br/>
		</div>
		
		{% if (typeof hide_remove === 'undefined') { %}
		<div class="col-12">
		
			<button class="btn btn-sm btn-outline-light text-danger">
				<i class="la la-trash la-lg"></i> Remove
			</button>
			
		</div>
		{% } %}
		
	</div>
	
</script>

        <script id="vvveb-input-textvalue" type="text/html">

	<div class="row">
		<div class="col-6 mb-1">
			<label>Value</label>
			<input name="value" type="text" value="{%=value%}" class="form-control"/>
		</div>

		<div class="col-6 mb-1">
			<label>Text</label>
			<input name="text" type="text" value="{%=text%}" class="form-control"/>
		</div>

		{% if (typeof hide_remove === 'undefined') { %}
		<div class="col-12">
		
			<button class="btn btn-sm btn-outline-light text-danger">
				<i class="la la-trash la-lg"></i> Remove
			</button>
			
		</div>
		{% } %}

	</div>
	
</script>

        <script id="vvveb-input-rangeinput" type="text/html">

	<div>
		<input name="{%=key%}" type="range" min="{%=min%}" max="{%=max%}" step="{%=step%}" class="form-control"/>
	</div>
	
</script>

        <script id="vvveb-input-imageinput" type="text/html">

	<div>
		<input name="{%=key%}" type="text" class="form-control"/>
		<input name="file" type="file" class="form-control"/>
	</div>
	
</script>

        <script id="vvveb-input-colorinput" type="text/html">

	<div>
		<input name="{%=key%}" type="color" {% if (typeof value !== 'undefined' && value != false) { %} value="{%=value%}" {% } %}  pattern="#[a-f0-9]{6}" class="form-control"/>
	</div>
	
</script>

        <script id="vvveb-input-bootstrap-color-picker-input" type="text/html">

	<div>
		<div id="cp2" class="input-group" title="Using input value">
		  <input name="{%=key%}" type="text" {% if (typeof value !== 'undefined' && value != false) { %} value="{%=value%}" {% } %}	 class="form-control"/>
		  <span class="input-group-append">
			<span class="input-group-text colorpicker-input-addon"><i></i></span>
		  </span>
		</div>
	</div>

</script>

        <script id="vvveb-input-numberinput" type="text/html">
	<div>
		<input name="{%=key%}" type="number" value="{%=value%}" 
			  {% if (typeof min !== 'undefined' && min != false) { %}min="{%=min%}"{% } %} 
			  {% if (typeof max !== 'undefined' && max != false) { %}max="{%=max%}"{% } %} 
			  {% if (typeof step !== 'undefined' && step != false) { %}step="{%=step%}"{% } %} 
		class="form-control"/>
	</div>
</script>

        <script id="vvveb-input-button" type="text/html">
	<div>
		<button class="btn btn-sm btn-primary">
			<i class="la  {% if (typeof icon !== 'undefined') { %} {%=icon%} {% } else { %} la-plus {% } %} la-lg"></i> {%=text%}
		</button>
	</div>		
</script>

        <script id="vvveb-input-cssunitinput" type="text/html">
	<div class="input-group" id="cssunit-{%=key%}">
		<input name="number" type="number"  {% if (typeof value !== 'undefined' && value != false) { %} value="{%=value%}" {% } %} 
			  {% if (typeof min !== 'undefined' && min != false) { %}min="{%=min%}"{% } %} 
			  {% if (typeof max !== 'undefined' && max != false) { %}max="{%=max%}"{% } %} 
			  {% if (typeof step !== 'undefined' && step != false) { %}step="{%=step%}"{% } %} 
		class="form-control"/>
		 <div class="input-group-append">
		<select class="form-control custom-select small-arrow" name="unit">
			<option value="em">em</option>
			<option value="px">px</option>
			<option value="%">%</option>
			<option value="rem">rem</option>
			<option value="auto">auto</option>
		</select>
		</div>
	</div>
	
</script>


        <script id="vvveb-filemanager-page" type="text/html">
	<li data-url="{%=url%}" data-page="{%=name%}">
		<label for="{%=name%}"><span>{%=title%}</span></label> <input type="checkbox" checked id="{%=name%}" />
		<ol></ol>
	</li>
</script>

        <script id="vvveb-filemanager-component" type="text/html">
	<li data-url="{%=url%}" data-component="{%=name%}" class="file">
		<a href="{%=url%}"><span>{%=title%}</span></a>
	</li>
</script>

        <script id="vvveb-input-sectioninput" type="text/html">

		<label class="header" data-header="{%=key%}" for="header_{%=key%}"><span>&ensp;{%=header%}</span> <div class="header-arrow"></div></label> 
		<input class="header_check" type="checkbox" {% if (typeof expanded !== 'undefined' && expanded == false) { %} {% } else { %}checked="true"{% } %} id="header_{%=key%}"> 
		<div class="section" data-section="{%=key%}"></div>		
	
</script>


        <script id="vvveb-property" type="text/html">

	<div class="form-group {% if (typeof col !== 'undefined' && col != false) { %} col-sm-{%=col%} d-inline-block {% } else { %}row{% } %}" data-key="{%=key%}" {% if (typeof group !== 'undefined' && group != null) { %}data-group="{%=group%}" {% } %}>
		
		{% if (typeof name !== 'undefined' && name != false) { %}<label class="{% if (typeof inline === 'undefined' ) { %}col-sm-4{% } %} control-label" for="input-model">{%=name%}</label>{% } %}
		
		<div class="{% if (typeof inline === 'undefined') { %}col-sm-{% if (typeof name !== 'undefined' && name != false) { %}8{% } else { %}12{% } } %} input"></div>
		
	</div>		 
	
</script>

        <script id="vvveb-input-autocompletelist" type="text/html">

	<div>
		<input name="{%=key%}" type="text" class="form-control"/>
		
		<div class="form-control autocomplete-list" style="min=height: 150px; overflow: auto;">
                  <div id="featured-product43"><i class="la la-close"></i> MacBook
                    <input name="product[]" value="43" type="hidden">
                  </div>
                                  <div id="featured-product40"><i class="la la-close"></i> iPhone
                    <input name="product[]" value="40" type="hidden">
                  </div>
                                  <div id="featured-product42"><i class="la la-close"></i> Apple Cinema 30"
                    <input name="product[]" value="42" type="hidden">
                  </div>
                                  <div id="featured-product30"><i class="la la-close"></i> Canon EOS 5D
                    <input name="product[]" value="30" type="hidden">
                  </div>
		</div>
	</div>
	
</script>


        <!--// end templates -->


        <!-- export html modal-->
        <div class="modal fade" id="textarea-modal" tabindex="-1" role="dialog" aria-labelledby="textarea-modal"
            aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <p class="modal-title text-primary"><i class="la la-lg la-save"></i> Export html</p>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true"><small><i class="la la-close"></i></small></span>
                        </button>
                    </div>
                    <div class="modal-body">

                        <textarea rows="25" cols="150" class="form-control"></textarea>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary btn-lg" data-dismiss="modal"><i
                                class="la la-close"></i> Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- message modal-->
        <div class="modal fade" id="message-modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <p class="modal-title text-primary"><i class="la la-lg la-comment"></i> Myportalx.com</p>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true"><small><i class="la la-close"></i></small></span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>Page was successfully saved!.</p>
                    </div>
                    <div class="modal-footer">
                        <!-- <button type="button" class="btn btn-primary">Ok</button> -->
                        <button type="button" class="btn btn-secondary btn-lg" data-dismiss="modal"><i
                                class="la la-close"></i> Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- new page modal-->
        <div class="modal fade" id="new-page-modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">

                <form>

                    <div class="modal-content">
                        <div class="modal-header">
                            <p class="modal-title text-primary"><i class="la la-lg la-file"></i> New page</p>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true"><small><i class="la la-close"></i></small></span>
                            </button>
                        </div>

                        <div class="modal-body text">
                            <div class="form-group row" data-key="type">
                                <label class="col-sm-3 control-label">
                                    Template
                                    <abbr class="badge badge-pill badge-secondary"
                                        title="This template will be used as a start">?</abbr>
                                </label>
                                <div class="col-sm-9 input">
                                    <div>
                                        <select class="form-control custom-select" name="startTemplateUrl">
                                            <option value="new-page-blank-template.html">Blank Template</option>
                                            <option value="demo/narrow-jumbotron/index.html">Narrow jumbotron</option>
                                            <option value="demo/album/index.html">Album</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group row" data-key="href">
                                <label class="col-sm-3 control-label">Page name</label>
                                <div class="col-sm-9 input">
                                    <div>
                                        <input name="title" type="text" class="form-control" placeholder="My page"
                                            required>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group row" data-key="href">
                                <label class="col-sm-3 control-label">File name</label>
                                <div class="col-sm-9 input">
                                    <div>
                                        <input name="fileName" type="text" class="form-control"
                                            placeholder="my-page.html" required>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <button class="btn btn-primary btn-lg" type="submit"><i class="la la-check"></i> Create
                                page</button>
                            <button class="btn btn-secondary btn-lg" type="reset" data-dismiss="modal"><i
                                    class="la la-close"></i> Cancel</button>
                        </div>
                    </div>

                </form>

            </div>
        </div>
    </div>

    <!-- jquery-->
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.hotkeys.js"></script>

    <!-- bootstrap-->
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <!-- builder code-->
    <script src="libs/builder/builder.js"></script>
    <!-- undo manager-->
    <script src="libs/builder/undo.js"></script>
    <!-- inputs-->
    <script src="libs/builder/inputs.js"></script>

    <!-- bootstrap colorpicker //uncomment bellow scripts to enable -->
    <script src="libs/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js"></script>
    <link href="libs/bootstrap-colorpicker/css/bootstrap-colorpicker.min.css" rel="stylesheet">
    <script src="libs/builder/plugin-bootstrap-colorpicker.js"></script>

    <!-- components-->
    <script src="libs/builder/components-server.js"></script>
    <script src="libs/builder/components-bootstrap4.js"></script>
    <script src="libs/builder/components-widgets.js"></script>

    <!-- blocks-->
    <script src="libs/builder/blocks-bootstrap4.js"></script>

    <!-- plugins -->

    <!-- code mirror - code editor syntax highlight -->
    <link href="libs/codemirror/lib/codemirror.css" rel="stylesheet" />
    <link href="libs/codemirror/theme/material.css" rel="stylesheet" />
    <script src="libs/codemirror/lib/codemirror.js"></script>
    <script src="libs/codemirror/lib/xml.js"></script>
    <script src="libs/codemirror/lib/formatting.js"></script>
    <script src="libs/builder/plugin-codemirror.js"></script>

    <!-- jszip - download page as zip -->
    <script src="libs/jszip/jszip.min.js"></script>
    <script src="libs/builder/plugin-jszip.js"></script>


    <!-- autocomplete plugin used by autocomplete input-->
    <script src="libs/autocomplete/jquery.autocomplete.js"></script>

    <script>
        $(document).ready(function () {
            //if url has #no-right-panel set one panel demo
            if (window.location.hash.indexOf("no-right-panel") != -1) {
                $("#vvveb-builder").addClass("no-right-panel");
                $(".component-properties-tab").show();
                Vvveb.Components.componentPropertiesElement = "#left-panel .component-properties";
            } else {
                $(".component-properties-tab").hide();
            }

            Vvveb.Builder.init('demo/<?php echo $_GET['foldername'] ?>/index.php', function () {
                //run code after page/iframe is loaded
            });

            Vvveb.Gui.init();
            Vvveb.FileManager.init();
            Vvveb.FileManager.addPages(
                [
                    { name: "<?php echo ucfirst($_GET['foldername']) ?>1", title: "<?php echo ucfirst($_GET['foldername']) ?>1", url: "demo/<?php echo $_GET['foldername'] ?>/index.php", assets: ['demo/blog/blog.css'] },
                    { name: "<?php echo ucfirst($_GET['foldername']) ?>2", title: "<?php echo ucfirst($_GET['foldername']) ?>2", url: "demo/<?php echo $_GET['foldername'] ?>/narrow-jumbotron.php", assets: ['demo/narrow-jumbotron/narrow-jumbotron.css'] },
                    { name: "<?php echo ucfirst($_GET['foldername']) ?>3", title: "<?php echo ucfirst($_GET['foldername']) ?>3", url: "demo/<?php echo $_GET['foldername'] ?>/newone.php", assets: ['demo/startbootstrap-landing-page/css/landing-page.min.css'] },
                    { name: "<?php echo ucfirst($_GET['foldername']) ?>4", title: "<?php echo ucfirst($_GET['foldername']) ?>4", url: "demo/<?php echo $_GET['foldername'] ?>/page4.php" },
                    { name: "<?php echo ucfirst($_GET['foldername']) ?>5", title: "<?php echo ucfirst($_GET['foldername']) ?>5", url: "demo/<?php echo $_GET['foldername'] ?>/page5.php" },
                    { name: "<?php echo ucfirst($_GET['foldername']) ?>6", title: "<?php echo ucfirst($_GET['foldername']) ?>6", url: "demo/<?php echo $_GET['foldername'] ?>/page6.php" },
                    { name: "<?php echo ucfirst($_GET['foldername']) ?>7", title: "<?php echo ucfirst($_GET['foldername']) ?>7", url: "demo/<?php echo $_GET['foldername'] ?>/page7.php" },
                    { name: "<?php echo ucfirst($_GET['foldername']) ?>8", title: "<?php echo ucfirst($_GET['foldername']) ?>8", url: "demo/<?php echo $_GET['foldername'] ?>/page8.php" },
                    { name: "<?php echo ucfirst($_GET['foldername']) ?>9", title: "<?php echo ucfirst($_GET['foldername']) ?>9", url: "demo/<?php echo $_GET['foldername'] ?>/page9.php" },
                    { name: "<?php echo ucfirst($_GET['foldername']) ?>10", title: "<?php echo ucfirst($_GET['foldername']) ?>10", url: "demo/<?php echo $_GET['foldername'] ?>/page10.php" },
                    { name: "<?php echo ucfirst($_GET['foldername']) ?>11", title: "<?php echo ucfirst($_GET['foldername']) ?>11", url: "demo/<?php echo $_GET['foldername'] ?>/page11.php" },


		//uncomment php code below and rename file to .php extension to load saved html files in the editor
		<?php 
		   $htmlFiles = glob("*.html");
            foreach($htmlFiles as $file) {
                if (in_array($file, array('new-page-blank-template.html', 'editor.html'))) continue;//skip template files
                $pathInfo = pathinfo($file);
		?>
                    { name: "<?php echo ucfirst($pathInfo['filename']);?>", title: "<?php echo ucfirst($pathInfo['filename']);?>", url: "<?php echo $pathInfo['basename'];?>" },
		<?php } ?>
		// {name:"test", title:"test",  url: "http://vvveb_install.givan.ro/"},
	]);

        Vvveb.FileManager.loadPage("<?php echo ucfirst($_GET['foldername']) ?>1");
});
    </script>

</html>
</xmp></code></pre>
<p>site creater all setting are available in <code>sites/</code> folders</p>
<p>articles post</p>
<img class="img-fluid" src="image/ArticlesPostcoach.png" alt="Login Page" height="100">
<br><br>
<p>articles post controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function artical(){
if (isset($_POST['create_post'])) {
$fld_title = $_POST['title'];
$fld_body = $_POST['body'];
$fld_user_id = $this->userid;
// $featured_image = $_FILES['image']['name'];
// $temp = explode(".", $_FILES["image"]["name"]);
$featured_image = $_FILES["image"]["name"];
// $temp[0] = rand(0, 3000);
//Set to random number

$target = "";
if ($featured_image != '') {
$target = "assets/post/" . basename($featured_image);
}
move_uploaded_file($_FILES['image']['tmp_name'], $target);

$data = array(
'fld_title' => $fld_title,
'fld_body' => $fld_body,
'fld_user_id' => $fld_user_id,
'fld_image' => $target,
'fld_published' => 0,

// 'fld_created_at' => date('Y-m-d h:i A'),
'fld_updated_at' =>date('Y-m-d h:i:s')
);

$query = $this->db->insert('posts', $data);
if($query){
echo "<div class=\"alert alert-success\">Article submitted successfully.<a href=\"#\" class=\"close\"
        data-dismiss=\"alert\" aria-label=\"close\">&times;</a></div>";
}
}
$this->load->view("yogiccoach/artical");
}

public function articles_views(){
$this->db->Where('fld_id',$_GET['id']);
$query = $this->db->get('posts');

$data["results"] = $query->result();
$this->load->view('yogiccoach/display_comments', $data);
}

public function articles_delete(){
$this->db->delete('posts', array('fld_id' => $_GET['id']));
redirect("yogiccoach/artical");
}</xmp></code></pre>
<p>articles post view</p>
<code>application/views/yogiccoach/artical.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('yogiccoach/sidebar');
$session=$this->session->get_userdata();
$userId=$session['user_id'];

$userData = $this->db->get_where('posts',array('fld_user_id'=> $userId));
 if ($userData->num_rows()>0) {
  $datarow = $userData->result();
}
else{
    //   echo "<p>no results<p/>";
    }
$user=$this->db->get_where('users',array('fld_id'=>$userId));
        if ($user->num_rows()>0) {
        $row=$user->row_array();

        $memberName = $row["fld_first_name"] . " " . $row["fld_last_name"];
        $memberemail = $row["fld_email"];
        }

?>
<script src="https://cdn.ckeditor.com/4.14.0/standard/ckeditor.js"></script>
<ul class="breadcrumb push-down-0">
    <li><a href="#">Home</a></li>
    <li class="active">Articles Post</li>
</ul>
<!-- END BREADCRUMB -->

<!-- START CONTENT FRAME -->
<div class="content-frame">
    <!-- START CONTENT FRAME TOP -->
    <div class="content-frame-top">
        <div class="page-title">
            <h2><span class="fa fa-commenting-o"></span> Articles Post</h2>
            <!-- <a href="skype:USERNAME?chat">Chat with Skype</a> -->
        </div>
        <div class="pull-right">
            <button class="btn btn-default content-frame-right-toggle"><span class="fa fa-bars"></span></button>
        </div>
    </div>
    <!-- END CONTENT FRAME TOP -->

    <!-- START JUSTIFIED TABS -->
    <div class="panel panel-default tabs">
        <ul class="nav nav-tabs nav-justified" id="servicesTabs">
            <li class="services-tab tab active"><a href="#services" data-toggle="tab">Articles Post</a></li>
            <li class="categories-tab tab"><a href="#categories" data-toggle="tab">Articles View</a></li>
        </ul>
        <!-- Middle form - to create and edit  -->
        <div class="panel-body tab-content" id="services-page">
            <div id="services" class="tab-pane active">
                <div class="action create-post-div">
                    <h1 class="page-title">Create</h1>
                    <form method="post" enctype="multipart/form-data" action="#">

                        <div class="form-group">
                            <label for="inputAddress">Title</label>
                            <input type="text" name="title" class="form-control" id="inputAddress" placeholder="Title">
                        </div>
                        <div class="form-group">
                            <label for="exampleFormControlFile1">Featured image</label>
                            <input type="file" name="image" class="form-control-file" id="exampleFormControlFile1">
                        </div>
                        <div class="form-group">
                            <label for="exampleFormControlTextarea3">Rounded corners</label>
                            <textarea class="form-control" name="body" id="exampleFormControlTextarea3" cols="30"
                                rows="10"></textarea>
                        </div>
                        <label for="publish">
                            Publish
                            <input type="checkbox" value="1" name="publish" checked="checked">&nbsp;
                        </label>
                        <input type="submit" name="create_post" class="btn btn-info" value="Save Post">

                    </form>
                </div>
                <!-- // Middle form - to create and edit -->
            </div>
            <div id="categories" class="tab-pane">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Tital</th>
                            <th scope="col">Delete</th>
                            <th scope="col">Edit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php
        if ($userData->num_rows()>0) {
          $i = 1;
        foreach ($datarow as $row) {

          echo "<tr>
                    <td>".$i."</td>
                    <td><a href='".base_url()."yogiccoach/articles_views?id=".$row->fld_id."' >".$row->fld_title."</a></td>
                    <td><a onclick='javascript:confirmationDelete($(this));return false;' href='".base_url()."yogiccoach/articles_delete?id=".$row->fld_id."' class='btn btn-danger'>Delete</a></td>
                    <td><a href='".base_url()."yogiccoach/articles_edit?id=".$row->fld_id."' class='btn btn-default'>Edit</a></td>
                    </tr>";
                    $i++;
       } }else{
        echo "<div class='text-muted'>Articles Not Added</div>";
       }
        ?>
                    </tbody>
                </table>
                <hr>

            </div>
        </div>
    </div>
    <script>
        CKEDITOR.replace('body');
        function confirmationDelete(anchor) {
            var conf = confirm('Are you sure want to delete this Article?');
            if (conf)
                window.location = anchor.attr("href");
        }
    </script>

    <?php
$this->load->view('yogiccoach/footer');
?></xmp></code></pre>
<p>article edit</p>
<img class="img-fluid" src="image/articleeditcoach.png" alt="Login Page" height="100">
<br><br>
<p>article edit controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function articles_edit(){
if (isset($_POST['update_post'])) {
$fld_id = $_POST['fld_id'];
$fld_title = $_POST['title'];
$fld_body = $_POST['body'];
$fld_user_id = $this->userid;
$featured_image = $_FILES['image']['name'];
$target = "";
if ($featured_image != '') {
$target = "assets/post/" . basename($featured_image);
}
move_uploaded_file($_FILES['image']['tmp_name'], $target);

$data = array(
'fld_title' => $fld_title,
'fld_body' => $fld_body,
'fld_user_id' => $fld_user_id,
'fld_image' => $target,
'status' => '0',
'fld_published' => '0',
'fld_updated_at' =>date('Y-m-d h:i')
);
$this->db->where('fld_id',$fld_id);
$query = $this->db->update('posts',$data);
if($query){
echo "<div class=\"alert alert-success\">Article Update successfully.<a href=\"#\" class=\"close\"
        data-dismiss=\"alert\" aria-label=\"close\">&times;</a></div>";
}
}
$this->db->Where('fld_id',$_GET['id']);
$query = $this->db->get('posts');
$data["results"] = $query->result();
$this->load->view('yogiccoach/articles_edit', $data);
}
public function search_option_chakra(){
$keyword=$this->input->post('keyword');
if ($keyword != "") {
$this->db->like("fld_position", $keyword);
}
$this->db->like("fld_position", $keyword);
$data = $this->db->get('chakra_reading_minor')->result_array();
echo json_encode($data);
}</xmp></code></pre>
<p>article edit view</p>
<code>application/views/yogiccoach/articles_edit.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('yogiccoach/sidebar');
$session=$this->session->get_userdata();
$userId=$session['user_id'];

$userData = $this->db->get_where('posts',array('fld_user_id'=> $userId));
 if ($userData->num_rows()>0) {
  $datarow = $userData->result();
}
else{
       echo "<p>no results<p/>";
    }
$user=$this->db->get_where('users',array('fld_id'=>$userId));
        if ($user->num_rows()>0) {
        $row=$user->row_array();

        $memberName = $row["fld_first_name"] . " " . $row["fld_last_name"];
        $memberemail = $row["fld_email"];
        }

?>
<script src="https://cdn.ckeditor.com/4.14.0/standard/ckeditor.js"></script>
<ul class="breadcrumb push-down-0">
    <li><a href="#">Home</a></li>
    <li class="active">Articles Post</li>
</ul>
<!-- END BREADCRUMB -->

<!-- START CONTENT FRAME -->
<div class="content-frame">
    <!-- START CONTENT FRAME TOP -->
    <div class="content-frame-top">
        <div class="page-title">
            <h2><span class="fa fa-commenting-o"></span> Articles Post</h2>
            <!-- <a href="skype:USERNAME?chat">Chat with Skype</a> -->
        </div>
        <div class="pull-right">
            <button class="btn btn-default content-frame-right-toggle"><span class="fa fa-bars"></span></button>
        </div>
    </div>
    <!-- END CONTENT FRAME TOP -->

    <!-- START JUSTIFIED TABS -->
    <div class="panel panel-default tabs">
        <ul class="nav nav-tabs nav-justified" id="servicesTabs">
            <li class="services-tab tab active"><a href="#services" data-toggle="tab">Articles Post</a></li>
            <li class="categories-tab tab"><a href="#categories" data-toggle="tab">Articles View</a></li>
        </ul>
        <!-- Middle form - to create and edit  -->
        <div class="panel-body tab-content" id="services-page">
            <div id="services" class="tab-pane active">
                <div class="action create-post-div">
                    <h1 class="page-title">Create</h1>
                    <?php foreach ($results as $author):?>
                    <form method="post" enctype="multipart/form-data" action="#">

                        <div class="form-group">
                            <label for="inputAddress">Title</label>
                            <input type="hidden" name="fld_id" value="<?= $author->fld_id?>">
                            <input type="text" name="title" class="form-control" id="inputAddress"
                                value="<?php echo $author->fld_title; ?>" placeholder="Title">
                        </div>
                        <?php if ($author->fld_image != "") { ?>
                        <img class="card-img-top" src="<?= base_url().$author->fld_image; ?>" width="400"
                            alt="Card image cap">
                        <?php } ?>
                        <div class="form-group">
                            <label for="exampleFormControlFile1">image</label>
                            <input type="file" name="image" class="form-control-file" value="<?= $author->fld_image; ?>"
                                id="exampleFormControlFile1">
                        </div>
                        <div class="form-group">
                            <label for="exampleFormControlTextarea3">Rounded corners</label>
                            <textarea class="form-control" name="body" id="exampleFormControlTextarea3" cols="30"
                                rows="10"><?php echo $author->fld_body?></textarea>
                        </div>
                        <label for="publish">
                            Publish
                            <input type="checkbox" value="1" name="publish" checked="checked">&nbsp;
                        </label>
                        <input type="submit" name="update_post" class="btn btn-info" value="Update Post">

                    </form>
                    <?php endforeach; ?>
                </div>
                <!-- // Middle form - to create and edit -->
            </div>
            <div id="categories" class="tab-pane">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Tital</th>
                            <th scope="col">Delete</th>
                            <th scope="col">Edit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php
        if ($userData->num_rows()>0) {
          $i = 1;
        foreach ($datarow as $row) {

          echo "<tr>
                    <td>".$i."</td>
                    <td><a href='".base_url()."yogiccoach/articles_views?id=".$row->fld_id."' >".$row->fld_title."</a></td>
                    <td><a onclick='javascript:confirmationDelete($(this));return false;' href='".base_url()."yogiccoach/articles_delete?id=".$row->fld_id."' class='btn btn-danger'>Delete</a></td>
                    <td><a href='".base_url()."yogiccoach/articles_edit?id=".$row->fld_id."' class='btn btn-default'>Edit</a></td>
                    </tr>";
                    $i++;
       } }else{
        echo "<div class='text-muted'>Articles Not Added</div>";
       }
        ?>
                    </tbody>
                </table>
                <hr>

            </div>
        </div>
    </div>
    <script>
        CKEDITOR.replace('body');
        function confirmationDelete(anchor) {
            var conf = confirm('Are you sure want to delete this Article?');
            if (conf)
                window.location = anchor.attr("href");
        }
    </script>

    <?php
$this->load->view('yogiccoach/footer');
?></xmp></code></pre>
<p>plan maya meet</p>
<img class="img-fluid" src="image/plancoach.png" alt="Login Page" height="100">
<br><br>
<p>plan controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function plan()
{
$this->load->view('yogiccoach/paymentmode');
}
public function purchase($id)
{
$data = array();
$query=$this->db->get_where('Products',array('status'=>'1','product_id'=>$id));
$product = ($query->num_rows() > 0)?$query->row_array():array();
// If payment form is submitted with token
if($this->input->post('stripeToken')){
// Retrieve stripe token, card and user info from the submitted form data
$postData = $this->input->post();
$postData['product'] = $product;

// Make payment
$paymentID = $this->payment($postData);
// If payment successful
if($paymentID){
redirect('yogiccoach/payment_status/'.$paymentID);
}else{
$apiError = !empty($this->stripe_lib->api_error)?' ('.$this->stripe_lib->api_error.')':'';
$data['error_msg'] = 'Transaction has been failed!'.$apiError;
}
}

// Pass product data to the details view
$data['product'] = $product;
$this->load->view('yogiccoach/details', $data);
}

function payment($postData){

// If post data is not empty
if(!empty($postData)){
// Retrieve stripe token, card and user info from the submitted form data
$token = $postData['stripeToken'];
$name = $postData['name'];
$email = $postData['email'];
$card_number = $postData['card_number'];
$card_number = preg_replace('/\s+/', '', $card_number);
$card_exp_month = $postData['card_exp_month'];
$card_exp_year = $postData['card_exp_year'];
$card_cvc = $postData['card_cvc'];

// Unique order ID
$orderID = strtoupper(str_replace('.','',uniqid('', true)));

// Add customer to stripe
$customer = $this->stripe_lib->addCustomer($email, $token);
if($customer){
// Charge a credit or a debit card
$charge = $this->stripe_lib->createCharge($customer->id, $postData['product']['product_name'],
$postData['product']['product_price'], $orderID);

if($charge){
// Check whether the charge is successful
if($charge['amount_refunded'] == 0 && empty($charge['failure_code']) && $charge['paid'] == 1 && $charge['captured'] ==
1){
// Transaction details
$transactionID = $charge['balance_transaction'];
$paidAmount = $charge['amount'];
$paidAmount = ($paidAmount/100);
$paidCurrency = $charge['currency'];
$payment_status = $charge['status'];


// Insert tansaction data into the database
$orderData = array(
'product_id' => $postData['product']['product_id'],
'buyer_name' => $name,
'buyer_email' => $email,
'card_number' => $card_number,
'card_exp_month' => $card_exp_month,
'card_exp_year' => $card_exp_year,
'paid_amount' => $paidAmount,
'paid_amount_currency' => $paidCurrency,
'txn_id' => $transactionID,
'payment_status' => $payment_status,
'created' => date('Y-m-d h:i:s')
);
// = $this->product->insertOrder($orderData);

$insert = $this->db->insert('orders',$orderData);
$orderID = $this->db->insert_id();

$message = "<head>
    <meta http-equiv='Content-Type' content='text/html; charset=windows-1252'>
    <meta name='GENERATOR' content='MSHTML 11.00.10570.1001'>


<body bgcolor='#ffffff'><strong></strong><strong> </strong><strong></strong>
    <table width='600' align='center' id='TbHeader' bgcolor='#400080' border='0' cellspacing='0' cellpadding='4'>
        <tr>
            <td align='center' id='TdHeader' bgcolor='#400080'>
                <p align='center'>
                    <font color='#ffffff' face='Arial, Helvetica, sans-serif' size='6'><strong>Welcome</strong></font>
                </p>
            </td>
        </tr>
    </table>
    <table width='600' align='center' id='TbBodyRow' border='0' cellspacing='0' cellpadding='0'>
        <tr>
            <td id='TdBodyRow' valign='top' bgcolor='#ffffff'>
                <table width='100%' id='TbBody' bgcolor='#ffffff' border='0' cellspacing='0' cellpadding='4'>
                    <tr>
                        <td align='center' id='TdBody' bgcolor='#ffffff'>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<p align='left'>
                                <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'><strong>Hi
                                        ".$name."&nbsp;<font color='#000000'
                                            face='Verdana, Arial, Helvetica, sans-serif' size='3'>&nbsp;</font></strong>
                                </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </p>
                            <p align='justify' style='margin-right: 0px;'>
                                <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'>you are
                                    successfully subcribe for ".$postData['product']['product_name']." <br><br></font>
                            </p><br></font>
                            </font>
                            </font>
                            </p>
                            <p align='left'><br></p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table><strong></strong><strong></strong><strong> </strong>
    <table width='600' align='center' id='TbFooter' bgcolor='#eea000' border='0' cellspacing='0' cellpadding='4'>
        <tr>
            <td align='center' id='TdFooter' bgcolor='#eea000'>
                <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'>
                    <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                            style='color: rgb(0, 52, 89); line-height: inherit; font-size: inherit; font-weight: bold; text-decoration: inherit;'><span
                                style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: inherit; text-decoration: inherit;'><br></span></span>
                    </div>
                    <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                            style='color: rgb(0, 52, 89); line-height: inherit; font-size: inherit; font-weight: bold; text-decoration: inherit;'><span
                                style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: inherit; text-decoration: inherit;'>Regards</span>,<br
                                style='color: rgb(0, 52, 89);'></span></div>
                    <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                            style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: bold; text-decoration: inherit;'>Team
                            MyportalX</span></div>
                    <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                            style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: bold; text-decoration: inherit;'><br></span>
                    </div>
                </div>
            </td>
        </tr>
    </table>";
$subject = "Payment Succecfuly";
$header = "From:" . $this->config->item('mail_from') . "\r\n";
$header .= "MIME-Version: 1.0\r\n";
$header .= "Content-type: text/html\r\n";
$retval = mail($email,$subject,$message,$header);
// If the order is successful
if($payment_status == 'succeeded'){
return $orderID;
}
}
}
}
}
return false;
}

function payment_status($id){
$data = array();

$this->db->select('*');
$this->db->from('orders');
$this->db->join('Products', 'Products.product_id = orders.product_id', 'left');
$this->db->where('orders.id', $id);
$query = $this->db->get();
$order = $query->row_array();


$favcolor = $order['product_name'];

switch ($favcolor) {
case "Free":
$maya = array(
'fld_user_id' => $this->userid,
'hour' => '20',
'min' => '00',
'sec' => '00',
'milisec' => '00',
'fld_plan_type' => 'Free'
);
$this->db->where('fld_user_id',$this->userid);
$this->db->update('maya_plan',$maya);
break;
case "Silver":
$maya = array(
'fld_user_id' => $this->userid,
'hour' => '25',
'min' => '00',
'sec' => '00',
'milisec' => '00',
'fld_plan_type' => 'Silver'
);
$this->db->where('fld_user_id',$this->userid);
$this->db->update('maya_plan',$maya);
break;
case "Gold":
$maya = array(
'fld_user_id' => $this->userid,
'hour' => '50',
'min' => '00',
'sec' => '00',
'milisec' => '00',
'fld_plan_type' => 'Gold'
);
$this->db->where('fld_user_id',$this->userid);
$this->db->update('maya_plan',$maya);
break;
case "Premium":
$maya = array(
'fld_user_id' => $this->userid,
'hour' => '61',
'min' => '00',
'sec' => '00',
'milisec' => '00',
'fld_plan_type' => 'Premium'
);
$this->db->where('fld_user_id',$this->userid);
$this->db->update('maya_plan',$maya);
break;
}

// Pass order data to the view
$data['order'] = $order;
$this->load->view('yogiccoach/payment-status', $data);
}

public function Subscribe()
{
$this->load->view('yogiccoach/Subscribe');
}

public function create($id)
{
$data = array();
$query=$this->db->get_where('Products',array('status'=>'1','product_id'=>$id));
$product = ($query->num_rows() > 0)?$query->row_array():array();

// If payment form is submitted with token
if($this->input->post('stripeToken')){
// Retrieve stripe token, card and user info from the submitted form data
$postData = $this->input->post();
$postData['product'] = $product;

// Make payment
$paymentID = $this->subscribe_payment($postData);
// If payment successful
if($paymentID){
redirect('yogiccoach/payment_status/'.$paymentID);
}else{
$apiError = !empty($this->stripe_lib->api_error)?' ('.$this->stripe_lib->api_error.')':'';
$data['error_msg'] = 'Transaction has been failed!'.$apiError;
}
}

// Pass product data to the details view
$data['product'] = $product;
$this->load->view('yogiccoach/details', $data);
}

public function subscribe_payment($postData)
{

// If post data is not empty
if(!empty($postData)){
// Retrieve stripe token and user info from the submitted form data
$token = $postData['stripeToken'];
$name = $postData['name'];
$email = $postData['email'];
$card_number = $postData['card_number'];
$card_number = preg_replace('/\s+/', '', $card_number);
$card_exp_month = $postData['card_exp_month'];
$card_exp_year = $postData['card_exp_year'];
$card_cvc = $postData['card_cvc'];
// Plan info
$planName = $postData['product']['product_name'];
$planPrice = $postData['product']['product_price'];
$planInterval = "month";

// Add customer to stripe
$customer = $this->stripe_lib->addCustomer($email, $token);

if($customer){
// Create a plan
$plan = $this->stripe_lib->createPlan($planName, $planPrice, $planInterval);

if($plan){
// Creates a new subscription
$subscription = $this->stripe_lib->createSubscription($customer->id, $plan->id);

if($subscription){
// Check whether the subscription activation is successful
if($subscription['status'] == 'active'){

// Subscription info
$transactionID = $subscription['id'];
$paidAmount = ($subscription['plan']['amount']/100);
$paidCurrency = $subscription['plan']['currency'];
$payment_status = $subscription['status'];

// Insert tansaction data into the database
$orderData = array(
'product_id' => $postData['product']['product_id'],
'buyer_name' => $name,
'buyer_email' => $email,
'card_number' => $card_number,
'card_exp_month' => $card_exp_month,
'card_exp_year' => $card_exp_year,
'paid_amount' => $paidAmount,
'paid_amount_currency' => $paidCurrency,
'txn_id' => $transactionID,
'payment_status' => $payment_status,
'created' => date('Y-m-d h:i:s')
);
// = $this->product->insertOrder($orderData);

$insert = $this->db->insert('orders',$orderData);
$subscription_id = $this->db->insert_id();
$message = "

<head>
    <meta http-equiv='Content-Type' content='text/html; charset=windows-1252'>
    <meta name='GENERATOR' content='MSHTML 11.00.10570.1001'>


<body bgcolor='#ffffff'><strong></strong><strong> </strong><strong></strong>
    <table width='600' align='center' id='TbHeader' bgcolor='#400080' border='0' cellspacing='0' cellpadding='4'>
        <tr>
            <td align='center' id='TdHeader' bgcolor='#400080'>
                <p align='center'>
                    <font color='#ffffff' face='Arial, Helvetica, sans-serif' size='6'><strong>Welcome</strong></font>
                </p>
            </td>
        </tr>
    </table>
    <table width='600' align='center' id='TbBodyRow' border='0' cellspacing='0' cellpadding='0'>
        <tr>
            <td id='TdBodyRow' valign='top' bgcolor='#ffffff'>
                <table width='100%' id='TbBody' bgcolor='#ffffff' border='0' cellspacing='0' cellpadding='4'>
                    <tr>
                        <td align='center' id='TdBody' bgcolor='#ffffff'>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<p align='left'>
                                <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'><strong>Hi
                                        ".$name."&nbsp;<font color='#000000'
                                            face='Verdana, Arial, Helvetica, sans-serif' size='3'>&nbsp;</font></strong>
                                </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </p>
                            <p align='justify' style='margin-right: 0px;'>
                                <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'>you are
                                    successfully subcribe for ".$postData['product']['product_name']." <br><br></font>
                            </p><br></font>
                            </font>
                            </font>
                            </p>
                            <p align='left'><br></p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table><strong></strong><strong></strong><strong> </strong>
    <table width='600' align='center' id='TbFooter' bgcolor='#eea000' border='0' cellspacing='0' cellpadding='4'>
        <tr>
            <td align='center' id='TdFooter' bgcolor='#eea000'>
                <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'>
                    <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                            style='color: rgb(0, 52, 89); line-height: inherit; font-size: inherit; font-weight: bold; text-decoration: inherit;'><span
                                style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: inherit; text-decoration: inherit;'><br></span></span>
                    </div>
                    <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                            style='color: rgb(0, 52, 89); line-height: inherit; font-size: inherit; font-weight: bold; text-decoration: inherit;'><span
                                style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: inherit; text-decoration: inherit;'>Regards</span>,<br
                                style='color: rgb(0, 52, 89);'></span></div>
                    <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                            style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: bold; text-decoration: inherit;'>Team
                            MyportalX</span></div>
                    <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                            style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: bold; text-decoration: inherit;'><br></span>
                    </div>
                </div>
            </td>
        </tr>
    </table>";
$subject = "Payment Succecfuly";
$header = "From:" . $this->config->item('mail_from') . "\r\n";
$header .= "MIME-Version: 1.0\r\n";
$header .= "Content-type: text/html\r\n";
$retval = mail($email,$subject,$message,$header);
return $subscription_id;
}
}
}
}
}
return false;
}</xmp></code></pre>
<p>plan view</p>
<code>application/views/yogiccoach/paymentmode.php</code>
<pre><code class="language-html"><xmp><?php 
$this->load->view('yogiccoach/sidebar');
error_reporting(0);
 $session=$this->session->get_userdata();
 $user_id=$session['user_id'];

      $userData = $this->db->get_where('users',array('fld_id'=> $user_id));
      if ($userData->num_rows()>0) {
           $userRow = $userData->row_array();
           $image_path=($userRow['fld_file_name']!='')?$userRow['fld_file_name']:'assets/uploads/member/'.'default.png';
           $image = base_url().$image_path;
           $email = $userRow['fld_email'];
      }
?>
<!-- START BREADCRUMB -->
<ul class="breadcrumb push-down-0">
    <li><img src="https://server.responsivecheck.tk/images/Maya_Video_Talk_Logo_Png.png" width="40"></li>
</ul>
<ul class="breadcrumb push-down-0">
    <li><a href="#">Home</a></li>
    <li class="active">Maya</li>
</ul>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<style>
    .bg-gradient {
        background: #C9D6FF;
        background: -webkit-linear-gradient(to right, #E2E2E2, #C9D6FF);
        background: linear-gradient(to right, #E2E2E2, #C9D6FF);
    }

    ul li {
        margin-bottom: 1.4rem;
    }

    .pricing-divider {
        border-radius: 20px;
        background: #33414e;
        padding: 1em 0 4em;
        position: relative;
    }

    .blue .pricing-divider {
        background: #33414e;
    }

    .green .pricing-divider {
        background: #33414e;
    }

    .red b {
        color: #C64545
    }

    .blue b {
        color: #2D5772
    }

    .green b {
        color: #1AA85C
    }

    .pricing-divider-img {
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 100%;
        height: 80px;
    }

    .deco-layer {
        -webkit-transition: -webkit-transform 0.5s;
        transition: transform 0.5s;
    }

    .btn-custom {
        background: #33414e;
        color: #fff;
        border-radius: 20px
    }

    .img-float {
        width: 50px;
        position: absolute;
        top: -3.5rem;
        right: 1rem
    }

    .princing-item {
        transition: all 150ms ease-out;
    }

    .princing-item:hover {
        transform: scale(1.05);
    }

    .princing-item:hover .deco-layer--1 {
        -webkit-transform: translate3d(15px, 0, 0);
        transform: translate3d(15px, 0, 0);
    }

    .princing-item:hover .deco-layer--2 {
        -webkit-transform: translate3d(-15px, 0, 0);
        transform: translate3d(-15px, 0, 0);
    }
</style>
<?php if (isset($success)): ?>
<div class='success'>
    <?php echo $success; ?>
</div>
<?php else: ?>
<?php if (isset($error)): ?>
<div class='error'>
    <?php echo $error; ?>
</div>
<?php endif ?>
<div class="container-fluid bg-gradient p-5">
    <div class="row m-auto text-center w-75">
        <?php $data=$this->db->get('Products')->result();
        foreach($data as $record){
        ?>
        <div class="col-3 princing-item red">
            <div class="pricing-divider ">
                <h3 class="text-light">
                    <?= $record->product_name ?>
                </h3>

                <h4 class="my-0 display-2 text-light font-weight-normal mb-3"><span class="h3">$</span>
                    <?= $record->product_price ?> <span class="h5">/mo</span>
                </h4>
                <svg class='pricing-divider-img' enable-background='new 0 0 300 100' height='100px' id='Layer_1'
                    preserveAspectRatio='none' version='1.1' viewBox='0 0 300 100' width='300px' x='0px'
                    xml:space='preserve' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'
                    y='0px'>
                    <path class='deco-layer deco-layer--1' d='M30.913,43.944c0,0,42.911-34.464,87.51-14.191c77.31,35.14,113.304-1.952,146.638-4.729
	c48.654-4.056,69.94,16.218,69.94,16.218v54.396H30.913V43.944z' fill='#FFFFFF' opacity='0.6'></path>
                    <path class='deco-layer deco-layer--2' d='M-35.667,44.628c0,0,42.91-34.463,87.51-14.191c77.31,35.141,113.304-1.952,146.639-4.729
	c48.653-4.055,69.939,16.218,69.939,16.218v54.396H-35.667V44.628z' fill='#FFFFFF' opacity='0.6'></path>
                    <path class='deco-layer deco-layer--3' d='M43.415,98.342c0,0,48.283-68.927,109.133-68.927c65.886,0,97.983,67.914,97.983,67.914v3.716
	H42.401L43.415,98.342z' fill='#FFFFFF' opacity='0.7'></path>
                    <path class='deco-layer deco-layer--4' d='M-34.667,62.998c0,0,56-45.667,120.316-27.839C167.484,57.842,197,41.332,232.286,30.428
	c53.07-16.399,104.047,36.903,104.047,36.903l1.333,36.667l-372-2.954L-34.667,62.998z' fill='#FFFFFF'></path>
                </svg>
            </div>
            <div class="card-body bg-white mt-0 shadow">
                <ul class="list-unstyled mb-5 position-relative">
                    <li>
                        <?= $record->product_description ?>
                    </li>
                    <!--<li>Online Automated forms</li>-->
                    <!--<li>Client Accountability Score card</li>-->
                    <!--<li>Negative Energy Detox</li>-->
                    <!--<li>Intention Settings</li>-->
                    <!--<li>Gratitude Journal</li>-->
                    <!--<li>Direct message & chat line</li>-->
                    <!--<li>Appointment Scheduler</li>-->
                </ul>
                <a class="btn btn-info"
                    href="<?php echo base_url('yogiccoach/purchase/'.$record->product_id); ?>">pay</a>
                </form>
            </div>
        </div>

        <?php }
         ?>
    </div>
</div>
<?php endif ?>
<?php $this->load->view('yogiccoach/footer'); ?></xmp></code></pre>
<p>plan detail view</p>
<code>application/views/yogiccoach/details.php</code>
<pre><code class="language-html"><xmp><?php 
error_reporting(0);
 $session=$this->session->get_userdata();
 $user_id=$session['user_id'];

      $userData = $this->db->get_where('users',array('fld_id'=> $user_id));
      if ($userData->num_rows()>0) {
           $userRow = $userData->row_array();
           $image_path=($userRow['fld_file_name']!='')?$userRow['fld_file_name']:'assets/uploads/member/'.'default.png';
           $image = base_url().$image_path;
           $email = $userRow['fld_email'];
           $username = $userRow['fld_username'];
      }
?>
<!DOCTYPE html>
<html lang="en-US">

<head>
    <title>Purchase - Stripe Payment Gateway Integration</title>
    <meta charset="utf-8">
    <!-- Stripe JavaScript library -->
    <script src="https://js.stripe.com/v2/"></script>

    <!-- jQuery is used only for this example; it isn't required to use Stripe -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        .container {
            padding: 20px;
        }

        h1 {
            color: #7a7a7a;
            font-size: 28px;
            text-transform: uppercase;
            text-align: center;
        }

        .pro-box {
            width: 25%;
            position: relative;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-orient: vertical;
            -webkit-box-direction: normal;
            -ms-flex-direction: column;
            flex-direction: column;
            min-width: 0;
            word-wrap: break-word;
            background-color: #fff;
            background-clip: border-box;
            border: 1px solid rgba(0, 0, 0, .125);
            border-radius: .25rem;
            float: left;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .pro-box .info {
            -webkit-box-flex: 1;
            -ms-flex: 1 1 auto;
            flex: 1 1 auto;
            padding: 1.25rem;
        }

        .pro-box h4 {
            font-size: 1.25rem;
            font-weight: 500;
            margin-bottom: .75rem;
            color: #333;
            margin-top: 0;
        }

        .pro-box h5 {
            font-size: 1rem;
            font-weight: 500;
            margin-bottom: .75rem;
            color: #666;
        }

        .action {
            padding: 10px;
        }

        .action a {
            display: inline-block;
            font-weight: 400;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            border: 1px solid transparent;
            padding: .375rem .75rem;
            font-size: 1rem;
            line-height: 1.5;
            border-radius: .25rem;
            transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;
            color: #fff;
            background-color: #007bff;
            border-color: #007bff;
            text-decoration: none;
        }

        .action a:hover,
        .action a:active {
            color: #fff;
            background-color: #0069d9;
            border-color: #0062cc;
        }

        .action a:hover {
            color: #fff;
            background-color: #0069d9;
            border-color: #0062cc;
        }

        .action a:focus {
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, .5);
        }

        .panel {
            width: 350px;
            margin: 0 auto;
            background-color: #fff;
            border: 1px solid transparent;
            border-radius: 4px;
            -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12);
            border-color: #ddd;
        }

        .panel-heading {
            padding: 10px 15px;
            border-bottom: 1px solid transparent;
            border-top-left-radius: 3px;
            border-top-right-radius: 3px;
        }

        .panel>.panel-heading {
            color: #333;
            background-color: #f5f5f5;
            border-color: #ddd;
        }

        .panel-title {
            margin-top: 0;
            margin-bottom: 0;
            font-size: 20px;
            color: #333;
            font-weight: 600;
        }

        .panel-body {
            padding: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: inline-block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group input {
            display: block;
            width: 90%;
            height: 30px;
            padding: 6px 12px;
            font-size: 15px;
            line-height: 1.42857143;
            color: #555;
            background-color: #fff;
            background-image: none;
            border: 1px solid #ccc;
            border-radius: 4px;
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
            -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
            transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
        }

        .form-group input:focus {
            border-color: #66afe9;
            outline: 0;
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, .6);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, .6);
        }

        .row .left {
            width: 52%;
            float: left;
        }

        .row .right {
            width: 40%;
            float: right;
        }

        .form-group .col-1 {
            width: 25%;
            float: left;
            position: relative;
            margin-right: 20px;
        }

        .form-group .col-2 {
            width: 38%;
            float: left;
            position: relative;
            margin-left: 18px;
        }

        .right .form-group input {
            width: 75%;
        }

        .btn {
            width: 100%;
            padding: 10px 16px;
            font-size: 18px;
            line-height: 1.33;
            border-radius: 6px;
            border: none;
            cursor: pointer;
        }

        .btn-success {
            color: #fff;
            background-color: #5cb85c;
            border-color: #4cae4c;
        }

        .btn-success:hover,
        .btn-success:focus,
        .btn-success:active,
        .btn-success.active {
            color: #fff;
            background-color: #47a447;
            border-color: #398439;
        }

        .card-errors p {
            font-size: 17px;
            border: 1px dashed;
            padding: 10px;
            color: #EA4335;
        }

        .status {
            padding: 15px;
            color: #000;
            background-color: #f1f1f1;
            box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12);
            margin-bottom: 20px;
        }

        .status h1 {
            font-size: 1.8em;
        }

        .status h4 {
            font-size: 1.3em;
            margin-bottom: 0;
        }

        .status p {
            font-size: 1em;
            margin-bottom: 0;
            margin-top: 8px;
        }

        .btn-link {
            display: inline-block;
            font-weight: 400;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            border: 1px solid transparent;
            padding: .375rem .75rem;
            font-size: 1rem;
            line-height: 1.5;
            border-radius: .25rem;
            transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;
            text-decoration: none;
        }

        .btn-link {
            color: #007bff;
            background-color: transparent;
            border-color: #007bff;
        }

        .btn-link:hover,
        .btn-link:active,
        .btn-link:focus {
            color: #fff;
            background-color: #007bff;
            border-color: #007bff;
            text-decoration: none;
        }

        .success {
            color: #34A853;
        }

        .error {
            color: #EA4335;
        }
    </style>
    <script>
        // Set your publishable key
        Stripe.setPublishableKey('<?php echo $this->config->item('stripe_publishable_key'); ?>');

        // Callback to handle the response from stripe
        function stripeResponseHandler(status, response) {
            if (response.error) {
                // Enable the submit button
                $('#payBtn').removeAttr("disabled");
                // Display the errors on the form
                $(".card-errors").html('<p>' + response.error.message + '</p>');
            } else {
                var form$ = $("#paymentFrm");
                // Get token id
                var token = response.id;
                // Insert the token into the form
                form$.append("<input type='hidden' name='stripeToken' value='" + token + "' />");
                // Submit form to the server
                form$.get(0).submit();
            }
        }

        $(document).ready(function () {
            // On form submit
            $("#paymentFrm").submit(function () {
                // Disable the submit button to prevent repeated clicks
                $('#payBtn').attr("disabled", "disabled");

                // Create single-use token to charge the user
                Stripe.createToken({
                    number: $('#card_number').val(),
                    exp_month: $('#card_exp_month').val(),
                    exp_year: $('#card_exp_year').val(),
                    cvc: $('#card_cvc').val()
                }, stripeResponseHandler);

                // Submit from callback
                return false;
            });
        });
    </script>


<body>
    <div class="container">
        <h1>Myportalx.com Maya module Purchase</h1>
        <div class="panel">
            <div class="panel-heading">
                <!-- Product Info -->
                <p><b>Plan Name:</b>
                    <?php echo $product['product_name']; ?>
                </p>
                <p><b>Price:</b>
                    <?php echo '$'.$product['product_price'].' '.$product['product_currency']; ?>
                </p>
                <p><b>Email:</b>
                    <?= $email ?>
                </p>
            </div>
            <div class="panel-body">
                <!-- Display errors returned by createToken -->
                <div class="card-errors"></div>

                <!-- Payment form -->
                <form action="" method="POST" id="paymentFrm">
                    <div class="form-group">
                        <input type="hidden" name="name" id="name" value="<?= $username ?>">
                    </div>
                    <div class="form-group">
                        <input type="hidden" name="email" id="email" value="<?= $email ?>">
                    </div>
                    <div class="form-group">
                        <label>CARD NUMBER</label>
                        <input type="text" name="card_number" id="card_number" placeholder="1234 1234 1234 1234"
                            autocomplete="off" required="">
                    </div>
                    <div class="row">
                        <div class="left">
                            <div class="form-group">
                                <label>EXPIRY DATE</label>
                                <div class="col-1">
                                    <input type="text" name="card_exp_month" id="card_exp_month" placeholder="MM"
                                        required="">
                                </div>
                                <div class="col-2">
                                    <input type="text" name="card_exp_year" id="card_exp_year" placeholder="YYYY"
                                        required="">
                                </div>
                            </div>
                        </div>
                        <div class="right">
                            <div class="form-group">
                                <label>CVC CODE</label>
                                <input type="text" name="card_cvc" id="card_cvc" placeholder="CVC" autocomplete="off"
                                    required="">
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-success" id="payBtn">Submit Payment</button>
                </form>
            </div>
        </div>
    </div>
</xmp></code></pre>
<p>plan payment status view</p>
<code>application/views/yogiccoach/payment_status.php</code>
<pre><code class="language-html"><xmp><!DOCTYPE html>
<html lang="en-US">

<head>
    <title>Stripe Payment Status</title>
    <meta charset="utf-8">
    <style>
        .container {
            padding: 20px;
        }

        h1 {
            color: #7a7a7a;
            font-size: 28px;
            text-transform: uppercase;
            text-align: center;
        }

        .pro-box {
            width: 25%;
            position: relative;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-orient: vertical;
            -webkit-box-direction: normal;
            -ms-flex-direction: column;
            flex-direction: column;
            min-width: 0;
            word-wrap: break-word;
            background-color: #fff;
            background-clip: border-box;
            border: 1px solid rgba(0, 0, 0, .125);
            border-radius: .25rem;
            float: left;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .pro-box .info {
            -webkit-box-flex: 1;
            -ms-flex: 1 1 auto;
            flex: 1 1 auto;
            padding: 1.25rem;
        }

        .pro-box h4 {
            font-size: 1.25rem;
            font-weight: 500;
            margin-bottom: .75rem;
            color: #333;
            margin-top: 0;
        }

        .pro-box h5 {
            font-size: 1rem;
            font-weight: 500;
            margin-bottom: .75rem;
            color: #666;
        }

        .action {
            padding: 10px;
        }

        .action a {
            display: inline-block;
            font-weight: 400;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            border: 1px solid transparent;
            padding: .375rem .75rem;
            font-size: 1rem;
            line-height: 1.5;
            border-radius: .25rem;
            transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;
            color: #fff;
            background-color: #007bff;
            border-color: #007bff;
            text-decoration: none;
        }

        .action a:hover,
        .action a:active {
            color: #fff;
            background-color: #0069d9;
            border-color: #0062cc;
        }

        .action a:hover {
            color: #fff;
            background-color: #0069d9;
            border-color: #0062cc;
        }

        .action a:focus {
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, .5);
        }

        .panel {
            width: 350px;
            margin: 0 auto;
            background-color: #fff;
            border: 1px solid transparent;
            border-radius: 4px;
            -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12);
            border-color: #ddd;
        }

        .panel-heading {
            padding: 10px 15px;
            border-bottom: 1px solid transparent;
            border-top-left-radius: 3px;
            border-top-right-radius: 3px;
        }

        .panel>.panel-heading {
            color: #333;
            background-color: #f5f5f5;
            border-color: #ddd;
        }

        .panel-title {
            margin-top: 0;
            margin-bottom: 0;
            font-size: 20px;
            color: #333;
            font-weight: 600;
        }

        .panel-body {
            padding: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: inline-block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group input {
            display: block;
            width: 90%;
            height: 30px;
            padding: 6px 12px;
            font-size: 15px;
            line-height: 1.42857143;
            color: #555;
            background-color: #fff;
            background-image: none;
            border: 1px solid #ccc;
            border-radius: 4px;
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
            -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
            transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
        }

        .form-group input:focus {
            border-color: #66afe9;
            outline: 0;
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, .6);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, .6);
        }

        .row .left {
            width: 52%;
            float: left;
        }

        .row .right {
            width: 40%;
            float: right;
        }

        .form-group .col-1 {
            width: 25%;
            float: left;
            position: relative;
            margin-right: 20px;
        }

        .form-group .col-2 {
            width: 38%;
            float: left;
            position: relative;
            margin-left: 18px;
        }

        .right .form-group input {
            width: 75%;
        }

        .btn {
            width: 100%;
            padding: 10px 16px;
            font-size: 18px;
            line-height: 1.33;
            border-radius: 6px;
            border: none;
            cursor: pointer;
        }

        .btn-success {
            color: #fff;
            background-color: #5cb85c;
            border-color: #4cae4c;
        }

        .btn-success:hover,
        .btn-success:focus,
        .btn-success:active,
        .btn-success.active {
            color: #fff;
            background-color: #47a447;
            border-color: #398439;
        }

        .card-errors p {
            font-size: 17px;
            border: 1px dashed;
            padding: 10px;
            color: #EA4335;
        }

        .status {
            padding: 15px;
            color: #000;
            background-color: #f1f1f1;
            box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12);
            margin-bottom: 20px;
        }

        .status h1 {
            font-size: 1.8em;
        }

        .status h4 {
            font-size: 1.3em;
            margin-bottom: 0;
        }

        .status p {
            font-size: 1em;
            margin-bottom: 0;
            margin-top: 8px;
        }

        .btn-link {
            display: inline-block;
            font-weight: 400;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            border: 1px solid transparent;
            padding: .375rem .75rem;
            font-size: 1rem;
            line-height: 1.5;
            border-radius: .25rem;
            transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;
            text-decoration: none;
        }

        .btn-link {
            color: #007bff;
            background-color: transparent;
            border-color: #007bff;
        }

        .btn-link:hover,
        .btn-link:active,
        .btn-link:focus {
            color: #fff;
            background-color: #007bff;
            border-color: #007bff;
            text-decoration: none;
        }

        .success {
            color: #34A853;
        }

        .error {
            color: #EA4335;
        }
    </style>
    <!-- Stylesheet file -->


<body>
    <div class="container">
        <div class="status">
            <?php if(!empty($order)){ ?>

            <!-- Display transaction status -->
            <?php if($order['payment_status'] == 'succeeded' || $order['payment_status'] == 'active'){ ?>
            <h1 class="success">Your Payment has been Successful!</h1>
            <?php }else{ ?>
            <h1 class="error">The transaction was successful! But your payment has been failed!</h1>
            <?php } ?>

            <h4>Payment Information</h4>
            <p><b>Reference Number:</b>
                <?php echo $order['id']; ?>
            </p>
            <p><b>Transaction ID:</b>
                <?php echo $order['txn_id']; ?>
            </p>
            <p><b>Paid Amount:</b>
                <?php echo $order['paid_amount'].' '.$order['paid_amount_currency']; ?>
            </p>
            <p><b>Payment Status:</b>
                <?php echo $order['payment_status']; ?>
            </p>

            <h4>Product Information</h4>
            <p><b>Name:</b>
                <?php echo $order['product_name']; ?>
            </p>
            <p><b>Price:</b>
                <?php echo $order['product_price'].' '.$order['product_price_currency']; ?>
            </p>
            <?php }else{ ?>
            <h1 class="error">The transaction has failed</h1>
            <?php } ?>
        </div>
        <a href="<?php echo base_url('yogiccoach'); ?>" class="btn-link">Back to Product Page</a>
    </div></xmp></code></pre>
    <p>plan Subscribe view</p>
    <code>application/views/yogiccoach/Subscribe.php</code>
    <pre><code class="language-html"><xmp><?php 
    $this->load->view('yogiccoach/sidebar');
    error_reporting(0);
     $session=$this->session->get_userdata();
     $user_id=$session['user_id'];
    
          $userData = $this->db->get_where('users',array('fld_id'=> $user_id));
          if ($userData->num_rows()>0) {
               $userRow = $userData->row_array();
               $image_path=($userRow['fld_file_name']!='')?$userRow['fld_file_name']:'assets/uploads/member/'.'default.png';
               $image = base_url().$image_path;
               $email = $userRow['fld_email'];
          }
    ?>
    <!-- START BREADCRUMB -->
    <ul class="breadcrumb push-down-0">
        <li><img src="https://server.responsivecheck.tk/images/Maya_Video_Talk_Logo_Png.png" width="40"></li>
    </ul>
    <ul class="breadcrumb push-down-0">
        <li><a href="#">Home</a></li>
        <li class="active">Maya</li>
    </ul>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <style>
        .bg-gradient {
            background: #C9D6FF;
            background: -webkit-linear-gradient(to right, #E2E2E2, #C9D6FF);
            background: linear-gradient(to right, #E2E2E2, #C9D6FF);
        }
    
        ul li {
            margin-bottom: 1.4rem;
        }
    
        .pricing-divider {
            border-radius: 20px;
            background: #33414e;
            padding: 1em 0 4em;
            position: relative;
        }
    
        .blue .pricing-divider {
            background: #33414e;
        }
    
        .green .pricing-divider {
            background: #33414e;
        }
    
        .red b {
            color: #C64545
        }
    
        .blue b {
            color: #2D5772
        }
    
        .green b {
            color: #1AA85C
        }
    
        .pricing-divider-img {
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 80px;
        }
    
        .deco-layer {
            -webkit-transition: -webkit-transform 0.5s;
            transition: transform 0.5s;
        }
    
        .btn-custom {
            background: #33414e;
            color: #fff;
            border-radius: 20px
        }
    
        .img-float {
            width: 50px;
            position: absolute;
            top: -3.5rem;
            right: 1rem
        }
    
        .princing-item {
            transition: all 150ms ease-out;
        }
    
        .princing-item:hover {
            transform: scale(1.05);
        }
    
        .princing-item:hover .deco-layer--1 {
            -webkit-transform: translate3d(15px, 0, 0);
            transform: translate3d(15px, 0, 0);
        }
    
        .princing-item:hover .deco-layer--2 {
            -webkit-transform: translate3d(-15px, 0, 0);
            transform: translate3d(-15px, 0, 0);
        }
    </style>
    <?php if (isset($success)): ?>
    <div class='success'>
        <?php echo $success; ?>
    </div>
    <?php else: ?>
    <?php if (isset($error)): ?>
    <div class='error'>
        <?php echo $error; ?>
    </div>
    <?php endif ?>
    <div class="container-fluid bg-gradient p-5">
        <div class="row m-auto text-center w-75">
            <?php $data=$this->db->get('Products')->result();
            foreach($data as $record){
            ?>
            <div class="col-3 princing-item red">
                <div class="pricing-divider ">
                    <h3 class="text-light">
                        <?= $record->product_name ?>
                    </h3>
    
                    <h4 class="my-0 display-2 text-light font-weight-normal mb-3"><span class="h3">$</span>
                        <?= $record->product_price ?> <span class="h5">/mo</span>
                    </h4>
                    <svg class='pricing-divider-img' enable-background='new 0 0 300 100' height='100px' id='Layer_1'
                        preserveAspectRatio='none' version='1.1' viewBox='0 0 300 100' width='300px' x='0px'
                        xml:space='preserve' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'
                        y='0px'>
                        <path class='deco-layer deco-layer--1' d='M30.913,43.944c0,0,42.911-34.464,87.51-14.191c77.31,35.14,113.304-1.952,146.638-4.729
    	c48.654-4.056,69.94,16.218,69.94,16.218v54.396H30.913V43.944z' fill='#FFFFFF' opacity='0.6'></path>
                        <path class='deco-layer deco-layer--2' d='M-35.667,44.628c0,0,42.91-34.463,87.51-14.191c77.31,35.141,113.304-1.952,146.639-4.729
    	c48.653-4.055,69.939,16.218,69.939,16.218v54.396H-35.667V44.628z' fill='#FFFFFF' opacity='0.6'></path>
                        <path class='deco-layer deco-layer--3' d='M43.415,98.342c0,0,48.283-68.927,109.133-68.927c65.886,0,97.983,67.914,97.983,67.914v3.716
    	H42.401L43.415,98.342z' fill='#FFFFFF' opacity='0.7'></path>
                        <path class='deco-layer deco-layer--4' d='M-34.667,62.998c0,0,56-45.667,120.316-27.839C167.484,57.842,197,41.332,232.286,30.428
    	c53.07-16.399,104.047,36.903,104.047,36.903l1.333,36.667l-372-2.954L-34.667,62.998z' fill='#FFFFFF'></path>
                    </svg>
                </div>
                <div class="card-body bg-white mt-0 shadow">
                    <ul class="list-unstyled mb-5 position-relative">
                        <li>
                            <?= $record->product_description ?>
                        </li>
                        <!--<li>Online Automated forms</li>-->
                        <!--<li>Client Accountability Score card</li>-->
                        <!--<li>Negative Energy Detox</li>-->
                        <!--<li>Intention Settings</li>-->
                        <!--<li>Gratitude Journal</li>-->
                        <!--<li>Direct message & chat line</li>-->
                        <!--<li>Appointment Scheduler</li>-->
                    </ul>
                    <a class="btn btn-lg btn-block  btn-custom "
                        href="<?= base_url('yogiccoach/create/'.$record->product_id) ?>">Subscribe Now</a>
                </div>
            </div>
    
            <?php }
             ?>
        </div>
    </div>
    <?php endif ?>
    <?php $this->load->view('yogiccoach/footer'); ?></xmp></code></pre>
<p>edite profile</p>
<img class="img-fluid" src="image/editeprogilecoach.png" alt="Login Page" height="100">
<br><br>
<p>profile edite controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function setting_edit_profile()
{
$this->load->view('yogiccoach/setting_edit_profile');
}</xmp></code></pre>
<p>profile edite view</p>
<code>application/views/yogiccoach/setting_edit_profile.php</code>
<pre><code class="language-html"><xmp><?php             
 $this->load->view('yogiccoach/sidebar');
 $session=$this->session->get_userdata();
 $user_id=$session['user_id'];
 if(isset($session['profile_path'])){
	 echo $session['profile_path'];
 }
 
error_reporting(0);
$userData = $this->db->get_where('users',array('fld_id'=> $user_id));
 if ($userData->num_rows()>0) {
   $userRow = $userData->row_array();
}
$querys = @unserialize (file_get_contents('http://ip-api.com/php/'));
	$image_path=($userRow['fld_file_name']!='')?$userRow['fld_file_name']:'assets/uploads/member/'.'default.png';
	$image = base_url().$image_path;
if(isset($_REQUEST['save'])){
	$first_name=$_REQUEST['first_name'];
	$last_name=$_REQUEST['last_name'];
	$paypalId=$_REQUEST['paypalId'];
	$location=$_REQUEST['location'];
	$phone=$_REQUEST['phone'];
    $fld_fb_link = $_REQUEST['fld_fb_link'];
    $fld_web_link = $_REQUEST['fld_web_link'];
	$about_me=$_REQUEST['about_me'];
    $timezone = $_REQUEST["timezones"];

	$newData = array(
                  'fld_first_name' => $first_name,
                  'fld_last_name' => $last_name,
                  'fld_paypal_id' => $paypalId,
                  'fld_location' => $location,
                  'fld_timezone' => $timezone,
                  'fld_phone' => $phone,
                  'fld_fb_link' => $fld_fb_link,
                  'fld_web_link' => $fld_web_link,
                  'fld_about_me' => $about_me,
                  'fld_added_date' => time(),
                  'fld_modified_date' => time(),
				);
       $this->db->where('fld_id', $user_id);
       $this->db->update('users', $newData);
	           if($this->db->affected_rows()){
				   echo "<div   class=\"alert alert-success\"><strong>Profile Updated Successfully! </strong><a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a></div>";
                   //Update Session
                   $userData = $this->db->get_where('users',array('fld_id'=> $user_id));
                   if ($userData->num_rows()>0) {
                       $userRow = $userData->row_array();
                       $sessiondata = array(
                           'username'  => $userRow["fld_username"],
                           'user_id'  => $userRow['fld_id'],
                           'user_type'  => $userRow['fld_user_type'],
                           'varification_code'  => $userRow['fld_varification'],
                           'user_timezone' => $userRow["fld_timezone"],
                           'logged_in' => TRUE
                       );
                       $this->session->set_userdata($sessiondata);
                   }
			   }else{
				   echo "Database Error..";
			   }
}

if (isset($_POST['submit'])) {
    $profession = $_POST['prof'];
    $data = array('fld_profession' => implode(',', $profession)); 
    $this->db->where('fld_id', $user_id);
    $this->db->update('users', $data);
    header("Refresh:0");
}

$error       = false;
$ds          = DIRECTORY_SEPARATOR;
$storeFolder = 'assets/uploads/member/';
$is_blank=true;

if ($_POST['Accept']) {
  $name = $_FILES['file']['name'];
  $tmp_name = $_FILES["file"]["tmp_name"];
  $targetPath = FCPATH . $storeFolder . $ds;
  $targetFile = $targetPath. $name;
  $info = getimagesize($tmp_name);

            if ($info['mime'] == 'image/jpeg'){ 
                $image = imagecreatefromjpeg($tmp_name);

}
            elseif ($info['mime'] == 'image/gif') {
                $image = imagecreatefromgif($tmp_name);
            }

            elseif ($info['mime'] == 'image/png') {
                $image = imagecreatefrompng($tmp_name);
            }

            imagejpeg($image, $targetFile, 20);
  // move_uploaded_file($tmp_name,$targetFile);
  $save_image = 'assets/uploads/member/'.$name; 

  $this->db->where("fld_id", $user_id);
            $this->db->set("fld_file_name", $save_image);
            $this->db->update("users");
            if($this->db->affected_rows() >=0){
  header("refresh: 0");
}else{
  echo "error";
}
}

$microsoftWindowsTimeZones = [
    'Dateline Standard Time' => 'Etc/GMT+12',
    'UTC-11' => 'Etc/GMT+11',
    'Aleutian Standard Time' => 'America/Adak',
    'Hawaiian Standard Time' => 'Etc/GMT+10',
    'Marquesas Standard Time' => 'Pacific/Marquesas',
    'Alaskan Standard Time' => 'America/Anchorage',
    'UTC-09' => 'Etc/GMT+9',
    'Pacific Standard Time (Mexico)' => 'America/Tijuana',
    'UTC-08' => 'Etc/GMT+8',
    'Pacific Standard Time' => 'PST8PDT',
    'US Mountain Standard Time' => 'Etc/GMT+7',
    'Mountain Standard Time (Mexico)' => 'America/Chihuahua',
    'Mountain Standard Time' => 'MST7MDT',
    'Central America Standard Time' => 'Etc/GMT+6',
    'Central Standard Time' => 'CST6CDT',
    'Easter Island Standard Time' => 'Pacific/Easter',
    'Central Standard Time (Mexico)' => 'America/Mexico_City',
    'Canada Central Standard Time' => 'America/Regina',
    'SA Pacific Standard Time' => 'Etc/GMT+5',
    'Eastern Standard Time (Mexico)' => 'America/Cancun',
    'Eastern Standard Time' => 'EST5EDT',
    'Haiti Standard Time' => 'America/Port-au-Prince',
    'Cuba Standard Time' => 'America/Havana',
    'US Eastern Standard Time' => 'America/Indianapolis',
    'Paraguay Standard Time' => 'America/Asuncion',
    'Atlantic Standard Time' => 'America/Thule',
    'Venezuela Standard Time' => 'America/Caracas',
    'Central Brazilian Standard Time' => 'America/Cuiaba',
    'SA Western Standard Time' => 'Etc/GMT+4',
    'Pacific SA Standard Time' => 'America/Santiago',
    'Turks And Caicos Standard Time' => 'America/Grand_Turk',
    'Newfoundland Standard Time' => 'America/St_Johns',
    'Tocantins Standard Time' => 'America/Araguaina',
    'E. South America Standard Time' => 'America/Sao_Paulo',
    'SA Eastern Standard Time' => 'Etc/GMT+3',
    'Argentina Standard Time' => 'America/Buenos_Aires',
    'Greenland Standard Time' => 'America/Godthab',
    'Montevideo Standard Time' => 'America/Montevideo',
    'Magallanes Standard Time' => 'America/Punta_Arenas',
    'Saint Pierre Standard Time' => 'America/Miquelon',
    'Bahia Standard Time' => 'America/Bahia',
    'UTC-02' => 'Etc/GMT+2',
    'Azores Standard Time' => 'Atlantic/Azores',
    'Cape Verde Standard Time' => 'Etc/GMT+1',
    'UTC' => 'Etc/GMT',
    'GMT Standard Time' => 'Europe/Lisbon',
    'Greenwich Standard Time' => 'Africa/Lome',
    'W. Europe Standard Time' => 'Europe/Vatican',
    'Central Europe Standard Time' => 'Europe/Bratislava',
    'Romance Standard Time' => 'Europe/Paris',
    'Morocco Standard Time' => 'Africa/Casablanca',
    'Sao Tome Standard Time' => 'Africa/Sao_Tome',
    'Central European Standard Time' => 'Europe/Warsaw',
    'W. Central Africa Standard Time' => 'Etc/GMT-1',
    'Jordan Standard Time' => 'Asia/Amman',
    'GTB Standard Time' => 'Europe/Bucharest',
    'Middle East Standard Time' => 'Asia/Beirut',
    'Egypt Standard Time' => 'Africa/Cairo',
    'E. Europe Standard Time' => 'Europe/Chisinau',
    'Syria Standard Time' => 'Asia/Damascus',
    'West Bank Standard Time' => 'Asia/Hebron',
    'South Africa Standard Time' => 'Etc/GMT-2',
    'FLE Standard Time' => 'Europe/Kiev',
    'Israel Standard Time' => 'Asia/Jerusalem',
    'Kaliningrad Standard Time' => 'Europe/Kaliningrad',
    'Sudan Standard Time' => 'Africa/Khartoum',
    'Libya Standard Time' => 'Africa/Tripoli',
    'Namibia Standard Time' => 'Africa/Windhoek',
    'Arabic Standard Time' => 'Asia/Baghdad',
    'Turkey Standard Time' => 'Europe/Istanbul',
    'Arab Standard Time' => 'Asia/Aden',
    'Belarus Standard Time' => 'Europe/Minsk',
    'Russian Standard Time' => 'Europe/Simferopol',
    'E. Africa Standard Time' => 'Etc/GMT-3',
    'Iran Standard Time' => 'Asia/Tehran',
    'Arabian Standard Time' => 'Etc/GMT-4',
    'Astrakhan Standard Time' => 'Europe/Astrakhan',
    'Azerbaijan Standard Time' => 'Asia/Baku',
    'Russia Time Zone 3' => 'Europe/Samara',
    'Mauritius Standard Time' => 'Indian/Mahe',
    'Saratov Standard Time' => 'Europe/Saratov',
    'Georgian Standard Time' => 'Asia/Tbilisi',
    'Caucasus Standard Time' => 'Asia/Yerevan',
    'Afghanistan Standard Time' => 'Asia/Kabul',
    'West Asia Standard Time' => 'Etc/GMT-5',
    'Ekaterinburg Standard Time' => 'Asia/Yekaterinburg',
    'Pakistan Standard Time' => 'Asia/Karachi',
    'India Standard Time' => 'Asia/Calcutta',
    'Sri Lanka Standard Time' => 'Asia/Colombo',
    'Nepal Standard Time' => 'Asia/Katmandu',
    'Central Asia Standard Time' => 'Etc/GMT-6',
    'Bangladesh Standard Time' => 'Asia/Thimphu',
    'Omsk Standard Time' => 'Asia/Omsk',
    'Myanmar Standard Time' => 'Asia/Rangoon',
    'SE Asia Standard Time' => 'Etc/GMT-7',
    'Altai Standard Time' => 'Asia/Barnaul',
    'W. Mongolia Standard Time' => 'Asia/Hovd',
    'North Asia Standard Time' => 'Asia/Krasnoyarsk',
    'N. Central Asia Standard Time' => 'Asia/Novosibirsk',
    'Tomsk Standard Time' => 'Asia/Tomsk',
    'China Standard Time' => 'Asia/Macau',
    'North Asia East Standard Time' => 'Asia/Irkutsk',
    'Singapore Standard Time' => 'Etc/GMT-8',
    'W. Australia Standard Time' => 'Australia/Perth',
    'Taipei Standard Time' => 'Asia/Taipei',
    'Ulaanbaatar Standard Time' => 'Asia/Ulaanbaatar',
    'Aus Central W. Standard Time' => 'Australia/Eucla',
    'Transbaikal Standard Time' => 'Asia/Chita',
    'Tokyo Standard Time' => 'Etc/GMT-9',
    'North Korea Standard Time' => 'Asia/Pyongyang',
    'Korea Standard Time' => 'Asia/Seoul',
    'Yakutsk Standard Time' => 'Asia/Yakutsk',
    'Cen. Australia Standard Time' => 'Australia/Adelaide',
    'AUS Central Standard Time' => 'Australia/Darwin',
    'E. Australia Standard Time' => 'Australia/Brisbane',
    'AUS Eastern Standard Time' => 'Australia/Sydney',
    'West Pacific Standard Time' => 'Etc/GMT-10',
    'Tasmania Standard Time' => 'Australia/Hobart',
    'Vladivostok Standard Time' => 'Asia/Vladivostok',
    'Lord Howe Standard Time' => 'Australia/Lord_Howe',
    'Bougainville Standard Time' => 'Pacific/Bougainville',
    'Russia Time Zone 10' => 'Asia/Srednekolymsk',
    'Magadan Standard Time' => 'Asia/Magadan',
    'Norfolk Standard Time' => 'Pacific/Norfolk',
    'Sakhalin Standard Time' => 'Asia/Sakhalin',
    'Central Pacific Standard Time' => 'Etc/GMT-11',
    'Russia Time Zone 11' => 'Asia/Kamchatka',
    'New Zealand Standard Time' => 'Pacific/Auckland',
    'UTC+12' => 'Etc/GMT-12',
    'Fiji Standard Time' => 'Pacific/Fiji',
    'Chatham Islands Standard Time' => 'Pacific/Chatham',
    'UTC+13' => 'Etc/GMT-13',
    'Tonga Standard Time' => 'Pacific/Tongatapu',
    'Samoa Standard Time' => 'Pacific/Apia',
    'Line Islands Standard Time' => 'Etc/GMT-14'
];
 ?>

<style>
    .img-thumbnail {
        width: 192px;
        height: 192px;
    }
</style>

<!-- START BREADCRUMB -->
<ul class="breadcrumb">
    <li><a href="<?php echo base_url()." yogiccoach/";?>">Home</a></li>
    <li class="active"><a href="#">Settings</a></li>
</ul>
<!-- END BREADCRUMB -->

<!-- PAGE TITLE -->
<div class="page-title">
    <h2><span class="fa fa-cogs"></span> Your Profile</h2>
</div>
<!-- END PAGE TITLE -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">
    <div class="row">
        <div class="col-md-12">
            <!-- START JUSTIFIED TABS -->
            <div class="col-md-3 col-sm-4 col-xs-12">
                <form action="#" class="form-horizontal" method="post">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="panel-body">
                                <h3><span class="fa fa-user"></span>
                                    <?php echo $userRow['fld_first_name']; ?>&nbsp;
                                    <?php echo $userRow['fld_last_name']; ?>
                                </h3>
                                <p>&nbsp;</p>
                                <div class="text-center" id="user_image">
                                    <img src="<?php echo $image?>" class="img-thumbnail" />
                                </div>
                            </div>
                            <div class="panel-body form-group-separated">
                                <div class="form-group">
                                    <div class="col-md-12 col-xs-12">
                                        <a href="#" class="btn btn-primary btn-block btn-rounded" name="file_name"
                                            data-toggle="modal" data-target="#modal_change_photo">Change Photo</a>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-3 col-xs-5 control-label">#ID</label>
                                    <div class="col-md-9 col-xs-7">
                                        <input type="text" value="<?php echo $userRow['fld_id']; ?>"
                                            class="form-control" disabled />
                                    </div>
                                </div>


                                <div class="form-group">
                                    <label class="col-md-3 col-xs-5 control-label">Joined</label>
                                    <div class="col-md-9 col-xs-7">
                                        <input type="text" value="<?php echo date(" Y-m-d",$userRow['fld_added_date']);
                                            ?>" class="form-control" disabled/>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-md-12 col-xs-12">
                                        <a href="#" class="btn btn-danger btn-block btn-rounded" data-toggle="modal"
                                            data-target="#modal_change_password">Change password</a>
                                    </div>
                                </div>
                                <div class="panel-body">
                                    <h3>Categories</h3>
                                </div>
                                <?php $pro = $userRow['fld_profession'];
                                    $d = explode(',',$pro); 
                                    ?>

                                <div class="form-group">
                                    <div class="col-md-3 col-xs-5 ">
                                        <input type="checkbox" name="prof[]" value="Mindfulness" <?php if
                                            (in_array('Mindfulness', $d)) { echo "checked='checked'" ; } ?>>
                                    </div>
                                    <label class="col-md-9 col-xs-7">Mindfulness</label>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-3 col-xs-5 ">
                                        <input type="checkbox" name="prof[]" value="productivity" <?php if
                                            (in_array('productivity', $d)) { echo "checked='checked'" ; } ?>>
                                    </div>
                                    <label class="col-md-9 col-xs-7">productivity</label>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-3 col-xs-5 ">
                                        <input type="checkbox" name="prof[]" value="fitness" <?php if
                                            (in_array('fitness', $d)) { echo "checked='checked'" ; } ?>>
                                    </div>
                                    <label class="col-md-9 col-xs-7">fitness</label>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-3 col-xs-5 ">
                                        <input type="checkbox" name="prof[]" value="Save money" <?php if (in_array('Save
                                            money', $d)) { echo "checked='checked'" ; } ?>>
                                    </div>
                                    <label class="col-md-9 col-xs-7">Save money</label>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-3 col-xs-5 ">
                                        <input type="checkbox" name="prof[]" value="diets" <?php if (in_array('diets',
                                            $d)) { echo "checked='checked'" ; } ?>>
                                    </div>
                                    <label class="col-md-9 col-xs-7">diets</label>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-3 col-xs-5 ">
                                        <input type="checkbox" name="prof[]" value="writing" <?php if
                                            (in_array('writing', $d)) { echo "checked='checked'" ; } ?>>
                                    </div>
                                    <label class="col-md-9 col-xs-7">writing</label>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-3 col-xs-5 ">
                                        <input type="checkbox" name="prof[]" value="addiction" <?php if
                                            (in_array('addiction', $d)) { echo "checked='checked'" ; } ?>>
                                    </div>
                                    <label class="col-md-9 col-xs-7">addiction</label>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-12 col-xs-12">
                                        <input type="submit" class="btn btn-rounded btn-primary btn-block" name="submit"
                                            value="submit">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-md-9 col-sm-8 col-xs-12">
                <form action="#" class="form-horizontal" method="post">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="panel-body">
                                <h3><span class="fa fa-pencil"></span>Profile</h3>
                            </div>

                            <div class="panel-body form-group-separated">
                                <div class="form-group">
                                    <label class="col-md-3 col-xs-5 control-label">Login</label>
                                    <div class="col-md-9 col-xs-7">
                                        <input type="text" name="username"
                                            value="<?php echo $userRow['fld_username']; ?>" class="form-control"
                                            disabled />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-md-3 col-xs-5 control-label">E-mail</label>
                                    <div class="col-md-9 col-xs-7">
                                        <input type="text" name="email" value="<?php echo $userRow['fld_email']; ?>"
                                            class="form-control" disabled />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-md-3 col-xs-5 control-label">Subscription Start Date</label>
                                    <div class="col-md-9 col-xs-7">
                                        <input type="text" value="<?php echo date(" Y-m-d",$userRow['fld_start_date']);
                                            ?>" class="form-control" disabled/>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-md-3 col-xs-5 control-label">Subscription Expired On</label>
                                    <div class="col-md-9 col-xs-7">
                                        <input type="text" value="<?php echo  date(" Y-m-d",$userRow['fld_end_date']);
                                            ?>" class="form-control" disabled/>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-md-3 col-xs-5 control-label">First Name</label>
                                    <div class="col-md-9 col-xs-7">
                                        <input type="text" name="first_name"
                                            value="<?php echo $userRow['fld_first_name']; ?>" class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-3 col-xs-5 control-label">Last Name</label>
                                    <div class="col-md-9 col-xs-7">
                                        <input type="text" name="last_name"
                                            value="<?php echo $userRow['fld_last_name']; ?>" class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-3 col-xs-5 control-label">Paypal Email Id</label>
                                    <div class="col-md-9 col-xs-7">
                                        <input type="text" name="paypalId"
                                            value="<?php echo $userRow['fld_paypal_id']; ?>" class="form-control" />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-md-3 col-xs-5 control-label">Location</label>
                                    <div class="col-md-9 col-xs-7">
                                        <input type="text" name="location"
                                            value="<?php echo $userRow['fld_location']; ?>" class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-3 col-xs-5 control-label">Time Zone</label>
                                    <div class="col-md-9 col-xs-7">
                                        <select name="timezones" id="timezoness" class="form-control">
                                            <?php
                                                  foreach ($microsoftWindowsTimeZones as $key => $value) {
                                                   if ($userRow['fld_timezone'] == $value)
                              {
                                  $selected = 'selected="selected"';
                              }
                              else
                              {
                                $selected = '';
                              }
                                                    echo "<option ".$selected." value='".$value."'>".$key."</option>";
                                                  }
                                                  ?>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-3 col-xs-5 control-label">Phone</label>
                                    <div class="col-md-9 col-xs-7">
                                        <input type="text" name="phone" value="<?php echo $userRow['fld_phone']; ?>"
                                            class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-3 col-xs-5 control-label">Facebook Link</label>
                                    <div class="col-md-9 col-xs-7">
                                        <input type="text" name="fld_fb_link"
                                            value="<?php echo $userRow['fld_fb_link']; ?>" class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-3 col-xs-5 control-label">Your Website Link</label>
                                    <div class="col-md-9 col-xs-7">
                                        <input type="text" name="fld_web_link"
                                            value="<?php echo $userRow['fld_web_link']; ?>" class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-3 col-xs-5 control-label">About me</label>
                                    <div class="col-md-9 col-xs-7">
                                        <textarea class="form-control" rows="5"
                                            name="about_me"><?php echo $userRow['fld_about_me']; ?></textarea>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-12 col-xs-12">
                                        <input type="submit" value="Update Profile"
                                            class="btn btn-primary btn-rounded pull-right" name="save">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <!-- END JUSTIFIED TABS -->
        </div>
    </div>
    <!-- END PAGE CONTENT WRAPPER -->
</div>
<!-- END PAGE CONTENT -->
<!-- MODALS -->
<div class="modal animated fadeIn" id="modal_change_photo" tabindex="-1" role="dialog" aria-labelledby="smallModalHead"
    aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">Close</span></button>
                <h4 class="modal-title" id="smallModalHead">Change photo</h4>
            </div>
            <form id="cp_crop" method="post" action="../assets/crop_image.php">
                <div class="modal-body">
                    <div class="text-center" id="cp_target">Use form below to upload file. Only .jpg files.</div>
                    <input type="hidden" name="cp_img_path" id="cp_img_path" />
                    <input type="hidden" name="ic_x" id="ic_x" />
                    <input type="hidden" name="ic_y" id="ic_y" />
                    <input type="hidden" name="ic_w" id="ic_w" />
                    <input type="hidden" name="ic_h" id="ic_h" />
                </div>
            </form>
            <form id="cp_upload" method="post" enctype="multipart/form-data" action="#">
                <div class="modal-body form-horizontal form-group-separated">
                    <div class="form-group">
                        <label class="col-md-4 control-label">New Photo</label>
                        <div class="col-md-4">
                            <input type="file" class="fileinput btn-info" name="file" id="ncp_photo"
                                data-filename-placement="inside" title="Select file" />
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <input type="submit" name="Accept" value="Accept" class="btn btn-success" id="ncp_accept"
                        disabled="disabled">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </form>
        </div>
    </div>
</div>
<form action="#" method="post" class="form-horizontal">
    <div class="modal animated fadeIn" id="modal_change_password" tabindex="-1" role="dialog"
        aria-labelledby="smallModalHead" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span
                            aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title" id="smallModalHead">Change password</h4>
                </div>
                <div id="error_container"></div>
                <div class="modal-body">

                </div>
                <div class="modal-body form-horizontal form-group-separated">
                    <div class="form-group">
                        <label class="col-md-3 control-label">Old Password</label>
                        <div class="col-md-9">
                            <input type="password" class="form-control" id="old_password" required />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label">New Password</label>
                        <div class="col-md-9">
                            <input type="password" class="form-control" id="new_password" required />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label">Repeat New</label>
                        <div class="col-md-9">
                            <input type="password" class="form-control" id="re_password" required />
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="#" class="btn btn-danger" id="proccess_change_password_student">Proccess</a>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</form>
<!-- EOF MODALS -->

<!-- BLUEIMP GALLERY -->
<div id="blueimp-gallery" class="blueimp-gallery blueimp-gallery-controls">
    <div class="slides"></div>
    <h3 class="title"></h3>
    <a class="prev">‹</a>
    <a class="next">›</a>
    <a class="close">×</a>
    <a class="play-pause"></a>
    <ol class="indicator"></ol>
</div>
<!-- END BLUEIMP GALLERY -->

<script>
    $(document).ready(function () {
        $("#ncp_photo").change(function () {
            var file = $(this).val();
            $("#ncp_accept").prop("disabled", false);
        });
    });
</script>

<?php
$this->load->view('yogiccoach/footer');
?></xmp></code></pre>
<p>Maya Appointment</p>
<img class="img-fluid" src="image/mayaschedulercoach.png" alt="Login Page" height="100">
<br><br>
<p>Maya Appointment controller</p>
<code>application/controllers/MayaAppointment.php</code>
<pre><code class="language-html"><xmp>public function MayaAppointment()
    {
    $this->load->view('yogiccoach/appointment_maya');
    }</xmp></code></pre>
<p>Maya Appointment view</p>
<code>application/views/yogiccoach/appointment_maya.php</code>
<pre><code class="language-html"><xmp><?php $this->load->view('yogiccoach/sidebar'); 
error_reporting(0);
 $session=$this->session->get_userdata();
 $user_id=$session['user_id'];
$microsoftWindowsTimeZones = [
    'Dateline Standard Time' => 'Etc/GMT+12',
    'UTC-11' => 'Etc/GMT+11',
    'Aleutian Standard Time' => 'America/Adak',
    'Hawaiian Standard Time' => 'Etc/GMT+10',
    'Marquesas Standard Time' => 'Pacific/Marquesas',
    'Alaskan Standard Time' => 'America/Anchorage',
    'UTC-09' => 'Etc/GMT+9',
    'Pacific Standard Time (Mexico)' => 'America/Tijuana',
    'UTC-08' => 'Etc/GMT+8',
    'Pacific Standard Time' => 'PST8PDT',
    'US Mountain Standard Time' => 'Etc/GMT+7',
    'Mountain Standard Time (Mexico)' => 'America/Chihuahua',
    'Mountain Standard Time' => 'MST7MDT',
    'Central America Standard Time' => 'Etc/GMT+6',
    'Central Standard Time' => 'CST6CDT',
    'Easter Island Standard Time' => 'Pacific/Easter',
    'Central Standard Time (Mexico)' => 'America/Mexico_City',
    'Canada Central Standard Time' => 'America/Regina',
    'SA Pacific Standard Time' => 'Etc/GMT+5',
    'Eastern Standard Time (Mexico)' => 'America/Cancun',
    'Eastern Standard Time' => 'EST5EDT',
    'Haiti Standard Time' => 'America/Port-au-Prince',
    'Cuba Standard Time' => 'America/Havana',
    'US Eastern Standard Time' => 'America/Indianapolis',
    'Paraguay Standard Time' => 'America/Asuncion',
    'Atlantic Standard Time' => 'America/Thule',
    'Venezuela Standard Time' => 'America/Caracas',
    'Central Brazilian Standard Time' => 'America/Cuiaba',
    'SA Western Standard Time' => 'Etc/GMT+4',
    'Pacific SA Standard Time' => 'America/Santiago',
    'Turks And Caicos Standard Time' => 'America/Grand_Turk',
    'Newfoundland Standard Time' => 'America/St_Johns',
    'Tocantins Standard Time' => 'America/Araguaina',
    'E. South America Standard Time' => 'America/Sao_Paulo',
    'SA Eastern Standard Time' => 'Etc/GMT+3',
    'Argentina Standard Time' => 'America/Buenos_Aires',
    'Greenland Standard Time' => 'America/Godthab',
    'Montevideo Standard Time' => 'America/Montevideo',
    'Magallanes Standard Time' => 'America/Punta_Arenas',
    'Saint Pierre Standard Time' => 'America/Miquelon',
    'Bahia Standard Time' => 'America/Bahia',
    'UTC-02' => 'Etc/GMT+2',
    'Azores Standard Time' => 'Atlantic/Azores',
    'Cape Verde Standard Time' => 'Etc/GMT+1',
    'UTC' => 'Etc/GMT',
    'GMT Standard Time' => 'Europe/Lisbon',
    'Greenwich Standard Time' => 'Africa/Lome',
    'W. Europe Standard Time' => 'Europe/Vatican',
    'Central Europe Standard Time' => 'Europe/Bratislava',
    'Romance Standard Time' => 'Europe/Paris',
    'Morocco Standard Time' => 'Africa/Casablanca',
    'Sao Tome Standard Time' => 'Africa/Sao_Tome',
    'Central European Standard Time' => 'Europe/Warsaw',
    'W. Central Africa Standard Time' => 'Etc/GMT-1',
    'Jordan Standard Time' => 'Asia/Amman',
    'GTB Standard Time' => 'Europe/Bucharest',
    'Middle East Standard Time' => 'Asia/Beirut',
    'Egypt Standard Time' => 'Africa/Cairo',
    'E. Europe Standard Time' => 'Europe/Chisinau',
    'Syria Standard Time' => 'Asia/Damascus',
    'West Bank Standard Time' => 'Asia/Hebron',
    'South Africa Standard Time' => 'Etc/GMT-2',
    'FLE Standard Time' => 'Europe/Kiev',
    'Israel Standard Time' => 'Asia/Jerusalem',
    'Kaliningrad Standard Time' => 'Europe/Kaliningrad',
    'Sudan Standard Time' => 'Africa/Khartoum',
    'Libya Standard Time' => 'Africa/Tripoli',
    'Namibia Standard Time' => 'Africa/Windhoek',
    'Arabic Standard Time' => 'Asia/Baghdad',
    'Turkey Standard Time' => 'Europe/Istanbul',
    'Arab Standard Time' => 'Asia/Aden',
    'Belarus Standard Time' => 'Europe/Minsk',
    'Russian Standard Time' => 'Europe/Simferopol',
    'E. Africa Standard Time' => 'Etc/GMT-3',
    'Iran Standard Time' => 'Asia/Tehran',
    'Arabian Standard Time' => 'Etc/GMT-4',
    'Astrakhan Standard Time' => 'Europe/Astrakhan',
    'Azerbaijan Standard Time' => 'Asia/Baku',
    'Russia Time Zone 3' => 'Europe/Samara',
    'Mauritius Standard Time' => 'Indian/Mahe',
    'Saratov Standard Time' => 'Europe/Saratov',
    'Georgian Standard Time' => 'Asia/Tbilisi',
    'Caucasus Standard Time' => 'Asia/Yerevan',
    'Afghanistan Standard Time' => 'Asia/Kabul',
    'West Asia Standard Time' => 'Etc/GMT-5',
    'Ekaterinburg Standard Time' => 'Asia/Yekaterinburg',
    'Pakistan Standard Time' => 'Asia/Karachi',
    'India Standard Time' => 'Asia/Calcutta',
    'Sri Lanka Standard Time' => 'Asia/Colombo',
    'Nepal Standard Time' => 'Asia/Katmandu',
    'Central Asia Standard Time' => 'Etc/GMT-6',
    'Bangladesh Standard Time' => 'Asia/Thimphu',
    'Omsk Standard Time' => 'Asia/Omsk',
    'Myanmar Standard Time' => 'Asia/Rangoon',
    'SE Asia Standard Time' => 'Etc/GMT-7',
    'Altai Standard Time' => 'Asia/Barnaul',
    'W. Mongolia Standard Time' => 'Asia/Hovd',
    'North Asia Standard Time' => 'Asia/Krasnoyarsk',
    'N. Central Asia Standard Time' => 'Asia/Novosibirsk',
    'Tomsk Standard Time' => 'Asia/Tomsk',
    'China Standard Time' => 'Asia/Macau',
    'North Asia East Standard Time' => 'Asia/Irkutsk',
    'Singapore Standard Time' => 'Etc/GMT-8',
    'W. Australia Standard Time' => 'Australia/Perth',
    'Taipei Standard Time' => 'Asia/Taipei',
    'Ulaanbaatar Standard Time' => 'Asia/Ulaanbaatar',
    'Aus Central W. Standard Time' => 'Australia/Eucla',
    'Transbaikal Standard Time' => 'Asia/Chita',
    'Tokyo Standard Time' => 'Etc/GMT-9',
    'North Korea Standard Time' => 'Asia/Pyongyang',
    'Korea Standard Time' => 'Asia/Seoul',
    'Yakutsk Standard Time' => 'Asia/Yakutsk',
    'Cen. Australia Standard Time' => 'Australia/Adelaide',
    'AUS Central Standard Time' => 'Australia/Darwin',
    'E. Australia Standard Time' => 'Australia/Brisbane',
    'AUS Eastern Standard Time' => 'Australia/Sydney',
    'West Pacific Standard Time' => 'Etc/GMT-10',
    'Tasmania Standard Time' => 'Australia/Hobart',
    'Vladivostok Standard Time' => 'Asia/Vladivostok',
    'Lord Howe Standard Time' => 'Australia/Lord_Howe',
    'Bougainville Standard Time' => 'Pacific/Bougainville',
    'Russia Time Zone 10' => 'Asia/Srednekolymsk',
    'Magadan Standard Time' => 'Asia/Magadan',
    'Norfolk Standard Time' => 'Pacific/Norfolk',
    'Sakhalin Standard Time' => 'Asia/Sakhalin',
    'Central Pacific Standard Time' => 'Etc/GMT-11',
    'Russia Time Zone 11' => 'Asia/Kamchatka',
    'New Zealand Standard Time' => 'Pacific/Auckland',
    'UTC+12' => 'Etc/GMT-12',
    'Fiji Standard Time' => 'Pacific/Fiji',
    'Chatham Islands Standard Time' => 'Pacific/Chatham',
    'UTC+13' => 'Etc/GMT-13',
    'Tonga Standard Time' => 'Pacific/Tongatapu',
    'Samoa Standard Time' => 'Pacific/Apia',
    'Line Islands Standard Time' => 'Etc/GMT-14'
];

?>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<div class="panel panel-default">
    <div class="panel-body">
        <div class="panel-body">
            <h3>Maya Appointment</h3>
            <div class="col-lg-12">
                <center>
                    <!--<form class="form">-->
                    <div class="form-group">
                        <label>Date :&nbsp;&nbsp;</label>
                        <input type="date" class="form-control" required id="date_maya" value="<?php echo date("
                            Y-m-d");?>" style="width:200px;color: #000;">
                    </div>
                    <div class="form-group">
                        <label>Time :&nbsp;&nbsp;</label>
                        <input type="time" class="form-control" required id="time_maya" value="<?php echo date("
                            H:i");?>" style="width:200px;color: #000;">
                    </div>
                    <div class="form-group">
                        <label>Timezone :&nbsp;&nbsp;</label>
                        <select name="timezones" id="timezoness_maya" class="form-control" required
                            style="width:200px;color: #000;">
                            <?php
                                                  foreach ($microsoftWindowsTimeZones as $key => $value) {
                                                   if ($userRow['fld_timezone'] == $value)
                              {
                                  $selected = 'selected="selected"';
                              }
                              else
                              {
                                $selected = '';
                              }
                                                    echo "<option ".$selected." value='".$value."'>".$key."</option>";
                                                  }
                                                  ?>
                        </select>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-info" id="save_maya" style="width:80px;">Save</button>
                        <button class="btn btn-danger" type="reset" style="width:80px;">Cancel</button>
                    </div>
                    <a id="meetingid" href="" class="copy_textc" data-toggle="tooltip" title="Copy to Clipboard"
                        target="_blank" style="border:1px solid #000;padding:2px;"></a>
                    <buttn class="copy_text copy_textc btn btn-warning">copy</buttn>

                    <!--</form>-->
                </center>

            </div>
        </div>
    </div>
</div>
<style>
    .copy_textc {
        display: none;
    }
</style>
<script>
    function randomStr(len, arr) {
        var ans = '';
        for (var i = len; i > 0; i--) {
            ans +=
                arr[Math.floor(Math.random() * arr.length)];
        }
        return ans;
    }
    $(document).ready(function () {
        $('#save_maya').click(function () {
            var date = $('#date_maya').val();
            var time = $('#time_maya').val();
            var timezoness_maya = $('#timezoness_maya').val();
            var ran = randomStr(20, 'asdfghjklqwertyuiopzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM');
            var murl = window.location.origin + "/tool/mayameet/meet/" + ran + "/" +<?= $user_id ?>;
            $('#meetingid').attr('href', murl).text(murl);
            $.ajax({
                type: 'POST',
                url: '<?= base_url("yogiccoach/sendlinkto") ?>',
                data: { "date": date, "time": time, "timezoness_maya": timezoness_maya, "murl": ran },
                datatype: 'json',
                success: function (response) {
                    // window.open(murl, '_blank');
                    // if(response.status == 1) {
                    //     location.reload(true);
                    // }
                    $('.copy_textc').show();
                }
            });
        });
    });
    $('.copy_text').click(function (e) {
        e.preventDefault();
        var copyText = $("#meetingid").attr('href');

        document.addEventListener('copy', function (e) {
            e.clipboardData.setData('text/plain', copyText);
            e.preventDefault();
        }, true);

        document.execCommand('copy');
        console.log('copied text : ', copyText);
        alert('copied');
    });
</script>
<?php $this->load->view('yogiccoach/footer'); ?></xmp></code></pre>
<p>maya</p>
<img class="img-fluid" src="image/maya.png" alt="Login Page" height="100">
<br><br>
<p>maya controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function maya()
{
$this->load->view("yogiccoach/mayapage");
}
public function newmeeting()
{
$this->load->view("yogiccoach/maya");
}
public function meetinglist()
{
$this->load->view('yogiccoach/meetinglist');
}
public function set_call_time()
{
$milisec = $_POST['milisec'];
$sec = $_POST['sec'];
$min = $_POST['min'];
$hour = $_POST['hour'];
$user_id = $_POST['user_id'];

$data = array(
'milisec' => $milisec,
'sec' => $sec,
'min' => $min,
'hour' => $hour,
'user_id' => $user_id
);
$call = $this->db->get_where('set_call_time',array('user_id'=>$user_id));
$this->db->delete('calling', array('sender_id'=>$this->userid));
if ($call->num_rows()>0)
{
$this->db->where('user_id',$user_id);
$this->db->update('set_call_time',$data);
}else
{
$this->db->insert('set_call_time',$data);
}
}

public function sendlink()
{
$client_id = $_POST['test'];
$murl = $_POST['murl'];
foreach($client_id as $clientid)
{
$data = array(
'receiver_id' => $clientid,
'status' => '1',
'url' => $murl,
'sender_id' => $this->userid,
);
$this->db->insert('calling',$data);
}
}
public function callend($id)
{
$data = array(
'status' => '0',
);
$this->db->where('fld_id',$id);
$scs = $this->db->update('calling',$data);
if($scs)
{
redirect(base_url()."yogiccoach");
}
}

public function calling()
{
$receiver_id = $_POST['receiver_id'];
$url = base_url('member/mayacall/')."/".$_POST['url']."/".$_POST['receiver_id'];
$status = '1';
$data = array(
'receiver_id' => $receiver_id,
'status' => $status,
'url' => $url,
'sender_id' => $this->userid
);
$this->db->insert('calling',$data);
}

public function mayacall($id,$fld_id)
{
$datas = array(
'status' => '0',
);
$this->db->where('receiver_id',$fld_id);
$scs = $this->db->update('calling',$datas);
$data['fld_id'] = $fld_id;
$data['id'] = $id;
$this->load->view('yogiccoach/mayacall',$data);
}

public function calling_end()
{
$receiver_id = $_POST['receiver_id'];
$this->db->delete('calling', array('sender_id'=>$this->userid));

}</xmp></code></pre>
<p>maya view</p>
<code>application/views/yogiccoach/mayapage.php</code>
<pre><code class="language-html"><xmp><?php $noImg=base_url().'assets/images/user_thumb.png';
 $this->load->view('yogiccoach/sidebar');
 error_reporting(0);
 $session=$this->session->get_userdata();
 $user_id=$session['user_id'];

 $this->db->order_by("fld_id", "desc");
 $this->db->where('fld_user_type','admin');

 $getAdminData=$this->db->get('users');
 $this->db->order_by("fld_id", "desc");

 $this->db->where('fld_parent', $user_id); 
 $getData=$this->db->get('users');
 $member_id;
  if($getData->num_rows()>0) {
	  foreach($getData->result() as $getRow){
		// print_r($getRow); 
	    // print_r($member_id=$getRow->fld_id);
	  }
  }	 
  
  $user=$this->db->get_where('users',array('fld_id'=>$user_id));
	if ($user->num_rows()>0) {
		$row=$user->row_array();

		$memberName = $row["fld_first_name"] . " " . $row["fld_last_name"];
		$memberStatus = $row["fld_status"];
		$memberemail = $row["fld_email"];
		$marketing_form = $row['fld_marketing'];
	}
 $cuttime = date('Y-m-d H:i:s',strtotime('-10second'));
  
  $row = $this->db->get_where('set_call_time',array('user_id'=>$user_id))->row_array();
  
  $time = $this->db->get_where('maya_plan',array('fld_user_id'=>$user_id))->row_array();
?>
<script src="https://use.fontawesome.com/6c6c4c0fcc.js"></script>
<ul class="breadcrumb push-down-0">
    <li><a href="#">Home</a></li>
    <li class="active">Maya</li>
</ul>
<!-- END BREADCRUMB -->
<div class="panel panel-default">
    <div class="panel-body">
        <a class="btn btn-warning" style="width:200px;" target="_blank"
            href="<?= base_url('yogiccoach/newmeeting'); ?>">New Meeting</a><br><br>
        <button type="button" style="width:200px;" class="btn btn-warning" data-toggle="modal"
            data-target="#myModal">join</i></button><br><br>
        <a class="btn btn-warning" style="width:200px;" target="_blank"
            href="<?= base_url('yogiccoach/MayaAppointment') ?>">schedule</a><br><br>
        <a class="btn btn-warning" style="width:200px;" target="_blank"
            href="<?= base_url('yogiccoach/meetinglist') ?>">meetings</a>
    </div>
</div>
<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Join Meeting</h4>
            </div>
            <div class="modal-body">
                <!--<p>Some text in the modal.</p>-->
                <input type="text" id="linkshow" class="form-control" placeholder="Enter Link">
            </div>
            <div class="modal-footer">
                <input type="submit" onclick="openmeet();" class="btn btn-info" value="Start">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            </div>
        </div>

    </div>
</div>
<script>
    function openmeet() {
        var link = $('#linkshow').val();
        if (link.includes("https://www.myportalx.com/tool/")) {
            window.open(link, '_blank');
        } else {
            alert('Invalid Link');
        }
    }
</script>
<?php $this->load->view('yogiccoach/footer'); ?>
</xmp></code></pre>
<p>maya View</p>
<code>application/views/yogiccoach/maya.php</code>
<pre><code class="language-html"><xmp><?php
 $noImg=base_url().'assets/images/user_thumb.png';
 $this->load->view('yogiccoach/sidebar');
 error_reporting(0);
 $session=$this->session->get_userdata();
 $user_id=$session['user_id'];

 $this->db->order_by("fld_id", "desc");
 $this->db->where('fld_user_type','admin');

 $getAdminData=$this->db->get('users');
 $this->db->order_by("fld_id", "desc");

 $this->db->where('fld_parent', $user_id); 
 $getData=$this->db->get('users');
 $member_id;
  if($getData->num_rows()>0) {
	  foreach($getData->result() as $getRow){
		// print_r($getRow); 
	    // print_r($member_id=$getRow->fld_id);
	  }
  }	 
  
  $user=$this->db->get_where('users',array('fld_id'=>$user_id));
	if ($user->num_rows()>0) {
		$row=$user->row_array();

		$memberName = $row["fld_first_name"] . " " . $row["fld_last_name"];
		$memberStatus = $row["fld_status"];
		$memberemail = $row["fld_email"];
		$marketing_form = $row['fld_marketing'];
	}
 $cuttime = date('Y-m-d H:i:s',strtotime('-10second'));
  
  $row = $this->db->get_where('set_call_time',array('user_id'=>$user_id))->row_array();
  
  $time = $this->db->get_where('maya_plan',array('fld_user_id'=>$user_id))->row_array();
  
 ?>
<script src='https://meet.myportalx.com/external_api.js'></script>
<!-- START BREADCRUMB -->
<ul class="breadcrumb push-down-0">
    <li><a href="#">Home</a></li>
    <li class="active">Maya</li>
</ul>
<!-- END BREADCRUMB -->
<div class="content-frame">
    <div class="content-frame-right">
        <div class="list-group list-group-contacts border-bottom push-down-10">
            <form>
                <ul class="users-list">
                    <?php
        if($getData->num_rows()>0) {
            foreach($getData->result() as $getRow){ 
                 $this->db->limit(1);
            $this->db->order_by("ustatus", "desc"); 
            $this->db->where(array('user_id'=>$getRow->fld_id));
            $active=$this->db->get('status');
            foreach($active->result() as $act){
            $current = $date = date('Y-m-d H:i:s', $act->ustatus);
            if ($current > $cuttime) {
                    $status = "<span class='btn btn-success'>online</span>";
                }else{
                    $status = "<span class='btn btn-danger'>Offline</span>";
                }
             }
                ?>
                    <li class="selectVendor" id="<?=$getRow->fld_id;?>"
                        title="<?php echo $getRow->fld_username.'&nbsp;'; echo $getRow->fld_last_name; ?>">

                        <a href="#" class="list-group-item"> <input type="checkbox" name="selector[]"
                                value="<?php echo $getRow->fld_id ?>">
                            <img src="<?php $image_path=$getRow->fld_file_name; $image = base_url().$image_path; if(!empty($image_path)){echo $image;}else{ echo $noImg;} ?>"
                                class="pull-left" alt="Dmitry Ivaniuk">
                            <span class="contacts-title">
                                <?php echo $getRow->fld_username.'&nbsp;'; echo $getRow->fld_last_name; ?>
                            </span>
                            <p>
                                <?=$status?>
                            </p>

                        </a>
                    </li>
                    <?php } }else{ ?>
                    <li>
                        <a class="users-list-name" href="#">No Vendor's Find...</a>
                    </li>
                    <?php }  if($getAdminData->num_rows()>0){
                foreach($getAdminData->result() as $adminData){ 
                    $this->db->limit(1);
            $this->db->order_by("ustatus", "desc"); 
            $this->db->where(array('user_id'=>$adminData->fld_id));
            $actives=$this->db->get('status');
            foreach($actives->result() as $acts){
            // $current = $act->ustatus;
            $current = date('Y-m-d H:i:s', $acts->ustatus);
            if ($current > $cuttime) {
                    $statuss = "<span class='btn btn-success'>online</span>";
                }else{
                    $statuss = "<span class='btn btn-danger'>Offline</span>";
                }
             }
                    ?>
                    <h3>Admin</h3>
                    <li class="selectVendor" id="<?=$adminData->fld_id;?>"
                        title="<?php echo $adminData->fld_username.'&nbsp;'; echo $adminData->fld_last_name; ?>">
                        <a href="#" class="list-group-item">
                            <img src="<?php $image_path=$adminData->fld_file_name; $image = base_url().$image_path; if(!empty($image_path)){echo $image;}else{ echo $noImg;} ?>"
                                class="pull-left" alt="Dmitry Ivaniuk">
                            <span class="contacts-title">
                                <?php echo $adminData->fld_username.'&nbsp;'; echo $adminData->fld_last_name; ?>
                            </span>
                            <p>
                                <?= $statuss ?>
                            </p>
                        </a>
                    </li>
                    <?php }}else{ ?>
                    <li>
                        <a class="users-list-name" href="#">No Vendor's Find...</a>
                    </li>
                    <?php } ?>
                </ul>
                <input type="button" id="save_value" name="save_value" value="Start Group Meeting"
                    class="btn btn-info btn-lg btn-block" style="font-size:bold" />
            </form>
        </div>
    </div>

    <div class="content-frame-body content-frame-body-left">
        <div class="chatbox">

            <div class="chatlogs">
                <div id="dumppy"></div>

            </div>
            <input type="hidden" id="Sender_Name" value="<?=$memberName;?>">
            <input type="hidden" id="ReciverId_txt">
            <div class="chat-from">
                <!--<textarea></textarea>-->
                <!--<button class="submit">Send</button>-->
                <button id="btncreatemeetinglink" style="display:none">Start Meeting</button>
                <h1 class="h1">
                    <span id="hour">
                        <?php echo ($row['hour'] != '') ? $row['hour'] : '00'; ?>
                    </span> :
                    <span id="min">
                        <?php echo ($row['min'] != '') ? $row['min'] : '00'; ?>
                    </span> :
                    <span id="sec">
                        <?php echo ($row['sec'] != '') ? $row['sec'] : '00'; ?>
                    </span> :
                    <span id="milisec">
                        <?php echo ($row['milisec'] != '') ? $row['milisec'] : '00'; ?>
                    </span>
                    <span id="msg_show"></span>
                </h1>
            </div>
        </div>
        <a id='meetingid' href="#"></a>
    </div>
    <!-- END PAGE CONTENT FRAME -->
    <script>
        function randomStr(len, arr) {
            var ans = '';
            for (var i = len; i > 0; i--) {
                ans +=
                    arr[Math.floor(Math.random() * arr.length)];
            }
            return ans;
        }
        $(function () {
            $('#save_value').click(function () {
                var test = new Array();
                $(':checkbox:checked').each(function (i) {
                    test.push($(this).val());
                });
                var ran = randomStr(20, 'asdfghjklqwertyuiopzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM');;
                var murl = window.location.origin + "/tool/mayameet/meeting/" + ran + "/" +<?= $user_id ?>;
                $('#meetingid').attr('href', murl).text(murl);
                //   console.log(val[i]);
                $.ajax({
                    type: 'POST',
                    url: '<?= base_url("yogiccoach/sendlink") ?>',
                    data: { "test": test, "murl": murl },
                    datatype: 'json',
                    success: function (response) {
                        // window.open(murl, '_blank');
                        if (response.status == 1) {
                            location.reload(true);
                        }
                    }
                });
                const domains = 'meet.myportalx.com/';
                const optionss = {
                    roomName: ran,
                    // width: 800,
                    height: 700,
                    parentNode: document.querySelector('#dumppy'),
                    userInfo: {
                        email: '<?= $memberemail ?>',
                        displayName: '<?= $memberName ?>',
                    },
                    configOverwrite: { startWithAudioMuted: true, },
                    interfaceConfigOverwrite: {
                        enableWelcomePage: false,
                        DISABLE_DOMINANT_SPEAKER_INDICATOR: true,
                        // TOOLBAR_BUTTONS: [
                        //     'microphone', 'camera', 'desktop', 'fullscreen',
                        //     'fodeviceselection', 'hangup', 'profile', 'chat',
                        //     'livestreaming', 'etherpad', 'sharedvideo', 'settings', 'raisehand','videoquality', 'filmstrip', 'feedback', 'stats', 'shortcuts', 'tileview', 'download', 'mute-everyone', 'e2ee', 'security'
                        // ]
                    },
                    onload: function () {
                        start();
                        var url = murl;
                        $.ajax({
                            url: "<?= base_url() ?>yogiccoach/calling",
                            data: { "receiver_id": receiver_id, "url": url },
                            dataType: "json",
                            type: "POST",
                            success: function (response) {

                            }
                        });
                    },
                };
                var api1 = new JitsiMeetExternalAPI(domains, optionss);
                api1.addEventListeners({
                    readyToClose: function () {
                        stop();
                        $('#dumppy').empty();
                        $.ajax({
                            url: "<?= base_url() ?>yogiccoach/calling_end",
                            data: { "receiver_id": receiver_id },
                            dataType: "json",
                            type: "POST",
                            success: function (response) {

                            }
                        });
                    },
                });
            });
        });
    </script>
    <script>
        $(function () {
            $('#dumppy').empty();
            $('#btncreatemeetinglink').click(function () {
                var receiver_id = $('#ReciverId_txt').val();
                const domain = 'meet.myportalx.com/';
                const options = {
                    roomName: '<?= $user_id ?>' + receiver_id,
                    // width: 800,
                    height: 700,
                    parentNode: document.querySelector('#dumppy'),
                    userInfo: {
                        email: '<?= $memberemail ?>',
                        displayName: '<?= $memberName ?>',
                    },
                    configOverwrite: { startWithAudioMuted: true, },
                    interfaceConfigOverwrite: {
                        enableWelcomePage: false,
                        DISABLE_DOMINANT_SPEAKER_INDICATOR: true,
                        // TOOLBAR_BUTTONS: [
                        //     'microphone', 'camera', 'desktop', 'fullscreen',
                        //     'fodeviceselection', 'hangup', 'profile', 'chat',
                        //     'livestreaming', 'etherpad', 'sharedvideo', 'settings', 'raisehand','videoquality', 'filmstrip', 'feedback', 'stats', 'shortcuts', 'tileview', 'download', 'mute-everyone', 'e2ee', 'security'
                        // ]
                    },
                    onload: function () {
                        $('#btncreatemeetinglink').css('display', 'none');
                        start();
                        var url = '<?= $user_id ?>' + receiver_id;
                        $.ajax({
                            url: "<?= base_url() ?>yogiccoach/calling",
                            data: { "receiver_id": receiver_id, "url": url },
                            dataType: "json",
                            type: "POST",
                            success: function (response) {

                            }
                        });
                    },
                };
                var api = new JitsiMeetExternalAPI(domain, options);
                api.addEventListeners({
                    readyToClose: function () {
                        stop();
                        $('#dumppy').empty();
                        $.ajax({
                            url: "<?= base_url() ?>yogiccoach/calling_end",
                            data: { "receiver_id": receiver_id },
                            dataType: "json",
                            type: "POST",
                            success: function (response) {

                            }
                        });
                    },
                });

            });


            $('textarea').keypress(function (event) {
                var keycode = (event.keyCode ? event.keyCode : event.which);
                if (keycode == '13') {
                    sendTxtMessage($(this).val());
                }
            });
            $('.submit').click(function () {
                sendTxtMessage($('textarea').val());
            });
            $('.selectVendor').click(function () {
                ChatSection(1);
                var receiver_id = $(this).attr('id');
                //   alert(receiver_id);
                $('#ReciverId_txt').val(receiver_id);
                $('#ReciverName_txt').html($(this).attr('title'));
                $('#btncreatemeetinglink').css('display', 'block')
            });
        });
        function ChatSection(status) {
            //chatSection
            if (status == 0) {
                $('.chatbox :input').attr('disabled', true);
            } else {
                $('.chatbox :input').removeAttr('disabled');
            }
        }

        var x;


        function start() {
            x = setInterval(timer, 10);
        } /* Start */

        function stop() {
            clearInterval(x);
            var milisec = $('#milisec').text();
            var sec = $('#sec').text();
            var min = $('#min').text();
            var hour = $('#hour').text();
            var user_id = <?= $user_id ?>;
            $.ajax({
                type: 'POST',
                url: '<?= base_url("yogiccoach/set_call_time") ?>',
                data: { "milisec": milisec, "sec": sec, "min": min, "hour": hour, "user_id": user_id },
                datatype: 'json',
                success: function (response) {

                    if (response.status == 1) {
                        location.replace("https://www.w3schools.com");
                    }
                }
            });
        } /* Stop */

        var milisec = <?php echo ($row['milisec'] != '') ? $row['milisec'] : 0; ?>;
        var sec = <?php echo ($row['sec'] != '') ? $row['sec'] : 0; ?>; /* holds incrementing value */
        var min = <?php echo ($row['min'] != '') ? $row['min'] : 0; ?>;
        var hour = <?php echo ($row['hour'] != '') ? $row['hour'] : 0; ?>;

        /* Contains and outputs returned value of  function checkTime */

        var miliSecOut = 0;
        var secOut = 0;
        var minOut = 0;
        var hourOut = 0;

        /* Output variable End */


        function timer() {
            /* Main Timer */


            miliSecOut = checkTime(milisec);
            secOut = checkTime(sec);
            minOut = checkTime(min);
            hourOut = checkTime(hour);

            milisec = ++milisec;

            if (milisec === 100) {
                milisec = 0;
                sec = ++sec;
            }

            if (sec == 60) {
                min = ++min;
                sec = 0;
            }

            if (min == 60) {
                min = 0;
                hour = ++hour;

            }

            if (<?= $time['min'] / 2 ?> == min && <?= $time['sec'] ?> == sec) {
                $('.h1').css('color', 'red');
                $('#msg_show').html("50% Bandwith Used");
            }
            if (<?= ($time['min'] / 2) + 1 ?> == min && <?= $time['sec'] ?> == sec) {
                $('.h1').css('color', '#fff');
                $('#msg_show').html(" ");
            }

            //   if(sec == 50)
            //   {
            //       $('.h1').css('color', 'red');
            //       $('#msg_show').html("90% Bandwith Used");
            //   }
            //   if(sec == 51)
            //   {
            //       $('.h1').css('color', '#fff');
            //       $('#msg_show').html(" ");
            //   }

            if (<?= $time['min'] ?> == min && <?= $time['sec'] ?> == sec) {
                stop();
                $('#dumppy').empty();
                window.location.replace("<?= base_url('yogiccoach/plan'); ?>");
            }

            document.getElementById("milisec").innerHTML = miliSecOut;
            document.getElementById("sec").innerHTML = secOut;
            document.getElementById("min").innerHTML = minOut;
            document.getElementById("hour").innerHTML = hourOut;

        }


        /* Adds 0 when value is <10 */


        function checkTime(i) {
            if (i < 10) {
                i = "0" + i;
            }
            return i;
        }

        function reset() {


            /*Reset*/

            milisec = 0;
            sec = 0;
            min = 0
            hour = 0;

            document.getElementById("milisec").innerHTML = <?php echo($row['milisec'] != '') ? $row['milisec'] : '00'; ?>;
            document.getElementById("sec").innerHTML = <?php echo($row['sec'] != '') ? $row['sec'] : '00'; ?>;
            document.getElementById("min").innerHTML = <?php echo($row['min'] != '') ? $row['min'] : '00'; ?>;
            document.getElementById("hour").innerHTML = <?php echo($row['hour'] != '') ? $row['hour'] : '00'; ?>;

        }
        ChatSection(0);
    </script>

    <style>
        .page-container .page-content .content-frame .content-frame-right {
            width: 200px;
        }

        .list-group-contacts .list-group-item img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 0px;
        }

        .list-group-item {
            /*background:#33c2de;*/
            /*color:#fff;*/
        }

        .list-group.border-bottom .list-group-item:last-child {
            border-bottom: 3px solid #fff;
        }

        a.list-group-item,
        button.list-group-item {
            color: #000;
        }

        .page-container .page-content .content-frame .content-frame-body.content-frame-body-left {
            margin-top: -60px;
            margin-right: 200px;
        }

        .list-group-contacts .list-group-item {
            padding: 2px;
        }

        .h1 {
            margin: 10px;
            color: #fff;
        }

        #dumppy {
            width: 100%,
                height: 650px,
        }

        #ReciverName_txt {
            color: #fff;
            text-align: center;
            font-weight: bolder;
            background: #2E4053;
            font-size: 20px;
            padding: 20px 0;
            margin: 0 50px 10px 55px;
            border-radius: 10px;
        }

        .select_id {
            width: 60px;
            height: 60px;
            background-color: #ccc;
            border-radius: 50%;
            overflow: hidden;

        }

        .select_id img {
            width: 100%;
        }

        ul li {
            list-style: none;
        }

        .chatbox {
            /*width:100%;*/
            min-width: 390px;
            height: 90vh;
            background-color: #2d3945;
            padding: 25px;
            border-radius: 5px;
            box-shadow: 0 3px #fff;
            color: #fff;
        }

        .chatlogs {
            height: 75vh;
            background: #03f3ff;
            overflow-x: hidden;
            overflow-y: scroll;
        }

        .users-list {
            width: 200px;
            height: 80vh;
            overflow-x: hidden;
            overflow-y: scroll;
            padding: 0px;
        }

        .chatlogs::-webkit-scrollbar {
            width: 10px;
        }

        .chatlogs::-webkit-scrollbar-thumb {
            border-radius: 5px;
            background: rgba(0, 0, 0, .1);
        }

        .chat {
            width: 105%;
        }

        .chats {
            width: 60%;
            display: flex;
            flex-flow: row wrap;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .chates {
            width: 60%;
            display: flex;
            flex-flow: row wrap;
            align-items: flex-start;
            margin-bottom: 20px;
            float: right;
        }

        .chat .user-photo {
            width: 40px;
            height: 40px;
            background-color: #ccc;
            border-radius: 50%;
            overflow: hidden;
        }

        .chat .user-photo img {
            width: 100%;
        }

        .chat .chat-massage {
            width: 70%;
            padding: 15px;
            margin: 20px 10px 0;
            color: #fff;
            font-size: 20px;
        }

        .friend .chat-massage {
            background-color: #F4F6F7;
            color: #000;
            text-align: left;
            border-radius: 0px 20px 20px 20px;
            padding: 5px;
        }

        .friend .user-photo {
            margin-left: 20px;
        }

        .self .chat-massage {
            background-color: #707B7C;
            order: -1;
            text-align: right;
            border-radius: 20px 0 20px 20px;
            padding: 5px;
        }

        .chat-from {
            margin-top: 10px;
            margin-left: 40%;
            /*display: flex;*/
            /*align-items: flex-start;*/
        }

        .chat-from textarea {
            background: #fbfbfb;
            width: 90%;
            height: 50px;
            border: 2px solid #2d3945;
            border-right: none;
            resize: none;
            border-radius: 5px 0 0 5px;
            padding: 10px;
            font-size: 18px;
            color: #333;
        }

        .chat-from textarea::-webkit-scrollbar {
            width: 10px;
        }

        .chat-from textarea::-webkit-scrollbar-thumb {
            border-radius: 5px;
            background: rgba(0, 0, 0, .1);
        }

        .chat-from textarea:focus {
            background-color: #fff;
        }

        .chat-from button {
            background-color: #f19407;
            padding: 4px 15px;
            border-radius: 0 5px 5px 0;
            font-size: 30px;
            color: #fff;
            border: none;
        }

        .friend .username {
            font-size: 8px;
            color: #cccccc;
        }

        .self .username {
            font-size: 8px;
            color: #f2f2f2;
        }
    </style>
    <!-- START SCRIPTS -->
    <!-- START PLUGINS -->
    <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery.min.js"></script>
    <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery - ui.min.js"></script>
    <script type="text/javascript" src="<?php echo base_url()."
        assets/";?>js / plugins / bootstrap / bootstrap.min.js"></script>
    <!-- END PLUGINS -->

    <!-- THIS PAGE PLUGINS -->
    <script type='text/javascript' src='<?php echo base_url()."assets/";?>js/plugins/icheck/icheck.min.js'></script>
    <script type="text/javascript" src="<?php echo base_url()."
        assets/";?>js / plugins / mcustomscrollbar / jquery.mCustomScrollbar.min.js"></script>
    <!-- END PAGE PLUGINS -->

    <!-- START TEMPLATE -->

    <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins.js"></script>
    <!--<script type="text/javascript" src="<?php echo base_url()."assets/";?>js/actions.js"></script>-->
    <!-- END TEMPLATE -->
    <!-- END SCRIPTS -->
    <style>
        .img-box {
            padding: 16px 20px;
            border: 1px solid #ddd;
            position: relative;
            display: inline-block
        }

        .img-box .file_link {
            position: absolute;
            left: 10px;
            top: 10px;
            z-index: 1;
            font-size: 14px;
        }

        .img-box1 {
            padding: 16px 21px;
            border: 1px solid #ddd;
            display: inline-block;
            position: relative;
        }

        .img-box1 img {
            position: absolute;
            left: 10px;
            top: 7px;
            z-index: 1;
            font-size: 14px;
        }
    </style>
    <?php
 $this->load->view('yogiccoach/footer');
 ?>
</xmp></code></pre>
<p>maya view</p>
<code>application/views/yogiccoach/meetinglist.php</code>
<pre><code class="language-html"><xmp><?php $noImg=base_url().'assets/images/user_thumb.png';
 $this->load->view('yogiccoach/sidebar');
 error_reporting(0);
 $session=$this->session->get_userdata();
 $user_id=$session['user_id'];

 $this->db->order_by("fld_id", "desc");
 $this->db->where('fld_user_type','admin');

 $getAdminData=$this->db->get('users');
 $this->db->order_by("fld_id", "desc");

 $this->db->where('fld_parent', $user_id); 
 $getData=$this->db->get('users');
 $member_id;
  if($getData->num_rows()>0) {
	  foreach($getData->result() as $getRow){
		// print_r($getRow); 
	    // print_r($member_id=$getRow->fld_id);
	  }
  }	 
  
  $user=$this->db->get_where('users',array('fld_id'=>$user_id));
	if ($user->num_rows()>0) {
		$row=$user->row_array();

		$memberName = $row["fld_first_name"] . " " . $row["fld_last_name"];
		$memberStatus = $row["fld_status"];
		$memberemail = $row["fld_email"];
		$marketing_form = $row['fld_marketing'];
	}
 $cuttime = date('Y-m-d H:i:s',strtotime('-10second'));
  
  $row = $this->db->get_where('set_call_time',array('user_id'=>$user_id))->row_array();
  
  $time = $this->db->get_where('maya_plan',array('fld_user_id'=>$user_id))->row_array();
?>
<script src="https://use.fontawesome.com/6c6c4c0fcc.js"></script>
<ul class="breadcrumb push-down-0">
    <li><a href="#">Home</a></li>
    <li class="active">Maya</li>
</ul>
<!-- END BREADCRUMB -->
<div class="panel panel-default">
    <div class="panel-body">
        <div style="justify-content: center;">
            <?php
        $geLoginQuery = $this->db->get_where('appointment_maya',array('sender_id' =>$user_id));
	    if ($geLoginQuery->num_rows() > 0) {
	        $number = $geLoginQuery->result();
	        foreach ($number as $userRow){
	            date_default_timezone_set($userRow->fld_timezoness_maya);
	        if(date("Y-m-d") == $userRow->fld_date && date("H:i") > $userRow->fld_time)
	        {
	            echo "";
	        }else{ 
	            echo '<a class="btn btn-info" style="margin-right:20px;" href="'.base_url("/mayameet/startmeet/".$userRow->murl."/".$user_id).'">Start</a><button class="copy_text copy_textc btn btn-warning" data-link="'.base_url("/mayameet/meet/".$userRow->murl."/".$user_id).'">copy invitation</button><a href="'.base_url("/yogiccoach/editmeeing/".$userRow->murl."/".$user_id).'" class="btn btn-success" style="margin-left:20px;">Edit</a><br>Join Zoom Meeting<br><p style="font-size:12px">'.base_url("/mayameet/meet/".$userRow->murl."/".$user_id).'</p><br><br>';
	        }
	        }
	    }else{
	        echo "This Page Not found";
	    }
        ?>
        </div>
    </div>
</div>
<script>
    $('.copy_text').click(function (e) {
        e.preventDefault();
        var copyText = $(this).data('link');

        document.addEventListener('copy', function (e) {
            e.clipboardData.setData('text/plain', copyText);
            e.preventDefault();
        }, true);

        document.execCommand('copy');
        console.log('copied text : ', copyText);
        alert('copied');
    });
</script>
<?php $this->load->view('yogiccoach/footer'); ?>
</xmp></code></pre>
<p>Client journey linear</p>
<img class="img-fluid" src="image/Clientjourneylinearcoach.png" alt="Login Page" height="100">
<br><br>
<p>Client journey linear controller</p>
<code>application/controller/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function business_journey($user_id=''){
if($this->isAuthorized($user_id)){
$data = array();
$data['user_id']=$user_id;
$this->load->view('yogiccoach/business_journey',$data);
}
}</xmp></code></pre>
<p>Client journey linear view</p>
<code>application/views/yogiccoach/business_journey.php</code>
<pre><code class="language-html"><xmp><?php 
	$this->load->view('yogiccoach/sidebar');
	error_reporting(1);
	$session = $this->session->get_userdata();
	$login_id=$session['user_id'];

	$user=$this->db->get_where('users',array('fld_id'=>$user_id));
	if ($user->num_rows()>0) {
		$row=$user->row_array();

		$memberName = $row["fld_username"] . " " . $row["fld_last_name"];
		$memberStatus = $row["fld_status"];
		$memberemail = $row["fld_email"];
		$marketing_form = $row['fld_marketing'];
	}
?>
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Client journey linear</h3>
    </div>
    <div class="panel-body">

        <?php
echo "<h3 style='color:#000; text-transform: capitalize;'>client Name: ".$memberName."</h3>";
/************************************* Coaching Form ******************************/
$get_completed_form1=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'2'));
$row_completed1=$get_completed_form1->row_array();
    if($row_completed1['completed_date']!='')
    {
        $data1 = "<div class='progress'><div class='progress-bar' style='width:100%; background-color:#86e01e;'>100%</div></div>";
    }else{
            $data1 = "<div class='progress'><div class='progress-bar' style='width:0%'>0%</div></div>";
        }

$completed2=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'28'));
$completed2_1=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'5'));
$row2_1 = $completed2_1->row_array();
$row2 = $completed2->row_array();
    if($row2['completed_date']!='' and $row2_1['completed_date']!='')
    {
        $data2 = "<div class='progress'><div class='progress-bar' style='width:100%; background-color:#86e01e;'>100%</div></div>";              
    }elseif ($row2['completed_date']!='' or $row2_1['completed_date']!='') 
    {
        $data2 = "<div class='progress'><div class='progress-bar' style='width:50%; background-color:#ff9900;'>50%</div></div>";
    }else
    {
        $data2 = "<div class='progress'><div class='progress-bar' style='width:0%;'>0%</div></div>";
    }

$completed3 = $this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'6'));
$row3 = $completed3->row_array();
    if($row3['completed_date']!='')
    {
        $data3 = "<div class='progress'><div class='progress-bar' style='width:100%; background-color:#86e01e;'>100%</div></div>";
    }else
    {
        $data3 = "<div class='progress'><div class='progress-bar' style='width:0%;'>0%</div></div>";
    }

$completed4=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'7'));
$completed4_1=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'25'));
$row4_1 = $completed4_1->row_array();
$row4 = $completed4->row_array();
    if($row4['completed_date']!='' and $row4_1['completed_date']!='')
    {
        $data4 = "<div class='progress'><div class='progress-bar' style='width:100%;background-color:#86e01e;'>100%</div></div>";              
    }elseif ($row4['completed_date']!='' or $row4_1['completed_date']!='') 
    {
        $data4 = "<div class='progress'><div class='progress-bar' style='width:50%; background-color:#ff9900;'>50%</div></div>";
    }else
    {
        $data4 = "<div class='progress'><div class='progress-bar' style='width:0%;'>0%</div></div>";
    }

$completed5=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'21'));
$row5 = $completed5->row_array();
$completed5_1=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'14'));
$row5_1 = $completed5_1->row_array();
$completed5_2=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'16'));
$row5_2 = $completed5_2->row_array();
$completed5_3=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'20'));
$row5_3 = $completed5_3->row_array();
$completed5_4=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'26'));
$row5_4 = $completed5_4->row_array();
    if($row5['completed_date']!='' and $row5_1['completed_date']!='' and $row5_2['completed_date']!='' and $row5_3['completed_date']!='' and $row5_4['completed_date']!='')
    {
        $data5 = "<div class='progress'><div class='progress-bar' style='width:100%; background-color:#86e01e;'>100%</div></div>";
    }elseif (($row5['completed_date']!='' and $row5_1['completed_date']!='' and $row5_3['completed_date']!='') or ($row5_2['completed_date']!='' and $row5_4['completed_date']!='')) 
    {
        $data5 = "<div class='progress'><div class='progress-bar' style='width:75%; background-color:#f2d31b;'>75%</div></div>";
    }elseif (($row5['completed_date']!='' and $row5_1['completed_date']!='') or (($row5_2['completed_date']!='' or $row5_3['completed_date']!='') and ($row5_4['completed_date']!=''))) 
    {
        $data5 = "<div class='progress'><div class='progress-bar' style='width:50%; background-color:#ff9900;'>50%</div></div>";
    }elseif ($row5['completed_date']!='' or $row5_1['completed_date']!='' or $row5_2['completed_date']!='' or $row5_3['completed_date']!='' or $row5_4['completed_date']!='') 
    {
        $data5 = "<div class='progress'><div class='progress-bar' style='width:25%; background-color:red;'>25%</div></div>";
    }else
    {
        $data5 = "<div class='progress'><div class='progress-bar' style='width:0%;'>0%</div></div>";
    }

$completed6=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'29'));
$row6 = $completed6->row_array();
    if($row6['completed_date']!='')
    {
        $data6 = "<div class='progress'><div class='progress-bar' style='width:100%; background-color:#86e01e;'>100%</div></div>";
    }else
    {
        $data6 = "<div class='progress'><div class='progress-bar' style='width:0%;'>0%</div></div>";
    }

$completed7=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'8'));
$row7 = $completed7->row_array();
    if($row7['completed_date']!='')
    {
        $data7 = "<div class='progress'><div class='progress-bar' style='width:100%; background-color:#86e01e;'>100%</div></div>";
    }else
    {
        $data7 = "<div class='progress'><div class='progress-bar' style='width:0%;'>0%</div></div>";
    }

$completed8=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'19'));
$row8 = $completed8->row_array();
    if($row8['completed_date']!='')
    {
        $data8 = "<div class='progress'><div class='progress-bar' style='width:100%; background-color:#86e01e;'>100%</div></div>";
    }else
    {
        $data8 = "<div class='progress'><div class='progress-bar' style='width:0%;'>0%</div></div>";
    }

$completed9=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'1'));
$row9 = $completed9->row_array();
    if($row9['completed_date']!='')
    {
        $data9 = "<div class='progress'><div class='progress-bar' style='width:100%; background-color:#86e01e;'>100%</div></div>";
    }else
    {
        $data9 = "<div class='progress'><div class='progress-bar' style='width:0%;'>0%</div></div>";
   }

/*********************************** End Coaching Form **************************************/

/************************************ Marketing Form ******************************************/

$completed_mform1 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'1'));
$mcompleted1 = $completed_mform1->row_array();
$completed_mform1_1 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'2'));
$mcompleted1_1 = $completed_mform1_1->row_array();
    if($mcompleted1['completed_date']!='' and $mcompleted1_1['completed_date']!='')
    {
        $market1 = "<div class='progress'><div class='progress-bar' style='width:100%; background-color:#86e01e;'>100%</div></div>";
    }elseif ($mcompleted1['completed_date']!='' or $mcompleted1_1['completed_date']!='') 
    {
         $market1 = "<div class='progress'><div class='progress-bar' style='width:50%; background-color:#ff9900;'>50%</div></div>";
    } else
    {
        $market1 = "<div class='progress'><div class='progress-bar' style='width:0%;'>0%</div></div>";
    }

$completed_mform2 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'3'));
$mcompleted2 = $completed_mform2->row_array();
$completed_mform2_1 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'4'));
$mcompleted2_1 = $completed_mform2_1->row_array();
$completed_mform2_2 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'5'));
$mcompleted2_2 = $completed_mform2_2->row_array();
$completed_mform2_3 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'15'));
$mcompleted2_3 = $completed_mform2_3->row_array();
    if($mcompleted2['completed_date']!='' and $mcompleted2_1['completed_date']!='' and $mcompleted2_2['completed_date']!='' and $mcompleted2_3['completed_date']!='' )
    {
        $market2 = "<div class='progress'><div class='progress-bar' style='width:100%; background-color:#86e01e;'>100%</div></div>";
    }elseif ($mcompleted2['completed_date']!='' and $mcompleted2_1['completed_date']!='' and $mcompleted2_2['completed_date']!='' or $mcompleted2_3['completed_date']!='' ) 
    {
        $market2 = "<div class='progress'><div class='progress-bar' style='width:75%; background-color:#f2d31b;'>75%</div></div>";
    }elseif (($mcompleted2['completed_date']!='' and $mcompleted2_1['completed_date']!='')or ($mcompleted2_2['completed_date']!='' and $mcompleted2_3['completed_date']!='' )) 
    {
        $market2 = "<div class='progress'><div class='progress-bar' style='width:50%; background-color:#ff9900;'>50%</div></div>";
    }elseif (($mcompleted2['completed_date']!='' or $mcompleted2_1['completed_date']!='')or ($mcompleted2_2['completed_date']!='' or $mcompleted2_3['completed_date']!='' )) 
    {
        $market2 = "<div class='progress'><div class='progress-bar' style='width:25%; background-color:red;'>25%</div></div>";
    }else
    {
        $market2 = "<div class='progress'><div class='progress-bar' style='width:0%; '>0%</div></div>";
    }

$completed_mform3 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'24'));
$mcompleted3 = $completed_mform3->row_array();
$completed_mform3_1 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'10'));
$mcompleted3_1 = $completed_mform3_1->row_array();
$completed_mform3_2 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'17'));
$mcompleted3_2 = $completed_mform3_2->row_array();
    if($mcompleted3['completed_date']!='' and $mcompleted3_1['completed_date']!='' and $mcompleted3_2['completed_date']!='' )
    {
        $market3 = "<div class='progress'><div class='progress-bar' style='width:100%; background-color:#86e01e;'>100%</div></div>";
    }elseif (($mcompleted3['completed_date']!='' and $mcompleted3_1['completed_date']!='')or ($mcompleted3_2['completed_date']!='')) 
    {
        $market3 = "<div class='progress'><div class='progress-bar' style='width:50%; background-color:#ff9900;'>50%</div></div>";
    }elseif (($mcompleted3['completed_date']!='' or $mcompleted3_1['completed_date']!='')or ($mcompleted3_2['completed_date']!='')) 
    {
        $market3 = "<div class='progress'><div class='progress-bar' style='width:25%; background-color:red;'>25%</div></div>";
    }else
    {
        $market3 = "<div class='progress'><div class='progress-bar' style='width:0%; '>0%</div></div>";
    }

$completed_mform4 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'12'));
$mcompleted4 = $completed_mform4->row_array();
$completed_mform4_1 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'11'));
    $mcompleted4_1 = $completed_mform4_1->row_array();
        if($mcompleted4['completed_date']!='' and $mcompleted4_1['completed_date']!='')
        {
            $market4 = "<div class='progress'><div class='progress-bar' style='width:100%; background-color:#86e01e;'>100%</div></div>";
        }elseif ($mcompleted4['completed_date']!='' or $mcompleted4_1['completed_date']!='') 
        {
         $market4 = "<div class='progress'><div class='progress-bar' style='width:50%; background-color:#ff9900;'>50%</div></div>";
        } else
        {
        $market4 = "<div class='progress'><div class='progress-bar' style='width:0%;'>0%</div></div>";
        }

$completed_mform5_1 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'19'));
$mcompleted5_1 = $completed_mform5_1->row_array();

$completed_mform5_2 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'13'));
$mcompleted5_2 = $completed_mform5_2->row_array();
    if($mcompleted5_1['completed_date']!='' and $mcompleted5_2['completed_date']!='')
    {
        $market5 = "<div class='progress'><div class='progress-bar' style='width:100%; background-color:#86e01e;'>100%</div></div>";
    }elseif ($mcompleted5_1['completed_date']!='' or $mcompleted5_2['completed_date']!='') 
    {
         $market5 = "<div class='progress'><div class='progress-bar' style='width:50%; background-color:#ff9900;'>50%</div></div>";
    }else
    {
        $market5 = "<div class='progress'><div class='progress-bar' style='width:0%;'>0%</div></div>";
    }

$completed_mform6 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'7'));
$mcompleted6 = $completed_mform6->row_array();
$completed_mform6_1 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'8'));
$mcompleted6_1 = $completed_mform6_1->row_array();
$completed_mform6_2 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'16'));
$mcompleted6_2 = $completed_mform6_2->row_array();
$completed_mform6_3 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'9'));
$mcompleted6_3 = $completed_mform6_3->row_array();
        if($mcompleted6['completed_date']!='' and $mcompleted6_1['completed_date']!='' and $mcompleted6_2['completed_date']!='' and $mcompleted6_3['completed_date']!='' ){
            $market6 = "<div class='progress'><div class='progress-bar' style='width:100%; background-color:#86e01e;'>100%</div></div>";
     }elseif (($mcompleted6['completed_date']!='' and $mcompleted6_1['completed_date']!='') and ($mcompleted6_2['completed_date']!='' or $mcompleted6_3['completed_date']!='')) {
        $market6 = "<div class='progress'><div class='progress-bar' style='width:75%; background-color:#f2d31b;'>75%</div></div>";
    }elseif (($mcompleted6['completed_date']!='' and $mcompleted6_1['completed_date']!='') or ($mcompleted6_2['completed_date']!='' and $mcompleted6_3['completed_date']!='')) {
        $market6 = "<div class='progress'><div class='progress-bar' style='width:50%; background-color:#ff9900;'>50%</div></div>";
    }elseif ($mcompleted6['completed_date']!='' or $mcompleted6_1['completed_date']!='' or $mcompleted6_2['completed_date']!='' or $mcompleted6_3['completed_date']!='') {
        $market6 = "<div class='progress'><div class='progress-bar' style='width:25%; background-color:red;'>25%</div></div>";
    }else
    {
        $market6 = "<div class='progress'><div class='progress-bar' style='width:0%;'>0%</div></div>";
    }

$completed_mform7 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'18'));
$mcompleted7 = $completed_mform7->row_array();
    if($mcompleted7['completed_date']!='')
    {
        $market7 = "<div class='progress'><div class='progress-bar' style='width:100%; background-color:#86e01e;'>100%</div></div>";
    }else
    {
        $market7 = "<div class='progress'><div class='progress-bar' style='width:0%;'>0%</div></div>";
    }

$completed_mform8 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'6'));
$mcompleted8 = $completed_mform8->row_array();
$completed_mform8_1 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'23'));
$mcompleted8_1 = $completed_mform8_1->row_array();
    if($mcompleted8['completed_date']!='' and $mcompleted8_1['completed_date']!='')
    {
        $market8 = "<div class='progress'><div class='progress-bar' style='width:100%; background-color:#86e01e;'>100%</div></div>";
    }elseif ($mcompleted8['completed_date']!='' or $mcompleted8_1['completed_date']!='') 
    {
        $market8 = "<div class='progress'><div class='progress-bar' style='width:50%; background-color:#ff9900;'>50%</div></div>";
    }else
    {
        $market8 = "<div class='progress'><div class='progress-bar' style='width:0%;'>0%</div></div>";
    }

$completed_mform9 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'20'));
$mcompleted9 = $completed_mform9->row_array();
    if($mcompleted9['completed_date']!='')
    {
        $market9 = "<div class='progress'><div class='progress-bar' style='width:100%; background-color:#86e01e;'>100%</div></div>";
    }else
    {
        $market9 = "<div class='progress'><div class='progress-bar' style='width:0%;'>0%</div></div>";
    }

/************************************ End Marketing Form ******************************************/
    ?>
        <style>
            .progress {
                padding: 2px;
                background: rgba(0, 0, 0, 0.25);
                border-radius: 6px;
                box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.25), 0 1px rgba(255, 255, 255, 0.08);
                width: 500px;
            }

            .progress-bar {
                height: 16px;
                border-radius: 4px;
                background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.05));
                transition: 0.4s linear;
                transition-property: width, background-color;
                box-shadow: 0 0 1px 1px rgba(0, 0, 0, 0.25), inset 0 1px rgba(255, 255, 255, 0.1);
            }

            .label {
                display: inline-block;
                margin: 0 50px 20px;
                padding: 3px 8px;
                color: #aaa;
                text-shadow: 0 1px black;
                border-radius: 3px;
                cursor: pointer;
            }

            table,
            td,
            th {
                text-align: left;
            }

            table {
                width: 100%;
            }

            th,
            td {
                padding: 15px;
            }

            .tool:hover .main {
                text-shadow: 2px 2px #ccc;
                color: #000;
            }

            .tool {
                position: relative;
                display: inline-block;
                /*border-bottom: 1px dotted black;*/
            }

            .tool .tooltiptext {
                visibility: hidden;
                width: 200px;
                background-color: #555;
                color: #fff;
                text-align: left;
                border-radius: 6px;
                padding: 5px 0;
                position: absolute;
                z-index: 1;
                bottom: 125%;
                left: 30%;
                margin-left: -60px;
                opacity: 0;
                transition: opacity 0.3s;
            }

            .tool .tooltiptext::after {
                content: "";
                position: absolute;
                top: 100%;
                left: 50%;
                margin-left: -5px;
                border-width: 5px;
                border-style: solid;
                border-color: #555 transparent transparent transparent;
            }

            .tool:hover .tooltiptext {
                visibility: visible;
                opacity: 1;
            }
        </style>
        <!-- </table> -->
        <h1>Personal</h1>
        <table>
            <tbody>
                <tr>
                    <td> 1 </td>
                    <td>
                        <div class="tool"><span class="main">DISCOVERY SESSION</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li>Discover Session A/B</li>
                                </ul>
                            </span>
                        </div>
                    </td>
                    <td>
                        <?= $data1; ?>
                    </td>
                </tr>
                <tr>
                    <td> 2 </td>
                    <td>
                        <div class="tool"><span class="main">GOAL SETTING</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li>Client Pondering Sheet</li>
                                    <li>Goal Settings</li>
                                </ul>
                            </span>
                        </div>
                    </td>
                    <td>
                        <?= $data2; ?>
                    </td>
                </tr>
                <tr>
                    <td> 3 </td>
                    <td>
                        <div class="tool"><span class="main">ACTION PLAN AGREEMENT</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li>Action Plan Agreement Sheet</li>
                                </ul>
                            </span>
                    </td>
                    <td>
                        <?= $data3;?>
                    </td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>
                        <div class="tool"><span class="main">ADJUST BELIEF & VALUES</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li>Conflict Belief</li>
                                    <li>What Do You Need To Let Go Of</li>
                                </ul>
                            </span>
                    </td>
                    <td>
                        <?= $data4;?>
                    </td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>
                        <div class="tool"><span class="main">ENERGY DETOX & SHIELD</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li>Stop procrastinating and get it done</li>
                                    <li>Daily Success Habits</li>
                                    <li>Energy zappers</li>
                                    <li>My spark team</li>
                                    <li>What Makes My Heart Sing</li>
                                </ul>
                            </span>
                    </td>
                    <td>
                        <?= $data5;?>
                    </td>
                </tr>
                <tr>
                    <td>6</td>
                    <td>
                        <div class="tool"><span class="main">ACTIVATE PROJECTION POWERS</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li>Mentor Magic</li>
                                </ul>
                            </span>
                        </div>
                    </td>
                    <td>
                        <?= $data6;?>
                    </td>
                </tr>
                <tr>
                    <td>7</td>
                    <td>
                        <div class="tool"><span class="main">EVALUATE RESULTS</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li>Golden Image List</li>
                                </ul>
                            </span>
                        </div>
                    </td>
                    <td>
                        <?= $data7;?>
                    </td>
                </tr>
                <tr>
                    <td>8</td>
                    <td>
                        <div class="tool"><span class="main">RECONCLILE RESULTS</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li>Monthly Client Review and Feedback</li>
                                </ul>
                            </span>
                        </div>
                    </td>
                    <td>
                        <?= $data8;?>
                    </td>
                </tr>
                <tr>
                    <td>9</td>
                    <td>
                        <div class="tool"><span class="main">REJOICE REPEAT</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li></li>
                                </ul>
                            </span>
                        </div>
                    </td>
                    <td>
                        <?= $data9;?>
                    </td>
                </tr>
            </tbody>
        </table>
        <h1>Business</h1>
        <table>
            <tbody>
                <tr>
                    <td> 1 </td>
                    <td>
                        <div class="tool"><span class="main">YOUR PURPOSE-VISION-MASSAGE</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li>A-1 Your business vision</li>
                                    <li>A-2 Branding exercise</li>
                                </ul>
                            </span>
                        </div>
                    </td>
                    <td>
                        <?= $market1;?>
                    </td>
                </tr>
                <tr>
                    <td> 2 </td>
                    <td>
                        <div class="tool"><span class="main">YOUR TRIBE-PROBLEM-SOLUTION</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li>A-3 Client profile</li>
                                    <li>A-4 Why people buy what you're Selling</li>
                                    <li>A-5 How to talk about your new Avatar</li>
                                    <li>B-5 49 Questions + Bio</li>
                                </ul>
                            </span>
                        </div>
                    </td>
                    <td>
                        <?= $market2;?>
                    </td>
                </tr>
                <tr>
                    <td> 3 </td>
                    <td>
                        <div class="tool"><span class="main">MARKET VALIDATION-SOFT LAUNCH</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li>B-14 60 day Launch check list From conceptualization to postmortem</li>
                                    <li>A-10 Idea Mapping- Niche tightening</li>
                                    <li>B-7 Pre-selling your high end program</li>
                                    <li>A-11 client interview approach questionnaire?</li>
                                </ul>
                            </span>
                        </div>
                    </td>
                    <td>
                        <?= $market3;?>
                    </td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>
                        <div class="tool"><span class="main">CONCEPT DELIVERY</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li>B-1 The Sales cycle</li>
                                    <li>B-2 Self- Promotion strategies</li>
                                </ul>
                            </span>
                        </div>
                    </td>
                    <td>
                        <?= $market4;?>
                    </td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>
                        <div class="tool"><span class="main">MEDIUM & STRATEGY</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li>B-9 Launch Emails</li>
                                    <li>B-3 Know like trust- launch</li>
                                </ul>
                            </span>
                        </div>
                    </td>
                    <td>
                        <?= $market5;?>
                    </td>
                </tr>
                <tr>
                    <td>6</td>
                    <td>
                        <div class="tool"><span class="main">CRAFT COPY & PRODUCTS</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li>A-7 Creating the know like & trust factor</li>
                                    <li>A-8 Product creation</li>
                                    <li>B-6 content structure</li>
                                    <li>A-9 Perfect pricing & simple selling</li>
                                </ul>
                            </span>
                        </div>
                    </td>
                    <td>
                        <?= $market6;?>
                    </td>
                </tr>
                <tr>
                    <td>7</td>
                    <td>
                        <div class="tool"><span class="main">SITES-TECH-PAYMENT MECHANSIM</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li>B-8 Launch Details</li>
                                </ul>
                            </span>
                        </div>
                    </td>
                    <td>
                        <?= $market7;?>
                    </td>
                </tr>
                <tr>
                    <td>8</td>
                    <td>
                        <div class="tool"><span class="main">SYNCRONIZED LAUNCH</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li>A-6 The transformation stepping into the new Avatar</li>
                                    <li>B-12 Pulling it all togeather</li>
                                </ul>
                            </span>
                        </div>
                    </td>
                    <td>
                        <?= $market8;?>
                    </td>
                </tr>
                <tr>
                    <td>9</td>
                    <td>
                        <div class="tool"><span class="main">EVALUATE & ADJUST</span>
                            <span class="tooltiptext">
                                <ul>
                                    <li>B-10 Getting your client to Finish LIne</li>
                                </ul>
                            </span>
                        </div>
                    </td>
                    <td>
                        <?= $market9;?>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- START PLUGINS -->
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery - ui.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / bootstrap / bootstrap.min.js"></script>
<!-- END PLUGINS -->

<!-- START THIS PAGE PLUGINS-->
<script type='text/javascript' src='<?php echo base_url()."assets/";?>js/plugins/icheck/icheck.min.js'></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / mcustomscrollbar / jquery.mCustomScrollbar.min.js"></script>

<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / smartwizard / jquery.smartWizard - 2.0.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / jquery - validation / jquery.validate.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - datepicker.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - timepicker.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - colorpicker.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - file - input.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - select.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / tagsinput / jquery.tagsinput.min.js"></script>
<!-- END THIS PAGE PLUGINS-->

<!-- START TEMPLATE -->


<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins.js"></script>
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / actions.js"></script>
<div class="message-box animated fadeIn" data-sound="alert" id="mb-signout">
    <div class="mb-container">
        <div class="mb-middle">
            <div class="mb-title"><span class="fa fa-sign-out"></span> Log <strong>Out</strong> ?</div>
            <div class="mb-content">
                <p>Are you sure you want to log out?</p>
                <p>Press No if you want to continue work. Press Yes to logout current user.</p>
            </div>
            <div class="mb-footer">
                <div class="pull-right">
                    <a href="#" id="get_logout" username="<?php echo $session['username']; ?>"
                        class="btn btn-success btn-lg">Yes</a>
                    <button class="btn btn-default btn-lg mb-control-close">No</button>
                </div>
            </div>
        </div>
    </div>
</div>
<?php $this->load->view('member/footer');  ?></xmp></code></pre>
<p>Client journey Strategic map</p>
<img class="img-fluid" src="image/Strategiccoach.png" alt="Login Page" height="100">
<br><br>
<p>Client journey Strategic map controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function personal_journey($user_id=''){
if($this->isAuthorized($user_id)){
$data = array();
$data['user_id']=$user_id;
$this->load->view('yogiccoach/personal_journey',$data);
}
}</xmp></code></pre>
<p>Client journey Strategic map view</p>
<code>application/views/yogiccoach/personal_journey.php</code>
<pre><code class="language-html"><xmp><?php
	$this->load->view('yogiccoach/sidebar');
	error_reporting(1);
	$session = $this->session->get_userdata();
	$login_id=$session['user_id'];

    $user=$this->db->get_where('users',array('fld_id'=>$user_id));
    if ($user->num_rows()>0) {
        $row=$user->row_array();

        $memberName = $row["fld_username"] . " " . $row["fld_last_name"];
        $memberStatus = $row["fld_status"];
        $memberemail = $row["fld_email"];
        $marketing_form = $row['fld_marketing'];
    }

$completed1=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'2'));
$row1 = $completed1->row_array();
    if($row1['completed_date']!='')
    {
        $data1 = "<g><rect x='70' y='180' width='20' height='20' style='fill:#4dff4d;stroke:#009900;' id='coaching1' /><text x='75' y='195' class='text' fill='#009900'>1</text></g>";              
        }else{
            $data1 = "<g><rect x='70' y='180' width='20' height='20' style='fill: #0066cc; stroke:#0059b3;'/><text x='75' y='195' class='text'>1</text></g>";
        }

$completed2=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'28'));
$completed2_1=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'5'));
    
    $row2_1 = $completed2_1->row_array();
    $row2 = $completed2->row_array();
        if($row2['completed_date']!='' and $row2_1['completed_date']!=''){
            $data2 = "<g>
                <rect x='80' y='160' width='20' height='20' style='fill:#4dff4d;stroke:#009900;' />
                    <text x='85' y='175' class='text' fill='#009900'>2</text>
                </g>";    
        }elseif ($row2['completed_date']!='' or $row2_1['completed_date']!='') {
            $data2 = "<g>
                <rect x='80' y='160' width='20' height='20' style='fill:#ff8000;stroke:#cc6600;' />
                    <text x='85' y='175' class='text' fill='#cc6600'>2</text>
                </g>";
        }
        else{
            $data2 = "<g>
                    <rect x='80' y='160' width='20' height='20' style='fill: #0066cc; stroke:#0059b3;'/>
                    <text x='85' y='175' class='text'>2</text>
                </g>";
        }

    $completed3 = $this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'6'));
    
    $row3 = $completed3->row_array();
        if($row3['completed_date']!=''){
            $data3 = "<g>
                <rect x='90' y='140' width='20' height='20' style='fill:#4dff4d;stroke:#009900; ' />
                    <text x='95' y='155' class='text' fill='#009900'>3</text>
                </g>";              
        }else{
            $data3 = "<g>
                    <rect x='90' y='140' width='20' height='20' style='fill: #0066cc; stroke:#0059b3;'/>
                    <text x='95' y='155' class='text'>3</text>
                </g>";
        }

    $completed4=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'7'));
    $completed4_1=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'25'));
    
    $row4_1 = $completed4_1->row_array();
    $row4 = $completed4->row_array();
        if($row4['completed_date']!='' and $row4_1['completed_date']!=''){
            $data4 = "<g>
                <rect x='100' y='120' width='20' height='20' style='fill:#4dff4d;stroke:#009900;' />
                    <text x='105' y='135' class='text' fill='#009900'>4</text>
                </g>";
            }elseif ($row4['completed_date']!='' or $row4_1['completed_date']!=''){
            $data4 = "<g>
                <rect x='100' y='120' width='20' height='20' style='fill:#ff8000;stroke:#cc6600;' />
                    <text x='105' y='135' class='text' fill='#cc6600'>4</text>
                </g>";
        }else{
            $data4 = "<g>
                    <rect x='100' y='120' width='20' height='20' style='fill: #0066cc; stroke:#0059b3;' />
                    <text x='105' y='135' class='text'>4</text>
                </g>";
        }

    $completed5=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'21'));
    $completed5_1=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'14'));
        $row5_1 = $completed5_1->row_array();
    $completed5_2=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'16'));
        $row5_2 = $completed5_2->row_array();
    $completed5_3=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'20'));
        $row5_3 = $completed5_3->row_array();
    $completed5_4=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'26'));
        $row5_4 = $completed5_4->row_array();
        $row5 = $completed5->row_array();
        
        if($row5['completed_date']!='' and $row5_1['completed_date']!='' and $row5_2['completed_date']!='' and $row5_3['completed_date']!='' and $row5_4['completed_date']!=''){
            $data5 = "<g>
                <rect x='105' y='100' width='20' height='20' style='fill:#4dff4d;stroke:#009900;' />
                    <text x='115' y='115' class='text' fill='#009900'>5</text>
                </g>";              
        }elseif(($row5['completed_date']!='' and $row5_1['completed_date']!='' and $row5_3['completed_date']!='') or ($row5_2['completed_date']!='' and $row5_4['completed_date']!='')){
            $data5 = "<g>
                <rect x='105' y='100' width='20' height='20' style='fill:#ffff4d;stroke:#b3b300;' />
                    <text x='115' y='115' class='text' fill='#b3b300'>5</text>
                </g>";
        }elseif(($row5['completed_date']!='' and $row5_1['completed_date']!='') or (($row5_2['completed_date']!='' or $row5_3['completed_date']!='') and ($row5_4['completed_date']!=''))) {
            $data5 = "<g>
                <rect x='105' y='100' width='20' height='20' style='fill:#ff8000;stroke:#cc6600;' />
                    <text x='115' y='115' class='text' fill='#cc6600'>5</text>
                </g>";
        }elseif($row5['completed_date']!='' or $row5_1['completed_date']!='' or $row5_2['completed_date']!='' or $row5_3['completed_date']!='' or $row5_4['completed_date']!='') {
            $data5 = "<g>
                <rect x='105' y='100' width='20' height='20' style='fill:#ff3333;stroke:#e60000;' />
                    <text x='115' y='115' class='text' fill='#e60000'>5</text>
                </g>";
        }else{
            $data5 = "<g>
                    <rect x='105' y='100' width='20' height='20' style='fill: #0066cc; stroke:#0059b3;' />
                    <text x='115' y='115' class='text'>5</text>
                </g>";
        }

    $completed6=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'29'));
        
    $row6 = $completed6->row_array();
        if($row6['completed_date']!=''){
            $data6 = "<g>
                <rect x='110' y='80' width='20' height='20' style='fill:#4dff4d;stroke:#009900; ' />
                    <text x='120' y='95' class='text' fill='#009900'>6</text>
                </g>";              
        }else{
            $data6 = "<g>
                    <rect x='110' y='80' width='20' height='20' style='fill: #0066cc; stroke:#0059b3;' />
                    <text x='120' y='95' class='text'>6</text>
                </g>";
        }

    $completed7=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'8'));
        $row7 = $completed7->row_array();
        
        if($row7['completed_date']!=''){
            $data7 = "<g>
                <rect x='120' y='60' width='20' height='20' style='fill:#4dff4d;stroke:#009900; ' />
                    <text x='130' y='75' class='text' fill='#009900'>7</text>
                </g>";              
        }else{
            $data7 = "<g>
                    <rect x='120' y='60' width='20' height='20' style='fill: #0066cc; stroke:#0059b3;'/>
                    <text x='130' y='75' class='text'>7</text>
                </g>";
        }

    $completed8=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'19'));
        $row8 = $completed8->row_array();
        if($row8['completed_date']!=''){
            $data8 = "<g>
                <rect x='130' y='40' width='20' height='20' style='fill:#4dff4d;stroke:#009900; ' />
                    <text x='140' y='55' class='text' fill='#009900'>8</text>
                </g>";              
        }else{
            $data8 = "<g>
                    <rect x='130' y='40' width='20' height='20' style='fill: #0066cc; stroke:#0059b3;' />
                    <text  x='140' y='55' class='text'>8</text>
                </g>";
        }

    $completed9=$this->db->get_where('mys_coaching_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'1'));
        $row9 = $completed9->row_array();
        if($row9['completed_date']!=''){
            $data9 = "<g>
                <rect x='140' y='20' width='20' height='20' style='fill:#4dff4d;stroke:#009900; ' />
                    <text x='150' y='35' class='text' fill='#009900'>9</text>
                </g>";              
        }else{
            $data9 = "<g>
                    <rect x='140' y='20' width='20' height='20' style='fill: #0066cc; stroke:#0059b3;' />
                    <text x='150' y='35' class='text'>9</text>
                </g>";
        }
/*************************** Marketing form *******************************/
    $completed_mform1 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'1'));
        $mcompleted1 = $completed_mform1->row_array();
    $completed_mform1_1 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'2'));
        $mcompleted1_1 = $completed_mform1_1->row_array();
        if($mcompleted1['completed_date']!='' and $mcompleted1_1['completed_date']!=''){
            $market1 = "<g>
                <rect x='250' y='180' width='20' height='20' style='fill: #4dff4d;
            stroke: #009900;' />
                <text x='257' y='195' class='text' fill='#009900'>1</text>
            </g>";
     }elseif($mcompleted1['completed_date']!='' or $mcompleted1_1['completed_date']!=''){
            $market1 = "<g>
                <rect x='250' y='180' width='20' height='20' style='fill:#ff8000;stroke:#cc6600;' />
                <text x='257' y='195' class='text' fill='#cc6600'>1</text>
            </g>";
     }else{
        $market1 = "<g>
                <rect x='250' y='180' width='20' height='20' style=' fill: #0066cc;
            stroke: #0059b3;' />
                <text x='257' y='195' class='text'>1</text>
            </g>";
     }

     $completed_mform2 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'3'));
        $mcompleted2 = $completed_mform2->row_array();
    $completed_mform2_1 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'4'));
        $mcompleted2_1 = $completed_mform2_1->row_array();

    $completed_mform2_2 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'5'));
        $mcompleted2_2 = $completed_mform2_2->row_array();
    $completed_mform2_3 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'15'));
        $mcompleted2_3 = $completed_mform2_3->row_array();
        if($mcompleted2['completed_date']!='' and $mcompleted2_1['completed_date']!='' and $mcompleted2_2['completed_date']!='' and $mcompleted2_3['completed_date']!='' ){
            $market2 = "<g>
                <rect x='240' y='160' width='20' height='20' style='fill: #4dff4d;
            stroke: #009900;' />
                <text x='247' y='175' class='text' fill='#009900'>2</text>
            </g>";
     }elseif (($mcompleted2['completed_date']!='' and $mcompleted2_1['completed_date']!='') and ($mcompleted2_2['completed_date']!='' or $mcompleted2_3['completed_date']!='' ))
    {
        $market2 = "<g>
                <rect x='240' y='160' width='20' height='20' style='fill:#ffff4d;stroke:#b3b300;' />
                <text x='247' y='175' class='text' fill='#b3b300'>2</text>
            </g>";
    }elseif (($mcompleted2['completed_date']!='' and $mcompleted2_1['completed_date']!='')or ($mcompleted2_2['completed_date']!='' and $mcompleted2_3['completed_date']!='' )) 
    {
        $market2 = "<g>
                <rect x='240' y='160' width='20' height='20' style='fill:#ff8000;stroke:#cc6600;' />
                <text x='247' y='175' class='text' fill='#cc6600'>2</text>
            </g>";
    }elseif (($mcompleted2['completed_date']!='' or $mcompleted2_1['completed_date']!='')or ($mcompleted2_2['completed_date']!='' or $mcompleted2_3['completed_date']!='' )) 
    {
        $market2 = "<g>
                <rect x='240' y='160' width='20' height='20' style='fill:#ff3333;stroke:#e60000;' />
                <text x='247' y='175' class='text' fill='#e60000'>2</text>
            </g>";
    }else{
        $market2 = "<g>
                <rect x='240' y='160' width='20' height='20' style=' fill: #0066cc;
            stroke: #0059b3;' />
                <text x='247' y='175' class='text'>2</text>
            </g>";
     }
     $completed_mform3 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'24'));
$mcompleted3 = $completed_mform3->row_array();
$completed_mform3_1 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'10'));
$mcompleted3_1 = $completed_mform3_1->row_array();
$completed_mform3_2 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'17'));
$mcompleted3_2 = $completed_mform3_2->row_array();
    if($mcompleted3['completed_date']!='' and $mcompleted3_1['completed_date']!='' and $mcompleted3_2['completed_date']!='')
    {
        $market3 = "<g>
                <rect x='230' y='140' width='20' height='20' style='fill: #4dff4d;
            stroke: #009900;' />
                <text x='237' y='155' class='text' fill='#009900'>3</text>
            </g>";;
    }elseif (($mcompleted3['completed_date']!='' and $mcompleted3_1['completed_date']!='')or ($mcompleted3_2['completed_date']!='')) 
    {
        $market3 = "<g>
                <rect x='230' y='140' width='20' height='20' style='fill:#ff8000;stroke:#cc6600;' />
                <text x='237' y='155' class='text' fill='#cc6600'>3</text>
            </g>";
    }elseif (($mcompleted3['completed_date']!='' or $mcompleted3_1['completed_date']!='')or ($mcompleted3_2['completed_date']!='')) 
    {
        $market3 = "<g>
                <rect x='230' y='140' width='20' height='20' style='fill:#ff3333;stroke:#e60000;' />
                <text x='237' y='155' class='text' fill='#e60000'>3</text>
            </g>";
    }else
    {
        $market3 = "<g>
                <rect x='230' y='140' width='20' height='20' style=' fill: #0066cc;
            stroke: #0059b3;' />
                <text x='237' y='155' class='text'>3</text>
            </g>";
    }

    $completed_mform4 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'11'));
        $mcompleted4 = $completed_mform4->row_array();
    $completed_mform4_1 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'12'));
        $mcompleted4_1 = $completed_mform4_1->row_array();
        if($mcompleted4['completed_date']!='' and $mcompleted4_1['completed_date']!=''){
            $market4 = "<g>
                <rect x='220' y='120' width='20' height='20' style='fill: #4dff4d;
            stroke: #009900;' />
                <text x='227' y='135' class='text' fill='#009900'>4</text>
            </g>";
     }elseif($mcompleted4['completed_date']!='' or $mcompleted4_1['completed_date']!=''){
            $market4 = "<g>
                <rect x='220' y='120' width='20' height='20' style='fill:#ff8000;stroke:#cc6600;' />
                <text x='227' y='135' class='text' fill='#cc6600'>4</text>
            </g>";
        }else{
        $market4 = "<g>
                <rect x='220' y='120' width='20' height='20' style=' fill: #0066cc;
            stroke: #0059b3;' />
                <text x='227' y='135' class='text'>4</text>
            </g>";
     }

$completed_mform5 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'19'));
$mcompleted5 = $completed_mform5->row_array();

$completed_mform5_1 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'13'));
$mcompleted5_1 = $completed_mform5_1->row_array();
    if($mcompleted5['completed_date']!='' and $mcompleted5_1['completed_date']!='')
    {
        $market5 = "<g>
                <rect x='210' y='100' width='20' height='20' style='fill: #4dff4d;
            stroke: #009900;' />
                <text x='217' y='115' class='text' fill='#009900'>5</text>
            </g>";
    }elseif ($mcompleted5['completed_date']!='' or $mcompleted5_1['completed_date']!='') {
        $market5 = "<g>
                <rect x='210' y='100' width='20' height='20' style='fill:#ff8000;stroke:#cc6600;'/>
                <text x='217' y='115' class='text' fill='#cc6600'>5</text>
            </g>";
    }else
    {
        $market5 = "<g>
                <rect x='210' y='100' width='20' height='20' style=' fill: #0066cc;
            stroke: #0059b3;' />
                <text x='217' y='115' class='text'>5</text>
            </g>";
    }

$completed_mform6 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'7'));
$mcompleted6 = $completed_mform6->row_array();
$completed_mform6_1 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'8'));
$mcompleted6_1 = $completed_mform6_1->row_array();
$completed_mform6_2 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'16'));
$mcompleted6_2 = $completed_mform6_2->row_array();
$completed_mform6_3 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'9'));
$mcompleted6_3 = $completed_mform6_3->row_array();
        if($mcompleted6['completed_date']!='' and $mcompleted6_1['completed_date']!='' and $mcompleted6_2['completed_date']!='' and $mcompleted6_3['completed_date']!='' ){
            $market6 = "<g>
                <rect x='205' y='80' width='20' height='20' style='fill: #4dff4d;
            stroke: #009900;' />
                <text x='210' y='95' class='text' fill='#009900'>6</text>
            </g>";
     }elseif (($mcompleted6['completed_date']!='' and $mcompleted6_1['completed_date']!='') and ($mcompleted6_2['completed_date']!='' or $mcompleted6_3['completed_date']!='')) {
        $market6 = "<g>
                <rect x='205' y='80' width='20' height='20' style='fill:#ffff4d;stroke:#b3b300;' />
                <text x='210' y='95' class='text' fill='#b3b300'>6</text>
            </g>";
    }elseif (($mcompleted6['completed_date']!='' and $mcompleted6_1['completed_date']!='') or ($mcompleted6_2['completed_date']!='' and $mcompleted6_3['completed_date']!='')) {
        $market6 = "<g>
                <rect x='205' y='80' width='20' height='20' style='fill:#ff8000;stroke:#cc6600;'/>
                <text x='210' y='95' class='text' fill='#cc6600'>6</text>
            </g>";
    }elseif ($mcompleted6['completed_date']!='' or $mcompleted6_1['completed_date']!='' or $mcompleted6_2['completed_date']!='' or $mcompleted6_3['completed_date']!='') {
        $market6 = "<g>
                <rect x='205' y='80' width='20' height='20' style='fill:#ff3333;stroke:#e60000;' />
                <text x='210' y='95' class='text' fill='#e60000'>6</text>
            </g>";
    }else
    {
        $market6 = "<g>
                <rect x='205' y='80' width='20' height='20' style=' fill: #0066cc;
            stroke: #0059b3;' />
                <text x='210' y='95' class='text'>6</text>
            </g>";
    }

    $completed_mform7 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'18'));
        $mcompleted7 = $completed_mform7->row_array();
        if($mcompleted7['completed_date']!=''){
            $market7 = "<g>
                <rect x='200' y='60' width='20' height='20' style='fill: #4dff4d;
            stroke: #009900;' />
                <text x='207' y='75' class='text' fill='#009900'>7</text>
            </g>";
     }else{
        $market7 = "<g>
                <rect x='200' y='60' width='20' height='20' style=' fill: #0066cc;
            stroke: #0059b3;' />
                <text x='207' y='75' class='text'>7</text>
            </g>";
     }
     $completed_mform8 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'6'));
        $mcompleted8 = $completed_mform8->row_array();
    $completed_mform8_1 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'23'));
        $mcompleted8_1 = $completed_mform8_1->row_array();
        if($mcompleted8['completed_date']!='' and $mcompleted8_1['completed_date']!=''){
            $market8 = "<g>
                <rect x='190' y='40' width='20' height='20' style='fill: #4dff4d;
            stroke: #009900;' />
                <text x='195' y='55' class='text' fill='#009900'>8</text>
            </g>";
     }elseif($mcompleted8['completed_date']!='' or $mcompleted8_1['completed_date']!=''){
            $market8 = "<g>
                <rect x='190' y='40' width='20' height='20' style='fill:#ff8000;stroke:#cc6600;' />
                <text x='195' y='55' class='text' fill='#cc6600'>8</text>
            </g>";
     }else{
        $market8 = "<g>
                <rect x='190' y='40' width='20' height='20' style=' fill: #0066cc;
            stroke: #0059b3;' />
                <text x='195' y='55' class='text'>8</text>
            </g>";
     }

     $completed_mform9 = $this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>'20'));
        $mcompleted9 = $completed_mform9->row_array();
        if($mcompleted9['completed_date']!=''){
            $market9 = "<g>
                <rect x='180' y='20' width='20' height='20' style='fill: #4dff4d;
            stroke: #009900;' />
                <text x='185' y='35' class='text' fill='#009900'>9</text>
            </g>";
     }else{
        $market9 = "<g>
                <rect x='180' y='20' width='20' height='20' style=' fill: #0066cc;
            stroke: #0059b3;' />
                <text x='185' y='35' class='text'>9</text>
            </g>";
     }
    ?>
<style>
    .text {
        font-size: 10px;
    }

    .container {
        height: auto;
        width: 100%;
    }

    .botom_text {
        font-size: 5px;
        font-weight: 800;
    }

    text:hover+g.tooltip.css {
        opacity: 1;
    }

    g.tooltip.css {
        fill: #111;
    }

    g.tooltip.css text {
        font-size: 6px;
        fill: #fff;
    }

    .adjust:hover {
        fill: #000;
        font-size: 6px;
        text-shadow: 2px 2px #ffb3b3;
    }

    .adjust {
        font-size: 5.8px;
        fill: red;
        font-weight: 800;
    }
</style>
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Client journey Strategic map</h3>
    </div>
    <div class="panel-body">
        <h3 style='color:#000; text-transform: capitalize;'>client Name:
            <?=$memberName ?>
        </h3>
        <div class="container">
            <svg viewBox="0 0 400 200">
                <defs>
                    <linearGradient id="topcolor" x1=0% y1=0% x2=0% y2=100%>
                        <stop offset="0%" stop-color="#006600" />
                        <stop offset="100%" stop-color="#996633" stop-opacity="1" />
                    </linearGradient>
                </defs>
                <g>
                    <polygon points="100,200 170,20 230,200" style="fill:none;stroke:url(#topcolor);" />
                    <polygon points="143,90 170,20 193,90" style="fill:url(#topcolor);stroke:none;" />
                </g>

                <g>
                    <path d="M100 200 L112,170 Q170 140 220 170 L230 200 Z" fill="#4da6ff"></path>
                    <path d="M112 170 Q170 140 220 170 Q214 150 210 140 Q170 110 123 140 Q 123 140 112 170 "
                        fill="#00ffff"></path>
                    <path d="M123 140 Q170 120 210 140 Q202 118 200 110 Q170 100 135 110 Q132 120 123 140 "
                        fill="#ff8080"></path>
                    <path d="M135 110 Q170 100 200 110 Q196 100 193 90 Q170 80 143 90 Q139 100 135 110 " fill="#e6e600">
                    </path>
                    <g>
                        <text X="155" Y="162" style="font-size: 7px; font-weight: bold; fill:#fff;">VICTIM</text>
                        <text X="148" Y="139" style="font-size: 7px; font-weight: bold;fill:#fff;">BELIEVER</text>
                        <text X="143" Y="114" style="font-size: 7px; font-weight: bold;fill:#fff;">APPRENTICE</text>
                        <text X="145" Y="95" style="font-size: 7px; font-weight: bold;fill:#fff;">MANIFESTOR</text>
                        <text X="156.5" Y="63" style="font-size: 6.7px; font-weight: bold;fill:#fff;">MYSTIC</text>
                        <text X="156.5" Y="69" style="font-size: 5px; font-weight: bold;fill:#fff;">CREATOR</text>
                    </g>
                    <g>
                        <polygon points="100,200 115,185 215,185 230,200"
                            style="fill:#996633;stroke:none;stroke-width:2" />
                        <text X="112" Y="195" class="botom_text">5 SHIFTS IN CONSCIOUSNESS LEVELS</text>
                    </g>
                    <g>
                        <?php echo $data9; echo $data8; echo  $data7; echo $data6; echo $data5; echo $data4; echo $data3; echo $data2; echo $data1; ?>
                    </g>

                    <g>
                        <?php echo $market9; echo $market8; echo $market7; echo $market6; echo $market5; echo $market4; echo $market3; echo $market2; echo $market1; ?>
                    </g>
                    <g>
                        <g>
                            <path
                                d="M171 11 L171 2 Q173 5 178 2 Q180 1 184 3 L184 11 Q180 9 177 11 Q173 12 170.20 10 L170.20 11"
                                style="stroke:#000; stroke-width:1;fill:none;" />
                            <line x1="170" y1="20" x2="170" y2="0" style="stroke:#000;stroke-width:1" />
                            <path class="cls-1" d="M171 2 L171 5 L172 5  L172 3Z" />
                            <path class="cls-2" d="M171 5 L171 8 L172 8 L172 5Z" />
                            <path class="cls-1" d="M171 8 L172 8 L172 11 L171 11Z" />
                            <path class="cls-2" d="M172 3.53 L172 5 L174 5 L174 3.84Z" />
                            <path class="cls-1" d="M172 5 L172 8 L174 8 L174 5Z" />
                            <path class="cls-2" d="M172 8 L172 10.70 L174 10.75 L174 8Z" />
                            <path class="cls-1" d="M174 5 L176 5 L176 3.60 L174 3.84Z" />
                            <path class="cls-2" d="M174 5 L174 8 L176 8 L176 5Z" />
                            <path class="cls-1" d="M174 8 L174 11 L176 11 L176 8Z" />
                            <path class="cls-2" d="M176 5 L178 5 L178 2.30 L176 3.25Z" />
                            <path class="cls-1" d="M178 5 L178 8 L176 8 L176 5Z" />
                            <path class="cls-2" d="M176 8 L176 11 L178 10 L178 8Z" />
                            <path class="cls-1" d="M178 5 L180 5 L180 2.3 L178 2.05Z" />
                            <path class="cls-2" d="M180 5 L180 8 L178 8 L178 5Z" />
                            <path class="cls-1" d="M178 8 L178 11 L180 10 L180 8Z" />
                            <path class="cls-2" d="M180 5 L182 5 L182 2.3 L180 2.05Z" />
                            <path class="cls-1" d="M182 5 L182 8 L180 8 L180 5Z" />
                            <path class="cls-2" d="M180 8 L180 9.85 L182 9.7 L182 8Z" />
                            <path class="cls-1" d="M182 5 L184 5 L184 2.3 L182 2.05Z" />
                            <path class="cls-2" d="M183.66 5 L183.66 8 L182 8 L182 5Z" />
                            <path class="cls-1" d="M182 8 L182 10 L183.5 11 L183.5 8Z" />


                            <defs>
                                <style>
                                    .cls-1 {
                                        fill: #010101;
                                        stroke: none
                                    }

                                    .cls-2 {
                                        fill: #fff;
                                        stroke: none
                                    }
                                </style>
                            </defs>
                        </g>
                    </g>
                    <g>
                        <text x="0" y="195" class="adjust">DISCOVERY SESSION</text>
                        <g class="tooltip css" transform="translate(20,225)">
                            <rect x="-3em" y="-48" width="7em" height="1em" />
                            <text x="14" y="-45" dy="1em" text-anchor="middle">
                                Discover Session A/B</text>
                        </g>
                        <text x="0" y="175" class="adjust">GOAL SETTING</text>
                        <g class="tooltip css" transform="translate(20,200)">
                            <rect x="-3em" y="-45" width="7.5em" height="1.5em" />
                            <text x="18" y="-43" dy="1em" text-anchor="middle">
                                Client Pondering Sheet</text>
                            <text x="5" y="-36" dy="1em" text-anchor="middle">
                                Goal Settings</text>
                        </g>

                        <text x="0" y="155" class="adjust">ACTION PLAN AGREEMENT</text>
                        <g class="tooltip css" transform="translate(20,183)">
                            <rect x="-3em" y="-48" width="9em" height="1.25em" />
                            <text x="26" y="-45" dy="1em" text-anchor="middle">
                                Action Plan Agreement Sheet</text>
                        </g>
                        <text x="0" y="135" class="adjust">ADJUST BELIEF & VALUES</text>
                        <g class="tooltip css" transform="translate(20,163)">
                            <rect x="-3em" y="-48" width="9em" height="1.25em" />
                            <text x="1" y="-48" dy="1em" text-anchor="middle">
                                Conflict Belief</text>
                            <text x="26" y="-40" dy="1em" text-anchor="middle">
                                What Do You Need To Let Go Of</text>
                        </g>
                        <text x="0" y="115" class="adjust">ENERGY DETOX & SHIELD</text>
                        <g class="tooltip css" transform="translate(120,150)">
                            <rect x="-3em" y="-50" width="9em" height="3.25em" />
                            <text x="16" y="-48" dy="1em" text-anchor="middle">
                                Stop procrastinating and get it done</text>
                            <text x="-3" y="-40" dy="1em" text-anchor="middle">
                                Daily Success Habits</text>
                            <text x="-10" y="-33" dy="1em" text-anchor="middle">
                                Energy zappers</text>
                            <text x="-11" y="-26" dy="1em" text-anchor="middle">
                                My spark team</text>
                            <text x="6" y="-20" dy="1em" text-anchor="middle">
                                What Makes My Heart Sing</text>
                        </g>

                        <text x="0" y="95" class="adjust">ACTIVATE PROJECTION POWERS</text>
                        <g class="tooltip css" transform="translate(20,125)">
                            <rect x="-3em" y="-50" width="5em" height="1em" />
                            <text x="1" y="-48" dy="1em" text-anchor="middle">
                                Mentor Magic</text>
                        </g>
                        <text x="0" y="75" class="adjust">EVALUATE RESULTS</text>
                        <g class="tooltip css" transform="translate(20,106)">
                            <rect x="-3em" y="-50" width="6em" height="1em" />
                            <text x="6" y="-48" dy="1em" text-anchor="middle">
                                Golden Image List</text>
                        </g>
                        <text x="0" y="55" class="adjust">RECONCLILE RESULTS</text>
                        <g class="tooltip css" transform="translate(20,88)">
                            <rect x="-3em" y="-50" width="8em" height="1em" />
                            <text x="8" y="-48" dy="1em" text-anchor="middle">
                                Monthly Client Review and Feedback</text>
                        </g>

                        <text x="0" y="35" class="adjust">REJOICE REPEAT</text>
                        <g class="tooltip css" transform="translate(20,68)">
                            <rect x="-3em" y="-50" width="8em" height="1em" />
                            <text x="8" y="-48" dy="1em" text-anchor="middle">
                            </text>
                        </g>
                        <text x="0" y="10" style="font-size:10px; fill: #000; font-weight:800;">PERSONAL</text>
                    </g>
                    <g>
                        <rect x="65" y="0" width="9" height="10" style="fill: #0066cc; stroke:#0059b3;"></rect>
                        <text x="70" y="10" dy="1em" text-anchor="middle"
                            style="font-size:4px;font-weight:bold;">0%</text>
                        <rect x="77" y="0" width="9" height="10" style="fill:#ff3333;stroke:#e60000;"></rect>
                        <text x="81" y="10" dy="1em" text-anchor="middle"
                            style="font-size:4px;font-weight:bold;">25%</text>
                        <rect x="88" y="0" width="9" height="10" style="fill:#ff8000;stroke:#cc6600;"></rect>
                        <text x="92" y="10" dy="1em" text-anchor="middle"
                            style="font-size:4px;font-weight:bold;">50%</text>
                        <rect x="99" y="0" width="9" height="10" style="fill:#ffff4d;stroke:#b3b300;"></rect>
                        <text x="103" y="10" dy="1em" text-anchor="middle"
                            style="font-size:4px;font-weight:bold;">75%</text>
                        <rect x="110" y="0" width="9" height="10" style="fill:#4dff4d;stroke:#009900;"></rect>
                        <text x="115" y="10" dy="1em" text-anchor="middle"
                            style="font-size:4px;font-weight:bold;">100%</text>
                    </g>
                    <g>
                        <text x="275" y="195" class="adjust">YOUR PURPOSE-VISION-MESSAGE</text>
                        <g class="tooltip css" transform="translate(215,228)">
                            <rect x="-3em" y="-50" width="8em" height="2em" />
                            <text x="8" y="-48" dy="1em" text-anchor="middle">A-1 Your business vision
                            </text>
                            <text x="5" y="-40" dy="1em" text-anchor="middle">A-2 Branding exercise</text>
                        </g>
                        <text x="275" y="175" class="adjust">YOUR TRIBE-PROBLEM-SOLUTION</text>
                        <g class="tooltip css" transform="translate(215,218)">
                            <rect x="-4em" y="-80" width="9em" height="3.5em" />
                            <text x="-25" y="-80" dy="1em" text-anchor="middle">A-3 Client profile
                            </text>
                            <text x="6" y="-70" dy="1em" text-anchor="middle">A-4 Why people buy what you're
                                Selling</text>
                            <text x="5" y="-58" dy="1em" text-anchor="middle">A-5 How to talk about your new Avatar
                            </text>
                            <text x="-15" y="-48" dy="1em" text-anchor="middle">B-5 49 Questions + Bio</text>
                        </g>
                        <text x="275" y="155" class="adjust">MARKET VALIDATION-SOFT LAUNCH</text>
                        <g class="tooltip css" transform="translate(215,200)">
                            <rect x="-4em" y="-80" width="9em" height="3.5em" />
                            <text x="2" y="-80" dy="1em" text-anchor="middle">B-14 60 day Launch check list From-
                            </text>
                            <text x="6" y="-73" dy="1em" text-anchor="middle">conceptualization to postmortem</text>
                            <text x="2" y="-66" dy="1em" text-anchor="middle">A-10 Idea Mapping- Niche tightening
                            </text>
                            <text x="4" y="-59" dy="1em" text-anchor="middle">B-7 Pre-selling your high end
                                program</text>
                            <text x="-5" y="-52" dy="1em" text-anchor="middle">A-11 client interview approach-</text>
                            <text x="1" y="-46" dy="1em" text-anchor="middle">questionnaire?</text>
                        </g>
                        <text x="275" y="135" class="adjust">CONCEPT DELIVERY</text>
                        <g class="tooltip css" transform="translate(215,200)">
                            <rect x="-2em" y="-80" width="7em" height="1.5em" />
                            <text x="4" y="-78" dy="1em" text-anchor="middle">B-1 The Sales cycle
                            </text>
                            <text x="17" y="-70" dy="1em" text-anchor="middle">B-2 Self- Promotion strategies</text>
                        </g>

                        <text x="275" y="115" class="adjust">MEDIUM & STRATEGY</text>
                        <g class="tooltip css" transform="translate(215,180)">
                            <rect x="-2em" y="-80" width="7em" height="1.5em" />
                            <text x="16" y="-80" dy="1em" text-anchor="middle">B-9 Launch Emails</text>
                            <text x="14" y="-73" dy="1em" text-anchor="middle">B-3 Know like trust- launch</text>
                        </g>

                        <text x="275" y="95" class="adjust">CRAFT COPY & PRODUCTS</text>
                        <g class="tooltip css" transform="translate(215,150)">
                            <rect x="-2em" y="-80" width="7em" height="3.5em" />
                            <text x="17" y="-80" dy="1em" text-anchor="middle">A-7 Creating the know like & -
                            </text>
                            <text x="4" y="-73" dy="1em" text-anchor="middle">trust factor</text>
                            <text x="4" y="-67" dy="1em" text-anchor="middle">A-8 Product creation</text>
                            <text x="5" y="-59" dy="1em" text-anchor="middle">B-6 content structure</text>
                            <text x="5" y="-52" dy="1em" text-anchor="middle">A-9 Perfect pricing & -</text>
                            <text x="5" y="-47" dy="1em" text-anchor="middle">simple selling</text>
                        </g>
                        <text x="275" y="75" class="adjust">SITES-TECH-PAYMENT MECHANSIM</text>
                        <g class="tooltip css" transform="translate(215,145)">
                            <rect y="-80" width="5em" height="1em" />
                            <text x="29" y="-78" dy="1em" text-anchor="middle">B-8 Launch Details
                            </text>
                        </g>

                        <text x="275" y="55" class="adjust">SYNCRONIZED LAUNCH</text>
                        <g class="tooltip css" transform="translate(215,125)">
                            <rect x="-2em" y="-80" width="7em" height="2em" />
                            <text x="10" y="-78" dy="1em" text-anchor="middle">A-6 The transformation--
                            </text>
                            <text x="19" y="-72" dy="1em" text-anchor="middle">stepping into the new Avatar
                            </text>
                            <text x="14" y="-64" dy="1em" text-anchor="middle">B-12 Pulling it all togeather
                            </text>
                        </g>
                        <text x="275" y="35" class="adjust">EVALUATE & ADJUST</text>
                        <g class="tooltip css" transform="translate(215,100)">
                            <rect x="-2em" y="-80" width="7em" height="1.3em" />
                            <text x="13" y="-80" dy="1em" text-anchor="middle">B-10 Getting your client to
                            </text>
                            <text x="2" y="-72" dy="1em" text-anchor="middle">Finish LIne
                            </text>
                        </g>
                        <text x="275" y="10" style="font-size:10px; fill:#000; font-weight:800;">BUSINESS</text>
                    </g>
                    <g>
                        <rect x="345" y="0" width="9" height="10" style='fill: #0066cc; stroke:#0059b3;'></rect>
                        <text x="350" y="10" dy="1em" text-anchor="middle"
                            style="font-size:4px;font-weight:bold;">0%</text>
                        <rect x="357" y="0" width="9" height="10" style='fill:#ff3333;stroke:#e60000;'></rect>
                        <text x="361" y="10" dy="1em" text-anchor="middle"
                            style="font-size:4px;font-weight:bold;">25%</text>
                        <rect x="368" y="0" width="9" height="10" style='fill:#ff8000;stroke:#cc6600;'></rect>
                        <text x="372" y="10" dy="1em" text-anchor="middle"
                            style="font-size:4px;font-weight:bold;">50%</text>
                        <rect x="379" y="0" width="9" height="10" style='fill:#ffff4d;stroke:#b3b300;'></rect>
                        <text x="383" y="10" dy="1em" text-anchor="middle"
                            style="font-size:4px;font-weight:bold;">75%</text>
                        <rect x="390" y="0" width="9" height="10" style='fill:#4dff4d;stroke:#009900;'></rect>
                        <text x="395" y="10" dy="1em" text-anchor="middle"
                            style="font-size:4px;font-weight:bold;">100%</text>
                    </g>

            </svg>
        </div>
    </div>
</div>
</div>
<!-- START PLUGINS -->
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery - ui.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / bootstrap / bootstrap.min.js"></script>
<!-- END PLUGINS -->

<!-- START THIS PAGE PLUGINS-->
<script type='text/javascript' src='<?php echo base_url()."assets/";?>js/plugins/icheck/icheck.min.js'></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / mcustomscrollbar / jquery.mCustomScrollbar.min.js"></script>

<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / smartwizard / jquery.smartWizard - 2.0.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / jquery - validation / jquery.validate.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - datepicker.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - timepicker.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - colorpicker.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - file - input.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - select.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / tagsinput / jquery.tagsinput.min.js"></script>
<!-- END THIS PAGE PLUGINS-->

<!-- START TEMPLATE -->


<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins.js"></script>
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / actions.js"></script>
<div class="message-box animated fadeIn" data-sound="alert" id="mb-signout">
    <div class="mb-container">
        <div class="mb-middle">
            <div class="mb-title"><span class="fa fa-sign-out"></span> Log <strong>Out</strong> ?</div>
            <div class="mb-content">
                <p>Are you sure you want to log out?</p>
                <p>Press No if you want to continue work. Press Yes to logout current user.</p>
            </div>
            <div class="mb-footer">
                <div class="pull-right">
                    <a href="#" id="get_logout" username="<?php echo $session['username']; ?>"
                        class="btn btn-success btn-lg">Yes</a>
                    <button class="btn btn-default btn-lg mb-control-close">No</button>
                </div>
            </div>
        </div>
    </div>
</div>
<?php $this->load->view('member/footer');  ?></xmp></code></pre>
<p>The Green Machine </p>
<img class="img-fluid" src="image/greanmashincoach.png" alt="Login Page" height="100">
<br><br>
<p>green machine controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function greenmashin()
{
$this->load->view('yogiccoach/clientjourney/greenmashin');
}
public function cjfiltter()
{
$brandis = array();
$Source = array();

$from = date("Y-m-d", strtotime($_POST['from']));
$to = date("Y-m-d", strtotime($_POST['to']));
parse_str($_POST['brandss'], $brandis);
parse_str($_POST['Source'], $Source);
foreach ($brandis as $ids) {
$ids;
}
foreach ($Source as $sorch) {
$sorch;
}

if (!empty($ids)) {
$brandii = implode("','", $ids); //change into comma separated value to sub array
} else {
$brandii = "1','2','3','4','5','6','7','8";
}

if (!empty($sorch)) {
$sorche = implode("','", $sorch); //change into comma separated value to sub array
} else {
$sorche = "FB Contact','LI Contact','Instagram','Emails";
}

if (!empty($from)) {
$from = $from;
} else {
$from = date("Y-m-d", strtotime(2001 - 01 - 01));
}

if (!empty($to)) {
$to = $to;
} else {
$to = date("Y-m-d", strtotime(2031 - 01 - 01));
}

$query = "SELECT * FROM `mys_cjuser` WHERE `fld_coach_id`='".$this->userid."' ";
if(isset($from, $to) && !empty($from) && !empty($to))
{
$query .= " AND `date` >= '".$from."' AND `date` <= '".$to." '";
          }
        
          if(isset($brandii))
          {
           $query .= " AND `Audience` IN('".$brandii."')"; } if(isset($sorche)) { $query .=" AND `source` IN('"
    .$sorche."')"; } $data=$this->db->query($query);
    $output = '<table id="getdatatable" class="table table-striped table-bordered example1" cellspacing="0">
        <thead>
            <tr>
                <th class="text-center">No</th>
                <th class="text-center">Start Date</th>
                <th class="text-center">Unique Id</th>
                <th class="text-center">Name</th>
                <th class="text-center">Description</th>
                <th class="text-center">FB Group</th>
                <th class="text-center">Last Activity</th>
                <th class="text-center">Next Activity</th>
                <th class="text-center">Next Activity Date </th>
                <th class="text-center">Research</th>
                <th class="text-center">History</th>
                <th class="text-center">Edit</th>
                <th class="text-center">Level transfer</th>
                <th class="text-center">Email</th>
                <th class="text-center">Location</th>
                <th class="text-center">Leadowner</th>
                <th class="text-center">Phone No.</th>
                <th class="text-center">Delete</th>
            </tr>
        </thead>
        <tbody>';
            if($data->num_rows() > 0)
            {
            $i = $data->num_rows();
            foreach($data->result_array() as $row)
            {
            $sel = $this->db->get_where('next_action',array('fld_cjuser'=>$row['fld_id']));
            $row1 = $sel->row_array();
            $this->db->order_by("id", "desc");
            $this->db->where('fld_cjuser', $row['fld_id']);
            $this->db->limit(1, 1);
            $last_action = $this->db->get('cj_history');
            $row2 = $last_action->row_array();
            if($row["fggroup"] == '0'){
            $fggroup = "Yes";
            } else{
            $fggroup = "No";
            }
            if($row1["date"] == ""){
            $date = " ";
            }else{
            $date = date("m/d/y", strtotime($row1["date"]));
            }
            if($row['Audience'] == '1'){
            $audience = "selected='selected'";
            }else{
            $audience = "";
            }

            if($row['Audience'] == '2'){
            $audience2 = "selected='selected'";
            }else{
            $audience2 = "";
            }
            if($row['Audience'] == '3'){
            $audience3 = "selected='selected'";
            }else{
            $audience3 = "";
            }
            if($row['Audience'] == '4'){
            $audience4 = "selected='selected'";
            }else{
            $audience4 = "";
            }
            if($row['Audience'] == '5'){
            $audience5 = "selected='selected'";
            }else{
            $audience5 = "";
            }
            if($row['Audience'] == '6'){
            $audience6 = "selected='selected'";
            }else{
            $audience6 = "";
            }

            if($row['Audience'] == '7'){
            $audience7 = "selected='selected'";
            }else{
            $audience7 = "";
            }
            if($row['Audience'] == '8'){
            $audience8 = "selected='selected'";
            }else{
            $audience8 = "";
            }

            if (($row1['date'] == ""))
            {
            if ($row['Audience'] == '1') {
            $checked = "style='background: #ccc;'";
            } elseif ($row['Audience'] == '2') {
            $checked = "style='background: #b8daff;'";
            } elseif ($row['Audience'] == '3') {
            $checked = "style='background: #ff9900;'";
            } elseif ($row['Audience'] == '4') {
            $checked = "style='background: #ffeeba;'";
            } elseif ($row['Audience'] == '5') {
            $checked = "style='background: #c3e6cb;'";
            }elseif ($row['Audience'] == '6') {
            $checked = "style='background: #f5c6cb;'";
            $style = "table-danger";
            }elseif ($row['Audience'] == '7') {
            $checked = "style='background: #b23cfd;'";
            $style = "table-danger";
            }elseif ($row['Audience'] == '8') {
            $checked = "style='background: #b23cfd;'";
            $style = "table-danger";
            }
            } else {
            if (date('m/d/y', strtotime($row1['date'])) > date("m/d/y")) {
            $checked = "style='background: #FF6B6B;'";
            }else{
            if ($row['Audience'] == '1') {
            $checked = "style='background: #ccc;'";
            } elseif ($row['Audience'] == '2') {
            $checked = "style='background: #b8daff;'";
            } elseif ($row['Audience'] == '3') {
            $checked = "style='background: #ff9900;'";
            } elseif ($row['Audience'] == '4') {
            $checked = "style='background: #ffeeba;'";
            } elseif ($row['Audience'] == '5') {
            $checked = "style='background: #c3e6cb;'";
            }elseif ($row['Audience'] == '6') {
            $checked = "style='background: #f5c6cb;'";
            $style = "table-danger";
            }elseif ($row['Audience'] == '7') {
            $checked = "style='background: #b23cfd;'";
            $style = "table-danger";
            }elseif ($row['Audience'] == '8') {
            $checked = "style='background: #b23cfd;'";
            $style = "table-danger";
            }
            }
            }

            $output .='<tr '. $checked .'>
                <td class="text-center">'. $i .'</td>
                <td class="text-center">'. date("m/d/Y", strtotime($row["date"])) .'</td>
                <td class="text-center"><a href="'. base_url('yogiccoach/research/'.$row[" fld_id"]) .'">'.
                        $row["level"] .'</a></td>
                <td class="text-center"><a href="'. base_url('yogiccoach/research/'.$row[" fld_id"]) .'">'.
                        $row["first_name"] . $row["last_name"] .'</a></td>
                <td class="text-center">'. $row["description"] .'</td>
                <td class="text-center">'.$fggroup .'</td>
                <td class="text-center">'. $row2["title"] .'</td>
                <td class="text-center">'. $row1["title"] .'</td>
                <td class="text-center">'. $date .'</td>
                <td class="text-center"><a href="'. base_url('yogiccoach/research/'.$row[" fld_id"]) .'"><i
                            class="fab fa-searchengin" style="font-size: 30px;color:#000"></i></a></td>
                <td class="text-center"><a href="'. base_url('yogiccoach/notes/'.$row[" fld_id"]) .'"><i
                            class="fa fa-history" aria-hidden="true" style="font-size: 20px;color:#000"></i></a></td>
                <td class="text-center"><a href="'. base_url('yogiccoach/cjedit/'.$row[" fld_id"]) .'"><i
                            class="fas fa-pen-square" style="font-size: 25px;color:#000"></i></a></td>
                <td style="padding: 10px 0 !important;">
                    <select class="levels" style="width: 100%;" data-id="'. $row[" fld_id"] .'">
                        <option disabled>--Select Level--</option>
                        <option '. $audience .' value="1">Level 1</option>
                        <option '. $audience2 .' value="2">Level 2</option>
                        <option '. $audience3 .' value="3">Level 3</option>
                        <option '. $audience4 .' value="4">Level 4</option>
                        <option '. $audience5 .' value="5">Level 5</option>
                        <option '. $audience6 .' value="6">Level 6</option>
                        <option '. $audience7 .' value="7">Level 7</option>
                        <option '. $audience8 .' value="8">Level 8</option>
                    </select>
                </td>
                <td>'. $row['fld_email'] .'</td>
                <td class="text-center">'. $row['address'] .'</td>
                <td class="text-center">'. $row['lead'] .'</td>
                <td class="text-center">'. $row['phone'] .'</td>
                <td class="text-center"><a class="delete" href="#delete" data-id="'. $row[" fld_id"] .'"><i
                            class="fas fa-trash" style="font-size: 25px;color:#000"></i></a></td>
            </tr>';
            $i--;
            }
            }

            $output .= '</tbody>
    </table>';
    echo $output;
    }</xmp></code></pre>
<p>green machine view</p>
<code>application/views/yogiccoach/clientjourney/greenmashin.php</code>
<pre><code class="language-html"><xmp><?php
	$this->load->view('yogiccoach/sidebar');
	//$user_id=$_GET['user_id'];
	error_reporting(0);
	$session=$this->session->get_userdata();
	$user_id=$session['user_id'];
?>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
<style>
    .btns {
        color: #fff;
        font-size: 20px;
        font-weight: 600;
        padding: 5px 10px;
        width: 120px !important;
        text-decoration: none;
        background: #2f3c48;
        border-radius: 5px;
    }

    .btns:hover {
        text-decoration: none;
        color: #fff;
        background: #3d4e5d;
    }

    .page-content {
        background-size: cover !important;
        background-image: url('<?php echo base_url('assets/new_client_dashboard/images/Green Machine Baground.jpg'); ?>') !important;
    }
</style>
<center>
    <img src="<?php echo base_url('assets/new_client_dashboard/images/Maanas Media Png.png'); ?>" class="img-fluid"
        width="500">
    <h1 style="color:#50C878;font-weight: 900;font-size: 5rem;font-family: 'Fredoka One', cursive;">The Green Machine
    </h1><br>
    <a href="<?= base_url('yogiccoach/cjportal'); ?>" class="btns">Client Journey</a>
    <a href="worksheet" class="btns">KPI's</a>
    <a href="facebook_group" class="btns" style="width: 300px;">Facebook Group Marketing/Activity</a>
    <a class="btns" href="coachnotes">RGA Report</a>
</center>
<?php $this->load->view('yogiccoach/footer'); ?></xmp></code></pre>
<p>client journey levels</p>
<img class="img-fluid" src="image/cjportalcoach.png" alt="Login Page" height="100">
<br><br>
<p>client journey levels controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function cjportal()
{
$this->load->view('yogiccoach/clientjourney/cjportal');
}</xmp></code></pre>
<p>client journey levels view</p>
<code>application/view/yogiccoach/clientjourney/cjportal.php</code>
<pre><code class="language-html"><xmp><?php
	error_reporting(0);
	$session=$this->session->get_userdata();
	$user_id=$session['user_id'];
?>
<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<style>
    @import url('https://fonts.googleapis.com/css?family=Oswald');

    * {
        margin: 0;
        padding: 0;
        border: 0;
        box-sizing: border-box
    }

    body {
        background-color: #dadde6;
        font-family: arial
    }

    .fl-left {
        float: left
    }

    .fl-right {
        float: right
    }

    .container {
        width: 90%;
        /* margin: 100px auto */
    }

    h1 {
        text-transform: uppercase;
        font-weight: 900;
        border-left: 10px solid #fec500;
        padding-left: 10px;
        margin-bottom: 30px
    }

    .row {
        overflow: hidden
    }

    .card {
        display: table-row;
        width: 49%;
        /* background-color: #222; */
        border: 1px solid #000;
        color: #989898;
        margin: 20px 0;
        font-family: 'Oswald', sans-serif;
        text-transform: uppercase;
        border-radius: 4px;
        position: relative
    }

    .card+.card {
        margin-left: 2%
    }

    .date {
        display: table-cell;
        width: 25%;
        position: relative;
        text-align: center;
        border-right: 3px dashed #000;
    }

    .date:before,
    .date:after {
        content: "";
        display: block;
        width: 30px;
        height: 30px;
        background-color: #000;
        position: absolute;
        top: -15px;
        right: -15px;
        z-index: 1;
        border-radius: 50%
    }

    .date:after {
        top: auto;
        bottom: -15px
    }

    .date time {
        display: block;
        position: absolute;
        top: 50%;
        left: 50%;
        -webkit-transform: translate(-50%, -50%);
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%)
    }

    .date time span {
        display: block
    }

    .date time span:first-child {
        color: #000;
        font-weight: 600;
        font-size: 250%
    }

    .date time span:last-child {
        text-transform: uppercase;
        font-weight: 600;
        color: black;
        margin-top: -10px
            /* color:#000; */
    }

    .card-cont {
        display: table-cell;
        width: 75%;
        font-size: 85%;
        padding: 10px 10px 30px 50px;
    }

    .card-cont p {
        color: #000;
        /*font-weight: 600;*/
        font-size: 120%;
    }

    .card-cont>div {
        display: table-row
    }

    .card-cont .even-date i,
    .card-cont .even-info i,
    .card-cont .even-date time,
    .card-cont .even-info p {
        display: table-cell
    }

    .card-cont .even-date i,
    .card-cont .even-info i {
        padding: 5% 5% 0 0
    }

    .card-cont .even-info p {
        padding: 30px 50px 0 0
    }

    .card-cont .even-date time span {
        display: block
    }

    .card-cont a {
        display: block;
        text-decoration: none;
        width: 80px;
        height: 30px;
        color: #fff;
        font-size: 150%;
        background-color: 000;
        text-align: center;
        line-height: 30px;
        border-radius: 2px;
        position: absolute;
        right: 10px;
        bottom: 10px
    }

    .card-cont a:hover {
        text-decoration: none;
        color: #fff;
    }

    .btns {
        border: 2px solid #000;
        color: #000;
        font-size: 20px;
        font-weight: 600;
        padding: 5px 10px;
        width: 120px !important;
        border-radius: 5px;
        text-decoration: none;
    }

    .btns:hover {
        text-decoration: none;
        color: #000;
    }

    @media screen and (max-width: 860px) {
        .card {
            display: block;
            float: none;
            width: 100%;
            margin-bottom: 10px
        }

        .card+.card {
            margin-left: 0
        }

        .card-cont .even-date,
        .card-cont .even-info {
            font-size: 75%
        }
    }
</style>
<div class="container"><br>
    <div style="float:right">
        <a class="btns" href="<?= base_url('yogiccoach'); ?>">Portal Dashboard</a>
        <a class="btns" href="<?= base_url('yogiccoach/greenmashin'); ?>">Home</a>
        <a class="btns" href="<?= base_url('yogiccoach/allcjuser'); ?>">Show All</a>
        <a class="btns" href="<?= base_url('yogiccoach/cjuseradd'); ?>">Add New</a>
    </div>
    <h1>Levels </h1>
    <center>
        <h3
            style="border: 2px solid #fff;background:#000;color: #fff;font-size: 26px;font-weight: 800;padding: 5px 10px;width: 200px !important;radius: 5px;text-decoration: none;">
            Total
            <?php  echo $this->db->get_where('cjuser',array('fld_coach_id'=>$user_id))->num_rows(); ?>
        </h3>
    </center>
    <section>
        <div class="row">
            <article class="card fl-left" style="background-color:#ccc;" data-href="connectionAudience">
                <section class="date">
                    <time datetime="23th feb">
                        <span>1</span><span>Level</span>
                    </time>
                </section>
                <section class="card-cont">
                    <p style="font-size: 20px;">1. Contact</p>
                    <p style="padding:0 15px 23px 0;">Friend request/ Connection Request / Welcome Message.</p><br>
                    <a href="connectionAudience">
                        <?php  echo $this->db->get_where('cjuser',array('fld_coach_id'=>$user_id,'Audience'=>'1'))->num_rows(); ?>
                    </a>
                </section>
            </article>
            <article data-href="coldAudience" class="card fl-left" style="background-color:#b8daff;">
                <section class="date">
                    <time datetime="23th feb">
                        <span>2</span><span>Level</span>
                    </time>
                </section>
                <section class="card-cont">
                    <p style="font-size: 20px;">2. Rapport</p>
                    <p style="padding:0 15px 20px 0;">Started conversation / Cold audience/ Building rapport/
                        Identifying top of the mind issue/ Current reality.</p>
                    <a href="coldAudience">
                        <?php  echo $this->db->get_where('cjuser',array('fld_coach_id'=>$user_id,'Audience'=>'2'))->num_rows(); ?>
                    </a>
                </section>
            </article>
        </div>
        <div class="row">
            <article data-href="interestedAudience" class="card fl-left" style="background-color:#ff9900;">
                <section class="date">
                    <time datetime="23th feb">
                        <span>3</span><span>Level</span>
                    </time>
                </section>
                <section class="card-cont">
                    <p style="font-size: 20px;">3. Share Authority/ Value Proposition / Ask To Get On A Call</p>
                    <p style="padding:0 15px 0px 0;">Interested Audience/ Identifying their desired outcome/ Ask to get
                        on 1:1 call.</p>
                    <a href="interestedAudience">
                        <?php  echo $this->db->get_where('cjuser',array('fld_coach_id'=>$user_id,'Audience'=>'3'))->num_rows(); ?>
                    </a>
                </section>
            </article>
            <article data-href="warmAudience" class="card fl-left" style="background-color:#ffeeba;">
                <section class="date">
                    <time datetime="23th feb">
                        <span>4</span><span>Level</span>
                    </time>
                </section>
                <section class="card-cont">
                    <p style="font-size: 20px;">4. Discovery Call</p><br>
                    <p style="padding:0 15px 10px 0;">Current Situation/ Desired Situation/ Gap/ What's holing them
                        back.<br></p>
                    <a href="warmAudience">
                        <?php  echo $this->db->get_where('cjuser',array('fld_coach_id'=>$user_id,'Audience'=>'4'))->num_rows(); ?>
                    </a>
                </section>
            </article>
        </div>
        <div class="row">
            <article data-href="hotAudience" class="card fl-left" style="background-color:#c3e6cb;">
                <section class="date">
                    <time datetime="23th feb">
                        <span>5</span><span>Level</span>
                    </time>
                </section>
                <section class="card-cont">
                    <p style="font-size: 20px;">5. VSL - Full Clarity</p>
                    <p style="padding:0 15px 20px 0;">Share video, Build authority position/ CTA, What they are doing
                        wrong/ what do they need to do to reach to the dream situation.</p>
                    <a href="hotAudience">
                        <?php  echo $this->db->get_where('cjuser',array('fld_coach_id'=>$user_id,'Audience'=>'5'))->num_rows(); ?>
                    </a>
                </section>
            </article>
            <article data-href="matchAudience" class="card fl-left" style="background-color:#f5c6cb;">
                <section class="date">
                    <time datetime="23th feb">
                        <span>6</span><span>Level</span>
                    </time>
                </section>
                <section class="card-cont">
                    <p style="font-size: 20px;">6. Strategy Call/ Sales Call</p>
                    <p style="padding:0 15px 20px 0;">Press pain points, How does it feel not to have what they want/
                        Take authority, Ask permission to share solution/ Wait for them to ask price.</p>
                    <a href="matchAudience">
                        <?php  echo $this->db->get_where('cjuser',array('fld_coach_id'=>$user_id,'Audience'=>'6'))->num_rows(); ?>
                    </a>
                </section>
            </article>
        </div>
        <div class="row">
            <article data-href="converted" class="card fl-left" style="background-color:#B23CFD;">
                <section class="date">
                    <time datetime="23th feb">
                        <span>7</span><span>Level</span>
                    </time>
                </section>
                <section class="card-cont">
                    <p style="font-size: 20px;">7. Converted/ Closed Clients </p>
                    <p style="padding:0 15px 20px 0;">Close Clients, Take payments or deposits & Move to portal.<br></p>
                    <a href="converted">
                        <?php  echo $this->db->get_where('cjuser',array('fld_coach_id'=>$user_id,'Audience'=>'7'))->num_rows(); ?>
                    </a>
                </section>
            </article>
            <article data-href="NutureAudience" class="card fl-left" style="background-color:#80CBC4;">
                <section class="date">
                    <time datetime="23th feb">
                        <span>8</span><span>Level</span>
                    </time>
                </section>
                <section class="card-cont">
                    <p style="font-size: 20px;">8. Nuture List/ Potential Collaborators</p>
                    <p style="padding:0 15px 0px 0;">Potential Collaborators/ Call Setters/ Appointment Setters/ Nurture
                        Black list people.</p>
                    <a href="NutureAudience">
                        <?php  echo $this->db->get_where('cjuser',array('fld_coach_id'=>$user_id,'Audience'=>'8'))->num_rows(); ?>
                    </a>
                </section>
            </article>
        </div>
    </section>
</div>
<script>
    $(document).ready(function () {
        $('article').click(function () {
            window.location.href = $(this).data('href');
        });
    });
</script></xmp></code></pre>
<p>show all client journey list</p>
<img class="img-fluid" src="image/showalljourneycoach.png" alt="Login Page" height="100">
<br><br>
<p>show all client journey list controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function allcjuser()
{
$this->load->view('yogiccoach/clientjourney/allcjuser');
}</xmp></code></pre>
<p>show all client journey list view</p>
<code>application/views/yogiccoach/clientjourney/allcjuser.php</code>
<pre><code class="language-html"><xmp><?php

error_reporting(0);

	$session=$this->session->get_userdata();

	$user_id=$session['user_id'];

?>

<!DOCTYPE html>

<html>



<head>

    <!-- Required meta tags -->

    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <title></title>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>

    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>

    <link href="css/bootstrap.min.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i"
        rel="stylesheet">

    <!-- Website Font style -->

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.13/css/dataTables.bootstrap.min.css">

    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.bootstrap.min.css">

    <!-- Google Fonts -->

    <link
        href="https://fonts.googleapis.com/css?family=Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&subset=latin-ext"
        rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

    <style>
        * {

            padding: 0;

            margin: 0;

        }



        table tr td {

            line-height: 28px;

            /*width:100px;*/

        }



        input[type="text"],

        input[type="email"],

        input[type="number"] {

            font-family: Book Antiqua;

            background: #e6e6ff;

            margin: 5px;

        }



        h3 {

            color: #000;

        }



        input[type="date"] {

            width: 160px;

        }



        input[type="submit"] {

            text-decoration: none;

            box-sizing: border-box;

            color: #000;

            background: transparent;

            padding: 3px 10px;

            width: 150px;

            border: #000 2px solid;

            font-size: 20px;

        }



        @import url('https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i');



        body {

            font-family: 'Roboto', sans-serif !important;

            font-size: 13px !important;

            font-weight: 500 !important;

        }



        select.form-control.input-sm {

            /*background: #00a1ff !important;*/

            border: 0px !important;

            border-radius: 0px !important;

            /*color: #FFF  !important;*/

            font-weight: 500 !important;

            font-size: 13px !important;

            font-family: 'Roboto', sans-serif;

            -webkit-box-shadow: 0px 0px 18px 0px rgba(0, 0, 0, 0.18);

            -moz-box-shadow: 0px 0px 18px 0px rgba(0, 0, 0, 0.18);

            box-shadow: 0px 0px 18px 0px rgba(0, 0, 0, 0.18);

        }



        .pagination>li>a,

        .pagination>li>span {

            /*background: #00a1ff !important;*/

            border: 0px !important;

            border-radius: 0px !important;

            color: #000 !important;

            font-weight: 500 !important;

            font-size: 13px !important;

            font-family: 'Roboto', sans-serif;

            -webkit-box-shadow: 0px 0px 18px 0px rgba(0, 0, 0, 0.18);

            -moz-box-shadow: 0px 0px 18px 0px rgba(0, 0, 0, 0.18);

            box-shadow: 0px 0px 18px 0px rgba(0, 0, 0, 0.18);

        }



        .pagination>.active>a {

            background-color: #000 !important;

            color: #fff !important;

        }



        .pagination>.active>a:hover {

            background-color: #bfbfbf !important;

            color: #fff !important;

        }



        .table-striped>tbody>tr:nth-of-type(odd) {

            /*background-color: #00a1ff!important;*/

            /*color: #FFF!important;*/

            font-size: 13px !important;

            font-family: 'Roboto', sans-serif;

            font-weight: 500 !important;

        }



        tr.even {

            /*   background: #bfbfbf!important;

    color: #000!important;*/

            font-size: 13px !important;

            font-weight: 500 !important;

            font-family: 'Roboto', sans-serif;

        }



        th.sorting,

        .sorting_asc {

            font-family: 'Roboto', sans-serif;

            font-weight: 500 !important;

            border: 1px solid #FFF !important;

            color: #FFF;

            border: 1px solid #93CE37;

            border-bottom: 3px solid #9ED929;

            /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#30b3ff+0,00a1ff+100 */

            background: rgb(0, 0, 0);

            /* Old browsers */

            background: -moz-linear-gradient(top, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%);

            /* FF3.6-15 */

            background: -webkit-linear-gradient(top, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%);

            /* Chrome10-25,Safari5.1-6 */

            background: linear-gradient(to bottom, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%);

            /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */

            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#30b3ff', endColorstr='#00a1ff', GradientType=0);

            /* IE6-9 */



            -webkit-border-top-left-radius: 5px;

            -webkit-border-top-right-radius: 5px;

            -moz-border-radius: 5px 5px 0px 0px;

            border-top-left-radius: 5px;

            border-top-right-radius: 5px;

        }



        th.sorting,

        .sorting_desc {

            font-family: 'Roboto', sans-serif;

            font-weight: 500 !important;

            border: 1px solid #FFF !important;

            color: #FFF;

            border: 1px solid #93CE37;

            border-bottom: 3px solid #9ED929;

            /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#30b3ff+0,00a1ff+100 */

            background: rgb(0, 0, 0);

            /* Old browsers */

            background: -moz-linear-gradient(top, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%);

            /* FF3.6-15 */

            background: -webkit-linear-gradient(top, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%);

            /* Chrome10-25,Safari5.1-6 */

            background: linear-gradient(to bottom, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%);

            /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */

            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#30b3ff', endColorstr='#00a1ff', GradientType=0);

            /* IE6-9 */



            -webkit-border-top-left-radius: 5px;

            -webkit-border-top-right-radius: 5px;

            -moz-border-radius: 5px 5px 0px 0px;

            border-top-left-radius: 5px;

            border-top-right-radius: 5px;

        }



        input.form-control.input-sm {

            /*background: #00a1ff !important;*/

            border: 0px !important;

            border-radius: 0px !important;

            /*color: #FFF  !important;*/

            font-weight: 500 !important;

            font-size: 13px !important;

            font-family: 'Roboto', sans-serif;

            -webkit-box-shadow: 0px 0px 18px 0px rgba(0, 0, 0, 0.18);

            -moz-box-shadow: 0px 0px 18px 0px rgba(0, 0, 0, 0.18);

            box-shadow: 0px 0px 18px 0px rgba(0, 0, 0, 0.18);

        }



        div.dataTables_wrapper div.dataTables_length label {

            font-weight: normal;

            text-align: left;

            white-space: break-spaces;

        }



        div.dataTables_wrapper div.dataTables_filter label {

            font-weight: normal;

            white-space: break-spaces;

            text-align: left;

        }



        .main {

            margin: 0 5px;

        }



        .btns {

            color: #fff;

            font-size: 20px;

            font-weight: 600;

            padding: 5px 10px;

            width: 120px !important;

            text-decoration: none;

            background: #2f3c48;

        }



        .btns:hover {

            text-decoration: none;

            color: #fff;

            background: #3d4e5d;

        }



        .form-control {

            border: 2px solid #000;

        }



        td {

            border: 1px solid #000 !important;

        }

        thead {

            position: sticky;

            top: 0;

        }
    </style>

</head>



<body>

    <div class="main">

        <!--table show-->

        <div class="row">

            <div class="col-2" style="padding-left: 50px;">

                <h3>Date Range</h3>

                <div class="form-group">

                    <label class="form-check-label" for="5">From</label>

                    <input type="date" value="<?php echo date(" Y-m-d", strtotime(2001 - 01 - 01)); ?>"
                    class="form-control ids from">

                </div>

                <div class="form-group">

                    <label class="form-check-label" for="5">To</label>

                    <input type="date" value="<?php echo date('Y-m-d', strtotime(date('Y/m/d'))); ?>"
                        class="form-control ids to">

                </div>

                <!-- level -->

                <h3>Levels</h3>

                <div class="form-check">

                    <input type="checkbox" name="level[]" value="1" id="1" class="ids level" />

                    <label class="form-check-label" for="1">Level 1 </label>

                </div>

                <div class="form-check">

                    <input type="checkbox" name="level[]" value="2" id="2" class="ids level" />

                    <label class="form-check-label" for="2">Level 2 </label>

                </div>

                <div class="form-check">

                    <input type="checkbox" name="level[]" value="3" id="3" class="ids level" />

                    <label class="form-check-label" for="3">Level 3 </label>

                </div>

                <div class="form-check">

                    <input type="checkbox" name="level[]" value="4" id="4" class="ids level" />

                    <label class="form-check-label" for="4">Level 4 </label>

                </div>

                <div class="form-check">

                    <input type="checkbox" name="level[]" value="5" id="5" class="ids level" />

                    <label class="form-check-label" for="5">Level 5 </label>

                </div>

                <div class="form-check">

                    <input type="checkbox" name="level[]" value="6" id="6" class="ids level" />

                    <label class="form-check-label" for="6">Level 6 </label>

                </div>

                <div class="form-check">

                    <input type="checkbox" name="level[]" value="7" id="7" class="ids level" />

                    <label class="form-check-label" for="7">Level 7 </label>

                </div>
                <div class="form-check">

                    <input type="checkbox" name="level[]" value="8" id="8" class="ids level" />

                    <label class="form-check-label" for="8">Level 8 </label>

                </div>



                <!--sourch-->

                <h3>Source</h3>

                <div class="form-check">

                    <input type="checkbox" name="Source[]" value="FB Contact" id="1" class="ids Source" />

                    <label class="form-check-label" for="5">FB Contact</label>

                </div>

                <div class="form-check">

                    <input type="checkbox" name="Source[]" value="LI Contact" id="2" class="ids Source" />

                    <label class="form-check-label" for="5">LI Contact</label>

                </div>



                <div class="form-check">

                    <input type="checkbox" name="Source[]" value="Instagram" id="3" class="ids Source" />

                    <label class="form-check-label" for="5">Instagram</label>

                </div>



                <div class="form-check">

                    <input type="checkbox" name="Source[]" value="Emails" id="4" class="ids Source" />

                    <label class="form-check-label" for="5">Emails</label>

                </div>
            </div>

            <div class="col-8">

                <div style="float:right;">

                    <a class="btn"
                        style="color: #fff;font-size: 20px;font-weight: 600;padding: 5px 10px; background:#2f3c48;"
                        href="<?= base_url('yogiccoach'); ?>">Portal Dashboard</a>

                    <a class="btn btns" style="width:150px;margin:5px"
                        href="<?= base_url('yogiccoach/greenmashin'); ?>">Home</a>

                    <a class='btns btn' href="javascript:history.back()">Back</a>

                </div>

                <h3 style="font-size: 25px; font-weight: 800;">Show all</h3>

                <!-- <div class=" table-responsive"> -->

                <div id="result" style="margin-top: 25px;">

                    <table id="resulttable" class="table table-striped table-bordered" cellspacing="0">

                        <thead>

                            <tr>

                                <th class="text-center">No</th>

                                <th class="text-center">Start Date</th>

                                <th class="text-center">Unique Id</th>

                                <th class="text-center">Name</th>

                                <th class="text-center">Description</th>

                                <th class="text-center">FB Group</th>

                                <th class="text-center">Last Activity</th>

                                <th class="text-center">Next Activity</th>

                                <th class="text-center">Next Activity Date </th>

                                <th class="text-center">Research</th>

                                <th class="text-center">History</th>

                                <th class="text-center">Edit</th>

                                <th class="text-center">Level transfer</th>

                                <th class="text-center">Email</th>

                                <th class="text-center">Location</th>

                                <th class="text-center">Leadowner</th>

                                <th class="text-center">Phone No.</th>

                                <th class="text-center">Delete</th>

                            </tr>

                        </thead>

                        <tbody>

                            <?php 

                                $this->db->order_by("fld_id", "DESC");

	$empSQL = $this->db->get_where('cjuser',array('fld_coach_id'=>$user_id));

    if ($empSQL->num_rows()>0) 

    {

        $i = $empSQL->num_rows();

        $querys = $empSQL->result_array();

        

        foreach($querys as $row){

            $sel = $this->db->get_where('next_action',array('fld_cjuser'=>$row['fld_id']));

            $row1 = $sel->row_array();

            $this->db->order_by("id", "desc");

            $this->db->where('fld_cjuser', $row['fld_id']);

            $this->db->limit(1, 1);

            $last_action = $this->db->get('cj_history');

            $row2 = $last_action->row_array();

            if (($row1['date'] == "")) 
            {
                if ($row['Audience'] == '1') {
                         $checked = "style='background: #ccc;'";
                } elseif ($row['Audience'] == '2') {
                     $checked = "style='background: #b8daff;'";
                } elseif ($row['Audience'] == '3') {
                     $checked = "style='background: #ff9900;'";
                } elseif ($row['Audience'] == '4') {
                     $checked = "style='background: #ffeeba;'";
                } elseif ($row['Audience'] == '5') {
                     $checked = "style='background: #c3e6cb;'";
                }elseif ($row['Audience'] == '6') {
                     $checked = "style='background: #f5c6cb;'";
                    $style = "table-danger";
                }elseif ($row['Audience'] == '7') {
                     $checked = "style='background: #b23cfd;'";
                    $style = "table-danger";
                }elseif ($row['Audience'] == '8') {
                     $checked = "style='background: #b23cfd;'";
                    $style = "table-danger";
                }
            } else {
                if (date('m/d/y', strtotime($row1['date'])) > date("m/d/y")) {
                    $checked = "style='background: #FF6B6B;'";
                }else{
                    if ($row['Audience'] == '1') {
                             $checked = "style='background: #ccc;'";
                    } elseif ($row['Audience'] == '2') {
                         $checked = "style='background: #b8daff;'";
                    } elseif ($row['Audience'] == '3') {
                         $checked = "style='background: #ff9900;'";
                    } elseif ($row['Audience'] == '4') {
                         $checked = "style='background: #ffeeba;'";
                    } elseif ($row['Audience'] == '5') {
                         $checked = "style='background: #c3e6cb;'";
                    }elseif ($row['Audience'] == '6') {
                         $checked = "style='background: #f5c6cb;'";
                        $style = "table-danger";
                    }elseif ($row['Audience'] == '7') {
                         $checked = "style='background: #b23cfd;'";
                        $style = "table-danger";
                    }elseif ($row['Audience'] == '8') {
                         $checked = "style='background: #b23cfd;'";
                        $style = "table-danger";
                    }
                }
            }

            ?>

                            <tr <?=$checked ?>>

                                <td class="text-center">
                                    <?= $i ?>
                                </td>

                                <td class="text-center">
                                    <?= date("m/d/Y", strtotime($row["date"])) ?>
                                </td>

                                <td class="text-center"><a href="<?= base_url('yogiccoach/research/'.$row[" fld_id"]);
                                        ?>">
                                        <?= $row["level"] ?>
                                    </a></td>

                                <td class="text-center"><a href="<?= base_url('yogiccoach/research/'.$row[" fld_id"]);
                                        ?>">
                                        <?= $row["first_name"] . $row["last_name"] ?>
                                    </a></td>

                                <td class="text-center">
                                    <?= $row["description"] ?>
                                </td>

                                <td class="text-center">
                                    <?= ($row["fggroup"] == '0') ? "Yes" : "No" ?>
                                </td>

                                <td class="text-center">
                                    <?= $row2["title"] ?>
                                </td>

                                <td class="text-center">
                                    <?= $row1["title"] ?>
                                </td>

                                <td class="text-center">
                                    <?= ($row1["date"] == "") ? " " : date("m/d/y", strtotime($row1["date"])) ?>
                                </td>

                                <td class="text-center"><a href="<?= base_url('yogiccoach/research/'.$row[" fld_id"]);
                                        ?>"><i class="fab fa-searchengin" style="font-size: 30px;color:#000"></i></a>
                                </td>

                                <td class="text-center"><a href="<?= base_url('yogiccoach/notes/'.$row[" fld_id"]);
                                        ?>"><i class="fa fa-history" aria-hidden="true"
                                            style="font-size: 20px;color:#000"></i></a></td>

                                <td class="text-center"><a href="<?= base_url('yogiccoach/cjedit/'.$row[" fld_id"]);
                                        ?>"><i class="fas fa-pen-square" style="font-size: 25px;color:#000"></i></a>
                                </td>

                                <td style="padding: 10px 0 !important;">

                                    <select class="levels" style="width: 100%;" data-id="<?= $row[" fld_id"] ?>">

                                        <option disabled>--Select Level--</option>

                                        <option <?=($row['Audience']=='1' ) ? "selected='selected'" : "" ?>
                                            value="1">Level 1</option>

                                        <option <?=($row['Audience']=='2' ) ? "selected='selected'" : "" ?>
                                            value="2">Level 2</option>

                                        <option <?=($row['Audience']=='3' ) ? "selected='selected'" : "" ?>
                                            value="3">Level 3</option>

                                        <option <?=($row['Audience']=='4' ) ? "selected='selected'" : "" ?>
                                            value="4">Level 4</option>

                                        <option <?=($row['Audience']=='5' ) ? "selected='selected'" : "" ?>
                                            value="5">Level 5</option>

                                        <option <?=($row['Audience']=='6' ) ? "selected='selected'" : "" ?>
                                            value="6">Level 6</option>

                                        <option <?=($row['Audience']=='7' ) ? "selected='selected'" : "" ?>
                                            value="7">Level 7</option>
                                        <option <?=($row['Audience']=='8' ) ? "selected='selected'" : "" ?>
                                            value="8">Level 8</option>


                                    </select>
                                </td>

                                <td>
                                    <?= $row['fld_email'] ?>
                                </td>

                                <td class="text-center">
                                    <?= $row['address'] ?>
                                </td>

                                <td class="text-center">
                                    <?= $row['lead'] ?>
                                </td>

                                <td class="text-center">
                                    <?= $row['phone'] ?>
                                </td>

                                <td class="text-center"><a class="delete" href="#delete" data-id="<?= $row[" fld_id"]
                                        ?>"><i class="fas fa-trash" style="font-size: 25px;color:#000"></i></a></td>

                            </tr>

                            <?php

                $i--;

        }

    }

    ?>

                        </tbody>

                    </table>

                </div>

                <div id="getdata"></div>

            </div>

        </div>

    </div>

    </div>

    <script>

        $(document).ready(function () {
            $('.levels').change(function () {

                var audience = $(this).val();

                var cid = $(this).data('id');

                $.ajax({

                    type: "post",

                    dataType: "html",

                    url: '<?php echo base_url('yogiccoach/ audiencechange'); ?>',

                    data: {

                    audience: audience,

                    cid: cid

                },

                    success: function (data) {

                        // console.log(data);

                    }

            });

        });

	});

    </script>

    <script>

        $(document).ready(function () {

            $('.delete').click(function () {

                var id = $(this).data('id');

                if (confirm('Are you sure you want to delete?')) {

                    window.location.href = "<?php echo base_url('yogiccoach/cjdelete/'); ?>/" + id + "/allcjuser";

                } else {

                    alert('Why did you press cancel? You should have confirmed');

                }

            });

            $('#resulttable').DataTable({

                "order": [

                    [8, "desc"],

                    [2, "desc"]

                ],

                "pageLength": 500,

                "lengthMenu": [[10, 25, 50, 100, 500, -1], [10, 25, 50, 100, 500, "All"]]

            });

            $('.ids').on('change', function () {

                var level = $('.level:checked').serialize();

                // var lead = $('.lead:checked').serialize();

                var Source = $('.Source:checked').serialize();

                var from = $('.from').val();

                var to = $('.to').val();

                if (level || Source || from || to) {

                    $.ajax({

                        type: "POST",

                        cache: false,

                        url: "<?php echo base_url('yogiccoach/cjfiltter'); ?>",

                        data: {

                            brandss: level,
                            Source: Source,
                            from: from,
                            to: to
                        },

                        success: function (response) {

                            console.log(response);
                            document.getElementById('getdata').style.display = "block";

                            document.getElementById("getdata").innerHTML = response;

                            $('#result').hide();

                            $('#getdatah').DataTable({

                                "order": [

                                    [8, "desc"],

                                    [0, "desc"]

                                ],

                                "pageLength": 500,

                                "lengthMenu": [[10, 25, 50, 100, 500, -1], [10, 25, 50, 100, 500, "All"]]

                            });

                        }

                    });

                } else {

                    document.getElementById('getdata').style.display = "none";

                    $('#result').show();

                    $('#resulttable').DataTable({

                        "order": [

                            [8, "desc"],

                            [0, "desc"]

                        ],

                        "pageLength": 500,

                        "lengthMenu": [[10, 25, 50, 100, 500, -1], [10, 25, 50, 100, 500, "All"]]

                    });

                }

            });

        });

    </script>

    <script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>

    <script src="https://cdn.datatables.net/1.10.13/js/dataTables.bootstrap.min.js"></script>

    <script src="https://cdn.datatables.net/responsive/2.1.1/js/dataTables.responsive.min.js"></script>

    <script src="https://cdn.datatables.net/responsive/2.1.1/js/responsive.bootstrap.min.js"></script>
</xmp></code></pre>
<p></p>
<img class="img-fluid" src="image/loginpage.png" alt="Login Page" height="100">
<br><br>
<p>Login page View</p>
<code>application/views/site/login.php</code>
<pre><code class="language-html"><xmp></xmp></code></pre>
<p>Add Client journey member</p>
<img class="img-fluid" src="image/addclientjourneyclientcoach.png" alt="Login Page" height="100">
<br><br>
<p>Add Client journey member controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function cjuseradd()
{
$this->load->view('yogiccoach/clientjourney/cjuseradd');
}
public function cjuser_add()
{
$data['first_name'] = $_POST['first_name'];
$data['last_name'] = $_POST['last_name'];
$data['fld_email'] = $_POST['fld_email'];
$data['phone'] = $_POST['phone'];
$data['address'] = $_POST['address'];
$data['source'] = implode(",",$_POST['Source']);
$data['connenction'] = $_POST['connenction'];
$data['reply'] = $_POST['reply'];
$data['Audience'] = $_POST['Audience'];
$data['fggroup'] = '0';
$data['description'] = '';
$data['link'] = '';
$data['fld_coach_id'] = $this->userid;
$data['date'] = date('Y-m-d');
$data['lead'] = "";
$data['type'] = "";

$this->db->select("*");
$this->db->from("cjuser");
$this->db->order_by("fld_id","desc");
$getlevel = $this->db->get();
$level = $getlevel->row_array();
$data['level'] = $level['level'] + 1;

$this->db->insert('cjuser',$data);

$source = $_POST['Source'];
$day = date('d') - 1;
$fld_year = date('Y');
$fld_date = date('M');

if (in_array("FB Contact", $source)){

$fld_tableId = "a".$day;
$datas['fld_tableId'] = $fld_tableId;
$datas['fld_type'] = "a";
$datas['fld_year'] = $fld_year;
$datas['fld_date'] = $fld_date;
$datas['fld_day'] = strtotime(date("Y-m-d", strtotime('sunday this week', strtotime(date('Y-m-d')))));
$datas['fld_current_date'] = strtotime(date('Y-m-d'));
$datas['fld_cjuser'] = $this->userid;

$this->db->select("*");
$this->db->from("kpiworksheet");
$this->db->where(array('fld_tableId'=>$fld_tableId,'fld_year'=>$fld_year,'fld_date'=>$fld_date));
$historyMember = $this->db->get();

if ($historyMember->num_rows()>0)
{
$row = $historyMember->row_array();
$datas['fld_text'] = (int)$row['fld_text'] + 1;
$this->db->where(array('fld_tableId'=>$fld_tableId,'fld_year'=>$fld_year,'fld_date'=>$fld_date));
$this->db->update('kpiworksheet',$datas);
}else{
$datas['fld_text'] = '1';
$this->db->insert('kpiworksheet',$datas);
}
}
if(in_array("LI Contact", $source)){
$fld_tableId = "b".$day;
$datas['fld_tableId'] = $fld_tableId;
$datas['fld_type'] = "b";
$datas['fld_year'] = $fld_year;
$datas['fld_date'] = $fld_date;
$datas['fld_day'] = strtotime(date("Y-m-d", strtotime('sunday this week', strtotime(date('Y-m-d')))));
$datas['fld_current_date'] = strtotime(date('Y-m-d'));
$datas['fld_cjuser'] = $this->userid;

$this->db->select("*");
$this->db->from("kpiworksheet");
$this->db->where(array('fld_tableId'=>$fld_tableId,'fld_year'=>$fld_year,'fld_date'=>$fld_date));
$historyMember = $this->db->get();

if ($historyMember->num_rows()>0)
{
$row = $historyMember->row_array();
$datas['fld_text'] = (int)$row['fld_text'] + 1;
$this->db->where(array('fld_tableId'=>$fld_tableId,'fld_year'=>$fld_year,'fld_date'=>$fld_date));
$this->db->update('kpiworksheet',$datas);
}else{
$datas['fld_text'] = '1';
$this->db->insert('kpiworksheet',$datas);
}
}

if(in_array("Instagram", $source)){
$fld_tableId = "c".$day;
$datas['fld_tableId'] = $fld_tableId;
$datas['fld_type'] = "c";
$datas['fld_year'] = $fld_year;
$datas['fld_date'] = $fld_date;
$datas['fld_day'] = strtotime(date("Y-m-d", strtotime('sunday this week', strtotime(date('Y-m-d')))));
$datas['fld_current_date'] = strtotime(date('Y-m-d'));
$datas['fld_cjuser'] = $this->userid;

$this->db->select("*");
$this->db->from("kpiworksheet");
$this->db->where(array('fld_tableId'=>$fld_tableId,'fld_year'=>$fld_year,'fld_date'=>$fld_date));
$historyMember = $this->db->get();

if ($historyMember->num_rows()>0)
{
$row = $historyMember->row_array();
$datas['fld_text'] = (int)$row['fld_text'] + 1;
$this->db->where(array('fld_tableId'=>$fld_tableId,'fld_year'=>$fld_year,'fld_date'=>$fld_date));
$this->db->update('kpiworksheet',$datas);
}else{
$datas['fld_text'] = '1';
$this->db->insert('kpiworksheet',$datas);
}
}
if(in_array("Emails", $source)){
$fld_tableId = "d".$day;
$datas['fld_tableId'] = $fld_tableId;
$datas['fld_type'] = "d";
$datas['fld_year'] = $fld_year;
$datas['fld_date'] = $fld_date;
$datas['fld_day'] = strtotime(date("Y-m-d", strtotime('sunday this week', strtotime(date('Y-m-d')))));
$datas['fld_current_date'] = strtotime(date('Y-m-d'));
$datas['fld_cjuser'] = $this->userid;

$this->db->select("*");
$this->db->from("kpiworksheet");
$this->db->where(array('fld_tableId'=>$fld_tableId,'fld_year'=>$fld_year,'fld_date'=>$fld_date));
$historyMember = $this->db->get();

if ($historyMember->num_rows()>0)
{
$row = $historyMember->row_array();
$datas['fld_text'] = (int)$row['fld_text'] + 1;
$this->db->where(array('fld_tableId'=>$fld_tableId,'fld_year'=>$fld_year,'fld_date'=>$fld_date));
$this->db->update('kpiworksheet',$datas);
}else{
$datas['fld_text'] = '1';
$this->db->insert('kpiworksheet',$datas);
}
}

echo "allcjuser";
}</xmp></code></pre>
<p>Add client journey member view</p>
<code>application/views/clientjourney/cjuseradd.php</code>
<pre><code class="language-html"><xmp><?php
	error_reporting(0);
	$session=$this->session->get_userdata();
	$user_id=$session['user_id'];
?>

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">

<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>

<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>

<style>
    td {

        text-align: left;

        vertical-align: top;

    }



    table {

        width: 100%;

        overflow-y: scroll
    }

    .form-control {

        width: 200px;

    }

    * {

        margin: 5px;

    }



    .btns {

        color: #fff;

        font-size: 20px;

        font-weight: 600;

        padding: 5px 10px;

        width: 120px !important;

        text-decoration: none;

        background: #2f3c48;

        border-radius: 5px;

    }



    .btns:hover {

        text-decoration: none;

        color: #fff;

        background: #3d4e5d;

    }
</style>

<div style="float:right">

    <a class="btns" href="<?= base_url('yogiccoach'); ?>">Portal Dashboard</a>

    <a class="btns" href="<?= base_url('yogiccoach/greenmashin'); ?>">Home</a>

    <a class="btns" href="<?= base_url('yogiccoach/allcjuser'); ?>">Show All</a>

</div>

<h1 style="text-align:center">New Client Add</h1>

<form method="post" action="<?= base_url('yogiccoach/cjuser_add'); ?>" style="background-color: #d9d9d9; padding: 25px;"
    id="adduser">

    <?php echo $sucees ?>

    <table>

        <tr>

            <td>

                <div class="form-group"><label>First Name: </label><input type="text" name="first_name"
                        autocomplete="autocomplete" class="form-control"></div>

                <div class="form-group"><label>Last Name: </label><input type="text" name="last_name"
                        class="form-control" autocomplete="autocomplete"></div>

                <div class="form-group"><label>Email: </label><input type="email" name="fld_email" class="form-control"
                        autocomplete="autocomplete"></div>

                <div class="form-group"><label>Phone No: </label><input type="number" class="form-control" name="phone">
                </div>

                <div class="form-group"><label>Location: </label><textarea name="address"
                        class="form-control"></textarea></div>

            </td>

            <td>

                <b>Source</b>

                <div class="form-group">

                    <input type="checkbox" name="Source[]" value="FB Contact" checked><span> FB Contact</span>

                </div>

                <div class="form-group">

                    <input type="checkbox" name="Source[]" value="LI Contact"><span> LI Contact</span>

                </div>

                <div class="form-group">

                    <input type="checkbox" name="Source[]" value="Instagram"><span> Instagram</span>

                </div>

                <div class="form-group">

                    <input type="checkbox" name="Source[]" value="Emails"><span> Emails</span>

                </div>

            </td>

            <td>

                <b>Friend Request Status :-</b>

                <div class="form-group">

                    <input type="radio" class="mx-2" name="connenction" value="Sent" checked> Sent

                </div>

                <div class="form-group">

                    <input type="radio" class="mx-2" name="connenction" value="Accepted"> Accepted

                </div>

                <div class="form-group">

                    <input type="radio" class="mx-2" name="connenction" value="Pending"> Pending

                </div>

                <br>

                <b>Reply Status</b>

                <div class="form-group">

                    <input type="radio" class="mx-2" name="reply" value="No" checked> No

                </div>

                <div class="form-group">

                    <input type="radio" class="mx-2" name="reply" value="Yes"> Yes

                </div>

            </td>

            <td>
                <b>Levels</b>
                <div class="form-group">
                    <input type="radio" class="mx-2" name="Audience" value="1" id="radio1" checked>
                    Level 1 - Contact
                </div>
                <div class="form-group">
                    <input type="radio" class="mx-2" name="Audience" value="2" id="radio1">
                    Level 2 - Rapport
                </div>
                <div class="form-group">
                    <input type="radio" class="mx-2" name="Audience" value="3" id="radio2">
                    Level 3 - Share Authority/ Value Proposition / Ask To Get On A Call
                </div>
                <div class="form-group">
                    <input type="radio" class="mx-2" name="Audience" value="4" id="radio3">
                    Level 4 - Discovery Call
                </div>
                <div class="form-group">
                    <input type="radio" class="mx-2" name="Audience" value="5" id="radio4">
                    Level 5 - VSL - Full Clarity
                </div>
                <div class="form-group">
                    <input type="radio" class="mx-2" name="Audience" value="6" id="radio5">
                    Level 6 - Strategy Call/ Sales Call
                </div>
                <div class="form-group">
                    <input type="radio" class="mx-2" name="Audience" value="7" id="radio6">
                    Level 7 - Converted/ Closed Clients
                </div>
                <div class="form-group">
                    <input type="radio" class="mx-2" name="Audience" value="8" id="radio6">
                    Level 8 - Nuture List/ Potential Collaborators
                </div>
            </td>

        </tr>

    </table>

    <div class="row">

        <div class="col-12">

            <input class="btn btn-info" type="submit" name="submit" value="Submit">

        </div>

    </div>

</form>

<marquee direction="right" style="color:	 #661400 ; background: #ffffb3 ;"> Welcome To Journey</marquee>

</div>

<script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>

<script src="https://cdn.datatables.net/1.10.13/js/dataTables.bootstrap.min.js"></script>

<script src="https://cdn.datatables.net/responsive/2.1.1/js/dataTables.responsive.min.js"></script>

<script src="https://cdn.datatables.net/responsive/2.1.1/js/responsive.bootstrap.min.js"></script>

<script>

    $("#adduser").submit(function (e) {

        e.preventDefault(); // avoid to execute the actual submit of the form.

        var form = $(this);

        var url = form.attr('action');

        $.ajax({

            type: "POST",

            url: url,

            data: form.serialize(), // serializes the form's elements.

            success: function (data) {

                window.location.replace(data);

                //   alert(data); // show response from the php script.

            }

        });

    });

</script>

</body>

</html></xmp></code></pre>
<p>client journey Research</p>
<img class="img-fluid" src="image/cjreseachcoach.png" alt="Login Page" height="100">
<br><br>
<p>client journey research controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function research($id)
{
$data['id'] = $id;
$this->load->view('yogiccoach/clientjourney/research',$data);
}</xmp></code></pre>
<p>client journey research view</p>
<code>application/views/yogiccoach/clientjourney/research.php</code>
<pre><code class="language-html"><xmp><?php

$session=$this->session->get_userdata();

	$user_id=$session['user_id'];



    $this->db->select("*");

    $this->db->from("cjuser");

    $this->db->where(array('fld_coach_id'=> $user_id,'fld_id'=>$id));

    $query = $this->db->get();

    $row = $query->row_array();

?>

<!DOCTYPE html>

<html>

<head>

    <title>Research</title>

    <link rel="stylesheet" type="text/css" href="image.css">

    <!-- <link rel="stylesheet" type="text/css" href="customstyle.css"> -->

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!-- Latest compiled and minified CSS -->

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <!-- jQuery library -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!-- Popper JS -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <script src="https://use.fontawesome.com/6c6c4c0fcc.js"></script>

    <script src="https://cdn.ckeditor.com/ckeditor5/24.0.0/classic/ckeditor.js"></script>

    <style>
        .alert-box {

            padding: 15px;

            margin-bottom: 20px;

            border: 1px solid transparent;

            border-radius: 4px;

        }

        .success {

            color: #3c763d;

            background-color: #dff0d8;

            border-color: #d6e9c6;

            display: none;

        }



        p a {

            display: block;

            width: 100%;

            height: calc(1.5em + .75rem + 2px);

            padding: .375rem .75rem;

            font-size: 1rem;

            font-weight: 400;

            line-height: 1.5;

            /*color: #495057;*/

            background-color: #fff;

            background-clip: padding-box;

            border: 1px solid #ced4da;

            border-radius: .25rem;

            transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;

        }



        .form-control {

            border: 2px solid #000;

        }

        .btns {

            color: #fff;

            font-size: 20px;

            font-weight: 600;

            padding: 5px 10px;

            width: 120px !important;

            text-decoration: none;

            background: #2f3c48;

        }



        .btns:hover {

            text-decoration: none;

            color: #fff;

            background: #3d4e5d;

        }
    </style>

</head>

<body>

    <div class="container">

        <br>

        <a class="btn" style="background:#2f3c48;color: #fff;font-size: 20px;font-weight: 600;padding: 5px 10px;"
            href="<?= base_url('yogiccoach'); ?>">Portal Dashboard</a>

        <a class="btns btn" href="<?php echo base_url('yogiccoach/greenmashin') ?>">Home</a>

        <a href="<?php echo base_url('yogiccoach/notes/'.$id) ?>" class='btn'
            style="background:#2f3c48;color: #fff;font-size: 20px;font-weight: 600;padding: 5px 10px;">Show History</a>

        <a class='btns btn' href="javascript:history.back()">Back</a>

        <button type="button" class='float-right btns btn mx-2 save' data-id="<?php echo $id; ?>">save</button>

        <div class="row" style="margin-top: 25px;">

            <div class="col-md-6">

                <table>

                    <tr>

                        <th>Name - </th>

                        <td>
                            <?php echo $row['first_name'] ?>
                            <?php echo " " . $row['last_name']; ?>
                        </td>

                    </tr>

                    <tr>

                        <th>Email - </th>

                        <td>
                            <?php echo $row['fld_email']; ?>
                        </td>

                    </tr>

                    <tr>

                        <th>Phone - </th>

                        <td>
                            <?php echo $row['phone']; ?>
                        </td>

                    </tr>

                    <tr>

                        <th>Address - </th>

                        <td>
                            <?php echo $row['address']; ?>
                        </td>

                    </tr>

                    <tr>

                        <th>Source - </th>

                        <td>
                            <?php echo $row['source'];  ?>
                        </td>

                    </tr>

                </table>

            </div>

            <div class="col-md-6">
                <div class="funkyradio">
                    <h2>Levels</h2>
                    <div class="funkyradio-default">
                        <input type="radio" name="radio" class="Audience" value="1" id="radio1" <?php if
                            (($row['Audience'])=='1' ) echo "checked='checked'" ; ?> />
                        <label for="radio1" style="font-size: smaller;font-weight: 700;">Contact</label>
                    </div>
                    <div class="funkyradio-default">
                        <input type="radio" name="radio" class="Audience" value="2" id="radio1" <?php if
                            (($row['Audience'])=='2' ) echo "checked='checked'" ; ?> />
                        <label for="radio1" style="font-size: smaller;font-weight: 700;">Rapport</label>
                    </div>
                    <div class="funkyradio-primary">
                        <input type="radio" name="radio" class="Audience" value="3" id="radio2" <?php if
                            (($row['Audience'])=='3' ) echo "checked='checked'" ; ?> />
                        <label for="radio2" style="font-size: smaller;font-weight: 700;">Share Authority/ Value
                            Proposition / Ask To Get On A Call</label>
                    </div>
                    <div class="funkyradio-success">
                        <input type="radio" name="radio" class="Audience" value="4" id="radio3" <?php if
                            (($row['Audience'])=='4' ) echo "checked='checked'" ; ?> />
                        <span for="radio3" style="font-size: smaller;font-weight: 700;">Discovery Call</span>
                    </div>
                    <div class="funkyradio-danger">
                        <input type="radio" name="radio" class="Audience" value="5" id="radio4" <?php if
                            (($row['Audience'])=='5' ) echo "checked='checked'" ; ?> />
                        <label for="radio4" style="font-size: smaller;font-weight: 700;">VSL - Full Clarity</label>
                    </div>
                    <div class="funkyradio-danger">
                        <input type="radio" name="radio" class="Audience" value="6" id="radio5" <?php if
                            (($row['Audience'])=='6' ) echo "checked='checked'" ; ?> />
                        <label for="radio5" style="font-size: smaller;font-weight: 700;">Strategy Call/ Sales
                            Call</label>
                    </div>
                    <div class="funkyradio-danger">
                        <input type="radio" name="radio" class="Audience" value="7" id="radio7" <?php if
                            (($row['Audience'])=='7' ) echo "checked='checked'" ; ?> />
                        <label for="radio7" style="font-size: smaller;font-weight: 700;">Converted/ Closed
                            Clients</label>
                    </div>
                    <div class="funkyradio-danger">
                        <input type="radio" name="radio" class="Audience" value="8" id="radio8" <?php if
                            (($row['Audience'])=='8' ) echo "checked='checked'" ; ?> />
                        <label for="radio7" style="font-size: smaller;font-weight: 700;">Nuture List/ Potential
                            Collaborators</label>
                    </div>
                </div>
            </div>

            <br>

            <div class="col-md-6">

                <div class="form-group">

                    <label for="">Description </label>

                    <textarea name="description" data-id="<?= $id; ?>" id="description"
                        class="form-control"><?php echo nl2br($row['description']); ?></textarea>

                </div>

            </div>

            <div class="col-md-6">

                <div class="funkyradio">

                    <h5>FB Group</h5>

                    <div class="funkyradio-default">

                        <input type="radio" data-id="<?= $id; ?>" name="fggroup" class="fggroup" value="0" id="radio1"
                            <?php if (($row['fggroup'])=='0' ) echo "checked='checked'" ; ?> />

                        <label for="radio1" style="font-size: smaller;font-weight: 700;">Yes</label>

                    </div>

                    <div class="funkyradio-default">

                        <input type="radio" data-id="<?= $id; ?>" name="fggroup" class="fggroup" value="1" id="radio1"
                            <?php if (($row['fggroup'])=='1' ) echo "checked='checked'" ; ?> />

                        <label for="radio1" style="font-size: smaller;font-weight: 700;">No</label>

                    </div>

                    <div class="funkyradio-default">

                        <input type="radio" data-id="<?= $id; ?>" name="fggroup" class="fggroup" value="2" id="radio1"
                            <?php if (($row['fggroup'])=='2' ) echo "checked='checked'" ; ?> />

                        <label for="radio1" style="font-size: smaller;font-weight: 700;">left</label>

                    </div>

                </div>

            </div>

        </div>

        <div class="row">

            <div class="col-md-12">

                <form class="form-horizontal">

                    <div class="panel panel-default">

                        <div class="panel-heading">

                            <div class="alert-box success">Success !!!</div>

                        </div>

                        <div class="panel-body">

                            <?php

							$this->db->select("*");

                            $this->db->from("research");

                            $this->db->where(array('user_id'=> $id));

                            $historyMember = $this->db->get();

                            

                            if ($historyMember->num_rows()>0) 

                            {

                                $history = $historyMember->row_array();

							?>

                            <div class="row">

                                <div class="col-md-6">

                                    <div class="form-group">

                                        <label>Notes </label>

                                        <textarea name="historyNotes" id="historyNotes1" class="form-control "
                                            rows="10"><?php echo nl2br($history['search']); ?></textarea>

                                    </div>

                                    <div class="form-group">

                                        <label>Personal </label>

                                        <textarea name="historyNotes" id="historyNotes2" class="form-control "
                                            rows="10"><?php echo nl2br($history['personal']); ?></textarea>

                                    </div>

                                    <div class="form-group">

                                        <label>Business</label>

                                        <textarea name="historyNotes" id="historyNotes3" class="form-control "
                                            rows="10"><?php echo nl2br($history['business']); ?></textarea>

                                    </div>

                                </div>

                                <div class="col-md-6">

                                    <div class="form-group">

                                        <label>Facebook Profile Link -</label>

                                        <?php

												if ($history['fbprolink'] == "") {

													echo '<textarea class="form-control fbprolink" rows="1"></textarea>';

												} else {

													echo '<br><div><a href="' . nl2br($history['fbprolink']) . '" target="_blank">' . nl2br($history['fbprolink']) . '</a></div><input type="hidden" value="'.$history['fbprolink'].'" class="form-control fbprolink">';

												} ?>

                                    </div>

                                    <div class="form-group">

                                        <label for="">Facebook Page Link - </label>

                                        <?php

												if ($history['fbpagelink'] == "") {

													echo '<textarea class="form-control fbpagelink" rows="1"></textarea>';

												} else {

													echo '<br><div><a href="' . nl2br($history['fbpagelink']) . '" target="_blank">' . nl2br($history['fbpagelink']) . '</a></div><input type="hidden" value="'.$history['fbpagelink'].'" class="form-control fbpagelink">';

												} ?>



                                    </div>

                                    <div class="form-group">

                                        <label for="">Website Link - </label>

                                        <?php

												if ($history['weblink'] == "") {

													echo '<textarea class="form-control weblink" rows="1"></textarea>';

												} else {

													echo '<br><div><a href="' . nl2br($history['weblink']) . '" target="_blank">' . nl2br($history['weblink']) . '</a></div><input type="hidden" value="'.$history['weblink'].'" class="form-control weblink">';

												} ?>

                                    </div>
                                    <div class="form-group">
                                        <label for="">Messenger link - </label>
                                        <?php
												if ($history['msglink'] == "") {
													echo '<textarea class="form-control msglink" rows="1"></textarea>';
												} else {
													echo '<br><div><a href="' . nl2br($history['msglink']) . '" target="_blank">' . nl2br($history['msglink']) . '</a></div><input type="hidden" value="'.$history['msglink'].'" class="form-control msglink">';
												} ?>
                                    </div>

                                    <div class="form-group">

                                        <label for="">Instagram Link - </label>

                                        <?php

												if ($history['intalink'] == "") {

													echo '<textarea class="form-control intalink" rows="1"></textarea>';

												} else {

													echo '<br><div><a href="' . nl2br($history['intalink']) . '" target="_blank">' . nl2br($history['intalink']) . '</a><div><input type="hidden" value="'.$history['intalink'].'" class="form-control intalink">';

												} ?>

                                    </div>

                                    <div class="form-group">

                                        <label for="">Designation -</label>

                                        <?php

												if ($history['desiglink'] == "") {

													echo '<textarea class="form-control desiglink" rows="1"></textarea>';

												} else {

													echo '<br><div><a href="' . nl2br($history['desiglink']) . '" target="_blank">' . nl2br($history['desiglink']) . '</a></div><input type="hidden" value="'.$history['desiglink'].'" class="form-control desiglink">';

												} ?>

                                    </div>



                                    <label>Beliefs & LimitationsBeliefs & Limitations - </label>

                                    <div class="form-group">

                                        <?php

												if ($history['belief1'] == "") {

													echo '<textarea class="form-control belief1" rows="1"></textarea>';

												} else {

													echo '<br><div><a href="' . nl2br($history['belief1']) . '" target="_blank">' . nl2br($history['belief1']) . '</a></div><input type="hidden" value="'.$history['belief1'].'" class="form-control belief1">';

												} ?>

                                    </div>

                                    <div class="form-group">

                                        <?php

												if ($history['belief2'] == "") {

													echo '<textarea class="form-control belief2" rows="1"></textarea>';

												} else {

													echo '<br><div><a href="' . nl2br($history['belief2']) . '" target="_blank">' . nl2br($history['belief2']) . '</a></div><input type="hidden" value="'.$history['belief2'].'" class="form-control belief2">';

												} ?>

                                    </div>

                                    <div class="form-group">

                                        <?php

												if ($history['belief3'] == "") {

													echo '<textarea class="form-control belief3" rows="1"></textarea>';

												} else {

													echo '<br><div><a href="' . nl2br($history['belief3']) . '" target="_blank">' . nl2br($history['belief3']) . '</a></div><input type="hidden" value="'.$history['belief3'].'" class="form-control belief3">';

												} ?>

                                    </div>

                                    <label>Key Phrases/ Key Words - </label>

                                    <div class="form-group">

                                        <?php

												if ($history['keyphra1'] == "") {

													echo '<textarea class="form-control keyphra1" rows="1"></textarea>';

												} else {

													echo '<br><div><a href="' . nl2br($history['keyphra1']) . '" target="_blank">' . nl2br($history['keyphra1']) . '</a></div><input type="hidden" value="'.$history['keyphra1'].'" class="form-control keyphra1">';

												} ?>

                                    </div>

                                    <div class="form-group">

                                        <?php

												if ($history['keyphra2'] == "") {

													echo '<textarea class="form-control keyphra2" rows="1"></textarea>';

												} else {

													echo '<br><div><a href="' . nl2br($history['keyphra2']) . '" target="_blank">' . nl2br($history['keyphra2']) . '</a></div><input type="hidden" value="'.$history['keyphra2'].'" class="form-control keyphra2">';

												} ?>

                                    </div>

                                    <div class="form-group">

                                        <?php

												if ($history['keyphra3'] == "") {

													echo '<textarea class="form-control keyphra3" rows="1"></textarea>';

												} else {

													echo '<br><div><a href="' . nl2br($history['keyphra3']) . '" target="_blank">' . nl2br($history['keyphra3']) . '</a></div><input type="hidden" value="'.$history['keyphra3'].'" class="form-control keyphra3">';

												} ?>

                                    </div>

                                    <label>Problems - </label>

                                    <div class="form-group">

                                        <?php

												if ($history['problem1'] == "") {

													echo '<textarea class="form-control problem1" rows="1"></textarea>';

												} else {

													echo '<br><div><a href="' . nl2br($history['problem1']) . '" target="_blank">' . nl2br($history['problem1']) . '</a></div><input type="hidden" value="'.$history['problem1'].'" class="form-control problem1">';

												} ?>

                                    </div>

                                    <div class="form-group">

                                        <?php

												if ($history['problem2'] == "") {

													echo '<textarea class="form-control problem2" rows="1"></textarea>';

												} else {

													echo '<br><div><a href="' . nl2br($history['problem2']) . '" target="_blank">' . nl2br($history['problem2']) . '</a></div><input type="hidden" value="'.$history['problem2'].'" class="form-control problem2">';

												} ?>

                                    </div>

                                    <div class="form-group">

                                        <?php

												if ($history['problem3'] == "") {

													echo '<textarea class="form-control problem3" rows="1"></textarea>';

												} else {

													echo '<br><div><a href="' . nl2br($history['problem3']) . '" target="_blank">' . nl2br($history['problem3']) . '</a></div><input type="hidden" value="'.$history['problem3'].'" class="form-control problem3">';

												} ?>

                                    </div>

                                </div>

                            </div>

                            <?php } else { ?>

                            <div class="row">

                                <div class="col-md-6">

                                    <div class="form-group">

                                        <label>Notes </label>

                                        <textarea name="historyNotes" id="historyNotes1" class="form-control "
                                            rows="10"></textarea>

                                    </div>

                                    <div class="form-group">

                                        <label>Personal </label>

                                        <textarea name="historyNotes" id="historyNotes2" class="form-control "
                                            rows="10"></textarea>

                                    </div>

                                    <div class="form-group">

                                        <label>Business</label>

                                        <textarea name="historyNotes" id="historyNotes3" class="form-control "
                                            rows="10"></textarea>

                                    </div>

                                </div>

                                <div class="col-md-6">

                                    <div class="form-group">

                                        <label>Facebook Profile Link -</label>

                                        <textarea class="form-control fbprolink" rows="1"></textarea>

                                    </div>

                                    <div class="form-group">

                                        <label for="">Facebook Page Link - </label>

                                        <textarea class="form-control fbpagelink" rows="1"></textarea>

                                    </div>

                                    <div class="form-group">

                                        <label for="">Website Link - </label>

                                        <textarea class="form-control weblink" rows="1"></textarea>

                                    </div>
                                    <div class="form-group">
                                        <label for="">Messenger link - </label>
                                        <textarea class="form-control msglink" rows="1"></textarea>
                                    </div>

                                    <div class="form-group">

                                        <label for="">Instagram Link</label>

                                        <textarea class="form-control intalink" rows="1"></textarea>

                                    </div>

                                    <div class="form-group">

                                        <label for="">Designation -</label>

                                        <textarea class="form-control desiglink" rows="1"></textarea>

                                    </div>



                                    <label>Beliefs & LimitationsBeliefs & Limitations</label>

                                    <div class="form-group">

                                        <textarea class="form-control belief1" rows="1"></textarea>

                                    </div>

                                    <div class="form-group">

                                        <textarea class="form-control belief2" rows="1"></textarea>

                                    </div>

                                    <div class="form-group">

                                        <textarea class="form-control belief3" rows="1"></textarea>

                                    </div>

                                    <label>Key Phrases/ Key Words</label>

                                    <div class="form-group">

                                        <textarea class="form-control keyphra1" rows="1"></textarea>

                                    </div>

                                    <div class="form-group">

                                        <textarea class="form-control keyphra2" rows="1"></textarea>

                                    </div>

                                    <div class="form-group">

                                        <textarea class="form-control keyphra3" rows="1"></textarea>

                                    </div>

                                    <label>Problems</label>

                                    <div class="form-group">

                                        <textarea class="form-control problem1" rows="1"></textarea>

                                    </div>

                                    <div class="form-group">

                                        <textarea class="form-control problem2" rows="1"></textarea>

                                    </div>

                                    <div class="form-group">

                                        <textarea class="form-control problem3" rows="1"></textarea>

                                    </div>

                                </div>

                            </div>

                            <?php } ?>

                            <button type="button" style="width:200px;font-size:20px;font-weight:600;"
                                class="float-right btn btns save" data-id="<?php echo $id; ?>">save</button>

                        </div>

                    </div>

                </form>

            </div>

        </div>

    </div>

    <script>

        ClassicEditor

            .create(document.querySelector('#historyNotes1'))

            .then(newEditor => {

                editor = newEditor;

                newEditor.ui.view.editable.element.style.height = '250px';

            })

            .catch(error => {

                console.error(error);

            });

        ClassicEditor

            .create(document.querySelector('#historyNotes2'))

            .then(newEditor => {

                editor2 = newEditor;

                newEditor.ui.view.editable.element.style.height = '250px';

            })

            .catch(error => {

                console.error(error);

            });

        ClassicEditor

            .create(document.querySelector('#historyNotes3'))

            .then(newEditor => {

                editor3 = newEditor;

                newEditor.ui.view.editable.element.style.height = '250px';

            })

            .catch(error => {

                console.error(error);

            });

    </script>

    <script>

        $(document).ready(function () {

            $('.save').click(function () {

                var search = editor.getData();

                var personal = editor2.getData();

                var business = editor3.getData();

                var fbprolink = $('.fbprolink').val();

                var fbpagelink = $('.fbpagelink').val();
                var msglink = $('.msglink').val();
                var weblink = $('.weblink').val();

                var intalink = $('.intalink').val();

                var desiglink = $('.desiglink').val();

                var belief1 = $('.belief1').val();

                var belief2 = $('.belief2').val();

                var belief3 = $('.belief3').val();

                var keyphra1 = $('.keyphra1').val();

                var keyphra2 = $('.keyphra2').val();

                var keyphra3 = $('.keyphra3').val();

                var problem1 = $('.problem1').val();

                var problem2 = $('.problem2').val();

                var problem3 = $('.problem3').val();

                var search_id = $(this).attr('data-id');



                $.ajax({

                    url: "<?php echo base_url('yogiccoach/history_notes') ?>",

                    data: {

                        "search_id": search_id,

                        "search": search,

                        "personal": personal,

                        "business": business,

                        "fbprolink": fbprolink,

                        "fbpagelink": fbpagelink,
                        "msglink": msglink,
                        "weblink": weblink,

                        "intalink": intalink,

                        "desiglink": desiglink,

                        "belief1": belief1,

                        "belief2": belief2,

                        "belief3": belief3,

                        "keyphra1": keyphra1,

                        "keyphra2": keyphra2,

                        "keyphra3": keyphra3,

                        "problem1": problem1,

                        "problem2": problem2,

                        "problem3": problem3

                    },

                    type: "POST",

                    success: function (data) {

                        $("div.success").fadeIn(300).delay(1500).fadeOut(400);

                    }

                });



                var fggroup = $('.fggroup:checked').val();

                var description = $('#description').val();

                var audience = $('.Audience:checked').val();

                var cid = <? php echo $id; ?>;

                $.ajax({

                    type: "POST",

                    url: "<?php echo base_url('yogiccoach/check') ?>",

                    data: {

                        fggroup: fggroup,

                        description: description,

                        audience: audience,

                        cid: cid

                    }

                });

            });

        });

    </script></xmp></code></pre>
    <p>client journey notes</p>
    <img class="img-fluid" src="image/cjnotescoach.png" alt="Login Page" height="100">
    <br><br>
    <p>client journey notes controller</p>
    <code>application/controllers/yogiccoach.php</code>
    <pre><code class="language-html"><xmp>public function notes($id)
    {
    $data['id'] = $id;
    $this->load->view('yogiccoach/clientjourney/notes',$data);
    }
    public function cjuser_edit()
    {
    $fld_id = $_POST['fld_id'];
    
    $data['first_name'] = $_POST['first_name'];
    $data['last_name'] = $_POST['last_name'];
    $data['fld_email'] = $_POST['fld_email'];
    $data['phone'] = $_POST['phone'];
    $data['address'] = $_POST['address'];
    $data['source'] = implode(",",$_POST['source']);
    $data['connenction'] = $_POST['connenction'];
    $data['reply'] = $_POST['reply'];
    $data['Audience'] = $_POST['Audience'];
    $data['fggroup'] = '0';
    $data['description'] = '';
    $data['level'] = '1';
    $data['link'] = '';
    $data['fld_coach_id'] = $this->userid;
    $data['date'] = date('Y-m-d');
    
    $this->db->where('fld_id',$fld_id);
    $this->db->update('cjuser',$data);
    }</xmp></code></pre>
    <p>client journey notes view</p>
    <code>application/views/yogiccoach/clientjourney/notes.php</code>
    <pre><code class="language-html"><xmp><?php
    
    $session=$this->session->get_userdata();
    
    	$user_id=$session['user_id'];
    
    	
    
        $this->db->select("*");
    
        $this->db->from("cjuser");
    
        $this->db->where(array('fld_coach_id'=> $user_id,'fld_id'=>$id));
    
        $query = $this->db->get();
    
        $row = $query->row_array();
    
        
    
        $listView = " ";
    
        
    
        $this->db->order_by("id", "desc");
    
        $list = $this->db->get_where('cj_history',array('fld_cjuser'=>$id));
    
        $i = $list->num_rows();
    
        $data = $list->result();
    
    	foreach ($data as $history) {
    
    		$listView .= "<tr>
    
    							<td width='100' >" . $i . "</td>
    
                                <td width='200'>" . date("m/d/Y", strtotime($history->date)) . "</td>
                                <td width='200'>". nl2br($history->select_event) ."</td>
                                <td width='500'>" . nl2br($history->notes) . "</td>
    
                                <td width='100'><button onclick='getnotes(" . $history->id . ")' class='btn btn-success editbtn'>Edit</button></td>
    
                                <td width='100'><button onclick='deletenoted(" . $history->id . ")' class='btn btn-danger' >Delete</button></td>
    
                            </tr>";
    
    		$i--;
    
        }
    
    ?>
    
    <!DOCTYPE html>
    
    <html>
    
    <head>
    
        <title>Notes</title>
    
        <link rel="stylesheet" type="text/css" href="image.css">
    
        <!-- <link rel="stylesheet" type="text/css" href="customstyle.css"> -->
    
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
            integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    
        <!-- Latest compiled and minified CSS -->
    
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    
        <!-- jQuery library -->
    
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    
        <!-- Popper JS -->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    
        <!-- Latest compiled JavaScript -->
    
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    
        <script src="https://use.fontawesome.com/6c6c4c0fcc.js"></script>
    
        <style>
            input[type="checkbox"] {
    
                position: absolute;
    
                opacity: 0;
    
                cursor: pointer;
    
                height: 0;
    
                width: 0;
    
            }
    
    
    
            .checkmark {
    
                position: absolute;
    
                top: 20px;
    
                right: 20px;
    
                height: 20px;
    
                width: 20px;
    
                background-color: transparent;
    
                border: 2px solid #ff5c33;
    
                border-radius: 3px;
    
            }
    
    
    
            .check1 input[type="checkbox"]:checked~.checkmark {
    
                background-color: #fff;
    
                border: 2px solid #33cc33;
    
            }
    
    
    
            .check1 {
    
                cursor: pointer;
    
                font-size: 22px;
    
                -webkit-user-select: none;
    
                -moz-user-select: none;
    
                -ms-user-select: none;
    
                user-select: none;
    
            }
    
    
    
            .checkmark:after {
    
                content: "";
    
                position: absolute;
    
                display: none;
    
            }
    
    
    
            .check1 input[type="checkbox"]:checked~.checkmark:after {
    
                display: block;
    
            }
    
    
    
            .check1 .checkmark:after {
    
                left: 6px;
    
                top: 2px;
    
                width: 5px;
    
                height: 10px;
    
                border: solid #33cc33;
    
                border-width: 0 2px 2px 0;
    
                -webkit-transform: rotate(45deg);
    
                -ms-transform: rotate(45deg);
    
                transform: rotate(45deg);
    
            }
    
    
    
            .check {
    
                position: relative;
    
                top: 5px;
    
            }
    
    
    
            .btns {
    
                color: #fff;
    
                font-size: 20px;
    
                font-weight: 600;
    
                padding: 5px 10px;
    
                width: 120px !important;
    
                text-decoration: none;
    
                background: #2f3c48;
    
            }
    
    
    
            .btns:hover {
    
                text-decoration: none;
    
                color: #fff;
    
                background: #3d4e5d;
    
            }
        </style>
    
    </head>
    
    <body>
    
        <div class="container">
    
            <br>
    
            <a class="btn" style="background:#2f3c48;color: #fff;font-size: 20px;font-weight: 600;padding: 5px 10px;"
                href="<?= base_url('yogiccoach'); ?>">Portal Dashboard</a>
    
            <a class="btn btns" href="<?= base_url('yogiccoach/greenmashin') ?>">Home</a>
    
            <a class="btn" style="background:#2f3c48;color: #fff;font-size: 20px;font-weight: 600;padding: 5px 10px;"
                href="<?= base_url('yogiccoach/research/'.$row[" fld_id"]); ?>">Show Research</a>
    
            <a class='btns btn' href="javascript:history.back()">Back</a>
            <button type="button" class="btn btns" data-toggle="modal" data-target="#exampleModal">
                Event
            </button>
    
            <h1 style="margin:25px 0">Name:-
                <?= $row['first_name']." " . $row['last_name'] . " (" . $row['level'] . ")"; ?>
            </h1>
    
            <div class="row">
    
                <div class="col-md-6">
    
                    <form class="form-horizontal">
    
                        <div class="panel panel-default">
    
                            <div class="panel-heading">
    
                                <h3 class="panel-title">Notes</h3>
    
                            </div><br>
    
                            <div class="panel-body">
    
                                <div class="form-group">
    
                                    <label class="col-md-12 col-xs-12 control-label">Complete by Day</label>
    
                                    <div class="col-md-12 col-xs-12">
    
                                        <div class="input-group">
    
                                            <span class="input-group-addon bg-info">
    
                                                <span class="fa fa-calendar p-2"></span>
    
                                            </span>
    
                                            <input type="text" class="form-control" value="<?php echo date(" m/d/Y"); ?>"
                                            required disabled style="color: #ccc;">
    
                                        </div>
    
                                    </div>
    
                                </div>
    
                                <div class="form-group">
    
                                    <label class="col-md-3 col-xs-12 control-label">Title</label>
    
                                    <div class="col-md-12 col-xs-12">
    
                                        <input type="text" name="title" class="form-control" id="title2">
    
                                    </div>
    
                                </div>
    
                                <div class="form-group">
    
                                    <label class="col-md-12 col-xs-12 control-label">Notes</label>
    
                                    <div class="col-md-12 col-xs-12">
    
                                        <textarea name="historyNotes" id="historyNotes" class="form-control"
                                            rows="5"></textarea>
    
                                    </div>
    
                                </div>
    
    
    
                                <div class="form-group">
    
                                    <div class="col-md-12 col-xs-12">
    
                                        <button id="addHistory" type="button" class="btn btn-primary"
                                            data-id="<?php echo $id; ?>">Save Notes</button><br>
    
                                    </div>
    
                                </div>
    
                            </div>
    
                        </div>
    
                    </form>
    
                </div>
    
                <?php
    
                    $this->db->select("*");
    
                    $this->db->from("next_action");
    
                    $this->db->where(array('fld_cjuser'=>$id));
    
                    $query = $this->db->get();
    
                    $row = $query->row_array();
    
        			if ($row['status'] == 0) {
    
                        $checked = "checked='checked'";
    
    			    }else
    
    			    {
    
        				$checked = "";
    
    	    		} ?>
    
                <div class="col-md-6">
    
                    <form class="form-horizontal" method="post">
    
                        <div class="panel panel-default">
    
                            <div class="panel-heading">
    
                                <h3 class="panel-title">Next Action</h3>
    
                            </div>
    
                            <div class="check">
    
                                <label class="check1">
    
                                    <input type="checkbox" <?=$checked ?> value="
                                    <?php echo $id; ?>" id="rememberMe">
    
                                    <span class="checkmark"></span>
    
                                </label>
    
                            </div>
    
                            <div class="panel-body">
    
                                <div class="form-group">
    
                                    <label class="col-md-12 col-xs-12 control-label">Due Date</label>
    
                                    <div class="col-md-12 col-xs-12">
    
                                        <div class="input-group">
    
                                            <span class="input-group-addon bg-info">
    
                                                <span class="fa fa-calendar p-2"></span>
    
                                            </span>
    
                                            <?php if ($row['date'] != "") { ?>
    
                                            <input type="date" class="form-control" id="date" required style="color: #000;"
                                                value="<?php echo date(" Y-m-d", strtotime($row['date'])); ?>">
    
                                            <?php } else { ?>
    
                                            <input type="date" class="form-control" id="date" value="<?php echo date("
                                                Y-m-d"); ?>" required style="color: #000;">
    
                                            <?php } ?>
    
                                        </div>
    
                                    </div>
    
                                </div>
    
                                <div class="form-group">
    
                                    <label class="col-md-3 col-xs-12 control-label">Title</label>
    
                                    <div class="col-md-12 col-xs-12">
    
                                        <input type="text" name="title" class="form-control" id="titles"
                                            value="<?php echo $row['title'] ?>">
    
                                    </div>
    
                                </div>
    
                                <div class="form-group">
    
                                    <label class="col-md-3 col-xs-12 control-label">Notes</label>
    
                                    <div class="col-md-12 col-xs-12">
    
                                        <textarea name="nextnotes" id="nextnotes" data-id="<?php echo $id; ?>"
                                            class="form-control" rows="5"><?= $row['next_notes'] ?></textarea>
    
                                    </div>
    
                                </div>
    
                                <input type="submit" id="nextnotessubmit" value="Save" class="btn btn-primary">
    
                                <?php if ($row['date'] != "") { ?>
    
                                <input type="button" name="delete" id="nextnotes_delet" data-id="<?php echo $id; ?>"
                                    value="Delete" class="btn btn-danger float-right">
    
                                <?php } ?>
    
                            </div>
    
                        </div>
    
                    </form>
    
                </div>
    
            </div>
    
            <!------------------------------------------------------------------->
    
    
    
            <div class="panel-body">
    
                <table class="table table-striped table-bordered" width="100%">
    
                    <tr class="table-primary">
    
                        <th width="100">No</th>
    
                        <th width="200">Date</th>
                        <th width="200">Event</th>
    
                        <th width="500">Notes</th>
    
                        <th width="100">Edit</th>
    
                        <th width="100">Delete</th>
    
                    </tr>
    
                    <?php echo $listView; ?>
    
                </table>
    
            </div>
    
            <div class="modal" id="myModal">
    
                <div class="modal-dialog">
    
                    <div class="modal-content">
    
                        <div class="modal-header">
    
                            <h4 class="modal-title">Edit Nots</h4>
    
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
    
                        </div>
    
                        <!-- Modal body -->
    
                        <div class="modal-body">
    
                            <input type="hidden" name="" id="notes_id">
    
                            <label>Title</label>
    
                            <div class="form-group"><input type="text" id="title3" class="form-control"></div>
    
                            <div class="form-group">
    
                                <label>Notes</label>
    
                                <textarea style="width: 100%" id="notes"></textarea>
    
                            </div>
    
                        </div>
    
                        <!-- Modal footer -->
    
                        <div class="modal-footer">
    
                            <input type="submit" name="submit" value="Edit" class="btn btn-warning"
                                onclick="updatedetail()">
    
                            <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
    
                        </div>
    
                    </div>
    
                </div>
    
            </div>
    
        </div>
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Event Add</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-12">
                                <form class="form-horizontal">
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">Events</h3>
                                        </div><br>
                                        <div class="panel-body">
                                            <div class="form-group">
                                                <label class="col-md-12 col-xs-12 control-label">Event Date</label>
                                                <div class="col-md-12 col-xs-12">
                                                    <div class="input-group">
                                                        <span class="input-group-addon bg-info">
                                                            <span class="fa fa-calendar p-2"></span>
                                                        </span>
                                                        <input type="text" id="date_change" class="form-control"
                                                            value="<?php echo date(" m/d/Y"); ?>" required style="color:
                                                        #ccc;">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-xs-12 control-label">Event</label>
                                                <div class="col-md-12 col-xs-12">
                                                    <select class="form-control" id="select_event">
                                                        <option disabled selected>--select Event--</option>
                                                        <option value="Pre Disco">Pre Disco</option>
                                                        <option value="Disco">Disco</option>
                                                        <option value="VSL">VSL</option>
                                                        <option value="Sales">Sales</option>
                                                        <option value="Close">Close</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-xs-12 control-label">Event Title</label>
                                                <div class="col-md-12 col-xs-12">
                                                    <input type="text" name="title" class="form-control" id="title2select">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-12 col-xs-12 control-label">Event Notes</label>
                                                <div class="col-md-12 col-xs-12">
                                                    <textarea name="historyNotes" id="historyNotesselect"
                                                        class="form-control" rows="5"></textarea>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-md-12 col-xs-12">
                                                    <button id="addHistoryselect" type="button" class="btn btn-primary"
                                                        data-id="<?php echo $id; ?>">Save Notes</button><br>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <!--<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>-->
                        <!--<button type="button" class="btn btn-primary">Save changes</button>-->
                    </div>
                </div>
            </div>
        </div>
        <script>

            function urlify(text) {

                var urlRegex = /(https?:\/\/[^\s]+)/g;

                return text.replace(urlRegex, function (url) {

                    return '<a href="' + url + '" target="_blank">' + url + '</a>';

                })

            }



            $(document).ready(function () {

                $('#rememberMe').change(function () {

                    var _status = $(this).is(":checked") ? "0" : "1";

                    var _id = $(this).val();

                    $.post("history_notes",

                        {

                            _status: _status,

                            _id: _id

                        },

                        function (data, status) {

                            location.reload(true);

                        });

                });



                $('#nextnotessubmit').click(function () {

                    var next_id = $('#nextnotes').attr('data-id');

                    var val = $('#nextnotes').val();

                    var date = $("#date").val();

                    var title = $('#titles').val();



                    $.ajax({

                        url: "<?php echo base_url('yogiccoach/nextnotessubmit');?>",

                        data: {

                            "next_id": next_id,

                            "val": val,

                            "date": date,

                            "title": title

                        },

                        type: "POST",

                        success: function (data) {

                            location.reload(true);

                        }

                    });

                });



                $('#nextnotes_delet').click(function () {

                    var clients_id = $(this).attr('data-id');



                    $.ajax({

                        url: "<?php echo base_url('yogiccoach/nextnotes_delet')?>",

                        data: {

                            "clients_id": clients_id

                        },

                        type: "POST",

                        dataType: "html",

                        success: function (response) {

                            location.reload(true);

                        }

                    });

                });

                $("#addHistoryselect").click(function () {
                    var cid = $(this).data('id');
                    var title2 = $("#title2select").val();
                    var notes = $("#historyNotesselect").val();
                    var select_event = $('#select_event').val();
                    var date_change = $('#date_change').val();
                    var html = urlify(notes);
                    console.log(html);
                    if ($.trim(notes) == "") {

                        alert("Please enter notes.");

                        $("#historyNotes").focus();

                        return false;

                    } else {

                        $.ajax({

                            url: "<?php echo base_url('yogiccoach/notessaveevent');?>",

                            data: {
                                "cid": cid,
                                "notes": html,
                                "title2": title2,
                                "select_event": select_event,
                                "date_change": date_change
                            },

                            type: "POST",

                            dataType: "html",

                            success: function (response) {

                                $("#tbHistoryNotes").html(response);

                                location.reload(true);

                            }

                        });

                    }

                });


                $("#addHistory").click(function () {

                    var cid = $(this).attr('data-id');

                    var title2 = $("#title2").val();

                    var notes = $("#historyNotes").val();

                    var html = urlify(notes);

                    console.log(html);

                    if ($.trim(notes) == "") {

                        alert("Please enter notes.");

                        $("#historyNotes").focus();

                        return false;

                    } else {

                        $.ajax({

                            url: "<?php echo base_url('yogiccoach/notessave');?>",

                            data: {

                                "cid": cid,

                                "notes": html,

                                "title2": title2

                            },

                            type: "POST",

                            dataType: "html",

                            success: function (response) {

                                $("#tbHistoryNotes").html(response);

                                location.reload(true);

                            }

                        });

                    }

                });

            });



            function deletenoted(notes_id) {

                var conf = confirm("Are You Sure");

                if (conf == true) {

                    $.ajax({

                        url: "<?php echo base_url('yogiccoach/deletenoted'); ?>",

                        type: "POST",

                        data: {

                            notes_id: notes_id

                        },



                        success: function (data, status) {

                            location.reload(true);

                        }

                    });

                }

            }



            function getnotes(notesd_id) {

                $('#notes_id').val(notesd_id);

                $.post("<?php echo base_url('yogiccoach/getnotes'); ?>",

                    {

                        notesd_id: notesd_id

                    },



                    function (data, status) {

                        var user = JSON.parse(data);

                        $('#notes').val(user.notes);

                        $('#title3').val(user.title);

                    });

                $('#myModal').modal('show');

            }



            function updatedetail() {

                var notes = urlify($('#notes').val());

                var title3 = urlify($('#title3').val());

                var id = $('#notes_id').val();

                $.post("<?php echo base_url('yogiccoach/updatedetail'); ?>", {

                    notes: notes,

                    title3: title3,

                    id: id

                },

                    function (data, status) {

                        $('#myModal').modal('hide');

                        location.reload(true);

                    }

                );

            }

        </script></xmp></code></pre>
        <p>Edit client journey</p>
        <img class="img-fluid" src="image/editecjclientcoach.png" alt="Login Page" height="100">
        <br><br>
        <p>Edit client journey controller</p>
        <code>application/controllers/yogiccoach.php</code>
        <pre><code class="language-html"><xmp>public function cjedit($id)
        {
        $data['id'] = $id;
        $this->load->view('yogiccoach/clientjourney/edit',$data);
        }</xmp></code></pre>
        <p>Edit client journey view</p>
        <code>application/views/yogiccoach/clientjourney/edit.php</code>
        <pre><code class="language-html"><xmp><?php
        $this->load->view('yogiccoach/clientjourney/cjheader');
        	$session=$this->session->get_userdata();
        	$user_id=$session['user_id'];
        	$empSQL = $this->db->get_where('cjuser',array('fld_id'=>$id));
            $row = $empSQL->row_array();
        	$source = explode(',', $row['source']);
        ?>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
            integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
        <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
        <style>
            td {
                text-align: left;
                vertical-align: top;
            }
        
            table {
                width: 100%;
                overflow-y: scroll
            }
        
            .form-control {
                width: 200px;
            }
        
            .btns {
                font-size: 20px;
                font-weight: 600;
                padding: 5px 10px;
            }
        </style>
        <h1>Client Edite</h1>
        <form method="post" action="<?= base_url('yogiccoach/cjuser_edit'); ?>"
            style="background-color: #d9d9d9; padding: 25px;" id="adduser">
            <?php echo $sucees ?>
            <table>
                <tr>
                    <td>
                        <div class="form-group"><label>First Name: </label><input type="text" value="<?= $row['first_name']; ?>"
                                name="first_name" autocomplete="autocomplete" class="form-control"></div>
                        <input type="hidden" name="fld_id" value="<?= $row['fld_id']; ?>">
                        <div class="form-group"><label>Last Name: </label><input type="text" name="last_name"
                                value="<?= $row['last_name'] ?>" class="form-control" autocomplete="autocomplete"></div>
                        <div class="form-group"><label>Email: </label><input type="email" name="fld_email"
                                value="<?= $row['fld_email'] ?>" class="form-control" autocomplete="autocomplete"></div>
                        <div class="form-group"><label>Phone No: </label><input type="number" class="form-control"
                                value="<?= $row['phone'] ?>" name="phone"></div>
                        <div class="form-group"><label>Location: </label><textarea name="address" value="<?= $row['address'] ?>"
                                class="form-control"></textarea></div>
                    </td>
                    <td>
                        <b>Source</b>
        
                        <div class="form-group">
                            <input type="checkbox" name="source[]" value="FB Contact" <?php if (in_array("FB Contact", $source))
                                { echo "checked" ; } ?>><span> FB Contact</span>
                        </div>
                        <div class="form-group">
                            <input type="checkbox" name="source[]" value="LI Contact" <?php if (in_array("LI Contact", $source))
                                { echo "checked" ; } ?>><span> LI Contact</span>
                        </div>
                        <div class="form-group">
                            <input type="checkbox" name="source[]" value="Instagram" <?php if (in_array("Instagram", $source)) {
                                echo "checked" ; } ?>><span> Instagram</span>
                        </div>
                        <div class="form-group">
                            <input type="checkbox" name="source[]" value="Emails" <?php if (in_array("Emails", $source)) {
                                echo "checked" ; } ?>><span> Emails</span>
                        </div>
                    </td>
                    <td>
                        <b>Friend Request Status :-</b>
                        <div class="form-group">
                            <input type="radio" class="mx-2" name="connenction" value="Sent" <?php if
                                (isset($row['connenction']) && $row['connenction']=="Sent" ) { echo "checked" ; } ?>> Sent
                        </div>
                        <div class="form-group">
                            <input type="radio" class="mx-2" name="connenction" value="Accepted" <?php if
                                (isset($row['connenction']) && $row['connenction']=="Accepted" ) { echo "checked" ; } ?>>
                            Accepted
                        </div>
                        <div class="form-group">
                            <input type="radio" class="mx-2" name="connenction" value="Pending" <?php if
                                (isset($row['connenction']) && $row['connenction']=="Pending" ) { echo "checked" ; } ?>> Pending
                        </div>
                        <br>
                        <b>Reply Status</b>
                        <div class="form-group">
                            <input type="radio" class="mx-2" name="reply" value="No" <?php if (isset($row['reply']) &&
                                $row['reply']=="No" ) { echo "checked" ; } ?>> No
                        </div>
                        <div class="form-group">
                            <input type="radio" class="mx-2" name="reply" value="Yes" <?php if (isset($row['reply']) &&
                                $row['reply']=="Yes" ) { echo "checked" ; } ?>> Yes
                        </div>
                    </td>
                    <td>
                        <b>Levels</b>
                        <div class="form-group">
                            <input type="radio" class="mx-2" name="Audience" value="1" id="radio1" <?php if
                                (isset($row['Audience']) && $row['Audience']=="1" ) { echo "checked" ; } ?>>
                            Level 1 - Contact
                        </div>
                        <div class="form-group">
                            <input type="radio" class="mx-2" name="Audience" value="2" id="radio2" <?php if
                                (isset($row['Audience']) && $row['Audience']=="2" ) { echo "checked" ; } ?>>
                            Level 2 - Rapport
                        </div>
                        <div class="form-group">
                            <input type="radio" class="mx-2" name="Audience" value="3" id="radio3" <?php if
                                (isset($row['Audience']) && $row['Audience']=="3" ) { echo "checked" ; } ?>>
                            Level 3 - Share Authority/ Value Proposition / Ask To Get On A Call
                        </div>
                        <div class="form-group">
                            <input type="radio" class="mx-2" name="Audience" value="4" id="radio4" <?php if
                                (isset($row['Audience']) && $row['Audience']=="4" ) { echo "checked" ; } ?>>
                            Level 4 - Discovery Call
                        </div>
                        <div class="form-group">
                            <input type="radio" class="mx-2" name="Audience" value="5" id="radio5" <?php if
                                (isset($row['Audience']) && $row['Audience']=="5" ) { echo "checked" ; } ?>>
                            Level 5 - VSL - Full Clarity
                        </div>
                        <div class="form-group">
                            <input type="radio" class="mx-2" name="Audience" value="6" id="radio6" <?php if
                                (isset($row['Audience']) && $row['Audience']=="6" ) { echo "checked" ; } ?>>
                            Level 6 - Strategy Call/ Sales Call
                        </div>
                        <div class="form-group">
                            <input type="radio" class="mx-2" name="Audience" value="7" id="radio7" <?php if
                                (isset($row['Audience']) && $row['Audience']=="7" ) { echo "checked" ; } ?>>
                            Level 7 - Converted/ Closed Clients
                        </div>
                        <div class="form-group">
                            <input type="radio" class="mx-2" name="Audience" value="8" id="radio7" <?php if
                                (isset($row['Audience']) && $row['Audience']=="8" ) { echo "checked" ; } ?>>
                            Level 8 - Nuture List/ Potential Collaborators
                        </div>
                    </td>
                </tr>
            </table>
            <div class="row">
                <div class="col-12">
                    <input class="btn btn-info" type="submit" name="submit" value="Submit">
                </div>
            </div>
        </form>
        <marquee direction="right" style="color:#661400 ; background: #ffffb3 ;"> Welcome To Journey</marquee>
        </div>
        <script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.13/js/dataTables.bootstrap.min.js"></script>
        <script src="https://cdn.datatables.net/responsive/2.1.1/js/dataTables.responsive.min.js"></script>
        <script src="https://cdn.datatables.net/responsive/2.1.1/js/responsive.bootstrap.min.js"></script>
        <script>
            $("#adduser").submit(function (e) {
                e.preventDefault(); // avoid to execute the actual submit of the form.
                var form = $(this);
                var url = form.attr('action');
                $.ajax({
                    type: "POST",
                    url: url,
                    data: form.serialize(), // serializes the form's elements.
                    success: function (data) {
                        window.location.replace(data);
                        //   alert(data); // show response from the php script.
                    }
                });
            });
        </script>
        <?php $this->load->view('yogiccoach/clientjourney/cjfooter'); ?></xmp></code></pre>
<p>kpi's worksheet</p>
<img class="img-fluid" src="image/worksheetcoach.png" alt="Login Page" height="100">
<br><br>
<p>kpi's worksheet controller</p>
<code>application/controllers/yogiccoach.php</code>
<pre><code class="language-html"><xmp>public function worksheet()
{
$this->load->view('yogiccoach/clientjourney/worksheet');
}
public function kpiworksheet()
{
$data['fld_text'] = $_POST['data'];
$data['fld_tableId'] = $_POST['tableId'];
$data['fld_year'] = $_POST['year'];
$data['fld_type'] = $_POST['type'];
$data['fld_date'] = $_POST['fld_date'];
$data['fld_day'] = $_POST['day'];
$data['fld_current_date'] = $_POST['cdate'];
$data['fld_cjuser'] = $this->userid;

$this->db->select("*");
$this->db->from("kpiworksheet");
$this->db->where(array('fld_tableId'=>$_POST['tableId'],'fld_year'=>$_POST['year'],'fld_date'=>$_POST['fld_date']));
$historyMember = $this->db->get();

if ($historyMember->num_rows()>0)
{
$this->db->where(array('fld_tableId'=>$_POST['tableId'],'fld_year'=>$_POST['year'],'fld_date'=>$_POST['fld_date']));
$this->db->update('kpiworksheet',$data);
}else{
$this->db->insert('kpiworksheet',$data);
}
}</xmp></code></pre>
<p>kpi's worksheet view</p>
<code>application/views/yogiccoach/clientjourney/worksheet.php</code>
<pre><code class="language-html"><xmp><?php

$page = "worksheet";

$this->load->view('yogiccoach/clientjourney/kpiheader');

    $session=$this->session->get_userdata();

    $user_id=$session['user_id'];



$this->load->model("user_model");

// function getcheck($fld_tableId, $fld_date, $currentY)

// {

//     $this->CI = & get_instance();

//     $this->db->select("*");

//     $this->db->from("kpiworksheet");

//     $this->db->where(array('fld_cjuser'=> $user_id,'fld_tableId' => $a,'fld_year' => $currentY,'fld_date' => $adate));

//     $result = $this->db->get();

//     if ($result->num_rows() >0) 

//  {

//         $row = $result->row_array();

//         if ($row['fld_tableId'] != '') {

//             $data = $row['fld_text'];

//         }

//     } else {

//         $data = $fld_tableId.' '.$fld_date.' '.$currentY;

//     }

//     return $data;

// }



function getcheckrefle($month, $fld_type, $currentY)

{

    include 'config.php';

    $querys = mysqli_query($conn, "SELECT * FROM `worksheet` WHERE `fld_date`='$month' AND `fld_tableId`='$fld_type' AND `fld_year`='$currentY'");

    if (mysqli_num_rows($querys) > 0) {

        $row = mysqli_fetch_assoc($querys);

        if ($row['fld_tableId'] != '') {

            $data = $row['fld_text'];

        }

    } else {

        $data = '';

    }

    return $data;

}



function gettotal($month, $fld_type, $currentY)

{

    include 'config.php';

    $querys = mysqli_query($conn, "SELECT * FROM `worksheet` WHERE `fld_date`='$month' AND `fld_type`='$fld_type' AND `fld_year`='$currentY'");

    $data = 0;

    while ($row = mysqli_fetch_assoc($querys)) {

        $data += (int)$row['fld_text'];

    }

    return $data;

}



function getDatesFromRange($start, $end)

{

    $dates = array($start);

    while (end($dates) < $end) {

        $dates[] = date('Y-m-d', strtotime(end($dates) . ' +1 day'));

    }

    return $dates;

}



if (isset($_GET['submit'])) {

    $currentY = $_GET['admission_year'];

    $m = $_GET['admission_month'];

    if ($m < 10) {

        $month = "0" . $m;

    } else {

        $month = $m;

    }

} else {

    $currentY = date('Y');

    $month = date('m');

}



$getdate = getDatesFromRange($currentY . '-' . $month . '-01', $currentY . '-' . $month . '-31');

?>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

<style>
    #loading {
        position: fixed;
        display: block;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        text-align: center;
        opacity: 0.7;
        background-color: #fff;
        z-index: 99;
    }

    #loading-image {
        position: absolute;
        top: 50%;
        left: 50%;
        z-index: 100;
    }

    table {
        margin: 1em 0;
        border-collapse: collapse;
        border: 0.1em solid #d6d6d6;
    }

    th,
    td {
        padding: 0.25em 0.5em 0.25em 1em;
        vertical-align: text-top;
        text-align: left;
        text-indent: -0.5em;
    }

    th {
        vertical-align: bottom;
        background-color: #336600;
        color: #fff;
    }

    tr:nth-child(even) th[scope=row] {
        background-color: #f2f2f2;
    }

    tr:nth-child(odd) th[scope=row] {
        background-color: #fff;
    }

    tr:nth-child(even) {
        background-color: rgba(0, 0, 0, 0.05);
    }

    tr:nth-child(odd) {
        background-color: rgba(255, 255, 255, 0.05);
    }

    /* Fixed Headers */

    th {
        position: -webkit-sticky;
        position: sticky;
        top: 0;
        z-index: 2;
    }

    th[scope=row] {
        position: -webkit-sticky;
        position: sticky;
        left: 0;
        z-index: 1;
    }

    th[scope=row] {
        vertical-align: top;
        color: inherit;
        background-color: inherit;
        background: linear-gradient(90deg, transparent 0%, transparent calc(100% - .05em), #d6d6d6 calc(100% - .05em), #d6d6d6 100%);
    }

    th:not([scope=row]):first-child {
        left: 0;
        z-index: 3;
        background: linear-gradient(90deg, #666 0%, #666 calc(100% - .05em), #ccc calc(100% - .05em), #ccc 100%);
    }

    @media all and (min-width: 30em) {
        th[scope=row] {
            min-width: 6em;
        }
    }

    th[scope=row]+td {
        min-width: 6em;
    }
</style>

<script type="text/javascript">

    $(window).load(function () {

        $("#loading").fadeOut("slow");

    });

</script>

<div id="loading">

    <img id="loading-image" src="https://www.myportalx.com/cj2021/Spinner-1s-200px.gif" alt="Loading..." />

</div>

<h1 style="position: relative; top: -131px;"> Daily Prospecting Worksheet 3.0 -
    <?= $currentY ?>
</h1>

<table style="display: block; overflow-x: auto;height: 65vh; white-space: nowrap;    position: relative;

    top: -73px;">

    <thead>

        <tr>

            <th style="background:#336600;">DATE/Day</th>

            <th>FB Contact</th>

            <th style="min-width: 6em;">LI Contact </th>

            <th>Instagram </th>

            <th>Emails </th>

            <th>Follow Up </th>

            <th>Pre Disco</th>

            <th>DISCO</th>

            <th>VSL</th>

            <th>Sales</th>

            <th>Close</th>

        </tr>

    </thead>

    <tbody>

        <?php

        foreach ($getdate as $i => $row) {

        ?>

        <tr>

            <td scope="row">
                <?= date('D, M j', strtotime($row)); ?>
            </td>

            <td><a href="<?= base_url('yogiccoach/showdatail/FB Contact/'.strtotime($row)); ?>">
                    <?php echo $this->user_model->getcheck('a' . $i, date('M', strtotime($row)), $currentY,$user_id); ?>
                </a></td>

            <td><a href="<?= base_url('yogiccoach/showdatail/LI Contact/'.strtotime($row)); ?>">

                    <?php echo $this->user_model->getcheck('b' . $i, date('M', strtotime($row)), $currentY,$user_id); ?>
                </a></td>

            <td><a href="<?= base_url('yogiccoach/showdatail/Instagram/'.strtotime($row)); ?>">

                    <?php echo $this->user_model->getcheck('c' . $i, date('M', strtotime($row)), $currentY,$user_id); ?>
                </a></td>

            <td><a href="<?= base_url('yogiccoach/showdatail/Emails/'.strtotime($row)); ?>">

                    <?php echo $this->user_model->getcheck('d' . $i, date('M', strtotime($row)), $currentY,$user_id); ?>
                </a></td>

            <td><a href="<?= base_url('yogiccoach/showhistoryevent/message/'.strtotime($row)); ?>">

                    <?php echo $this->user_model->getchecke(strtotime($row)); ?>
                </a></td>

            <td><a href="<?= base_url('yogiccoach/showhistoryevente/Pre Disco/'.strtotime($row)); ?>">

                    <?php echo $this->user_model->getcheck('f' . $i, date('M', strtotime($row)), $currentY,$user_id); ?>
                </a></td>

            <td><a href="<?= base_url('yogiccoach/showhistoryevente/Disco/'.strtotime($row)); ?>">

                    <?php echo $this->user_model->getcheck('g' . $i, date('M', strtotime($row)), $currentY,$user_id); ?>
                </a></td>

            <td><a href="<?= base_url('yogiccoach/showhistoryevente/VSL/'.strtotime($row)); ?>">

                    <?php echo $this->user_model->getcheck('h' . $i, date('M', strtotime($row)), $currentY,$user_id); ?>
                </a></td>

            <td><a href="<?= base_url('yogiccoach/showhistoryevente/Sales/'.strtotime($row)); ?>">

                    <?php echo $this->user_model->getcheck('i' . $i, date('M', strtotime($row)), $currentY,$user_id); ?>
                </a></td>

            <td><a href="<?= base_url('yogiccoach/showhistoryevente/Close/'.strtotime($row)); ?>">

                    <?php echo $this->user_model->getcheck('j' . $i, date('M', strtotime($row)), $currentY,$user_id); ?>
                </a></td>

        </tr>

        <?php   }

        ?>

        <tr>

            <td scope="row">total</td>

            <td>
                <?= $this->user_model->gettotal(date('M', mktime(0, 0, 0, $month, 10)), 'a', $currentY,$user_id); ?>
            </td>

            <td>
                <?= $this->user_model->gettotal(date('M', mktime(0, 0, 0, $month, 10)), 'b', $currentY,$user_id); ?>
            </td>

            <td>
                <?= $this->user_model->gettotal(date('M', mktime(0, 0, 0, $month, 10)), 'c', $currentY,$user_id); ?>
            </td>

            <td>
                <?= $this->user_model->gettotal(date('M', mktime(0, 0, 0, $month, 10)), 'd', $currentY,$user_id); ?>
            </td>

            <td>
                <?= $this->user_model->gettotal(date('M', mktime(0, 0, 0, $month, 10)), 'e', $currentY,$user_id); ?>
            </td>

            <td>
                <?= $this->user_model->gettotal(date('M', mktime(0, 0, 0, $month, 10)), 'f', $currentY,$user_id); ?>
            </td>

            <td>
                <?= $this->user_model->gettotal(date('M', mktime(0, 0, 0, $month, 10)), 'g', $currentY,$user_id); ?>
            </td>

            <td>
                <?= $this->user_model->gettotal(date('M', mktime(0, 0, 0, $month, 10)), 'h', $currentY,$user_id); ?>
            </td>

            <td>
                <?= $this->user_model->gettotal(date('M', mktime(0, 0, 0, $month, 10)), 'i', $currentY,$user_id); ?>
            </td>

            <td>
                <?= $this->user_model->gettotal(date('M', mktime(0, 0, 0, $month, 10)), 'j', $currentY,$user_id); ?>
            </td>

        </tr>

    </tbody>

</table>



<script>

    $(document).ready(function () {

        $('.form-control').change(function () {

            alert((this).val());

        });

        $('td').keyup(function () {

            var data = $(this).text();

            var tableId = $(this).data('val');

            var fld_date = $(this).data('date');

            var type = $(this).data('type');

            var year = $(this).data('year');

            var day = $(this).data('day');

            var cdate = $(this).data('cdate');

            $.ajax({

                type: "post",

                url: '<?= base_url('yogiccoach/ kpiworksheet'); ?>',

                data: {

                fld_date: fld_date,

                data: data,

                tableId: tableId,

                year: year,

                type: type,

                day: day,

                cdate: cdate

            },

                success: function (data) { }

            });

    });

    });

</script></xmp></code></pre>
<p>kpi's worksheet model</p>
<code>application/models/user_model.php</code>
<pre><code class="language-html"><xmp><?php if ( ! defined('BASEPATH')) exit('No direct script access allowed.');

/* ----------------------------------------------------------------------------
 * Easy!Appointments - Open Source Web Scheduler
 *
 * @package     EasyAppointments
 * @author      A.Tselegidis <alextselegidis@gmail.com>
 * @copyright   Copyright (c) 2013 - 2016, Alex Tselegidis
 * @license     http://opensource.org/licenses/GPL-3.0 - GPLv3
 * @link        http://easyappointments.org
 * @since       v1.0.0
 * ---------------------------------------------------------------------------- */

/**
 * User Model
 *
 * Contains current user's methods.
 *
 * @package Model
 */
class User_Model extends CI_Model {
    /**
     * Class Constructor
     */
    public function __construct() {
        parent::__construct();
    }
    public function getcheck($fld_tableId, $fld_date, $currentY,$user_id)
{
    $this->db->select("*");
    $this->db->from("kpiworksheet");
    $this->db->where(array('fld_cjuser'=> $user_id,'fld_tableId' => $fld_tableId,'fld_year' => $currentY,'fld_date' => $fld_date));
    $result = $this->db->get();
    if ($result->num_rows() >0) 
	{
        $row = $result->row_array();
        if ($row['fld_tableId'] != '') {
            $data = $row['fld_text'];
        }
    } else {
        $data = '';
    }
    return $data;    
}

public function getchecke($date)
{
    $d = date('Y-m-d',$date);
    
    $this->db->select("*");
    $this->db->from("cj_history");
    $this->db->where(array('date'=> $d));
    $cjquery = $this->db->get();
    $a=array();
	if ($cjquery->num_rows() > 0) {
        foreach($cjquery->result_array() as $row) {
		      $cjid = $row['fld_cjuser'];
		      array_push($a,$cjid);
		    }
		}
    $uniq = array_unique($a);
    return count($uniq);
}

public function getchecksummery($day, $fld_type,$user_id)
{
    $this->db->select("*");
    $this->db->from("kpiworksheet");
    $this->db->where(array('fld_cjuser'=> $user_id,'fld_current_date' => $day,'fld_type' => $fld_type));
    $result = $this->db->get();
    
    $data = 0;
    $row = $result->row_array();
    $data = (int)$row['fld_text'];

    return $data;
}

public function getmonthsummary($month, $fld_type,$user_id)
{
    $this->db->select("*");
    $this->db->from("kpiworksheet");
    $this->db->where(array('fld_cjuser'=> $user_id,'fld_date' => $month,'fld_type' => $fld_type));
    $result = $this->db->get();

    $data = 0;
    foreach($result->result_array() as $row) {
        $data += (int)$row['fld_text'];
    }
    return $data;
}

public function getyearsummary($year, $fld_type,$user_id)
{
    $this->db->select("*");
    $this->db->from("kpiworksheet");
    $this->db->where(array('fld_cjuser'=> $user_id,'fld_year' => $year,'fld_type' => $fld_type));
    $result = $this->db->get();

    $data = 0;
    foreach($result->result_array() as $row) {
        $data += (int)$row['fld_text'];
    }
    return $data;
}
public function gettotal($month, $fld_type, $currentY,$user_id)
{
    $this->db->select("*");
    $this->db->from("kpiworksheet");
    $this->db->where(array('fld_cjuser'=> $user_id,'fld_type' => $fld_type,'fld_year' => $currentY,'fld_date' => $month));
    $result = $this->db->get();

    $data = 0;
    foreach($result->result_array() as $row) {
        $data += (int)$row['fld_text'];
    }
    return $data;
}

public function gettotalsend($month, $year,$user_id)
{
    $this->db->select("*");
    $this->db->from("kpiworksheet");
    $this->db->where(array('fld_cjuser'=> $user_id,'fld_year' => $year,'fld_date' => $month));
    $result = $this->db->get();
    
    $data = 0;
    foreach($result->result_array() as $row) {
        if ($row['fld_type'] == 'a' or $row['fld_type'] == 'c' or $row['fld_type'] == 'e' or $row['fld_type'] == 'g' or $row['fld_type'] == 'i') {
            $data += (int)$row['fld_text'];
        }
    }
    return $data;
}

public function gettotalaccept($month, $year,$user_id)
{
    $this->db->select("*");
    $this->db->from("kpiworksheet");
    $this->db->where(array('fld_cjuser'=> $user_id,'fld_year' => $year,'fld_date' => $month));
    $result = $this->db->get();
    
    $data = 0;
    foreach($result->result_array() as $row) {
        if ($row['fld_type'] == 'b' or $row['fld_type'] == 'd' or $row['fld_type'] == 'f' or $row['fld_type'] == 'h' or $row['fld_type'] == 'j') {
            $data += (int)$row['fld_text'];
        }
    }
    return $data;
}

public function getsendsummary($m, $currentY,$user_id)
{
    $this->db->select("*");
    $this->db->from("kpiworksheet");
    $this->db->where(array('fld_cjuser'=> $user_id,'fld_day' => $m,'fld_year' => $currentY));
    $result = $this->db->get();
    
    $data = 0;
    foreach($result->result_array() as $row) {
        if ($row['fld_type'] == 'a' or $row['fld_type'] == 'c' or $row['fld_type'] == 'e' or $row['fld_type'] == 'g' or $row['fld_type'] == 'i') {
            $data += (int)$row['fld_text'];
        }
    }
    return $data;
}

public function getacceptsummary($m, $currentY,$user_id)
{
    $this->db->select("*");
    $this->db->from("kpiworksheet");
    $this->db->where(array('fld_cjuser'=> $user_id,'fld_day' => $m,'fld_year' => $currentY));
    $result = $this->db->get();
    
    $data = 0;
    foreach($result->result_array() as $row) {
        if ($row['fld_type'] == 'b' or $row['fld_type'] == 'd' or $row['fld_type'] == 'f' or $row['fld_type'] == 'h' or $row['fld_type'] == 'j') {
            $data += (int)$row['fld_text'];
        }
    }
    return $data;
}

public function getweeksummary($m, $fld_type, $currentY,$user_id)
{
    $this->db->select("*");
    $this->db->from("kpiworksheet");
    $this->db->where(array('fld_cjuser'=> $user_id,'fld_type'=>$fld_type,'fld_year' => $currentY,'fld_day' => $m));
    $result = $this->db->get();
    $data = 0;
    foreach($result->result_array() as $row) {
            $data += (int)$row['fld_text'];
        }
    return $data;
}

public function getweeksummaryrefle($m, $fld_type, $currentY,$user_id)
{
    $this->db->select("*");
    $this->db->from("kpiworksheet");
    $this->db->where(array('fld_cjuser'=> $user_id,'fld_tableId'=>$fld_type,'fld_year' => $currentY,'fld_day' => $m));
    $result = $this->db->get();
    if ($result->num_rows() >0) 
	{
        $row = $result->row_array();
        if ($row['fld_tableId'] != '') {
            $data = $row['fld_text'];
        }
    } else {
        $data = '';
    }
    return $data;
}

}</xmp></code></pre>

        </div>