<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="Description" content="Enter your description here" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="prism.css">
    <script src="prism.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans+Condensed:wght@300&display=swap" rel="stylesheet">
    <title>myportalx.com || Admin Documentation</title>
    <style>
        * {
            font-family: Poppins, sans-serif;
        }

        h2 {
            font-weight: 800;
        }

        p {
            font-weight: 400;
        }

        pre[class*=language-] {
            background: #272822;
            height: 200px;
        }
    </style>
    <div class="container">
        <h1>Admin</h1>
        <p>admin Dashboard</p>
        <img class="img-fluid" src="image/dashboardadmin.png" alt="Login Page" height="100">
        <br><br>
        <p>Dashboard controller</p>
        <code>application/controllers/admin.php</code>
        <pre><code class="language-html"><xmp><?php
        
        defined('BASEPATH') OR exit('No direct script access allowed');
        
        
        
        class Admin extends CI_Controller {
        
        	 private $modulelist;
        
        	private $adminid;
        
        	private $moduleMultiRow = array();
        
        	public function __construct()
        
        	{
        
        		parent::__construct();
        
        
        
        		// $this->load->library('session');
        
        		$session = $this->session->userdata();
        
        		if(isset($session['user_id'])) {
        
        			$this->adminid = $session['user_id'];
        
        		}
        
        		else {
        
        			redirect(base_url());
        
        			die();
        
        		}
        
        		if(!isset($session["user_type"]))
        
        		{
        
        			redirect(base_url());
        
        			die();
        
        		}
        
        		else if($session['user_type']=="member"){
        
        			redirect(base_url()."member");
        
        			die();
        
        		}else if($session['user_type']=="yogiccoach"){
        
        			redirect(base_url());
        
        			die();
        
        		}
        
        		
        
        		
        
        		 if(isset($session["ModuleList"]) && sizeof($session["ModuleList"]) > 0){
        
                    $this->modulelist = $session["ModuleList"];
        
                    $this->moduleMultiRow = $session["moduleMultiRow"];
        
                }
        
                else{
        
                    //, "daily_score"=>"Daily Accountibility Score"
        
                    $this->modulelist = array("wheeloflife_record"=>"Wheel of life"
        
                        );
        
        
        
                    $this->load->model("user_model");
        
                    $coaching_forms = $this->user_model->get_marketing_forms($this->adminid,'', true);
        
                    foreach($coaching_forms as $form){
        
                         $this->modulelist[$form->table_name]= 'Marketing Form - '.$form->title; 
        
                        if($form->multirow == "1")
        
                            array_push($this->moduleMultiRow,$form->table_name);
        
                    }
        
                     $session["ModuleList"] = $this->modulelist;
        
                     $session["moduleMultiRow"] = $this->moduleMultiRow;
        
                }
        
        
        
        	}
        
        	
        
        	public function index()
        
        	{
        
        	   $data['member_id']= $this->adminid;
        
        		$this->load->view('admin/admin_dashboard',$data);
        
        		$this->db->query("INSERT INTO `mys_status`(`user_id`) VALUES ('". $this->adminid."')");
        
        	}
            public function update_profile()
            {
            $this->db->where("user_id", $this->adminid);
            $this->db->update("status",array("ustatus"=>strtotime("now")));
            }
        }</xmp></code></pre>
        <p>Dashboard view</p>
        <code>application/views/admin/admin_dashboard.php</code>
        <pre><code class="language-html"><xmp><?php
        defined('BASEPATH') OR exit('No direct script access allowed');
        $this->load->view('admin/sidebar');
        $this->db->order_by("fld_id", "desc");
        $getData=$this->db->get_where('users',array('fld_user_type !='=>'admin'));
        $getCoach=$this->db->get_where('users',array('fld_user_type'=>'yogiccoach'));
        $getMember=$this->db->get_where('users',array('fld_user_type'=>'member'));
        $getStudent=$this->db->get_where('users',array('fld_user_type'=>'student'));
        
        $query1 = $this->db->query('SELECT DISTINCT fld_user_id,MAX(fld_added_date) AS date FROM mys_chakra_reading GROUP BY fld_user_id ORDER BY MAX(fld_added_date) DESC LIMIT 5');
        $data= $query1->result_array();
        
        $userData = $this->db->get_where('chat',array('status'=>'0'));
            if ($userData->num_rows()>0) {
          $countMsg=$userData->num_rows();  
        }else{
            $countMsg=0;
        }
        
        $articles = $this->db->get_where("posts",array("fld_user_id"=>$member_id,"status"=>'0'));
                $acticleCount =$articles->num_rows();
        ?>
        <!-- START BREADCRUMB -->
        <ul class="breadcrumb">
            <li><a href="#">Home</a></li>
            <li class="active">Admin Dashboard</li>
        </ul>
        <div class="page-title">
            <h2>Dashboard <button type="button" class="btn btn-default mb-control" data-box="#message-box-success"><img
                        src="<?php echo base_url()." assets/images/";?>plus-30x30.png"></button></h2>
        </div>
        <!-- END BREADCRUMB -->
        
        <!-- PAGE CONTENT WRAPPER -->
        <div class="page-content-wrap">
            <!-- START WIDGETS -->
            <div class="row">
                <!-- <div class="col-md-3"> -->
                <!-- START WIDGET SLIDER -->
                <!-- <div class="widget widget-default widget-carousel">
                            <div class="owl-carousel" id="owl-example">
                                            
                                <div>                                    
                                    <div class="widget-title">Total</div>
                                    <div class="widget-subtitle">Coaches</div>
                                    <div class="widget-int"><?php echo $getCoach->num_rows(); ?></div>
                                </div>
                            </div>                            
                            <div class="widget-controls">                                
                                <a href="#" class="widget-control-right widget-remove" data-toggle="tooltip" data-placement="top" title="Remove Widget"><span class="fa fa-times"></span></a>
        					</div>                             
                        </div>      -->
                <!-- END WIDGET SLIDER -->
                <!-- </div> -->
        
                <div class="col-md-3">
                    <!-- START WIDGET MESSAGES -->
                    <div class="widget widget-default widget-item-icon" onClick="location.href='admin/view_create_teacher';">
                        <div class="widget-item-left">
                            <span class="fa fa-book"></span>
                        </div>
                        <div class="widget-data">
                            <div class="widget-int num-count">
                                <?php echo $acticleCount; ?>
                            </div>
                            <div class="widget-title">New Articles</div>
                            <div class="widget-subtitle">Click Coach List View Articles</div>
                        </div>
                        <div class="widget-controls">
                            <a href="#" class="widget-control-right widget-remove" data-toggle="tooltip" data-placement="top"
                                title="Remove Widget"><span class="fa fa-times"></span></a>
                        </div>
                    </div>
                    <!-- END WIDGET MESSAGES -->
                </div>
                <div class="col-md-3">
                    <!-- START WIDGET MESSAGES -->
                    <div class="widget widget-default widget-item-icon" onClick="location.href='admin/messages';">
                        <div class="widget-item-left">
                            <span class="fa fa-envelope"></span>
                        </div>
                        <div class="widget-data">
                            <div class="widget-int num-count">
                                <?php echo $countMsg; ?>
                            </div>
                            <div class="widget-title">New messages</div>
                            <div class="widget-subtitle">In your mailbox</div>
                        </div>
                        <div class="widget-controls">
                            <a href="#" class="widget-control-right widget-remove" data-toggle="tooltip" data-placement="top"
                                title="Remove Widget"><span class="fa fa-times"></span></a>
                        </div>
                    </div>
                    <!-- END WIDGET MESSAGES -->
                </div>
                <div class="col-md-3">
        
                    <!-- START WIDGET REGISTRED -->
                    <div class="widget widget-default widget-item-icon" onClick="location.href='admin/view_create_teacher';">
                        <div class="widget-item-left">
                            <span class="fa fa-user"></span>
                        </div>
                        <div class="widget-data">
                            <div class="widget-int num-count">
                                <?php echo $getData->num_rows(); ?>
                            </div>
                            <div class="widget-title">Registred users</div>
                            <div class="widget-subtitle">On your website</div>
                        </div>
                        <div class="widget-controls">
                            <a href="#" class="widget-control-right widget-remove" data-toggle="tooltip" data-placement="top"
                                title="Remove Widget"><span class="fa fa-times"></span></a>
                        </div>
                    </div>
                    <!-- END WIDGET REGISTRED -->
                </div>
                <div class="col-md-3">
                    <!-- START WIDGET CLOCK -->
                    <div class="widget widget-danger widget-padding-sm">
                        <div class="widget-big-int plugin-clock">00:00</div>
                        <div class="widget-subtitle plugin-date">Loading...</div>
                        <div class="widget-controls">
                            <a href="#" class="widget-control-right widget-remove" data-toggle="tooltip" data-placement="left"
                                title="Remove Widget"><span class="fa fa-times"></span></a>
                        </div>
                    </div>
                    <!-- END WIDGET CLOCK -->
                </div>
            </div>
            <!-- END WIDGETS -->
            <div class="row">
                <!--<?php 
        				$query1 = $this->db->query('SELECT DISTINCT fld_user_id,MAX(fld_added_date) AS date FROM mys_chakra_reading GROUP BY fld_user_id ORDER BY MAX(fld_added_date) DESC LIMIT 5');
        				$data= $query1->result_array();
        			?>-->
                <div class="col-md-12">
                    <!-- START PROJECTS BLOCK -->
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="panel-title-box">
                                <h3>MESSAGES</h3>
                            </div>
                            <ul class="panel-controls" style="margin-top: 2px;"></ul>
                        </div>
                        <div class="panel-body panel-body-table">
                            <div class="table-responsive">
                                <table class="table table-condensed table-bordered table-striped">
                                    <thead>
                                        <tr>
                                            <th width="40%">Name</th>
                                            <th width="30%">Date</th>
                                            <th width="30%">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <?php 
        										foreach( $data as $record){
        											echo ' <tr>
                                                            <td><a href="'.base_url('admin/member_list').'">'.$this->Common_model->get_user_name($record['fld_user_id']).'</a></td>
                                                            <td>'.date('m/d/Y', $record['date']).'</td>
                                                            <td>Unread Messages</td>
                                                        </tr>';
        										}
        									?>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- END PROJECTS BLOCK -->
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <!-- START PROJECTS BLOCK -->
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="panel-title-box">
                                <h3>Coach Record</h3>
                            </div>
                            <ul class="panel-controls" style="margin-top: 2px;"></ul>
                        </div>
                        <div class="panel-body panel-body-table">
                            <div class="table-responsive">
                                <?php
        								//$list=$this->Common_model->get_table_records('users',array('fld_user_type'=>'yogiccoach'),'ORDER BY MAX(fld_added_date) DESC LIMIT 5');
        								//print_r($list);exit;
        								$status='yogiccoach';
        								$options=array('fld_user_type'=>$status);
        								$limit=5;
        								$this->db->order_by("fld_id", "desc");
        								$query2 =$this->db->get_where('users',$options,$limit);
        								$list= $query2->result_array();
        								//print_r($list);exit;
        							?>
                                <table class="table table-condensed table-bordered table-striped">
                                    <thead>
                                        <tr>
                                            <th width="30%">Name</th>
                                            <th width="10%">Program</th>
                                            <th width="20%">Email</th>
                                            <th width="10%">Start Date</th>
                                            <th width="10%">End Date</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <?php error_reporting(0);
        										foreach($list as $value){
        											echo ' <tr>
                                                            <td>'.$this->Common_model->get_student_name($value['fld_id']).'</td>
                                                            <td>'.$value['fld_program'].'</td>
                                                            <td>'.$value['fld_email'].'</td>
        													<td>'.date("m/d/Y",$value['fld_start_date']).'</td>
        													<td>'.date("m/d/Y",$value['fld_end_date']).'</td>
                                                        </tr>';
        										}
        									?>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- END PROJECTS BLOCK -->
                </div>
            </div>
        
            <div class="row">
                <div class="col-md-12">
                    <!-- START PROJECTS BLOCK -->
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="panel-title-box">
                                <h3>Member Record</h3>
                            </div>
                            <ul class="panel-controls" style="margin-top: 2px;"></ul>
                        </div>
                        <div class="panel-body panel-body-table">
                            <div class="table-responsive">
                                <?php
        								$status='member';
        								$options=array('fld_user_type'=>$status);
        								$query =  $this->db->get_where('users',$options);
        								$limit=5;
        								$query4 =  $this->db->get_where('users',$options,$limit);
        								$data4= $query4->result_array();
        							?>
                                <table class="table table-condensed table-bordered table-striped">
                                    <thead>
                                        <tr>
                                            <th width="30%">Name</th>
                                            <th width="40%">Program</th>
                                            <th width="20%">Email</th>
                                            <th width="10%">Join Date</th>
                                            <th width="10%">End Date</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <?php 
        										foreach( $data4 as $rslt){
        											echo ' <tr>
                                                            <td>'.$this->Common_model->get_student_name($rslt['fld_id']).'</td>
                                                            <td>'.$rslt['fld_program'].'</td>
                                                            <td>'.$rslt['fld_email'].'</td>
        													<td>'.date("m/d/Y",$rslt['fld_start_date']).'</td>
        													<td>'.date("m/d/Y",$rslt['fld_end_date']).'</td>
                                                        </tr>';
        										}
        									?>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- END PROJECTS BLOCK -->
                </div>
            </div>
        </div>
        <!-- END PAGE CONTENT WRAPPER -->
        </div>
        <!-- END PAGE CONTENT -->
        </div>
        <!-- END PAGE CONTAINER -->
        
        <!-- MESSAGE BOX-->
        
        <!-- success -->
        <div class="message-box message-box-success animated fadeIn popup-scroll" id="message-box-success">
            <div class="mb-container">
                <div class="mb-middle">
                    <div class="mb-title">Dashboard</div>
                    <div class="mb-content">
        
                        <p> <b>How to use Maanas Yoga portal: </b>Research shows that it takes 21 days to create a lasting
                            change. If you have tried to create a conscious change in the past,
                            you know that we start out with strong motivation and great intentions. However, our behavior
                            patterns are governed by our sub conscious mind and secondly we don't always have control on the
                            external stimulus.
                            This stimulus triggers the self sabotage and our mind falls prey to the habitual behavior and before
                            we know we are back in the same rut. <br><br>
                            The gates of change open from within. You have the power to create the life you desire. Our portal
                            is designed to make sure that you stay on top of your game for the 21 days,
                            by keeping a daily score you are able to make changes immediately and not fall prey to self
                            sabotage. Besides, your personal coach can direct you, on a regular basis, to help you get past this
                            threshold.
                            Each module is labeled with instructions. Self limiting beliefs can be removed from the sub
                            conscious mind by use of rituals. Our negative energy detox is created with this principle in mind.
                            <br><br>
                            Meet with your coach and create a strategy.<br /><br /> </p>
        
                        <ul class="number">
                            <li>Start out with the wheel of life to get a real picture of the balance in your life. Measure
                                where you are and where you want to be.</li>
                            <li>Submit your images for chakra reading and get the report. The chakra report is based on your
                                subconscious thoughts so it will be more accurate. Compare it with the wheel of life and be very
                                honest with yourself. Get a true picture of your beginning point.</li>
                            <li>Figure out your behavior patterns, both good and bad.</li>
        
        
                            <ul class="square">
                                <li>Find out what your self-limiting beliefs are</li>
                                <li>Find out what stories you repeat ( & brag about or use as a crutch)</li>
                                <li>Find out the triggers that prompt you to repeat the stories.</li>
                                <li>Make a decision to create the lasting change.<br /><br /></li>
                            </ul>
                            <li>Set your goal. Set milestones and weekly and daily routines to change the patterns.</li>
                            <li>Set out the intentions. Decide the daily must dos & don'ts</li>
                            <li>On a daily basis write the gratitude journal.</li>
                            <li>On daily basis follow the daily accountability score and your goal is to get an average score of
                                93 to 100 averages for 21 days. If you fail, start over again.</li>
                            <li>On a daily basis, get rid of the negative emotions and feelings you have experienced. Do not let
                                anything build up. Make sure your mind is clear when you go to sleep and write down your dreams.
                            </li>
                            <li>Use alarms & timers or get partners and use all the tools necessary to get you score average for
                                the 21 days.</li>
                        </ul>
                    </div>
                    <div class="mb-footer">
                        <button class="btn btn-default btn-lg pull-right mb-control-close">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- end success -->
        
        <?php
         $this->load->view('admin/footer');
        ?>
</xmp></code></pre>
<p>Sidebar</p>
<code>application/views/admin/sidebar.php</code>
<pre><code class="language-html"><xmp><?php
defined('BASEPATH') OR exit('No direct script access allowed');
?>

<!DOCTYPE html>
<html lang="en">

<head>
    <!-- META SECTION -->
    <title>Admin Dash Board - MyPortalX</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="icon" href="<?php echo base_url().'assets/';?>new_client_dashboard/images/Myportalx logo 2.png"
        type="image/x-icon" />
    <!-- END META SECTION -->

    <!-- CSS INCLUDE -->
    <link rel="stylesheet" type="text/css" id="theme" href="<?php echo base_url()." assets/";?>css/theme-default.css"/>
    <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery.min.js"></script>
    <!-- EOF CSS INCLUDE -->
</head>

<body>

    <!-- START PAGE CONTAINER -->
    <div class="page-container">

        <!-- START PAGE SIDEBAR -->
        <div class="page-sidebar">
            <!-- START X-NAVIGATION -->
            <ul class="x-navigation">
                <li>
                    <a class="sidebar-brand d-flex align-items-center justify-content-center"
                        href="<?php echo base_url().'yogiccoach'?>">
                        <div class="sidebar-brand-icon rotate-n-15">
                            <img src="<?php echo base_url().'assets/';?>new_client_dashboard/images/Myportalx logo 2.png"
                                width="50"><span class="brand-name">MYPORTALX.COM
                            </span>
                        </div>
                    </a>
                    <a href="#" class="x-navigation-control"></a>
                </li>
                <!--  <li class="xn-logo">
                        <a href="#"> MyPortalX</a>
                        <a href="#" class="x-navigation-control"></a>
					</li> -->
                <li class="xn-profile">
                    <a href="#" class="profile-mini">
                        <img src="../assets/images/users/avatar.jpg" alt="John Doe" /></a>
                    <div class="profile">
                        <div class="profile-image">
                            <img src="<?php echo base_url()." assets/images/users/";?>avatar.jpg" alt="John Doe"/>
                        </div>
                        <div class="profile-data">
                            <div class="profile-data-name">Rajah Sharma</div>
                            <div class="profile-data-title">Administrator</div>
                        </div>
                        <div class="profile-controls">
                            <a href="<?php echo base_url()." admin/edit_profile";?>" class="profile-control-left"><span
                                    class="fa fa-info"></span></a>
                            <a href="<?php echo base_url().'admin/messages';?>" class="profile-control-right"><span
                                    class="fa fa-envelope"></span></a>
                        </div>
                    </div>
                </li>

                <li><a href="<?php echo base_url()." admin";?>"><span class="xn-text">Dashboard</span></a></li>
                <!--<li class="xn-openable">
                        <a href="#"><span class="xn-text">Pages</span></a>
                        <ul>
                           <li><a href="<?php echo base_url().'admin/create_page';?>">Create</a></li>
                           <li><a href="../pages-invoice.html">View</a></li>
                        </ul>
                    </li>-->
                <li class="xn-openable">
                    <a href="#"><span class="xn-text">Courses</span></a>
                    <ul>
                        <li><a href="<?php echo base_url().'admin/create_courses';?>">Create</a></li>
                        <li><a href="<?php echo base_url().'admin/view_courses';?>">View</a></li>
                    </ul>
                </li>
                <li class="xn-openable">
                    <a href="#"><span class="xn-text">Packages</span></a>
                    <ul>
                        <li><a href="<?php echo base_url().'admin/create_packages';?>">Create</a></li>
                        <li><a href="<?php echo base_url().'admin/view_packages';?>">View</a></li>
                    </ul>
                </li>
                <li class="xn-openable">
                    <a href="#"><span class="xn-text">Coupons</span></a>
                    <ul>
                        <li><a href="<?php echo base_url().'admin/create_coupan';?>">Create</a></li>
                        <li><a href="<?php echo base_url().'admin/view_coupans';?>">View</a></li>
                    </ul>
                </li>
                <li class="xn-openable">
                    <a href="#"><span class="xn-text">Coaches</span></a>
                    <ul>
                        <li><a href="<?php echo base_url().'admin/create_teacher';?>">Create</a></li>
                        <!--<li><a href="<?php echo base_url().'admin/teacher_registration';?>">Registration</a></li>-->
                        <li><a href="<?php echo base_url().'admin/view_create_teacher';?>">View</a></li>
                        <li><a href="<?php echo base_url().'admin/view_teachers_payments';?>">Payments</a></li>
                    </ul>
                </li>
                <li class="xn-openable">
                    <a href="#"><span class="xn-text">Members</span></a>
                    <ul>
                        <li><a href="<?php echo base_url().'admin/create_student';?>">Create</a></li>
                        <!--<li><a href="../pages-gallery.html">Registration</a></li>-->
                        <li><a href="<?php echo base_url().'admin/view_create_student';?>">View</a></li>
                    </ul>
                </li>
                <li><a href="<?php echo base_url().'admin/messages';?>"><span class="xn-text">Message</span></a></li>
                <li><a href="<?php echo base_url().'admin/chakra_reading';?>"><span class="xn-text">Chakra
                            Reading</span></a></li>
                <!--<li>
                        <a href="#"><span class="xn-text">Invoice</span></a></li>-->
                <li class="xn-openable">
                    <a href="#"><span class="xn-text">Reports</span></a>
                    <ul>
                        <li><a href="<?php echo base_url().'admin/view_coaches_list';?>">Teachers</a></li>
                    </ul>
                    <ul>
                        <li><a href="<?php echo base_url().'admin/view_members_list';?>">Members</a></li>
                    </ul>
                    <ul>
                        <li><a href="<?php echo base_url().'admin/intention_setting_report';?>">Intention Setting</a>
                        </li>
                    </ul>
                    <ul>
                        <li><a href="<?php echo base_url().'admin/gratitude_journal_report';?>">Gratitude Journal</a>
                        </li>
                    </ul>
                    <ul>
                        <li><a href="<?php echo base_url().'admin/daha_tantra_form';?>">Negetive Energy</a></li>
                    </ul>
                    <ul>
                        <li><a href="<?php echo base_url().'admin/allMembers';?>">Wheel Of Life</a></li>
                    </ul>
                </li>
                <li><a href="<?php echo base_url().'admin/edit_profile';?>"><span class="xn-text">Settings</span></a>
                </li>

            </ul>
            <!-- END X-NAVIGATION -->
        </div>
        <!-- END PAGE SIDEBAR -->

        <!-- PAGE CONTENT -->
        <div class="page-content">

            <!-- START X-NAVIGATION VERTICAL -->
            <ul class="x-navigation x-navigation-horizontal x-navigation-panel">

                <!-- SEARCH -->
                <li class="xn-search">
                    <form role="form">
                        <input type="text" name="search" placeholder="Search..." />
                    </form>
                </li>
                <!-- END SEARCH -->
                <!-- POWER OFF -->
                <li class="xn-icon-button pull-right last">
                    <a href="#"><span class="fa fa-power-off"></span></a>
                    <ul class="xn-drop-left animated zoomIn">
                        <!--class="mb-control" data-box="#mb-signout" for js logout-->
                        <li><a href="<?php echo base_url()." get_logout"; ?>"><span class="fa fa-sign-out"></span> Sign
                                Out</a></li>
                    </ul>
                </li>
                <li class="xn-icon-button pull-right last">
                    <a href="https://help.myportalx.com/">
                        Help?
                    </a>
                </li>

                <!-- END POWER OFF -->

            </ul></xmp></code></pre>
            <p>footer</p>
            <code>application/views/admin/footer.php</code>
            <pre><code class="language-html"><xmp><?php 
            $session=$this->session->get_userdata();
            ?>
            </div>
            <!-- END PAGE CONTENT -->
            </div>
            <div class="message-box animated fadeIn" data-sound="alert" id="mb-signout">
                <div class="mb-container">
                    <div class="mb-middle">
                        <div class="mb-title"><span class="fa fa-sign-out"></span> Log <strong>Out</strong> ?</div>
                        <div class="mb-content">
                            <p>Are you sure you want to log out?</p>
                            <p>Press No if youwant to continue work. Press Yes to logout current user.</p>
                        </div>
                        <div class="mb-footer">
                            <div class="pull-right">
                                <!--<a href="../pages-login.html" class="btn btn-success btn-lg">Yes</a>-->
                                <a href="#" id="get_logout" username="<?php echo $session['username']; ?>"
                                    class="btn btn-success btn-lg">Yes</a>
                                <button class="btn btn-default btn-lg mb-control-close">No</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END MESSAGE BOX-->
            <script>
                $(document).ready(function () {
                    setInterval(function () { update_profile(); }, 3000);
                    function update_profile() {
                        $.ajax({
                            url: home_url + 'admin/update_profile',
                            method: "post",
                            type: "text",
                            success: function (data) {

                            }
                        });
                    }
                });
            </script>
            
            <!-- START SCRIPTS -->
            <!-- START PLUGINS -->
            <input type="hidden" id="home_url" value="<?php echo base_url();?>">
            
            <script type="text/javascript" src="<?php echo base_url()."
                assets/";?>js / plugins / image - preview / imagepreview.js"></script>
            <script type="text/javascript" src="<?php echo base_url()."
                assets/";?>js / plugins / image - preview / imagepreview - custom.js"></script>
            <!-- END TEMPLATE -->
            
            <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / jquery / jquery - ui.min.js"></script>
            <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / bootstrap / bootstrap.min.js"></script>
            <!-- END PLUGINS -->
            
            <!-- START THIS PAGE PLUGINS-->
            <script type='text/javascript' src='<?php echo base_url()."assets/";?>js/plugins/icheck/icheck.min.js'></script>
            <script type="text/javascript" src="<?php echo base_url()."
                assets/";?>js / plugins / mcustomscrollbar / jquery.mCustomScrollbar.min.js"></script>
            <script type="text/javascript" src="<?php echo base_url()."
                assets/";?>js / plugins / scrolltotop / scrolltopcontrol.js"></script>
            
            <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / morris / raphael - min.js"></script>
            <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / morris / morris.min.js"></script>
            <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / rickshaw / d3.v3.js"></script>
            <script type='text/javascript'
                src='<?php echo base_url()."assets/";?>js/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js'></script>
            <script type='text/javascript'
                src='<?php echo base_url()."assets/";?>js/plugins/jvectormap/jquery-jvectormap-world-mill-en.js'></script>
            <script type='text/javascript'
                src='<?php echo base_url()."assets/";?>js/plugins/bootstrap/bootstrap-datepicker.js'></script>
            <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / plugins / owl / owl.carousel.min.js"></script>
            
            <script type="text/javascript" src="<?php echo base_url()."
                assets/";?>js / plugins / daterangepicker / daterangepicker.js"></script>
            <!-- END THIS PAGE PLUGINS-->
            
            <!-- START TEMPLATE -->
            
            
            <!-- <script type="text/javascript" src="<?php echo base_url()."assets/";?>js/plugins.js"></script>       -->
            <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / actions.js"></script>
            <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / fast - buddy - n.js"></script>
            <script type="text/javascript" src="<?php echo base_url()." assets/";?>js / fast - buddy.js"></script>
            
            <!-- END TEMPLATE -->
            <!-- END SCRIPTS -->
        </xmp></code></pre>
        <p>Create course</p>
        <img class="img-fluid" src="image/createcourseadmin.png" alt="Login Page" height="100">
        <br><br>
        <p>create course Controller</p>
        <code>application/controllers/admin.php</code>
        <pre><code class="language-html"><xmp>public function create_courses()
        
        {
        
        if(isset($_POST['save'])){
        
        $cnt=0;
        
        $subject_listARRAY=array();
        
        foreach($_POST['features_list']['week'] as $week_list){
        
        $subject_listARRAY[]=array('week'=>$_POST['features_list']['week'][$cnt],
        
        'time'=>$_POST['features_list']['time'][$cnt],
        
        'topic'=>$_POST['features_list']['topic'][$cnt],
        
        'education'=>$_POST['features_list']['education'][$cnt],
        
        'subject'=>$_POST['features_list']['subject'][$cnt],
        
        'objective'=>$_POST['features_list']['objective'][$cnt],
        
        'highlighted'=>$_POST['features_list']['highlighted'][$cnt],
        
        'manual'=>$_POST['features_list']['manual'][$cnt],
        
        'page'=>$_POST['features_list']['page'][$cnt],
        
        'home'=>$_POST['features_list']['home'][$cnt]);
        
        $cnt++;
        
        }
        
        $A=serialize($subject_listARRAY);
        
        //print_r ($A);exit;
        
        
        
        $data = array(
        
        'fld_course_name' => $_POST['course_name'],
        
        'fld_program' => $_POST['program'],
        
        'fld_subject' => $A,
        
        'fld_added_date' => time(),
        'fld_modified_date' => ''
        
        );
        
        
        
        $this->db->insert('admin_course_list', $data);
        
        if($this->db->affected_rows()){
        
        echo "<div class=\"alert alert-success\">Success...<a href=\"#\" class=\"close\" data-dismiss=\"alert\"
                aria-label=\"close\">&times;</a></div>";
        
        }else{
        
        echo "Database Error..";
        
        }
        
        }
        
        $this->load->view('admin/create_courses');
        
        }</xmp></code></pre>
        <p>create course view</p>
        <code>application/views/admin/create_courses.php</code>
        <pre><code class="language-html"><xmp><?php
        $this->load->view('admin/sidebar');
        ?>
        
        <!-- START BREADCRUMB -->
        <ul class="breadcrumb push-down-0">
            <li><a href="<?php echo base_url()." admin/";?>">Dashboard</a></li>
            <li class="active">Create Courses</li>
        </ul>
        <div class="page-title">
            <h2>Create Courses</h2>
        </div>
        <!-- END BREADCRUMB -->
        
        <!-- PAGE CONTENT WRAPPER -->
        <div class="page-content-wrap">
            <div class="row">
                <div class="col-md-12">
                    <!-- START JUSTIFIED TABS -->
                    <div class="panel panel-default  ">
                        <div class="panel-body tab-content">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <form action="#" method="post" class="form-horizontal">
                                    <div class="panel-default">
                                        <div class="panel-body form-group-separated">
        
                                            <div class="form-group">
                                                <label class="col-md-3 col-xs-5 control-label">Course Name</label>
                                                <div class="col-md-9 col-xs-7">
                                                    <input type="text" name="course_name" class="form-control"
                                                        placeholder="Course Name" required />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-xs-5 control-label">Course Duration</label>
                                                <div class="col-md-9 col-xs-7">
                                                    <input type="text" name="program" class="form-control"
                                                        placeholder="Course Duration" required />
                                                </div>
                                            </div>
                                            <!---------------------------------------------------------->
                                            <div id="features_list_group" class="form-group" style="overflow-x:auto;">
                                                <table>
                                                    <tr>
                                                        <th class="col-md-1 col-xs-5 control-label"
                                                            style="text-align:center; line-height:20px;">Week</th>
                                                        <th class="col-md-1 col-xs-5 control-label"
                                                            style="text-align:center; line-height:20px;">Time Hours</th>
                                                        <th class="col-md-1 col-xs-5 control-label"
                                                            style="text-align:center; line-height:20px;">Topic</th>
                                                        <th class="col-md-1 col-xs-5 control-label"
                                                            style="text-align:center; line-height:20px;">Education Category</th>
                                                        <th class="col-md-1 col-xs-5 control-label"
                                                            style="text-align:center; line-height:20px;">Subject description
                                                            overview</th>
                                                        <th class="col-md-1 col-xs-5 control-label"
                                                            style="text-align:center; line-height:20px;">Objective</th>
                                                        <th class="col-md-1 col-xs-5 control-label"
                                                            style="text-align:center; line-height:20px;">Highlighted Points</th>
                                                        <th class="col-md-1 col-xs-5 control-label"
                                                            style="text-align:center; line-height:20px;">Manual</th>
                                                        <th class="col-md-1 col-xs-5 control-label"
                                                            style="text-align:center; line-height:20px;">Page Location</th>
                                                        <th class="col-md-1 col-xs-5 control-label"
                                                            style="text-align:center; line-height:20px;">Home work</th>
                                                        <th class="col-md-1 col-xs-5 control-label"
                                                            style="text-align:center; line-height:20px;"></th>
                                                    </tr>
                                                    <div id="features_list" class="row features_list">
                                                        <tr>
                                                            <th class="col-md-1 col-xs-5 control-label"><textarea
                                                                    name="features_list[week][]" class="form-control" cols=""
                                                                    rows=""></textarea></th>
                                                            <th class="col-md-1 col-xs-5 control-label"><textarea
                                                                    name="features_list[time][]" class="form-control" cols=""
                                                                    rows=""></textarea></th>
                                                            <th class="col-md-1 col-xs-5 control-label"><textarea
                                                                    name="features_list[topic][]" class="form-control" cols=""
                                                                    rows=""></textarea></th>
                                                            <th class="col-md-1 col-xs-5 control-label"><textarea
                                                                    name="features_list[education][]" class="form-control"
                                                                    cols="" rows=""></textarea></th>
                                                            <th class="col-md-1 col-xs-5 control-label"><textarea
                                                                    name="features_list[subject][]" class="form-control" cols=""
                                                                    rows=""></textarea></th>
                                                            <th class="col-md-1 col-xs-5 control-label"><textarea
                                                                    name="features_list[objective][]" class="form-control"
                                                                    cols="" rows=""></textarea></th>
                                                            <th class="col-md-1 col-xs-5 control-label"><textarea
                                                                    name="features_list[highlighted][]" class="form-control"
                                                                    cols="" rows=""></textarea></th>
                                                            <th class="col-md-1 col-xs-5 control-label"><textarea
                                                                    name="features_list[manual][]" class="form-control" cols=""
                                                                    rows=""></textarea></th>
                                                            <th class="col-md-1 col-xs-5 control-label"><textarea
                                                                    name="features_list[page][]" class="form-control" cols=""
                                                                    rows=""></textarea></th>
                                                            <th class="col-md-1 col-xs-5 control-label"><textarea
                                                                    name="features_list[home][]" class="form-control" cols=""
                                                                    rows=""></textarea></th>
                                                            <th class="col-md-1 col-xs-5 control-label"><a href="#"
                                                                    class="add_feature_row"><i
                                                                        class="glyphicon glyphicon-plus"></i></a></th>
                                                        </tr>
                                                    </div>
                                                </table>
        
        
                                            </div>
        
        
        
        
                                            <!---------------------------------------------------------->
                                            <div class="form-group">
                                                <div class="col-md-12 col-xs-12">
                                                    <button name="save"
                                                        class="btn btn-primary btn-rounded pull-right">Save</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END PAGE CONTENT WRAPPER -->
        <!--<script type="text/javascript" src="<?php echo base_url()."assets/";?>js/admin_fast_buddy.js"></script>				
             END SCRIPTS -->
        <?php
         $this->load->view('admin/footer');
         ?>
</xmp></code></pre>
<p>view couses</p>
<img class="img-fluid" src="image/viewcourseadmin.png" alt="Login Page" height="100">
<br><br>
<p>view courses Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function view_courses()
{
    $this->load->view('admin/view_courses');
}
public function remove_course($id = 0){

if($id ==0)

{

echo "failed";

}

else {

$this->db->where('fld_id', $id);

$ret = $this->db->delete('admin_course_list');

$this->db->reset_query();

//$ret = $this->delete_user_related_data($id);

if ($ret == 1) {

echo "success";

}

else{

echo "error";

}

}

}</xmp></code></pre>
<p>view courses view page</p>
<code>application/views/admin/view_courses.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('admin/sidebar');
error_reporting(0);
$record=$this->Common_model->get_table_records("admin_course_list");
$row_cont=1;
$catRow='';
foreach ($record as $Row){
	$timestamp=$Row->fld_added_date;
	//print_r($timestamp);exit;
	$date=date('m/d/Y',$timestamp);
	$catRow.='<tr class="gradeA">
				<td>'.$row_cont.'</td>
				<td>'.$Row->fld_course_name.'</td>
				<td>'.$Row->fld_program.'</td>
				<td>'.$date.'</td>
				<td width="150">'.'<a href="'.base_url().'admin/update_courses/'.$Row->fld_id.'" class="btn btn-primary  btn-circle"><i class="fa fa-pencil"></i></a>'.'  '.
								  '<a href="" class="btn btn-danger  btn-circle delete_tbl" data-id="'.$Row->fld_id.'" data-tbl="admin_course_list"><i class="fa fa-trash-o"></i></a>'.'</td>
				
			  </tr>';
	$row_cont++;
	
	
}
?>

<!-- START BREADCRUMB -->
<ul class="breadcrumb push-down-0">
    <li><a href="<?php echo base_url()." admin/";?>">Dashboard</a></li>
    <li class="active">View Courses</li>
</ul>


<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">
    <div class="page-title">
        <h2>View Courses</h2>
    </div>
    <!-- START WIDGETS -->
    <form action="#" class="form-horizontal" method="post">
        <div class="row">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-body panel-body-table">
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped table-actions">
                                    <thead>
                                        <tr>
                                            <th width="50">id</th>
                                            <th>Course Name</th>
                                            <th>Course Duration</th>
                                            <th width="100">Date Created</th>
                                            <th width="120">actions</th>
                                        </tr>
                                    </thead>
                                    <?php echo $catRow;?>
                                    <tbody>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!-- END WIDGETS -->
</div>
<!-- END PAGE CONTENT WRAPPER -->
<script>
    $(function () {
        home_url = $('#home_url').val();
        $(document).on('click', '.delete_tbl', function () {
            if (confirm("Are you sure you want to delete this Course?")) {
                var _id = $(this).attr('data-id');

                $.ajax({
                    'url': home_url + "admin/remove_course/" + _id,
                    success: function (response) {
                        if (response = "success") {
                            $("#tr_" + _id).hide(300);
                            location.reload();
                        }
                    },
                    error: function (message) { }
                })
            }
        });
    });
</script>
<?php
 $this->load->view('admin/footer');
 ?></xmp></code></pre>
<p>create packege</p>
<img class="img-fluid" src="image/createpackages.png" alt="Login Page" height="100">
<br><br>
<p>create packege Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function create_packages()

{

if(isset($_POST['submit'])){

$cnt=0;

$subject_listARRAY=array();

foreach($_POST['features_list']['week'] as $week_list){

$subject_listARRAY[]=array('week'=>$_POST['features_list']['week'][$cnt],

'time'=>$_POST['features_list']['time'][$cnt],

'topic'=>$_POST['features_list']['topic'][$cnt],

'education'=>$_POST['features_list']['education'][$cnt],

'subject'=>$_POST['features_list']['subject'][$cnt],

'objective'=>$_POST['features_list']['objective'][$cnt],

'highlighted'=>$_POST['features_list']['highlighted'][$cnt],

'manual'=>$_POST['features_list']['manual'][$cnt],

'page'=>$_POST['features_list']['page'][$cnt],

'home'=>$_POST['features_list']['home'][$cnt]);

$cnt++;

}

$A=serialize($subject_listARRAY);

//print_r ($A);exit;



$data = array(

'fld_package_name' => $_POST['package_name'],

'fld_duration' => $_POST['packageProgram'],

'fld_subject' => $A,

'fld_added_date' => time(),
'fld_modified_date' => ''

);



$this->db->insert('admin_package_list', $data);

if($this->db->affected_rows()){

echo "<div class=\"alert alert-success\">Success...<a href=\"#\" class=\"close\" data-dismiss=\"alert\"
        aria-label=\"close\">&times;</a></div>";

}else{

echo "Database Error..";

}

}



$this->load->view('admin/create_packages');

}</xmp></code></pre>
<p>create packeges view</p>
<code>application/views/admin/create_packages.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('admin/sidebar');
?>

<!-- START BREADCRUMB -->
<ul class="breadcrumb push-down-0">
    <li><a href="<?php echo base_url()." admin/";?>">Dashboard</a></li>
    <li class="active">Create Packages</li>
</ul>
<div class="page-title">
    <h2>Create Packages</h2>
</div>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">
    <div class="row">
        <div class="col-md-12">
            <!-- START JUSTIFIED TABS -->
            <div class="panel panel-default  ">
                <div class="panel-body tab-content">
                    <div class="col-md-11 col-sm-12 col-xs-12">
                        <form action="#" method="post" class="form-horizontal">
                            <div class="panel-default">
                                <div class="panel-body form-group-separated">

                                    <div class="form-group">
                                        <label class="col-md-3 col-xs-5 control-label">Package Name</label>
                                        <div class="col-md-9 col-xs-7">
                                            <input type="text" name="package_name" class="form-control"
                                                placeholder="Package Name" required />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-3 col-xs-5 control-label">Package Duration</label>
                                        <div class="col-md-9 col-xs-7">
                                            <input type="text" name="packageProgram" class="form-control"
                                                placeholder="Package Duration" required />
                                        </div>
                                    </div>
                                    <!---------------------------------------------------------->
                                    <div id="package_list_group" class="form-group" style="overflow-x:auto;">
                                        <table>
                                            <tr>
                                                <th class="col-md-1 col-xs-5 control-label"
                                                    style="text-align:center; line-height:20px;">Week</th>
                                                <th class="col-md-1 col-xs-5 control-label"
                                                    style="text-align:center; line-height:20px;">Time Hours</th>
                                                <th class="col-md-1 col-xs-5 control-label"
                                                    style="text-align:center; line-height:20px;">Topic</th>
                                                <th class="col-md-1 col-xs-5 control-label"
                                                    style="text-align:center; line-height:20px;">Education Category</th>
                                                <th class="col-md-1 col-xs-5 control-label"
                                                    style="text-align:center; line-height:20px;">Subject description
                                                    overview</th>
                                                <th class="col-md-1 col-xs-5 control-label"
                                                    style="text-align:center; line-height:20px;">Objective</th>
                                                <th class="col-md-1 col-xs-5 control-label"
                                                    style="text-align:center; line-height:20px;">Highlighted Points</th>
                                                <th class="col-md-1 col-xs-5 control-label"
                                                    style="text-align:center; line-height:20px;">Manual</th>
                                                <th class="col-md-1 col-xs-5 control-label"
                                                    style="text-align:center; line-height:20px;">Page Location</th>
                                                <th class="col-md-1 col-xs-5 control-label"
                                                    style="text-align:center; line-height:20px;">Home work</th>
                                                <th class="col-md-1 col-xs-5 control-label"
                                                    style="text-align:center; line-height:20px;"></th>
                                            </tr>
                                            <div id="features_list" class="row features_list">
                                                <tr>
                                                    <th class="col-md-1 col-xs-5 control-label"><textarea
                                                            name="features_list[week][]" class="form-control" cols=""
                                                            rows=""></textarea></th>
                                                    <th class="col-md-1 col-xs-5 control-label"><textarea
                                                            name="features_list[time][]" class="form-control" cols=""
                                                            rows=""></textarea></th>
                                                    <th class="col-md-1 col-xs-5 control-label"><textarea
                                                            name="features_list[topic][]" class="form-control" cols=""
                                                            rows=""></textarea></th>
                                                    <th class="col-md-1 col-xs-5 control-label"><textarea
                                                            name="features_list[education][]" class="form-control"
                                                            cols="" rows=""></textarea></th>
                                                    <th class="col-md-1 col-xs-5 control-label"><textarea
                                                            name="features_list[subject][]" class="form-control" cols=""
                                                            rows=""></textarea></th>
                                                    <th class="col-md-1 col-xs-5 control-label"><textarea
                                                            name="features_list[objective][]" class="form-control"
                                                            cols="" rows=""></textarea></th>
                                                    <th class="col-md-1 col-xs-5 control-label"><textarea
                                                            name="features_list[highlighted][]" class="form-control"
                                                            cols="" rows=""></textarea></th>
                                                    <th class="col-md-1 col-xs-5 control-label"><textarea
                                                            name="features_list[manual][]" class="form-control" cols=""
                                                            rows=""></textarea></th>
                                                    <th class="col-md-1 col-xs-5 control-label"><textarea
                                                            name="features_list[page][]" class="form-control" cols=""
                                                            rows=""></textarea></th>
                                                    <th class="col-md-1 col-xs-5 control-label"><textarea
                                                            name="features_list[home][]" class="form-control" cols=""
                                                            rows=""></textarea></th>
                                                    <th class="col-md-1 col-xs-5 control-label"><a href="#"
                                                            class="add_package_row"><i
                                                                class="glyphicon glyphicon-plus"></i></a></th>
                                                </tr>
                                            </div>
                                        </table>


                                    </div>




                                    <!---------------------------------------------------------->
                                    <div class="form-group">
                                        <div class="col-md-12 col-xs-12">
                                            <button name="submit"
                                                class="btn btn-primary btn-rounded pull-right">Save</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- END PAGE CONTENT WRAPPER -->




<?php
 $this->load->view('admin/footer');
 ?>
</xmp></code></pre>
<p>view package</p>
<img class="img-fluid" src="image/viewpackegeadmin.png" alt="Login Page" height="100">
<br><br>
<p>view package Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function view_packages()

{

$this->load->view('admin/view_packages');

}
public function remove_packages($id = 0){

if($id ==0)

{

echo "failed";

}

else {

$this->db->where('fld_id', $id);

$ret = $this->db->delete('admin_package_list');

$this->db->reset_query();

//$ret = $this->delete_user_related_data($id);

if ($ret == 1) {

echo "success";

}

else{

echo "error";

}

}

}</xmp></code></pre>
<p>view packege view page</p>
<code>application/views/admin/view_packages.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('admin/sidebar');
//error_reporting(0);
$record=$this->Common_model->get_table_records("mys_admin_package_list");
$row_cont=1;
$catRow='';
foreach ($record as $Row){
	$timestamp=$Row->fld_added_date;
	//print_r($timestamp);exit;
	$date=date('m/d/Y',$timestamp);
	$catRow.='<tr class="gradeA">
				<td>'.$row_cont.'</td>
				<td>'.$Row->fld_package_name.'</td>
				<td>'.$Row->fld_duration.'</td>
				<td>'.$date.'</td>
				<td width="150">'.'<a href="'.base_url().'admin/update_packages/'.$Row->fld_id.'" class="btn btn-primary  btn-circle"><i class="fa fa-pencil"></i></a>'.'  '.
								  '<a href="" class="btn btn-danger  btn-circle delete_tbl" data-id="'.$Row->fld_id.'" data-tbl="mys_admin_package_list"><i class="fa fa-trash-o"></i></a>'.'</td>
				
			  </tr>';
	$row_cont++;
	
	
}
?>

<!-- START BREADCRUMB -->
<ul class="breadcrumb push-down-1">
    <li><a href="<?php echo base_url()." admin/";?>">Dashboard</a></li>
    <li class="active">View Packages</li>
</ul>
<h2>View Packages</h2>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <!-- START WIDGETS -->
    <form action="#" class="form-horizontal" method="post">
        <div class="row">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-body panel-body-table">
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped table-actions">
                                    <thead>
                                        <tr>
                                            <th width="50">id</th>
                                            <th>Package Name</th>
                                            <th>Package Duration</th>
                                            <th width="100">Date Created</th>
                                            <th width="120">actions</th>
                                        </tr>
                                    </thead>
                                    <?php echo $catRow;?>
                                    <tbody>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!-- END WIDGETS -->
</div>
<!-- END PAGE CONTENT WRAPPER -->
<script>
    $(function () {
        home_url = $('#home_url').val();
        $(document).on('click', '.delete_tbl', function () {
            if (confirm("Are you sure you want to delete this Packages?")) {
                var _id = $(this).attr('data-id');

                $.ajax({
                    'url': home_url + "admin/remove_packages/" + _id,
                    success: function (response) {
                        if (response = "success") {
                            $("#tr_" + _id).hide(300);
                            location.reload();
                        }
                    },
                    error: function (message) { }
                })
            }
        });
    });
</script>
<!-- END SCRIPTS -->
<?php
 $this->load->view('admin/footer');
 ?>
</xmp></code></pre>
<p>Create Coupon</p>
<img class="img-fluid" src="image/createCoupenadmin.png" alt="Login Page" height="100">
<br><br>
<p>create Coupon Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function create_coupan()

{

if(isset($_POST['submit'])){

$cnt=0;



$coupan_code=$_POST['coupan_code'];

$package=$_POST['package'];

$fromDate=$_POST['fromDate'];

$toDate=$_POST['toDate'];

$amount=$_POST['amount'];



$data = array(

'code' => $coupan_code,

'plan_id' => $package,

'fromDate' => $fromDate,

'toDate' => $toDate,

'amount' => $amount,
'isactive' => 0

);



$this->db->insert('promo_code', $data);

if($this->db->affected_rows()){

echo "<div class=\"alert alert-success\">Success...<a href=\"#\" class=\"close\" data-dismiss=\"alert\"
        aria-label=\"close\">&times;</a></div>";

}else{

echo "Database Error..";

}

}



$this->load->view('admin/create_coupan');

}</xmp></code></pre>
<p>create Coupon view</p>
<code>application/views/admin/create_coupan.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('admin/sidebar');
    $plans = $this->db->get("subscription_plan")->result();
    $catRow='';
	foreach ($plans as $Row){
		if($Row->isshow==1)
		{
    		$catRow.='<option value='.$Row->id.'>'.$Row->title.'</<option>';
		}
	}
?>
<!-- START BREADCRUMB -->
<ul class="breadcrumb push-down-0">
    <li><a href="<?php echo base_url()." admin/";?>">Dashboard</a></li>
    <li class="active">Create Coupon</li>
</ul>
<div class="page-title">
    <h2>Create Coupon</h2>
</div>
<!-- END BREADCRUMB -->
<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">
    <div class="row">
        <div class="col-md-12">
            <!-- START JUSTIFIED TABS -->
            <div class="panel panel-default  ">
                <div class="panel-body tab-content">
                    <div class="col-md-11 col-sm-12 col-xs-12">
                        <form action="#" method="post" class="form-horizontal">
                            <div class="panel-default">
                                <div class="panel-body form-group-separated">
                                    <div class="form-group">
                                        <label class="col-md-3 col-xs-5 control-label">Coupon Code</label>
                                        <div class="col-md-9 col-xs-7">
                                            <input type="text" name="coupan_code" class="form-control"
                                                placeholder="Coupon Code" required />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-3 col-xs-5 control-label">Package</label>
                                        <div class="col-md-9 col-xs-7">
                                            <select id="package" name="package" class="form-control" style="width:400px;" required>
                                                <option value="">-select</option>
                                                <?php echo $catRow;?>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-3 col-xs-5 control-label">From Date</label>
                                        <div class="col-md-9 col-xs-7">
                                            <input type="date" name="fromDate" class="form-control" placeholder="From Date" required />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-3 col-xs-5 control-label">To Date</label>
                                        <div class="col-md-9 col-xs-7">
                                            <input type="date" name="toDate" class="form-control" placeholder="To Date" required />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-3 col-xs-5 control-label">Discounted Amount</label>
                                        <div class="col-md-9 col-xs-7">
                                            <input type="number" name="amount" class="form-control" placeholder="amount" required />
                                        </div>
                                    </div>

                                    <!---------------------------------------------------------->
                                    <!---------------------------------------------------------->

                                    <div class="form-group">

                                        <div class="col-md-12 col-xs-12">

                                            <button name="submit"
                                                class="btn btn-primary btn-rounded pull-right">Save</button>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- END PAGE CONTENT WRAPPER -->
<?php

 $this->load->view('admin/footer');

 ?>
</xmp></code></pre>
<p>view coupon</p>
<img class="img-fluid" src="image/viewcouponadmin.png" alt="Login Page" height="100">
<br><br>
<p>view coupon Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function view_coupans()

{

$this->load->view('admin/view_coupans');

}
public function remove_coupan($id = 0){



if($id ==0)

echo "failed";

else {

$this->db->where('id', $id);

$ret = $this->db->delete('promo_code');

$this->db->reset_query();

//$ret = $this->delete_user_related_data($id);

if ($ret == 1) {

echo "success";

}

else

echo "error";

}

}</xmp></code></pre>
<p>view coupon view page</p>
<code>application/views/admin/view_coupans.php</code>
<pre><code class="language-html"><xmp><?php $CI =& get_instance(); ?>
<?php
$this->load->view('admin/sidebar');
error_reporting(0);

$record=$this->db->get('promo_code')->result();
$row_cont=1;
$catRow='';
foreach ($record as $Row){
$planDetails=$this->Common_model->get_table_row('subscription_plan',array('id'=> $Row->plan_id));
  

        $fromDate = DateTime::createFromFormat('Y-m-d', $Row->fromDate);
		$toDate = DateTime::createFromFormat('Y-m-d', $Row->toDate);
		$status="";

		if($Row->isactive == "1") 
				$status = "checked='checked'";

	$catRow.='<tr class="gradeA">
				<td>'.$row_cont.'</td>
				<td>'.$Row->code.'</td>
				<td>'.$planDetails['title'].'</td>
				<td>'.$Row->amount.'</td>
				<td>'.$fromDate->format('m/d/Y').'</td>
				<td>'.$toDate->format('m/d/Y').'</td>
				<td class="text-center">
                            <label class="switch">
								<input type="checkbox" '. $status .' value="'. $Row->id .'" class="isactive">
								<span></span>
							   </label></td>
				
					<td width="150">'.'<a href="'.base_url().'admin/update_coupan/'.$Row->id.'" class="btn btn-warning right"><i class="fa fa-pencil"></i></a>'.'  '.
								  '<a href="" class="btn btn-danger  btn-circle tbl_delete_coupan" data-id="'.$Row->id.'" data-tbl="promo_code"><i class="fa fa-trash-o"></i></a>'.'</td>
				
			  </tr>';
	$row_cont++;
	
	
}
?>
<!--<td width="150">'.'<a href="'.base_url().'admin/update_coupan/'.$Row->id.'" class="btn btn-primary  btn-circle"><i class="fa fa-pencil"></i></a>'.'  '.
								  '<a href="" class="btn btn-danger  btn-circle tbl_delete_coupan" data-id="'.$Row->id.'" data-tbl="promo_code"><i class="fa fa-trash-o"></i></a>'.'</td>-->
<!-- START BREADCRUMB -->
<ul class="breadcrumb push-down-1">
    <li><a href="<?php echo base_url()." admin/";?>">Dashboard</a></li>
    <li class="active">View Coupons</li>
</ul>
<h2>View Coupons</h2>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <!-- START WIDGETS -->
    <form action="#" class="form-horizontal" method="post">
        <div class="row">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-body panel-body-table">
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped table-actions">
                                    <thead>
                                        <tr>
                                            <th width="50">id</th>
                                            <th width="50">Coupon Code</th>
                                            <th width="200">Package</th>
                                            <th>Amount</th>
                                            <th>From Date</th>
                                            <th>To Date</th>
                                            <th>Status</th>
                                            <th width="120">actions</th>
                                        </tr>
                                    </thead>
                                    <?php echo $catRow;?>
                                    <tbody>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!-- END WIDGETS -->
</div>
<!-- END PAGE CONTENT WRAPPER -->

<script>

    $(function () {

        $(".isactive").click(function () {
            var _id = $(this).val();
            var _status = $(this).is(":checked") ? "1" : "0";
            $.get(home_url + "admin/coupan_status/" + _id + "/" + _status, "", function (response) {

            });
        });

        $(document)
            .on('click', '.tbl_delete_coupan', function () {

                if (confirm("Are you sure you want to delete this coupan?")) {

                    var _id = $(this).attr('data-id');

                    $.ajax({

                        'url': home_url + "admin/remove_coupan/" + _id,
                        success: function (response) {

                            if (response = "success") {
                                $("#tr_" + _id).hide(300);
                            }

                        },
                        error: function (message) {

                        }
                    })
                }
            })



    });
</script>


<!-- END SCRIPTS -->
<?php
 $this->load->view('admin/footer');
 ?>
</xmp></code></pre>
<p>create coach</p>
<img class="img-fluid" src="image/createcoachadmiin.png" alt="Login Page" height="100">
<br><br>
<p>create coach Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function create_teacher()

{

if(isset($_POST['save'])){

$teacher_course='';

$idByAdmin=$_POST['id_by_admin'];

$status=$_POST['status'];

$name=$_POST['name'];

$sponsor=$_POST['sponsor'];

$sponsor2=$_POST['sponsor2'];

$username=$_POST['username'];

$password=$_POST['password'];

$payment_status=$_POST['payment_status'] == NULL ? 0:$_POST['payment_status'];

$email=$_POST['email'];

if(isset($_POST['teacher_course'])){

$teacher_course=$_POST['teacher_course'];

}

$rand_code = 'C'.rand();



//$courseID=explode(',',$_POST['hidden_box']);



$course_data=array();

if(!empty($teacher_course) && (count($teacher_course)>0)){

foreach($teacher_course as $data)

{

$date=$_POST['date_'.$data];

$courseName=$_POST['course_name_'.$data];

$trainedBy=$_POST['trained_'.$data];

$location=$_POST['location_'.$data];

$course_data[]=array('course_id'=>$data,'course_name'=>$courseName,'complete_date'=>$date,'trained_by'=>$trainedBy,'location'=>$location);

}

}

$courseDetails=serialize($course_data);

//print_r($courseDetails);exit;



$isEmailExist=$this->db->get_where("users",array('fld_email'=>$email));

$isUsernameExist=$this->db->get_where("users",array('fld_username'=>$username));

if (!($isEmailExist->num_rows()>0)) {

if (!($isUsernameExist->num_rows()>0)) {



$data = array(
'fld_parent' => 0,
'fld_first_name' => $name,
'fld_last_name' => '',
'fld_username' => $username,
'fld_password' => $password,
'fld_email' => $email,
'fld_sponsor' => $sponsor,
'fld_sponsor2' => $sponsor2,
'fld_status' => $status,
'fld_rand_code' => $rand_code,
'fld_user_type' => 'yogiccoach',
'fld_paypal_id' =>'',
'fld_program' => '',
'fld_modified_date' =>'',
'fld_location' => '',
'fld_about_me' =>'',
'fld_file_name' =>'',
'fld_phone' => '',
'fld_start_date' =>'',
'fld_end_date' => '',
'fld_last_date' =>'',
'fld_due_date' =>'',
'fld_create_by' => 'admin',
'fld_varification' => '0',
'fld_payment_status' => $payment_status,
'fld_added_date' => time(),
'fld_Energy_Detox_verified' => '0',
'fld_Gratitude_verified' => '0',
'fld_Appointment_verified' => '0',
'fld_Daily_Score_verified' => '0',
'fld_Messages_verified' => '0',
'fld_Chakra_verified' => '0',
'fld_Wheel_verified' => '0',
'fld_Intention_verified' => '0',
'fld_Coaching_verified' => '0',
'fld_cform' => '0',
'fld_site' => '0',
'fld_website' => '0',
'fld_billing' => '0',
'fld_marketing' => '0',
);


$this->db->insert('users', $data);

$insert_id = $this->db->insert_id();

if($this->db->affected_rows()){



//add teacher default working timeing

$ea_userSetting = array(

'fld_userid' => $insert_id,

'working_plan'
=>'{"monday":{"start":"09:00","end":"18:00","breaks":[{"start":"14:30","end":"15:00"}]},"tuesday":{"start":"09:00","end":"18:00","breaks":[{"start":"14:30","end":"15:00"}]},"wednesday":{"start":"09:00","end":"18:00","breaks":[{"start":"14:30","end":"15:00"}]},"thursday":{"start":"09:00","end":"18:00","breaks":[{"start":"14:30","end":"15:00"}]},"friday":{"start":"09:00","end":"18:00","breaks":[{"start":"14:30","end":"15:00"}]},"saturday":null,"sunday":null}',

'notifications' =>'1',

'google_sync' => 0,

'google_calendar' => null,

'google_token' => null,

'sync_past_days' => '5',

'sync_future_days'=> '5'

);

$this->db->insert('ea_user_settings', $ea_userSetting);



$ea_categories = array
(
'fld_userid' =>$insert_id,
'name'=>'Free Services',
'description' => 'A free appointment is offered to help people learn more about coach. Free Appointments mostly includes
Introductory Call, Discovery session, Breakthrough Session. These Sessions allows a prospect to learn more about their
coach and make decision to move forward with them.'
);

$this->db->insert_batch('ea_service_categories', $ea_categories);

$cat_id = $this->db->insert_id();



$ea_services = array(
array(
'name' =>'Discovery Session',
'duration'=>'60',
'price' => '0',
'currency' => '$',
'description' => '',
'id_service_Categories' => $cat_id
),
array(
'name' =>'On Boding Call',
'duration'=>'60',
'price' => '0',
'currency' => '$',
'description' => '',
'id_service_Categories' => $cat_id
)
);

$this->db->insert_batch('ea_services', $ea_services);

$ea_categories1 = array(
'fld_userid' =>$insert_id,
'name'=>'Paid Services',
'description' => 'A paid appointment is offered to the people who are already a paying client to their respective coach.
The length and the topic of the session depends upon the type of course the client has enrolled with the coach.'
);

$this->db->insert_batch('ea_service_categories', $ea_categories1);

$cat1_id = $this->db->insert_id();



$ea_services1 = array(
'name' =>'Coaching Session',
'duration'=>'60',
'price' => '150',
'currency' => '$',
'description' => '',
'id_service_Categories' => $cat1_id
);

$this->db->insert_batch('ea_services', $ea_services1);



$dataRslt = array(

'fld_id_by_admin' => $this->adminid,

'fld_user_id' => $insert_id,

'fld_course_details' => $courseDetails,

'fld_added_date' => time(),

);

$this->db->insert('create_teacher', $dataRslt);



if($this->db->affected_rows()){





######SEND EMAIL

$to = $email;

$subject = "[MyPortalX] Verification Mail ";

$message ="<table width='600' align='center' id='TbHeader' bgcolor='#400080' border='0' cellspacing='0' cellpadding='4'>



    <tr>

        <td align='center' id='TdHeader' bgcolor='#400080'>

            <p align='center'>
                <font color='#ffffff' face='Arial, Helvetica, sans-serif' size='6'><strong>Welcome</strong></font>
            </p>
        </td>
    </tr>
</table>

<table width='600' align='center' id='TbBodyRow' border='0' cellspacing='0' cellpadding='0'>



    <tr>

        <td id='TdBodyRow' valign='top' bgcolor='#ffffff'>

            <table width='100%' id='TbBody' bgcolor='#ffffff' border='0' cellspacing='0' cellpadding='4'>



                <tr>

                    <td align='center' id='TdBody' bgcolor='#ffffff'>

                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;



                        <p align='left'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'>
                                <strong>Congratulations!! You have added as Coach on MyPortalX.&nbsp;<font
                                        color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'>&nbsp;
                                    </font></strong></font>

                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                        </p>

                        <p align='justify' style='margin-right: 0px;'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'>Once you verify
                                your email using the following link, your account will be activated</font>
                        </p>

                        <p align='justify' style='margin-right: 0px;'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'><a
                                    href='".base_url() ."registration/email_verification/".$rand_code."'>".base_url()."registration/email_verification/".$rand_code."</a>
                            </font>
                        </p>

                        <p align='justify' style='margin-right: 0px;'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'>You can Login
                                into MyPortalX with the following details after activate your account.</font>
                        </p>

                        <p align='justify' style='margin-right: 0px;'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'><b>User Name:
                                    ".$username."</b></font>
                        </p>

                        <p align='justify' style='margin-right: 0px;'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'><b>Password:
                                    ".$password."</b></font>
                        </p>

                        <p align='justify' style='margin-right: 0px;'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'></font>



                        <p align='justify' style='margin-right: 0px;'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'><br></font>
                        </p>
                        </p>

                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table><strong></strong><strong>

</strong><strong> </strong>

<table width='600' align='center' id='TbFooter' bgcolor='#eea000' border='0' cellspacing='0' cellpadding='4'>



    <tr>

        <td align='center' id='TdFooter' bgcolor='#eea000'>

            <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'>

                <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                        style='color: rgb(0, 52, 89); line-height: inherit; font-size: inherit; font-weight: bold; text-decoration: inherit;'><span
                            style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: inherit; text-decoration: inherit;'><br></span></span>
                </div>

                <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                        style='color: rgb(0, 52, 89); line-height: inherit; font-size: inherit; font-weight: bold; text-decoration: inherit;'><span
                            style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: inherit; text-decoration: inherit;'>Namaste!</span><br
                            style='color: rgb(0, 52, 89);'></span></div>

                <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                        style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: bold; text-decoration: inherit;'>Rajah

                        Sharma</span></div>

                <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                        style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: bold; text-decoration: inherit;'><br></span>
                </div>
            </div>
        </td>
    </tr>
</table>";

// //$message .="Your verification code: $rand_code <br>";

// $message .="Once you verify your email using the following link, your account will be activated.<br><br>";

// $message .="<a
    href='".base_url() ."registration/email_verification/".$rand_code."'>".base_url()."registration/email_verification/".$rand_code."</a>";

// $message .="<br><br>You can Login into MyPortalX with the following details after activate your account.<br><br>";

// $message .="User Name: $username <br>";

// $message .="Password: $password <br>";

// $message .="<br><br>Thank you,<br>Team MyPortalX";



$header = "From: MyPortalX <".$this->config->item("mail_from").">\r\n";

    $header .= "MIME-Version: 1.0\r\n";

    $header .= "Content-type: text/html\r\n";



    $retval = mail ($to,$subject,$message,$header);



    if( $retval == true ){

    echo "<div class=\"alert alert-success\"><strong>Mail sent successfully.</strong>.<a href=\"#\" class=\"close\"
            data-dismiss=\"alert\" aria-label=\"close\">&times;</a></div>";

    }else{

    echo "<div class=\"alert alert-warning\"><strong>Mail not send. </strong>.<a href=\"#\" class=\"close\"
            data-dismiss=\"alert\" aria-label=\"close\">&times;</a></div>";

    }

    ######SEND EMAIL

    }

    }else{

    echo "<div class=\"alert alert-warning\"><strong>Database Error..! </strong>.<a href=\"#\" class=\"close\"
            data-dismiss=\"alert\" aria-label=\"close\">&times;</a></div>";

    }



    }else{

    echo "<div class=\"alert alert-warning\"><strong>username already in use. </strong>.<a href=\"#\" class=\"close\"
            data-dismiss=\"alert\" aria-label=\"close\">&times;</a></div>";

    }

    }else{

    echo "<div class=\"alert alert-warning\"><strong>Email id already exist. </strong>.<a href=\"#\" class=\"close\"
            data-dismiss=\"alert\" aria-label=\"close\">&times;</a></div>";

    }

    }

    $this->load->view('admin/create_teacher');

    }</xmp></code></pre>
    <p>create coach view</p>
    <code>application/views/admin/create_teacher.php</code>
    <pre><code class="language-html"><xmp><?php
    $this->load->view('admin/sidebar');
    $courseDetails=$this->Common_model->get_table_records('course_list');
    //print_r($courseDetails);exit;
    ?>
    <!-- START BREADCRUMB -->
    <ul class="breadcrumb">
        <li><a href="#">Home</a></li>
        <li class="active"><a href="#">Create Coaches</a></li>
    </ul>
    <!-- END BREADCRUMB -->
    
    <!-- PAGE CONTENT WRAPPER -->
    <div class="page-title">
        <h2>Create Coaches</h2>
    </div>
    <div class="page-content-wrap">
    
        <div class="col-md-12">
            <form action="#" method="post" class="form-horizontal">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
                                <div class="form-group">
                                    <label>ID #</label>
                                    <input type="text" name="id_by_admin" value="C<?php echo rand(); ?>"
                                        class="form-control textfield_width">
                                </div>
    
                                <div class="form-group">
                                    <label>Name :</label>
                                    <input type="text" name="name" class="form-control textfield_width">
                                </div>
    
                                <div class="form-group">
                                    <label>Sponsor (level 1):</label>
                                    <input type="text" name="sponsor" class="form-control textfield_width">
                                </div>
                            </div>
    
                            <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
                                <div class="form-group">
                                    <label>Username :</label>
                                    <input type="text" name="username" autocomplete="off"
                                        class="form-control textfield_width">
                                </div>
    
                                <div class="form-group">
                                    <label>Password :</label>
                                    <input type="password" name="password" autocomplete="new-password"
                                        class="form-control textfield_width">
                                </div>
                                <div class="form-group">
                                    <label>Sponsor (level 2):</label>
                                    <input type="text" name="sponsor2" class="form-control textfield_width">
                                </div>
                            </div>
    
                            <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
                                <div class="form-group">
                                    <label>Email :</label>
                                    <input type="email" name="email" class="form-control textfield_width">
                                </div>
    
                                <div class="form-group">
                                    <label>Status :</label>
                                    <select class="table-group-action-input form-control input-medium" name="status">
                                        <option value="1">Active</option>
                                        <option value="0">Not Active</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label><input type="checkbox" name="payment_status" value="1"
                                            class="form-control input-medium" checked> Payment Not required </label>
                                </div>
                            </div>
    
                        </div>
    
                        <div class="form-control border_none">
                            <div class="col-md-11 col-xs-12" style="overflow-x:auto;">
                                <table>
                                    <tr>
                                        <th class="course_name_headding">Course Name</th>
                                        <th class="course_name_headding">Complete on Date :</th>
                                        <th class="course_name_headding">Trained By :</th>
                                        <th class="course_name_headding">Location :</th>
                                    </tr>
                                    <!----------Table is mys_create_teacher------------->
                                    <?php
    										$courseID='';
    										foreach($courseDetails as $course){
    											$courseID=$courseID==''?$course->fld_id:$courseID.','.$course->fld_id;
    											echo 	  
    												  '<tr>
    														<td class="col-md-4" value="'.$course->fld_id.'"><b>'.$course->fld_course_name.'<b>
    																<input type="hidden" class="form-control" value="'.$course->fld_course_name.'" name="course_name_'.$course->fld_id.'" ><br><br></td>
    														<td class="col-md-3"><input type="checkbox" name="teacher_course[]" value="'.$course->fld_id.'">&nbsp;<input name="date_'.$course->fld_id.'" class="textfield_width" type="date"><br><br></td>
    														<td class="col-md-3"><input name="trained_'.$course->fld_id.'" class="textfield_width" type="text"><br><br></td>
    														<td class="col-md-2"><input name="location_'.$course->fld_id.'" class="textfield_width" type="text"><br><br></td>
    												  </tr>';
    											
    											 } ?>
    
                                </table>
                                <input type="hidden" class="form-control" value="<?php echo $courseID; ?>"
                                    name="hidden_box" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-12 col-xs-12">
                                <button name="save" class="btn btn-primary btn-rounded pull-right">Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    
    </div>
    
    
    <?php
     $this->load->view('admin/footer');
    ?>
</xmp></code></pre>
<p>view coach list</p>
<img class="img-fluid" src="image/viewcoachadmin.png" alt="Login Page" height="100">
<br><br>
<p>view coach list Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function view_create_teacher()

{

$this->load->view('admin/view_create_teacher');

}
public function teacher_email_Verified($clientID=0,$verified = null){



if(isset($verified)) {

$this->db->where("fld_id", $clientID);

$this->db->set("fld_varification", $verified);

$this->db->update("users");

}

}
public function teacher_status($clientID=0,$verified = null){



if(isset($verified)) {

$this->db->where("fld_id", $clientID);

$this->db->set("fld_status", $verified);

$this->db->update("users");

}

}
public function teacher_form($clientID =0,$varified = null){



if (isset($varified)) {

$update = $this->db->where("fld_id",$clientID);

$this->db->set("fld_cform",$varified);

$this->db->update("users");

}

}
public function site_status($clientID =0,$varified = null){

if (isset($varified)) {

$this->db->where("fld_id",$clientID);

$this->db->set("fld_site",$varified);

$this->db->update("users");

}

}
public function marketing_status($clientID=0,$verified = null){



if(isset($verified)) {

$this->db->where("fld_id", $clientID);

$this->db->set("fld_marketing", $verified);

$this->db->update("users");

}

}
public function remove_teacher($id = 0){



if($id ==0)

echo "failed";

else {

$ret = $this->delete_user_related_data($id);

if ($ret == 1) {

$this->db->where('fld_yogi_id', $id);

$this->db->delete('yogi_history');

$this->db->reset_query();

echo "success";

}

else

echo "error";

}

}</xmp></code></pre>
<p>view coach list view</p>
<code>application/views/admin/view_create_teacher.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('admin/sidebar');
	error_reporting(0);
//$studentDetails=$this->Common_model->get_table_records_with_dependence('users','create_teacher','fld_id','fld_user_id',array('users.fld_user_type'=>'yogiccoach'));
$studentDetails=$this->Common_model->get_table_records('users',array('fld_user_type'=>'yogiccoach'));
$row_cont=1;
$catRow='';
//echo '<pre>';print_r($studentDetails);die;
foreach ($studentDetails as $row){
		
		$this->db->select("fld_id");
		$members = $this->db->get_where("users",array("fld_parent"=>$row->fld_id));
		$membersCount =$members->num_rows();

		$articles = $this->db->get_where("posts",array("fld_user_id"=>$row->fld_id,"status"=>'0'));
		$acticleCount =$articles->num_rows();
		$article = $this->db->get_where("posts",array("fld_user_id"=>$row->fld_id));
		$acticletotalcount =$article->num_rows();

		$email=$row->fld_email;
		$name=$row->fld_first_name;
		$sponsors = '<strong>1:</strong> '. $row->fld_sponsor;
		$sponsors .= '<br><strong>2:</strong> '. $row->fld_sponsor2;
		$source = $row->fld_create_by;
		$timestamp=$row->fld_added_date;
		$generat_date=date('m/d/Y',$timestamp);
		$status="";
		$marketing="";
	    $verified = "";
	   $cssHide ="";
	   $site="";
	   $form = "";
				$resend_link ="";
				/*if($row->fld_status=='0'){
					$status_button='<button type="button" class="btn btn-default change_tbl_row_status" data-status="1" data-tbl="users" data-id="'.$row->fld_id.'">ON</button>
									<button type="button" class="btn btn-success change_tbl_row_status" data-status="0" data-tbl="users" data-id="'.$row->fld_id.'">OFF</button>';
				}else{
					$status_button='<button type="button" class="btn btn-success change_tbl_row_status" data-status="1" data-tbl="users" data-id="'.$row->fld_id.'">ON</button>
									<button type="button" class="btn btn-default change_tbl_row_status" data-status="0" data-tbl="users" data-id="'.$row->fld_id.'">OFF</button>';
				}*/

			if ($row->fld_cform == "1") {
					$form = "checked='checked'"; 
				}	
			if($row->fld_site == "1"){
				$site = "checked='checked'";
			}
		
            if($row->fld_status == "1") 
				$status = "checked='checked'";
				
			if($row->fld_marketing == "1") 
				$marketing = "checked='checked'";

            if($row->fld_varification == "1") {
				$verified = "checked='checked'";
				$cssHide ="hide";
			}
			else{
				$resend_link ="<br><button id='btnresend_{$row->fld_id}' type='button' class='btn btn-sm btn-info resend {$cssHide}' data-id='".$row->fld_id."'>Resend mail</button>";
			}
            
				
				$catRow.='<tr class="gradeA" id="tr_'.$row->fld_id.'">
							<td>'.$row_cont.'</td>
							<td>'.$name. '<br>'.$email.'<br><strong>Created By: </strong>'.$source.'</td>
                            <td>'.$generat_date.'</td>
                            <td>'.$sponsors.'</td>
							<td class="text-center">'.$membersCount.'</td>
							<td><a href="'. base_url().'admin/articles?id='.$row->fld_id.'" >New: '.$acticleCount.'<br>Total: '.$acticletotalcount.'</a></td>
							<td class="text-center">
							  <label class="switch">
								<input type="checkbox" '. $verified .' value="'. $row->fld_id .'" class="client_verified">
								<span></span>
							   </label>
							   '.$resend_link.'
					       </td>
							<td class="text-center">
                            <label class="switch">
								<input type="checkbox" '. $status .' value="'. $row->fld_id .'" class="client_status">
								<span></span>
							   </label></td>
							   
							   <td class="text-center">
                            <label class="switch">
								<input type="checkbox" '. $marketing .' value="'. $row->fld_id .'" class="marketing_status">
								<span></span>
							   </label></td>
							   <td class="text-center">
							   	<label class="switch">
							   		<input type="checkbox" '.$site.' value="'.$row->fld_id .'" class="site_status">
							   		<span></span>
							   	</label>
							   </td>
							   <td class="text-center">
							   	<label class="switch">
							   		<input type="checkbox" '.$form.' value="'.$row->fld_id .'" class="form_status">
							   		<span></span>
							   	</label>
							   </td>
							
							<td class="text-center"> 
							<a href="'. base_url().'admin/view_teacher_details?id='.$row->fld_id.'" class="btn btn-warning right" ><i class="fa fa-pencil"></i></a>&nbsp;&nbsp;
							<a href="'. base_url().'admin/view_teacher_payments/'.$row->fld_id.'" class="btn btn-info right" ><i class="fa fa-dollar"></i></a>&nbsp;&nbsp;
							<a class="btn btn-danger  btn-circle delete_teacher" data-id="'.$row->fld_id.'" href="javascript:void(0);"><i class="fa fa-trash-o"></i></a></td>
						  </tr>';
			$row_cont++;
								  
	
}
?>

<!-- START BREADCRUMB
			<td><a href="'.base_url().'admin/view_student_details/'.$Row->fld_id.'" class="btn btn-warning right" > View</a></td>-->
<ul class="breadcrumb push-down-1">
    <li><a href="<?php echo base_url()." admin/";?>">Dashboard</a></li>
    <li class="active"><a href="#">View Coaches</a></li>
</ul>
<h2>&nbsp;&nbsp; View Coaches List
    <div class="pull-right" style="padding-right:40px;"><a
            href='<?php echo base_url()."admin/create_teacher";?>'><button class="btn btn-primary btn-block">Add New
                Coach</button></a></div>
</h2>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <!-- START WIDGETS -->
    <form action="#" class="form-horizontal" method="post">
        <div class="row">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-body panel-body-table">
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped table-actions">
                                    <thead>
                                        <tr>
                                            <th>S.No.</th>
                                            <th>Coach</th>
                                            <th>Date Created</th>
                                            <th>Sponsors</th>
                                            <th>Members</th>
                                            <th>Articles</th>
                                            <th class="text-center">Email Verified</th>
                                            <th class="text-center">Status</th>
                                            <th class="text-center">Marketing module</th>
                                            <th class="text-center">Site Creater</th>
                                            <th class="text-center">Form</th>
                                            <th class="text-center">actions</th>
                                        </tr>
                                    </thead>
                                    <?php echo $catRow;?>
                                    <tbody>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!-- END WIDGETS -->
</div>
<!-- END PAGE CONTENT WRAPPER -->




<!-- END SCRIPTS -->
<script>
    $(document).ready(function () {
        $(".client_verified").click(function () {
            var _id = $(this).val();
            var _status = $(this).is(":checked") ? "1" : "0";
            $.get(home_url + "admin/teacher_email_Verified/" + _id + "/" + _status, "", function (response) {
                if (_status == "0")
                    $("#btnresend_" + _id).removeClass("hide");
                else
                    $("#btnresend_" + _id).addClass("hide");

            });
        });
        $(".client_status").click(function () {
            var _id = $(this).val();
            var _status = $(this).is(":checked") ? "1" : "0";
            $.get(home_url + "admin/teacher_status/" + _id + "/" + _status, "", function (response) {

            });
        });

        $(".form_status").click(function () {
            var _id = $(this).val();
            var _status = $(this).is(":checked") ? "1" : "0";
            $.get(home_url + "admin/teacher_form/" + _id + "/" + _status, "", function (response) {
                console.log(response);
            });
        });

        $(".site_status").click(function () {
            var _id = $(this).val();
            var _status = $(this).is(":checked") ? "1" : "0";
            $.get(home_url + "admin/site_status/" + _id + "/" + _status, "", function (response) {

            });
        });

        $(".marketing_status").click(function () {
            var _id = $(this).val();
            var _status = $(this).is(":checked") ? "1" : "0";
            $.get(home_url + "admin/marketing_status/" + _id + "/" + _status, "", function (response) {

            });
        });

    });
    $(function () {
        $(document)
            .on('click', '.delete_teacher', function () {

                if (confirm("Are you sure you want to delete this user?")) {

                    if (confirm("It will remove all data related to this user.\n\n **** You can't UNDO this action.****\n\nAre you still sure?")) {
                        var _id = $(this).attr('data-id');

                        $.get(home_url + "admin/remove_teacher/" + _id, "", function (response) {


                            if (response = "success") {
                                $("#tr_" + _id).hide(300);
                            }
                            else {

                            }
                        });
                    }
                }
            })
            .on('click', '.resend', function () {
                var _id = $(this).attr('data-id');
                var obj = $(this);
                $(this).html("Sending..");
                $.ajax({
                    url: home_url + "login/send_verification_mail/" + _id,
                    data: {},
                    dataType: "json",
                    type: "POST",
                    success: function (response) {

                        if (response.status == '1') {
                            $(obj).html("Sent.");
                            $(obj).fadeOut(3000, function () {
                                $(obj).html("Resend email").fadeIn(1000);
                            });
                        }
                        else {

                            $(obj).addClass("btn-danger");
                            $(obj).html(response.message);
                            $(obj).fadeOut(3000, function () {
                                $(obj).html("Resend email");
                            });
                            return false;
                        }
                    }
                });
            })


    });
</script>

<?php
 $this->load->view('admin/footer');
 ?>
</xmp></code></pre>
<p>send coach verification mail Controller</p>
<code>application/controllers/login.php</code>
<pre><code class="language-html"><xmp><?php
defined('BASEPATH') OR exit('No direct script access allowed');

class Login extends CI_Controller {
	  
	public function send_verification_mail($_id = null){

		if($_id != null){
			$geLoginQuery = $this->db->get_where("users", array('fld_id' =>$_id));
		}
		else {

			$username = $_POST['username'];
			$password = $_POST['password'];
			$where ="(fld_username ='".$username."' OR fld_email ='".$username."') AND fld_password ='".$password."'";
			//$geLoginQuery = $this->db->get_where("users", array('fld_username' => $username, 'fld_password' => $password));
			$geLoginQuery = $this->db->get_where("users", $where);
		}

		if ($geLoginQuery->num_rows() >0) {
			$userRow = $geLoginQuery->row_array();
			if ($userRow['fld_varification'] == '0') {
				######SEND EMAIL
				$to = $userRow["fld_email"];
				$subject = "[MyPortalX] Verification Mail ";
				$message ="Please verify your email using the following link, to activated your account.<br><br>";
				$message .="<a href='".base_url() ."registration/email_verification/".$userRow["fld_rand_code"]."'>".base_url()."registration/email_verification/".$userRow["fld_rand_code"]."</a>";
				$message .="<br><br>You can Login into MyPortalX with the following details after activate your account.<br><br>";
				$message .="User Name: ". $userRow['fld_username'] ."<br>";
				$message .="Password: ". $userRow['fld_password'] ." <br>";
				$message .="<br><br>Thank you,<br>Team MyPortalX";

				$header = "From: MyPortalX <".$this->config->item("mail_from").">\r\n";
				$header .= "MIME-Version: 1.0\r\n";
				$header .= "Content-type: text/html\r\n";
				$retval = 0;
				try {
					$retval = mail($to, $subject, $message, $header);
					$response['status'] = 1;
					$response['redirect'] = '';
					$response['message'] = 'Mail Sent.';
					$response['data'] = array();
				}catch (Exception $e){
					$response['status'] = 0;
					$response['redirect'] = '';
					$response['message'] = 'Not able to send the email.'.$e->getMessage();
					$response['data'] = array();
				}

			}
			else{
				$response['status'] = 0;
				$response['redirect'] = '';
				$response['message'] = 'Your account is already activated.';
				$response['data'] = array();
			}
		}
		else{
			$response['status'] = 0;
			$response['redirect'] = '';
			$response['message'] = 'Invalid username or password.';
			$response['data'] = array();
		}
		echo json_encode($response);
	}   
}
</xmp></code></pre>
<p>view coach detail</p>
<img class="img-fluid" src="image/viewcoachdatailadmin.png" alt="Login Page" height="100">
<br><br>
<p>view coach detail Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function view_teacher_details()

{

$user_id=$_GET['id'];

$this->load->model("user_model");



$coaching_forms = $this->user_model->get_marketing_forms($user_id,'', true);

$user_coaching_forms = $this->user_model->get_marketing_forms($user_id,'', false);

$this->load->model("coach_model");

$checklist = $this->coach_model->get_checklist($user_id);

$data['minor']=$this->Common_model->get_table_records('chakra_reading_minor',array(),"fld_id","asc");

$data['major']=$this->Common_model->get_table_records('chakra_reading_major',array(),"fld_id","asc");

$data['aura']=$this->Common_model->get_table_records('chakra_reading_aura',array(),"fld_id","asc");

$data['user_id']=$user_id;

$data['coaching_forms'] = $coaching_forms;

$data["checklist"] = $checklist;

$data["modules"] = $this->modulelist;



$Success = "";

if($this->input->post()){

$clientId = $this->input->post("clientId");

$limit = $this->input->post("clientLimit");

if(is_numeric($limit) && is_numeric($clientId)){

$this->db->where("fld_id", $clientId);

$this->db->set("max_clients", $limit);

$this->db->update("users");



if($this->db->affected_rows()){

$Success = "1";

}else{

$Success = "0";

}

}else{

$Success = "0";

}

}

$data["Success"] = $Success;

$this->load->view('admin/view_teacher_details',$data);

}
public function add_history_notes(){

$response['status'] = 0;

$response['message'] = 'Required data missing';

$response['data'] = "";

if($this->input->post())

{

$clientID = $this->input->post('cid');

$topic=$this->input->post('topic');

$details=$this->input->post('notes');

$planDATA=array(

'fld_yogi_id'=>$this->adminid,

'fld_member_id'=>$clientID,

'fld_member_name'=>'',

'fld_select_date'=>date('Y-m-d'),

'fld_topic'=>$topic,

'fld_details'=>$details,

'fld_added_date'=>time()

);



$this->db->insert('yogi_history',$planDATA);

if($this->db->affected_rows())

{

$response['status'] = 1;

$response['message'] = 'Notes added.';

$listView = "";

$historyMember=$this->Common_model->get_table_records('yogi_history',array('fld_member_id'=>$clientID));

foreach($historyMember as $history){

$listView.='<tr>

    <td width="150px">'.$history->fld_select_date.'</td>

    <td width="250px"><strong>'.$history->fld_topic.'</strong></td>

    <td>'.nl2br($history->fld_details).'</td>

</tr>';

}

$response['data'] = $listView;

}

else

{

$response['status'] = 0;

$response['message'] = 'Error while adding notes.';

$response['data'] ="";

}

}



echo json_encode($response);

}
public function get_report_records($clientID, $module, $action){

$result ="";

if($this->db->table_exists($module)){



$this->db->order_by('fld_id DESC');

if(in_array($module,$this->moduleMultiRow))

{

$this->db->distinct();

$this->db->select('fld_added_date as fld_id,fld_added_date');

}

$records =$this->db->get_where($module,array("fld_user_id"=>$clientID));

$result ="<div class=\"table-responsive\">";

    $result .="<table class=\"table table-striped table-bordered\">";

        $result .="<tr>";

            $result .="<td class=\"text-center\">S.No.</td>";

            $result .="<td class=\"text-center\">Dated</td>";

            $result .="<td class=\"text-center\">Action</td>";

            $result .="</tr>";

        if($records->num_rows() > 0){

        $cnt=0;

        foreach( $records->result() as $row){

        $cnt++;

        $result .="<tr>";

            $result .="<td class=\"text-center\">".$cnt."</td>";

            $result .="<td class=\"text-center\">".date('m-d-Y',$row->fld_added_date)."</td>";

            $result .="<td class=\"text-center\">

                <button type=\"button\" class=\"btn btn-danger btn-condensed mb-control \"
                    onclick='javascript:viewreport(this);' title='View Report' data-name='".$module."'
                    data-id='". $row->fld_id ."' data-box=\"#message-box-pdfview\"><i class=\"glyphicon
                        glyphicon-eye-open\"></i></button>

                <button type=\"button\" class=\"btn btn-success btn-condensed \"
                    onclick='javascript:downloadreport(this);' title='Download Report PDF' data-name='".$module."'
                    data-id='". $row->fld_id ."'><i class=\"glyphicon glyphicon-cloud-download\"></i></button>

                <button type=\"button\" class=\"btn btn-warning btn-condensed \" onclick='javascript:sendreport(this);'
                    title='Send Report to Client' data-name='".$module."' data-id='". $row->fld_id ."'><i class=\"fa
                        fa-envelope\"></i></button>

            </td>";

            $result .="</tr>";

        }

        }

        else{

        $result .= "<tr>
            <td colspan='3' style='text-align:center;color:red;font-size:14px'>No record found</td>
        </tr>";

        }

        $result .="</table>";

    $result .="</div>";

}

else{

echo "error: table - ".$module;

}



echo $result;

}
public function get_client_report($recID, $clientID, $module, $action){



//echo "REC -". $recID ." C: ". $clientID . " M: " . $module . " A: " . $action;

if($this->db->table_exists($module)){

$moduleTitle = $this->modulelist[$module];

if(in_array($module,$this->moduleMultiRow))

{

$record =$this->db->get_where($module,array("fld_added_date"=> $recID, "fld_user_id"=>$clientID),1,0);

}else{

$record =$this->db->get_where($module,array("fld_id"=> $recID, "fld_user_id"=>$clientID),1,0);

}

$clientDetails = $this->db->get_where("users", array("fld_id"=>$clientID),1,0);

if($record->num_rows()>0 && $clientDetails->num_rows() > 0){

$clientDetails = $clientDetails->row();

$data = array(

"Client" => $clientDetails,

"Record" => $record->result_array()

);

$clientName = $clientDetails->fld_first_name.'-'.$clientDetails->fld_last_name;

$clientEmail = $clientDetails->fld_email;



$this->load->model('user_model');

$coachDetails =$this->user_model->get_row($this->adminid);

$coachName ="";

$coachEmail="";



if(sizeof($coachDetails)>0){

$coachName =$coachDetails['fld_first_name'].' '. $coachDetails['fld_last_name'];

$coachEmail=$coachDetails['fld_email'];

}

$html = $this->load->view('yogiccoach/ajax/content_report_'.$module,$data, true);

if($action =="view")

{

echo $html;

}

else if($action == "download"){

$pdfFilePath = "Report-".str_replace($moduleTitle,' ','-').'-'.$clientName.".pdf";

$this->load->library('m_pdf');

ob_clean();

$this->m_pdf->pdf->WriteHTML($html);

$pdfFile = $this->m_pdf->pdf->Output($pdfFilePath,"D");

ob_end_clean();

}

else if($action =="send"){

$pdfFilePath = "Report-".str_replace($moduleTitle,' ','-').'-'.$clientName.".pdf";

$this->load->library('m_pdf');

ob_clean();

$this->m_pdf->pdf->WriteHTML($html);

$pdfFile = $this->m_pdf->pdf->Output($pdfFilePath);



$subject = "Report ". $moduleTitle;

$message= "";

$message .="<table width='600' align='center' id='TbHeader' bgcolor='#400080' border='0' cellspacing='0'
    cellpadding='4'>
    <tr>
        <td align='center' id='TdHeader' bgcolor='#400080'>
            <p align='center'>
                <font color='#ffffff' face='Arial, Helvetica, sans-serif' size='6'><strong>Welcome</strong></font>
            </p>
        </td>
    </tr>
</table>
<table width='600' align='center' id='TbBodyRow' border='0' cellspacing='0' cellpadding='0'>
    <tr>
        <td id='TdBodyRow' valign='top' bgcolor='#ffffff'>
            <table width='100%' id='TbBody' bgcolor='#ffffff' border='0' cellspacing='0' cellpadding='4'>
                <tr>
                    <td align='center' id='TdBody' bgcolor='#ffffff'>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<p align='left'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'><strong>

                                    To view your report please download attachment

                                    &nbsp;<font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'>
                                        &nbsp;</font></strong></font>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        </p>
                        <p align='justify' style='margin-right: 0px;'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'></font>
                        <p align='justify' style='margin-right: 0px;'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'><br></font>
                        </p>
                        </p>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table><strong></strong><strong></strong><strong></strong>
<table width='600' align='center' id='TbFooter' bgcolor='#eea000' border='0' cellspacing='0' cellpadding='4'>
    <tr>
        <td align='center' id='TdFooter' bgcolor='#eea000'>
            <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'>
                <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                        style='color: rgb(0, 52, 89); line-height: inherit; font-size: inherit; font-weight: bold; text-decoration: inherit;'><span
                            style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: inherit; text-decoration: inherit;'><br></span></span>
                </div>
                <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                        style='color: rgb(0, 52, 89); line-height: inherit; font-size: inherit; font-weight: bold; text-decoration: inherit;'><span
                            style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: inherit; text-decoration: inherit;'>Namaste!</span><br
                            style='color: rgb(0, 52, 89);'></span></div>
                <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                        style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: bold; text-decoration: inherit;'>Rajah
                        Sharma</span></div>
                <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                        style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: bold; text-decoration: inherit;'><br></span>
                </div>
            </div>
        </td>
    </tr>
</table>. ";

/************************pallavi code start**************************/

$file = $pdfFilePath;

$file_size = filesize($file);

$handle = fopen($file, "r");

$content = fread($handle, $file_size);

fclose($handle);

//$content = chunk_split(base64_encode($content));

$from='MyPortalX';

$separator = md5(time());

$eol = PHP_EOL;

$filename = "Report-".str_replace($moduleTitle,' ','-').'-'.$clientName.".pdf";

$attachment = chunk_split(base64_encode($content));

$headers = "From: " . $from . $eol;

if($coachEmail !='')

$headers .= 'Cc: '. $coachName .'<'.$coachEmail.'>\r\n';

    /*$headers .= 'Bcc: test@test.com\r\n';*/

    $headers .= "MIME-Version: 1.0" . $eol;

    $headers .= "Content-Type: multipart/mixed; boundary=\"" . $separator . "\"" . $eol . $eol;

    $body = "";

    $body .= "Content-Transfer-Encoding: 7bit" . $eol;

    $body .= "This is a MIME encoded message." . $eol;

    $body .= "--" . $separator . $eol;

    $body .= "Content-Type: text/html; charset=\"iso-8859-1\"" . $eol;

    $body .= "Content-Transfer-Encoding: 8bit" . $eol . $eol;

    $body .= $message . $eol;

    $body .= "--" . $separator . $eol;

    $body .= "Content-Type: application/octet-stream; name=\"" . $filename . "\"" . $eol;

    $body .= "Content-Transfer-Encoding: base64" . $eol;

    $body .= "Content-Disposition: attachment" . $eol . $eol;

    $body .= $attachment . $eol;

    $body .= "--" . $separator . "--";



    /*******************pallavi code end*************************/



    $retval = mail ($clientEmail,$subject,$body,$headers);

    $response_message="sent";

    }

    }

    }

    }
    public function update_coaching_form_status($form_id='',$user_id='',$status =''){
    
    $recID = 0;
    
    
    
    $coach=$this->db->get_where('mys_marketing_forms',array('id'=>$form_id));
    
    if ($coach->num_rows()>0) {
    
    $row=$coach->row_array();
    
    
    
    $formtitle = $row["title"];
    
    }
    
    
    
    if($form_id !="" && $user_id !="" && $status !=""){
    
    //check if exists
    
    $this->db->where(array("fld_form_id"=>$form_id, "fld_user_id"=>$user_id));
    
    $rec = $this->db->get('marketing_form_user');
    
    
    
    if($rec->num_rows() > 0) {//if exists
    
    $curRow = $rec->row();
    
    $recID = $curRow->id;
    
    if($status == "1"){
    
    //update
    
    $this->db->where(array("fld_form_id"=>$form_id, "fld_user_id"=>$user_id));
    
    $this->db->update("marketing_form_user",array("assign_date"=>time(),"completed_date"=>'',"last_modified" =>date('Y-m-d
    H:i:s')));
    
    
    
    /********* Get Current Login admin Data **************/
    
    $session = $this->session->get_userdata();
    
    $login_id=$session['user_id'];
    
    /*echo "
    <pre>";
    
    					print_r($user_id);
    
    					exit();*/
    
    					$coachemail='';
    
    					$admin=$this->db->get_where('users',array('fld_id'=>$login_id));
    
    					if ($admin->num_rows()>0) {
    
    						$row=$admin->row_array();
    
    
    
    						$adminName = $row["fld_first_name"] . " " . $row["fld_last_name"];
    
    						$adminemail = $row["fld_email"];
    
    					}
    
    					/**************** Current Active coach data ********************/
    
    					$coach=$this->db->get_where('users',array('fld_id'=>$user_id));
    
    					if ($coach->num_rows()>0) {
    
    						$row=$coach->row_array();
    
    
    
    						$coachName = $row["fld_first_name"] . " " . $row["fld_last_name"];
    
    						$coachStatus = $row["fld_status"];
    
    						$coachemail = $row["fld_email"];
    
    					}
    
    						/*echo "<pre>";
    
    					print_r($coachemail);
    
    					print_r($adminemail);
    
    					exit();*/
    
    					/***************** Send mail to member by coach *********************/
    
    					$this->load->library('email');
    
    					$this->email->from($adminemail, 'MyportalX');
    
    					$this->email->to($coachemail);
    
    					$this->email->subject('Form Uploaded');
    
    					$this->email->message("<table width='600' align='center' id='TbHeader' bgcolor='#400080' border='0' cellspacing='0' cellpadding='4'><tr><td align='center' id='TdHeader' bgcolor='#400080'><p align='center'><font color='#ffffff' face='Arial, Helvetica, sans-serif' size='6'><strong>Welcome</strong></font></p></td></tr></table>
    
    <table width='600' align='center' id='TbBodyRow' border='0' cellspacing='0' cellpadding='0'><tr><td id='TdBodyRow' valign='top' bgcolor='#ffffff'>
    
          <table width='100%' id='TbBody' bgcolor='#ffffff' border='0' cellspacing='0' cellpadding='4'><tr><td align='center' id='TdBody' bgcolor='#ffffff'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<p align='left'><font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'><strong>".$formtitle." form Uploaded By ".$adminName." Please Cheack-It-Out On MyportalX &nbsp;<font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'>&nbsp;</font></strong></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p align='justify' style='margin-right: 0px;'><font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'></font><p align='justify' style='margin-right: 0px;'><font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'><br></font></p></p></td></tr></table></td></tr></table><strong></strong><strong></strong><strong></strong><table width='600' align='center' id='TbFooter' bgcolor='#eea000' border='0' cellspacing='0' cellpadding='4'><tr><td align='center' id='TdFooter' bgcolor='#eea000'><div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span style='color: rgb(0, 52, 89); line-height: inherit; font-size: inherit; font-weight: bold; text-decoration: inherit;'><span style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: inherit; text-decoration: inherit;'><br></span></span></div><div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span style='color: rgb(0, 52, 89); line-height: inherit; font-size: inherit; font-weight: bold; text-decoration: inherit;'><span style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: inherit; text-decoration: inherit;'>Namaste!</span><br style='color: rgb(0, 52, 89);'></span></div><div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: bold; text-decoration: inherit;'>Rajah Sharma</span></div><div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: bold; text-decoration: inherit;'><br></span></div></div></td></tr></table>");
    
    					//Send mail
    
    					if($this->email->send()){
    
    						echo "<div class=\"alert alert-success\"><strong>Success! </strong>.<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a></div>";
    
    						}
    
    					else{
    
    						$this->session->set_flashdata("email_sent","You have encountered an error");
    
    						}
    
    
    
    				}
    
    				else{
    
    					//remove entry
    
    					$this->db->where(array("fld_form_id"=>$form_id, "fld_user_id"=>$user_id));
    
    					$this->db->delete("marketing_form_user");
    
    				}
    
    			}
    
    			else{
    
    				//insert
    
    				if($status  == "1")
    
    				{
    
    					$data = array(
    
    							"fld_form_id"=>$form_id,
    
    							"fld_user_id"=>$user_id,
    
    							"assign_date"=>time(),
    
    							"completed_date"=>'',
    
    							"status"=>'1'
    
    						);
    
    					$this->db->insert("marketing_form_user",$data);
    
    					$recID = $this->db->insert_id();
    
    
    
    					/********* Get Current Login admin Data **************/
    
    					$session = $this->session->get_userdata();
    
    					$login_id=$session['user_id'];
    
    					/*echo "<pre>";
    
    					print_r($user_id);
    
    					exit();*/
    
    					$admin=$this->db->get_where('users',array('fld_id'=>$login_id));
    
    					if ($admin->num_rows()>0) {
    
    						$row=$admin->row_array();
    
    
    
    						$adminName = $row["fld_first_name"] . " " . $row["fld_last_name"];
    
    						$adminemail = $row["fld_email"];
    
    					}
    
    					/**************** Current Active coach data ********************/
    
    					$coach=$this->db->get_where('users',array('fld_id'=>$user_id));
    
    					if ($coach->num_rows()>0) {
    
    						$row=$coach->row_array();
    
    
    
    						$coachName = $row["fld_first_name"] . " " . $row["fld_last_name"];
    
    						$coachStatus = $row["fld_status"];
    
    						$coachemail = $row["fld_email"];
    
    					}
    
    						/*echo "<pre>";
    
    					print_r($coachemail);
    
    					print_r($adminemail);
    
    					exit();*/
    
    					/***************** Send mail to member by coach *********************/
    
    					$this->load->library('email');
    
    					$this->email->from($adminemail, 'MyportalX');
    
    					$this->email->to($coachemail);
    
    					$this->email->subject('Form Uploaded');
    
    					$this->email->message("<table width='600' align='center' id='TbHeader' bgcolor='#400080' border='0' cellspacing='0' cellpadding='4'><tr><td align='center' id='TdHeader' bgcolor='#400080'><p align='center'><font color='#ffffff' face='Arial, Helvetica, sans-serif' size='6'><strong>Welcome</strong></font></p></td></tr></table><table width='600' align='center' id='TbBodyRow' border='0' cellspacing='0' cellpadding='0'><tr><td id='TdBodyRow' valign='top' bgcolor='#ffffff'><table width='100%' id='TbBody' bgcolor='#ffffff' border='0' cellspacing='0' cellpadding='4'><tr><td align='center' id='TdBody' bgcolor='#ffffff'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<p align='left'><font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'><strong>
    
    					".$formtitle." form Uploaded By ".$adminName." Please Cheack-It-Out On MyportalX
    
    					&nbsp;<font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'>&nbsp;</font></strong></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p align='justify' style='margin-right: 0px;'><font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'></font><p align='justify' style='margin-right: 0px;'><font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'><br></font></p></p></td></tr></table></td></tr></table><strong></strong><strong></strong><strong></strong><table width='600' align='center' id='TbFooter' bgcolor='#eea000' border='0' cellspacing='0' cellpadding='4'><tr><td align='center' id='TdFooter' bgcolor='#eea000'><div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span style='color: rgb(0, 52, 89); line-height: inherit; font-size: inherit; font-weight: bold; text-decoration: inherit;'><span style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: inherit; text-decoration: inherit;'><br></span></span></div><div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span style='color: rgb(0, 52, 89); line-height: inherit; font-size: inherit; font-weight: bold; text-decoration: inherit;'><span style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: inherit; text-decoration: inherit;'>Namaste!</span><br style='color: rgb(0, 52, 89);'></span></div><div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: bold; text-decoration: inherit;'>Rajah Sharma</span></div><div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: bold; text-decoration: inherit;'><br></span></div></div></td></tr></table>");
    
    					//Send mail
    
    					if($this->email->send()){
    
    						echo "<div class=\"alert alert-success\"><strong>Success email send! </strong>.<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a></div>";
    
    						}
    
    					else{
    
    						$this->session->set_flashdata("email_sent","You have encountered an error");
    
    						}
    
    						
    
    
    
    					
    
    				}
    
    			}
    
    
    
    		}	
    
    		
    
    		echo $recID;
    
    
    
    	}
        public function update_coach_checklist($checklist_id='',$user_id='',$status =''){
        
        $recID = 0;
        
        if($checklist_id !="" && $user_id !="" && $status !=""){
        
        //check if exists
        
        $this->db->where(array("fld_checklist_id"=>$checklist_id, "fld_user_id"=>$user_id));
        
        $rec = $this->db->get('coach_checklist_user');
        
        
        
        if($rec->num_rows() > 0) {//if exists
        
        $curRow = $rec->row();
        
        $recID = $curRow->id;
        
        if($status == "0"){
        
        //remove entry
        
        $this->db->where(array("fld_checklist_id"=>$checklist_id, "fld_user_id"=>$user_id));
        
        $this->db->delete("coach_checklist_user");
        
        }
        
        }
        
        else{
        
        //insert
        
        if($status == "1")
        
        {
        
        $data = array(
        
        "fld_checklist_id"=>$checklist_id,
        
        "fld_user_id"=>$user_id
        
        );
        
        $this->db->insert("coach_checklist_user",$data);
        
        $recID = $this->db->insert_id();
        
        }
        
        }
        
        }
        
        echo $recID;
        
        
        
        }</xmp></code></pre>
<p>view coach detail view</p>
<code>application/views/admin/view_teacher_details.php</code>
<pre><code class="language-html"><xmp><?php
$Success = "";
		
        if($this->input->post()){
            $clientId = $this->input->post("clientId");
			
            $limit = $this->input->post("clientLimit");
            if(is_numeric($limit) && is_numeric($clientId)){
               	$this->db->where("fld_id", $clientId);
			    $this->db->set("max_clients", $limit);
			    $this->db->update("users");
                
                if($this->db->affected_rows()){
                   $Success = "1"; 
                }else{
                    $Success = "0";
                }
            }else{
                    $Success = "0";
                }
        }
        $data["Success"] = $Success;
		?>

<?php
$this->load->view('admin/sidebar');
$clientID =0;
$MaxLimit = 0;
if(isset($_GET['id']))
     $clientID = $_GET['id'];
if($clientID ==0)
    header('location: /admin/view_create_teacher');
$detail=$this->Common_model->get_table_records_with_dependence('users','create_teacher','fld_id','fld_user_id',array('users.fld_id'=>$clientID));
if(count($detail)>0)
    $MaxLimit = $detail{0}->max_clients;

$message ="";
if($Success == "1")
   $message ="<span class='label label-info' style='font-size:11px;'>Limit Updated</span>";
else if($Success == "0")
    $message ="<span class='label label-danger'  style='font-size:11px;'>Something wrong.</span>";

//echo '<pre>';print_r($detail);die;
?>

<!-- START BREADCRUMB -->
<ul class="breadcrumb push-down-1">
    <li><a href="<?php echo base_url()." admin/";?>">Dashboard</a></li>
    <li><a href="<?php echo base_url()." admin/view_create_teacher";?>">View Coaches</a></li>
    <li class="active"><a href="#">View Coaches Details</a></li>
</ul>
<form method="post">
    <h2>&nbsp;&nbsp; View Teacher
        <div class="pull-right">
            <?php echo $message;?>
            <input type="number" class="text text-sm" name="clientLimit" style="width:100px;" min="0" maxlength="9999"
                value="<?php echo $MaxLimit;?>">
            &nbsp;<button type="submit" class="btn btn-primary">Update Limit</button>&nbsp;&nbsp;&nbsp;
            <input type="hidden" name="clientId" value="<?php echo $clientID;?>" />
        </div>
    </h2>
</form>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <!-- START WIDGETS -->
    <form action="#" class="form-horizontal" method="post">
        <div class="row">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-body panel-body-table">
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped table-actions">
                                    <thead>
                                        <tr>
                                            <th>Teacher Name</th>
                                            <th>Username</th>
                                            <th>Email</th>
                                            <th>Status</th>

                                        </tr>
                                    </thead>
                                    <?php if(count($detail)>0){
											?>
                                    <tr>
                                        <td>
                                            <?php echo $detail{0}->fld_first_name;?>
                                        </td>
                                        <td>
                                            <?php echo $detail{0}->fld_username;?>
                                        </td>
                                        <td>
                                            <?php echo $detail{0}->fld_email;?>
                                        </td>
                                        <td>
                                            <?php if($detail{0}->fld_status==1){echo 'Active';}else{echo 'Not Active';}?>
                                        </td>
                                    </tr>

                                    <?php 
										}?>

                                </table><br><br><br>
                                <?php $usercourse='';if(!empty($detail{0}->fld_course_details)){$usercourse=unserialize($detail{0}->fld_course_details);}?>
                                <table class="table table-bordered table-striped table-actions">
                                    <thead>
                                        <tr>

                                            <th>Course Name</th>
                                            <th>Complete Date</th>
                                            <th>Trained By</th>
                                            <th>Location</th>

                                        </tr>
                                        <?php if(!empty($usercourse) && (count($usercourse)>0)){
												foreach($usercourse as $co){
												?>
                                        <tr>
                                            <td>
                                                <?php echo $co['course_name'];?>
                                            </td>
                                            <td>
                                                <?php echo date("m/d/Y",strtotime($co['complete_date']));?>
                                            </td>
                                            <td>
                                                <?php echo $co['trained_by'];?>
                                            </td>
                                            <td>
                                                <?php echo $co['location'];?>
                                            </td>
                                        </tr>
                                        <?php
											}}
											else{echo '<tr><td colspan="4">No record found.</td></tr>';}?>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!-- END WIDGETS -->
</div>
<!-- END PAGE CONTENT WRAPPER -->

<?php	
				$user_id=$_GET['id'];
         	$this->load->model("user_model");
		
			$coaching_forms = $this->user_model->get_marketing_forms($user_id,'', true);
			$user_coaching_forms = $this->user_model->get_marketing_forms($user_id,'', false);
			$this->load->model("coach_model");			
			$checklist = $this->coach_model->get_checklist($user_id);
			$data['minor']=$this->Common_model->get_table_records('chakra_reading_minor',array(),"fld_id","asc");
			$data['major']=$this->Common_model->get_table_records('chakra_reading_major',array(),"fld_id","asc");
			$data['aura']=$this->Common_model->get_table_records('chakra_reading_aura',array(),"fld_id","asc");
			$data['user_id']=$user_id;
			$data['coaching_forms'] = $coaching_forms;
			$data["checklist"] = $checklist;
		
      ?>

<?php
$activeTab ="Checklist";
$memberName = "";
	error_reporting(1);
	$session = $this->session->get_userdata();
	$login_id=$session['user_id'];

$memberStatus = "0";
$memberName  ="";
	$user=$this->db->get_where('users',array('fld_id'=>$user_id));
	if ($user->num_rows()>0) {
		$row=$user->row_array();

		$memberName = $row["fld_first_name"] . " " . $row["fld_last_name"];           
		$memberStatus = $row["fld_status"];
	}
	// image path.....
	$image_path=($row['fld_file_name']!='')?$row['fld_file_name']:'assets/uploads/member/'.'default.jpg';
	$image = base_url().$image_path;

	// 1  client_history table.....
	$this->db->order_by('fld_id','desc');
	$client_history =$this->db->get_where('client_history',array('fld_user_id'=>$user_id));
	if ($client_history->num_rows()>0) {
		$clientHistory=$client_history->row_array();
	}

	
$number = $this->db->get_where('yogi_notes',array('fld_user_id'=>$user_id))->result();

	$row_cont=1;
	$catRow='';
	foreach ($number as $Row){
		$catRow.='<tr class="gradeA" id="trnote_'.$Row->fld_id.'">
						<td>'.$row_cont.'</td>
						<td>'.$Row->fld_section.'</td>
                        <td>'.$Row->fld_notes_number.'</td>
						<td>'.nl2br($Row->fld_notes).'</td>
						<td class="text-center"><a href="javascript:void(0)" style="color:red" class="rmnotes" data-id="'.$Row->fld_id.'" client-id="'.$Row->fld_user_id.'"><i class="glyphicon glyphicon-remove"></i></a></td>
				</tr>';
		$row_cont++;
	}

	$nameMember=$this->Common_model->get_student_name($user_id);
	



?>
<?php if($row['fld_marketing']==1){ ?>
<script>
    $(function () {
        //	$("#profileTabs  a:last).tab('show');
    });
</script>
<style>
    .nopad {
        padding: 0px;
    }
</style>
<!-- PAGE TITLE -->

<!--<div class="page-title">
<h2><span class="fa fa-cogs"></span> Edit</h2>
</div>-->

<div id="error_container"></div>
<!-- END PAGE TITLE -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <div class="row">
        <div class="col-md-12">
            <!-- START JUSTIFIED TABS --><br />
            <div class="panel panel-default tabs">
                <ul class="nav nav-tabs nav-justified" id="profileTabs">
                    <li><a href="#tabChecklist" data-toggle="tab">Checklist</a></li>
                    <li> <a href="#tabHistory" data-toggle="tab">History</a></li>
                    <li><a href="#tabCoachingForm" data-toggle="tab">Coaching Form</a></li>
                    <li><a href="#tabChart" data-toggle="tab">Chart</a></li>
                    <li><a href="#tabReports" data-toggle="tab">Reports</a></li>
                </ul>

                <div class="panel-body tab-content">
                    <div class="tab-pane" id="tabChecklist">
                        <div class="col-md-12">
                            <form class="form-horizontal">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Checklist and Timeline</h3>
                                    </div>
                                    <div class="panel-body">
                                        <table class="table table-bordered">
                                            <tr>
                                                <td
                                                    style="background-color:#000;color:#fff;width:15px;text-align:center;">
                                                    Month</td>
                                                <td>Session/Week</td>
                                                <td>What</td>
                                                <td>Complete</td>
                                            </tr>
                                            <?php 
					$prevMonth = "";
					$pervSession = "";
						$bgcolor="#DFF0D8";
					foreach($checklist as $chklst){
						$month = "";		
						$week ="";
						$monthRowSpan = "";
						$weekRowSpan = ""; 
					
						$member_id = $chklst->fld_user_id;
						$checklist_id = $chklst->id;
						if($prevMonth != $chklst->month) {
							$month ="<span class='month'>". $chklst->month ."</span>";
							if($chklst->monthCount > 1)
							$monthRowSpan ="rowspan = '{$chklst->monthCount}'";
						}
						if($pervSession != $chklst->session)
						{
							$bgcolor = $bgcolor =="#FCF8E3" ? "#DFF0D8" : "#FCF8E3"; 
							$week = $chklst->session;
							if($chklst->SessionCount > 1)
								$weekRowSpan = "rowspan = '{$chklst->SessionCount}'";
						}
								
						$month_desc = $chklst->month_desc;
						if($month != "" && $month_desc !=""){
						$month.= "<br><br><br>".$month_desc;
						}

						$week_desc	 = $chklst->session_desc;
						if($week == 0 )
							$week = $week_desc;
						else if($week != "" && $week_desc !="")
						{
						// $week.="<span class='week'>".$week."</span>"
								$week .= "<br>".$week_desc; 
						}


						$heading = $chklst->heading;
                        if($heading != "")
                            $heading ="<strong>{$heading}</strong><br>";
						$title = $chklst->title;
						$completed = $chklst->RecID >0 ? "checked" : "" ;
						$chkChecked = $chklst->RecID >0 ? "checked='checked'" : "" ;
						
						

				
						echo"<tr>";
							if($month != "")
								echo "<td style=\"background-color:#000;color:#fff;font-size:24px!important;text-align:center;vertical-align:middle;\" {$monthRowSpan}>{$month}</td>";
							if($week != "")
								echo "<td class='text-center' {$weekRowSpan} style='text-align:center;vertical-align:middle;background-color:{$bgcolor}'><strong>{$week}</strong></td>";
							echo "<td style='background-color:{$bgcolor}'>{$heading}{$title}</td>";
							echo "<td class='text-center' style='background-color:{$bgcolor}'>
								<label class=\"check \">
									<div class=\" icheckbox_minimal-grey  {$completed}\" style=\"position: relative;\">
									<input type=\"checkbox\" value='{$checklist_id}' data-id='{$member_id}'  class=\"icheckbox checklist_checkbox\" {$chkChecked} style=\"position: absolute; opacity: 0;\">
										<ins class=\"iCheck-helper \" style=\"position: absolute; top: 0%; left: 0%;display: block; width: 100%; height: 100%; margin: 0px; padding: 0px; background: rgb(255, 255, 255); border: 0px; opacity: 0;\"></ins>
									</div></label>
							</td>";
						echo "</tr>";
						$prevMonth =  $chklst->month;
						$pervSession = $chklst->session;

					}?>
                                        </table>


                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- ..........HISTORY TAB...................-->
                    <div class="tab-pane " id="tabHistory">
                        <div class="col-md-12">
                            <form class="form-horizontal">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">History</h3>
                                    </div>
                                    <div class="panel-body">

                                        <div class="form-group">
                                            <label class="col-md-3 col-xs-12 control-label">Select Date</label>
                                            <div class="col-md-6 col-xs-12">
                                                <div class="input-group">
                                                    <span class="input-group-addon"><span
                                                            class="fa fa-calendar"></span></span>
                                                    <!--<input type="text" class="form-control datepicker" name="dateSlected" required>-->
                                                    <input type="text" class="form-control" value="<?php echo date("
                                                        m/d/Y");?>" required disabled style="width:200px;color: #000;">
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-md-3 col-xs-12 control-label">Topic :</label>
                                            <div class="col-md-6 col-xs-12">
                                                <select class="form-control" id="ddlHistoryTopic"
                                                    name="ddlHistoryTopic">
                                                    <option value="">Select Topic</option>
                                                    <option value="Physical">Physical</option>
                                                    <option value="Emotional">Emotional (Overall feeling towards life
                                                        and environment)</option>
                                                    <option value="Mental">Mental (Dominating thoughts on regular basis)
                                                    </option>
                                                    <option value="Self Worth">Self Worth (Self talk-performance
                                                        ability)</option>
                                                    <option value="Financial">Financial</option>
                                                    <option value="Social">Social</option>
                                                    <option value="Family">Family (Parents, Kids, Siblings)</option>
                                                    <option value="Spouse">Spouse (Romantic relationship)</option>
                                                    <option value="Spiritual">Spiritual</option>
                                                    <option value="Growth">Growth</option>
                                                </select>
                                            </div>
                                        </div>


                                        <div class="form-group">
                                            <label class="col-md-3 col-xs-12 control-label">Notes</label>
                                            <div class="col-md-6 col-xs-12">
                                                <textarea name="historyNotes" id="historyNotes" class="form-control"
                                                    rows="5"></textarea>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-6 col-xs-12">
                                                <button id="addHistory" type="button" class="btn btn-primary pull-right"
                                                    data-id="<?php echo $user_id;?>">Add Notes</button>
                                            </div>
                                        </div>
                                    </div>
                                    <!------------------------------------------------------------------->
                                    <div class="panel-body">
                                        <table class="table table-striped table-bordered" width="100%">
                                            <tr>
                                                <th width="150px">Dated</th>
                                                <th width="250px">Topic</th>
                                                <th>Notes</th>
                                            </tr>

                                            <?php
					$historyMember=$this->Common_model->get_table_records('yogi_history',array('fld_member_id'=>$user_id));
					foreach($historyMember as $history){
						  $listView.='<tr>
                            <td width="150px">'.date("m/d/Y",strtotime($history->fld_select_date)).'</td>
                            <td width="250px"><strong>'.$history->fld_topic.'</strong></td>
                            <td>'.nl2br($history->fld_details).'</td>
                        </tr>';
                }


					?>
                                            <tr>
                                                <td colspan="3" style="padding:0">
                                                    <div class="scroll_div">
                                                        <table class="table table-striped table-bordered"
                                                            style="padding:0" id="tbHistoryNotes">
                                                            <?php echo $listView; ?>
                                                        </table>

                                                    </div>
                                                </td>
                                            </tr>



                                        </table>
                                    </div>
                                    <!------------------------------------------------------------------->
                                </div>
                            </form>
                        </div>
                    </div>
                    <style>
                        .hisTopic {
                            text-transform: capitalize;
                        }

                        .scroll_div {
                            width: 100%;
                            height: auto;
                            max-height: 300px;
                            overflow-y: scroll;
                        }
                    </style>
                    <!-- ..........COACHING FORMS TAB...................-->
                    <div class="tab-pane" id="tabCoachingForm">

                        <div class="col-md-12">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h3 class="panel-title">Coaching Session Records</h3>
                                </div>
                                <div class="panel-body panel-body-table">
                                    <div class="table-responsive">
                                        <table class="table table-bordered table-striped table-actions">
                                            <thead>
                                                <tr>
                                                    <th width="50" class="text-center">S.No</th>
                                                    <th class="text-center">Form Name</th>
                                                    <th width="100" class="text-center">status</th>
                                                    <th width="150" class="text-center">Start Date</th>
                                                    <th width="150" class="text-center">Completed Date</th>
                                                    <th width="100" class="text-center">Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <?php 
					$this->load->helper('functions_helper');
						$count = 0;
						foreach($coaching_forms as $form){
						$count++;
						$status = "";
						$lblCSS ="";
						$checked ="";
						$assign_date = "";
						$completed_date ="";

						if(!empty($form->assign_date))
							$assign_date =get_userTime(date("y-m-d",$form->assign_date),"m/d/Y");
						if(!empty($form->completed_date))
							$completed_date =get_userTime(date("y-m-d",$form->completed_date),"m/d/Y");



						if($assign_date == "" && $completed_date == ""){
							$lblCSS ="label-default";
							$status ="Not Assigned";
						}
						else if($completed_date == "" && $assign_date != ""){
							$lblCSS ="label-warning";
							$status ="Assigned";
							$checked ="checked ='checked'";
							}
						else if($completed_date != "" && $assign_date != ""){
							$lblCSS ="label-success";
							$status ="Completed";			
										
						}

						echo "<tr id='cform-{$form->id}'>
							<td>{$count}</td>
							<td>{$form->title}</td>
							<td class='cform-status  text-center'><span class='label {$lblCSS}'>{$status}</td>
							<td class='cform-adate text-center'>{$assign_date}</td>
							<td class='cform-cdate text-center'>{$completed_date}</td>
							<td class='text-center'>
								<label class=\"switch\" style='padding-top:5px;'>
										<input type=\"checkbox\" {$checked} value=\"{$form->id}\" data-id=\"{$form->fld_user_id}\" class=\"cform_status\">
										<span></span>
									</label>
								
							</td>
						</tr>";
					 } ?>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>






                    <!-- ..........Chart TAB...................-->
                    <div class="tab-pane" id="tabChart">

                        <?php
  function HTMLToRGB($htmlCode)
  {
    if($htmlCode[0] == '#')
      $htmlCode = substr($htmlCode, 1);

    if (strlen($htmlCode) == 3)
    {
      $htmlCode = $htmlCode[0] . $htmlCode[0] . $htmlCode[1] . $htmlCode[1] . $htmlCode[2] . $htmlCode[2];
    }
    
    $r = hexdec($htmlCode[0] . $htmlCode[1]);
    $g = hexdec($htmlCode[2] . $htmlCode[3]);
    $b = hexdec($htmlCode[4] . $htmlCode[5]);

    return $b + ($g << 0x8) + ($r << 0x10);
  }

  function RGBToHTML($RGB)
  {
    $r = 0xFF & ($RGB >> 0x10);
    $g = 0xFF & ($RGB >> 0x8);
    $b = 0xFF & $RGB;

    $r = dechex($r);
    $g = dechex($g);
    $b = dechex($b);
    
    return "#" . str_pad($r, 2, "0", STR_PAD_LEFT) . str_pad($g, 2, "0", STR_PAD_LEFT) . str_pad($b, 2, "0", STR_PAD_LEFT);
  }
  
  function ChangeLuminosity($RGB, $LuminosityPercent)
  {
    $HSL = RGBToHSL($RGB);
    $NewHSL = (int)(((float)$LuminosityPercent / 100) * 255) + (0xFFFF00 & $HSL);
    return HSLToRGB($NewHSL);
  }

  function RGBToHSL($RGB)
  {
    $r = 0xFF & ($RGB >> 0x10);
    $g = 0xFF & ($RGB >> 0x8);
    $b = 0xFF & $RGB;

    $r = ((float)$r) / 255.0;
    $g = ((float)$g) / 255.0;
    $b = ((float)$b) / 255.0;

    $maxC = max($r, $g, $b);
    $minC = min($r, $g, $b);

    $l = ($maxC + $minC) / 2.0;

    if($maxC == $minC)
    {
      $s = 0;
      $h = 0;
    }
    else
    {
      if($l < .5)
      {
        $s = ($maxC - $minC) / ($maxC + $minC);
      }
      else
      {
        $s = ($maxC - $minC) / (2.0 - $maxC - $minC);
      }
      if($r == $maxC)
        $h = ($g - $b) / ($maxC - $minC);
      if($g == $maxC)
        $h = 2.0 + ($b - $r) / ($maxC - $minC);
      if($b == $maxC)
        $h = 4.0 + ($r - $g) / ($maxC - $minC);

      $h = $h / 6.0; 
    }

    $h = (int)round(255.0 * $h);
    $s = (int)round(255.0 * $s);
    $l = (int)round(255.0 * $l);

    $HSL = $l + ($s << 0x8) + ($h << 0x10);
    return $HSL;
  }

  function HSLToRGB($HSL)
  {
    $h = 0xFF & ($HSL >> 0x10);
    $s = 0xFF & ($HSL >> 0x8);
    $l = 0xFF & $HSL;

    $h = ((float)$h) / 255.0;
    $s = ((float)$s) / 255.0;
    $l = ((float)$l) / 255.0;

    if($s == 0)
    {
      $r = $l;
      $g = $l;
      $b = $l;
    }
    else
    {
      if($l < .5)
      {
        $t2 = $l * (1.0 + $s);
      }
      else
      {
        $t2 = ($l + $s) - ($l * $s);
      }
      $t1 = 2.0 * $l - $t2;

      $rt3 = $h + 1.0/3.0;
      $gt3 = $h;
      $bt3 = $h - 1.0/3.0;

      if($rt3 < 0) $rt3 += 1.0;
      if($rt3 > 1) $rt3 -= 1.0;
      if($gt3 < 0) $gt3 += 1.0;
      if($gt3 > 1) $gt3 -= 1.0;
      if($bt3 < 0) $bt3 += 1.0;
      if($bt3 > 1) $bt3 -= 1.0;

      if(6.0 * $rt3 < 1) $r = $t1 + ($t2 - $t1) * 6.0 * $rt3;
      elseif(2.0 * $rt3 < 1) $r = $t2;
      elseif(3.0 * $rt3 < 2) $r = $t1 + ($t2 - $t1) * ((2.0/3.0) - $rt3) * 6.0;
      else $r = $t1;

      if(6.0 * $gt3 < 1) $g = $t1 + ($t2 - $t1) * 6.0 * $gt3;
      elseif(2.0 * $gt3 < 1) $g = $t2;
      elseif(3.0 * $gt3 < 2) $g = $t1 + ($t2 - $t1) * ((2.0/3.0) - $gt3) * 6.0;
      else $g = $t1;

      if(6.0 * $bt3 < 1) $b = $t1 + ($t2 - $t1) * 6.0 * $bt3;
      elseif(2.0 * $bt3 < 1) $b = $t2;
      elseif(3.0 * $bt3 < 2) $b = $t1 + ($t2 - $t1) * ((2.0/3.0) - $bt3) * 6.0;
      else $b = $t1;
    }

    $r = (int)round(255.0 * $r);
    $g = (int)round(255.0 * $g);
    $b = (int)round(255.0 * $b);

    $RGB = $b + ($g << 0x8) + ($r << 0x10);
    return $RGB;
  }

  
?>
                        <?php
    
    $counter = 0;
   $base_color = HTMLToRGB("#ff0000");
   $i = 0;
//    foreach($completed_forms as $completed_form){
//        
//        $get_form_name=$this->db->get_where('mys_coaching_forms',array('id'=>$completed_form->fld_form_id));
//        $row_form_name=$get_form_name->row_array();
//        
//        if($completed_form->completed_date!=''){
//           $new_color = ChangeLuminosity($base_color, $i * 10 + 5);
//           $json_data .= '{ "country": "'.trim($row_form_name['title']).'", "litres":5, "color": "'.RGBToHTML($new_color).'"},';
//        } else {
//            $counter+=5;
//        }
//        
//        
//   $i++; }
//    
//    $json_data .= '{ "country": "Not Completed", "litres":"'.$counter.'", "color": "#D3D3D3"},';
   
   
   foreach($coaching_forms as $form){
       //if($form->id!='31'){
       $get_completed_form=$this->db->get_where('mys_marketing_form_user',array('fld_user_id'=>$user_id,'fld_form_id'=>$form->id));
        $row_completed=$get_completed_form->row_array();
        
        if($row_completed['completed_date']!=''){
            $new_color = ChangeLuminosity($base_color, $i * 10 + 5);
            $json_data .= '{ "country": "'.trim($form->title).'", "litres":5, "title":"avwal", "color": "'.RGBToHTML($new_color).'"},';
            $i++;
        } else {
            $json_data .= '{ "country": "'.trim($form->title).'", "litres":"5", "title":"", "color": "#D3D3D3" },';
        }

       //}
    }
    
    
?>


                        <div class="col-md-12">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h3 class="panel-title">Chart</h3>
                                </div>
                                <div class="panel-body panel-body-table">
                                    <div class="table-responsive">
                                        <!-- Styles -->
                                        <style>
                                            #chartdiv {
                                                width: 100%;
                                                height: 500px;
                                            }
                                        </style>

                                        <!-- Resources -->


                                        <script src="//www.amcharts.com/lib/3/amcharts.js"></script>
                                        <script src="//www.amcharts.com/lib/3/pie.js"></script>
                                        <script src="//www.amcharts.com/lib/3/themes/light.js"></script>




                                        <!-- Chart code -->
                                        <script>
                                            var chart = AmCharts.makeChart("chartdiv", {
                                                "type": "pie",
                                                "theme": "light",
                                                "outlineColor": "",
                                                "dataProvider": [  <? php echo $json_data; ?>
      
  ],
                                            "valueField": "litres",
                                                "titleField": "country",
                                                    "colorField": "color",
                                                        "labelText": "[[title]]",
                                                            "balloon": {
                                                "fixedPosition": true
                                            },
                                            "balloonText": "[[title]]",
                                                "export": {
                                                "enabled": true
                                            }
} );
                                        </script>



                                        <div id="chartdiv"></div>


                                        <!-- HTML -->

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>



                    <!-- REPORT TAB -->
                    <?

?>
                    <div class="tab-pane" id="tabReports">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <h3 class="push-down-0">Reports</h3>
                            </div>
                            <div class="panel-body">
                                <div class="col-lg-12">
                                    <div class="form-inline">
                                        <div class="form-group">
                                            <label>Report Of:&nbsp;&nbsp;</label>

                                            <select id="ddlreportof" name="ddlreportof" class="form-control"
                                                style="width:400px;">
                                                <option value="">-select</option>
                                                <?php foreach($modules as $key => $value)
                        {
                           
                           echo "<option value='{$key}'>{$value}</option>";
                            
                        }
                    ?>
                                            </select>&nbsp;<button type="button" class="btn btn-warning reportdata"
                                                data-id="<?php echo $user_id;?>">Show</button>
                                        </div>
                                    </div>
                                    <div class="clearfix"><br></div>
                                    <div class="col-lg-12" id="dvreportresult">

                                    </div>
                                </div>



                            </div>
                        </div>
                    </div>
                    <!- end tabReports -->
                </div>

            </div>
        </div>
    </div>
    <!-- END JUSTIFIED TABS -->
</div>



</div>
</div>
</div>
<!-- END PAGE CONTENT WRAPPER -->



<!-- MODALS -->
<div class="modal animated fadeIn" id="modal_change_photo" tabindex="-1" role="dialog" aria-labelledby="smallModalHead"
    aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">Close</span></button>
                <h4 class="modal-title" id="smallModalHead">Change photo</h4>
            </div>
            <form id="cp_crop" method="post" action="../assets/crop_image.php">
                <div class="modal-body">
                    <div class="text-center" id="cp_target">Use form below to upload file. Only .jpg files.</div>
                    <input type="hidden" name="cp_img_path" id="cp_img_path" />
                    <input type="hidden" name="ic_x" id="ic_x" />
                    <input type="hidden" name="ic_y" id="ic_y" />
                    <input type="hidden" name="ic_w" id="ic_w" />
                    <input type="hidden" name="ic_h" id="ic_h" />
                </div>
            </form>
            <form id="cp_upload" method="post" enctype="multipart/form-data" action="../assets/upload_image.php">
                <div class="modal-body form-horizontal form-group-separated">
                    <div class="form-group">
                        <label class="col-md-4 control-label">New Photo</label>
                        <div class="col-md-4">
                            <input type="file" class="fileinput btn-info" name="file" id="cp_photo"
                                data-filename-placement="inside" title="Select file" />
                        </div>
                    </div>
                </div>
            </form>
            <div class="modal-footer">
                <button type="button" class="btn btn-success disabled" id="cp_accept">Accept</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<form action="#" method="post" class="form-horizontal">
    <div class="modal animated fadeIn" id="modal_change_password" tabindex="-1" role="dialog"
        aria-labelledby="smallModalHead" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span
                            aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title" id="smallModalHead">Change password</h4>
                </div>
                <div id="error_container"></div>
                <div class="modal-body">

                </div>
                <div class="modal-body form-horizontal form-group-separated">
                    <div class="form-group">
                        <label class="col-md-3 control-label">Old Password</label>
                        <div class="col-md-9">
                            <input type="password" class="form-control" id="old_password" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label">New Password</label>
                        <div class="col-md-9">
                            <input type="password" class="form-control" id="new_password" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label">Repeat New</label>
                        <div class="col-md-9">
                            <input type="password" id="re_password" class="form-control" />
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="#" id="change_password_yogi" data-id="<?php echo $user_id; ?>"
                        class="btn btn-danger">Proccess</a>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</form>
<!-- EOF MODALS -->
<div class="message-box  animated fadeIn popup-scroll" id="message-box-pdfview">
    <div class="mb-container">
        <div class="mb-middle">
            <div class="mb-title">
                <div class="pull-right"> <span class="fa fa-close  mb-control-close"
                        onclick="javascript:$('#message-box-pdfview').hide();"></span></div>
            </div>
            <div class="mb-content" id="pdfcontent"></div>
            <div class="mb-footer"><button class="btn btn-default btn-lg pull-right mb-control-close"
                    onclick="javascript:$('#message-box-pdfview').hide();">Close</button></div>
        </div>
    </div>
</div>
<!-- BLUEIMP GALLERY -->
<div id="blueimp-gallery" class="blueimp-gallery blueimp-gallery-controls">
    <div class="slides"></div>
    <h3 class="title"></h3>
    <a class="prev">‹</a>
    <a class="next">›</a>
    <a class="close">×</a>
    <a class="play-pause"></a>
    <ol class="indicator"></ol>
</div>
<?php } ?>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - file - input.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / bootstrap / bootstrap - select.js"></script>

<!-- END BLUEIMP GALLERY -->
<!-- INPUT IMAGE UPLOAD VIEW -->
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / image - preview / imagepreview.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / image - preview / imagepreview - custom.js"></script>
<script>
    var options = [];

    $('.dropdown-menu a').on('click', function (event) {

        var $target = $(event.currentTarget),
            val = $target.attr('data-value'),
            $inp = $target.find('input'),
            idx;
        options.push(val);
        setTimeout(function () { $inp.prop('checked', true) }, 0);
        $('#show_val').val($inp.attr('value'));
        $('#show_val').dropdown - menu('hide');
        $(event.target).blur();

        return false;
    });

    $(document).ready(function () {

        $(".faq .faq-item .faq-title").click(function () {
            var item = $(this).parent('.faq-item');

            if (item.hasClass("active"))
                $(this).find(".fa").removeClass("fa-angle-up").addClass("fa-angle-down");
            else
                $(this).find(".fa").removeClass("fa-angle-down").addClass("fa-angle-up");

            item.toggleClass("active");

            onresize(300);
        });
        $("#addHistory").click(function () {
            var cid = $(this).attr('data-id');
            var topic = $("#ddlHistoryTopic").val();
            var notes = $("#historyNotes").val();

            if (topic == "") {
                alert("Please select topic.");
                $("#ddlHistoryTopic").focus();
                return false;
            } else if ($.trim(notes) == "") {
                alert("Please enter notes.");
                $("#historyNotes").focus();
                return false;
            }
            else {
                $.ajax({
                    url: home_url + "admin/add_history_notes",
                    data: { "cid": cid, "topic": topic, "notes": notes },
                    dataType: "json",
                    type: "POST",
                    success: function (response) {
                        if (response.status == '1') {
                            $("#historyNotes").val("");
                            $("#historyNotes").focus();
                            $("#tbHistoryNotes").html(response.data);

                        } else {
                            alert(response.message);
                        }
                    }
                });

            }

        });
        $("#ddlreportof").change(function () {
            $("#dvreportresult").html("");
            var reportof = $("#ddlreportof").val();
            if (reportof != "")
                $(".reportdata").click();
        })
        $(".reportdata").click(function () {
            $("#dvreportresult").html("<img src='<?php echo base_url();?>assets/img/processing.gif' alt='loading' />");
            var reportof = $("#ddlreportof").val();
            debugger;
            $.get(home_url + "admin/get_report_records/<?php echo $user_id;?>/" + reportof + "/show"
                , "", function (response) {
                    $("#dvreportresult").html(response);
                });
        })

        downloadreport = function (obj) {
            var recid = $(obj).attr('data-id');
            var mod = $(obj).attr('data-name');
            url = home_url + "admin/get_client_report/" + recid + "/" + <? php echo $user_id;?> +"/" + mod + "/download";
            window.location.assign(url);
        };
        viewreport = function (obj) {
            var recid = $(obj).attr('data-id');
            var mod = $(obj).attr('data-name');
            $.get(home_url + "admin/get_client_report/" + recid + "/" +<? php echo $user_id;?> +"/" + mod + "/view", "", function (response) {

                if (response != '') {
                    $('#pdfcontent').html(response);
                    $("#message-box-pdfview").show(1000);
                }
                else {
                    $('#error_container').html('<div class="alert alert-warning fade in"><strong></strong> ' + response + '</div>').show();
                    $("#error_container").show().delay(3000).queue(function (n) {
                        $(obj).hide();
                    });
                }

            });
		}
    sendreport = function (obj) {
        var recid = $(obj).attr('data-id');
        var mod = $(obj).attr('data-name');
        $.get(home_url + "admin/get_client_report/" + recid + "/" +<? php echo $user_id;?> +"/" + mod + "/send", "", function (response) {
            if (response = "sent") {
                $('#error_container').html('<div class="alert alert-success fade in"><strong>Success!</strong>Mail has been sent.</div>').show();
                $("#error_container").show().delay(3000).queue(function (n) {
                    //$(obj).hide();
                });
            }
            else {
                $('#error_container').html('<div class="alert alert-warning fade in"><strong></strong> ' + response + '</div>').show();
                $("#error_container").show().delay(3000).queue(function (n) {
                    //$(this).hide();
                });
            }

        });
    };









    $(".rmnotes").click(function () {
        if (confirm("Are you sure?")) {
            var id = $(this).attr('data-id');
            var cid = $(this).attr('client-id');
            $.get(home_url + "admin/delete_chakra_reading_notes", { "id": id, "cid": cid }, function (response) {
                if (response = "success") {
                    console.log(response);
                    $("#trnote_" + id).hide(300);
                }
                else {

                }
            });
        }
    });


	});


</script>
<script>
	//$("#front-torso").glassCase({ 'widthDisplay': 310, 'heightDisplay': 461, 'isSlowZoom': true, 'colorIcons': '#F15129', 'colorActiveThumb': '#F15129' });
	//$("#fronttorso").glassCase();
</script>

<script type="text/javascript">
    $(document).ready(function () {
        //If your <ul> has the id "glasscase"
        $('#fronttorso').glassCase();
    });
    $(document).ready(function () {
        $(".alert-danger").fadeOut(8000);
        setActiveTab("<?php echo $activeTab;?>");
        $(".client_status").click(function () {
            var _id = $(this).val();
            var _status = $(this).is(":checked") ? "1" : "0";
            $.get(home_url + "admin/update_client_status/" + _id + "/" + _status, "", function (response) {
                console.log(response);
            });
        });
        $(".cform_status").click(function () {
            var curObj = this;
            var _id = $(this).val();
            var _mid = $(this).attr("data-id");
            var _status = $(this).is(":checked") ? "1" : "0";
            $.get(home_url + "admin/update_coaching_form_status/" + _id + "/" + _mid + "/" + _status, "", function (response) {
                if (response != "0") {
                    $(curObj).closest("tr").children('td.cform-cdate').html("");
                    if (_status == "1") {
                        $(curObj).closest("tr").children('td.cform-adate').html("Today");
                        $(curObj).closest("tr").children('td.cform-status').children('span').html("Assigned");
                        $(curObj).closest("tr").children('td.cform-status').children('span').removeClass("label-default")
                        $(curObj).closest("tr").children('td.cform-status').children('span').addClass("label-warning")
                    }
                    else {
                        $(curObj).closest("tr").children('td.cform-adate').html("");
                        $(curObj).closest("tr").children('td.cform-status').children('span').html("Not Assigned");
                        $(curObj).closest("tr").children('td.cform-status').children('span').removeClass("label-warning")
                        $(curObj).closest("tr").children('td.cform-status').children('span').addClass("label-default")

                    }



                }
            });
            console.log('id:' + _id + " mid: " + _mid + " status: " + _status);
        });
        $(".checklist_checkbox").click(function () {
            var curObj = this;
            var _status = $(this).is(":checked") ? "1" : "0";
            var _id = $(this).val();
            var _mid = $(this).attr('data-id');
            $.get(home_url + "admin/update_coach_checklist/" + _id + "/" + _mid + "/" + _status, "", function (response) {
                if (response != "0") {
                    if (_status == "1")
                        $(curObj).closest("div").addClass("checked")
                    else
                        $(curObj).closest("div").removeClass("checked")
                }
            });

        });


    });

    function setActiveTab($tabid) {
        if ($('.nav-tabs a[href="#tab' + $tabid + '"]').attr('data-toggle'))
            $('.nav-tabs a[href="#tab' + $tabid + '"]').click();
        else
            $('.nav-tabs a[href="#tabChecklist"]').click();
    }    
</script>

<style>
    #autofill {
        text-decoration: none;
        display: block;
        width: 50%;
    }

    #sh_hd {
        margin-left: 15px;
    }
</style>
<script type="text/javascript" src="<?php echo base_url()." assets/";?>js / demo_edit_profile.js"></script>


<?php
$this->load->view('yogiccoach/footer');
?>
</xmp></code></pre>
<p>view coach payment</p>
<img class="img-fluid" src="image/viewcoachpaymentadmin.png" alt="Login Page" height="100">
<br><br>
<p>view coach payment Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function view_teachers_payments(){

$this->db->order_by("fld_id", "desc");

$Payments = $this->db->get_where("payments");

$Profiles = $this->db->get_where("payment_profile");

$data = array(

"payments" => $Payments->result(),

"profiles" => $Profiles->result()

);

$this->load->view("admin/view_teachers_payments",$data);

}</xmp></code></pre>
<p>view coach payment view</p>
<code>application/views/admin/view_teachers_payments.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('admin/sidebar');
$catRow='';
$CI =& get_instance();
$CI->load->model("user_model");
?>
<ul class="breadcrumb push-down-1">
    <li><a href="<?php echo base_url()." admin/";?>">Dashboard</a></li>
    <li class="active"><a href="<?php echo base_url();?>admin/view_create_teacher">Coaches</a></li>
    <li class="active">Payments</li>
</ul>
<h2>&nbsp;&nbsp;Coach Payments</h2>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <!-- START WIDGETS -->
    <form action="#" class="form-horizontal" method="post">
        <div class="row">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default tabs">
                        <div class="panel-body tab-content">
                            <!-- PROFILE -->
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped table-actions">
                                    <thead>
                                        <tr>
                                            <th>S.No.</th>
                                            <th>Payment Date</th>
                                            <th>Coach</th>
                                            <th>Invoice#</th>
                                            <th>Plan/Item</th>
                                            <th>Payment</th>
                                            <th>Paypal Fees</th>
                                            <th>Transaction#</th>
                                            <th>Type</th>
                                            <th>Status</th>
                                            <th>Verified</th>
                                            <th class="text-center">Promo</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        <?php
                                        $row_cont=0;
                                        $Total_Payment =0;
                                        $Total_Fees= 0;
                                        foreach ($payments as $payment){
                                            $Total_Payment +=$payment->payment_gross;
                                            $Total_Fees += $payment->payment_fee;
                                            $row_cont++;
                                            ?>
                                        <tr>
                                            <td>
                                                <?php echo $row_cont;?>
                                            </td>
                                            <td>
                                                <?php echo date("m/d/Y",strtotime($payment->payment_date));?>
                                            </td>
                                            <td>
                                                <?php echo $CI->user_model->get_user_display_name($payment->fld_user_id);?>
                                            </td>
                                            <td>
                                                <?php echo $payment->invoice_no;?>
                                            </td>

                                            <td>
                                                <?php echo $payment->item_name;?>
                                            </td>
                                            <td class="text-right">
                                                <?php echo money_format('%i', $payment->payment_gross);?>
                                            </td>
                                            <td class="text-right">
                                                <?php echo money_format('%i', $payment->payment_fee);?>
                                            </td>
                                            <td>
                                                <?php echo $payment->txn_id;?>
                                            </td>
                                            <td>
                                                <?php echo $payment->txn_type;?>
                                            </td>
                                            <td>
                                                <?php echo $payment->payment_status;?>
                                            </td>
                                            <td>
                                                <?php echo $payment->ipn_status;?>
                                            </td>
                                            <td>
                                                <?php echo $payment->promo_code;?>
                                            </td>
                                        </tr>
                                        <?php }
                                        if($row_cont == 0)
                                            echo "<tr><td colspan='12' class='text-center '>No payments made.</td></tr>";
                                        else
                                            echo "<tr><td colspan='5' class='text-center '>Total</td><td class=\"text-right\">". money_format('%i', $Total_Payment)."</td><td class=\"text-right\">". money_format('%i', $Total_Fees)."</td><td colspan='5'></td></tr>";
                                        ?>

                                    </tbody>
                                </table>
                            </div>


                        </div>
                    </div>
                </div>
            </div>
        </div>

    </form>
</div>
<!-- END WIDGETS -->
<!-- END PAGE CONTENT WRAPPER -->
<?php
$this->load->view('admin/footer');
?>
</xmp></code></pre>
<p>create client</p>
<img class="img-fluid" src="image/createclientadmin.png" alt="Login Page" height="100">
<br><br>
<p>create client Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function create_student()

{

if(isset($_POST['save'])){

$student_counrse='';

$idByAdmin=$_POST['id_by_admin'];

$status=$_POST['status'];

$name=$_POST['name'];

$username=$_POST['username'];

$password=$_POST['password'];

$email=$_POST['email'];

if(isset($_POST['student_counrse'])){

$student_counrse=$_POST['student_counrse'];}

$rand_code = 'M'.rand();



//$courseID=explode(',',$_POST['hidden_box']);



$course_data=array();

if(!empty($student_counrse) && (count($student_counrse)>0)){

foreach($student_counrse as $data)

{

$date=$_POST['date_'.$data];

$courseName=$_POST['course_name_'.$data];

$trainedBy=$_POST['trained_'.$data];

$location=$_POST['location_'.$data];

$course_data[]=array('course_id'=>$data,'course_name'=>$courseName,'complete_date'=>$date,'trained_by'=>$trainedBy,'location'=>$location);

}}

$courseDetails=serialize($course_data);

//print_r($courseDetails);exit;



$isEmailExist=$this->db->get_where("users",array('fld_email'=>$email));

$isUsernameExist=$this->db->get_where("users",array('fld_username'=>$username));

if (!($isEmailExist->num_rows()>0)) {

if (!($isUsernameExist->num_rows()>0)) {

$data = array(

'fld_first_name' => $name,

'fld_username' => $username,

'fld_password' => $password,

'fld_email' => $email,

'fld_status' => $status,

'fld_rand_code' => $rand_code,

'fld_user_type' => 'member',

'fld_create_by' => 'admin',

'fld_varification' => '0',

'fld_added_date' => time(),
'fld_last_name' => '',
'fld_program' => '',
'fld_sponsor' => '',
'fld_modified_date' => ''

);





$this->db->insert('users', $data);

$insert_id = $this->db->insert_id();

if($this->db->affected_rows()){



$dataRslt = array(

'fld_id_by_admin' => $idByAdmin,

'fld_user_id' => $insert_id,

'fld_course_details' => $courseDetails,

'fld_added_date' => time()

);

$this->db->insert('create_student', $dataRslt);



if($this->db->affected_rows()){





######SEND EMAIL

$to = $email;

$subject = "Username Password - MyPortalX ";



$message = "<table width='600' align='center' id='TbHeader' bgcolor='#400080' border='0' cellspacing='0'
    cellpadding='4'>
    <tr>
        <td align='center' id='TdHeader' bgcolor='#400080'>
            <p align='center'>
                <font color='#ffffff' face='Arial, Helvetica, sans-serif' size='6'><strong>Welcome</strong></font>
            </p>
        </td>
    </tr>
</table>
<table width='600' align='center' id='TbBodyRow' border='0' cellspacing='0' cellpadding='0'>
    <tr>
        <td id='TdBodyRow' valign='top' bgcolor='#ffffff'>
            <table width='100%' id='TbBody' bgcolor='#ffffff' border='0' cellspacing='0' cellpadding='4'>
                <tr>
                    <td align='center' id='TdBody' bgcolor='#ffffff'>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<p align='left'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'><strong>Hello,
                                    ".$username." &nbsp;<font color='#000000'
                                        face='Verdana, Arial, Helvetica, sans-serif' size='3'>&nbsp;</font></strong>
                            </font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        </p>
                        <p align='justify' style='margin-right: 0px;'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'>Thank you for
                                Registering with us. Please click on the following link and use the verification code to
                                gain access to your account.</font>
                        </p>
                        <p align='justify' style='margin-right: 0px;'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'>Your
                                verification code: ".$rand_code."</font>
                        </p>
                        <p align='justify' style='margin-right: 0px;'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'><b>User Name:
                                    ".$username."</b></font>
                        </p>
                        <p align='justify' style='margin-right: 0px;'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'><b>Password:
                                    ".$password."</b></font>
                        </p>
                        <p align='justify' style='margin-right: 0px;'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'>Follow this
                                link: <a href='". base_url()."login' target='_blank'>MyPortalX</a></font>
                        </p>
                        <p align='justify' style='margin-right: 0px;'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'></font>
                        <p align='justify' style='margin-right: 0px;'>
                            <font color='#000000' face='Verdana, Arial, Helvetica, sans-serif' size='3'><br></font>
                        </p>
                        </p>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table><strong></strong><strong></strong><strong></strong>
<table width='600' align='center' id='TbFooter' bgcolor='#eea000' border='0' cellspacing='0' cellpadding='4'>
    <tr>
        <td align='center' id='TdFooter' bgcolor='#eea000'>
            <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'>
                <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                        style='color: rgb(0, 52, 89); line-height: inherit; font-size: inherit; font-weight: bold; text-decoration: inherit;'><span
                            style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: inherit; text-decoration: inherit;'><br></span></span>
                </div>
                <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                        style='color: rgb(0, 52, 89); line-height: inherit; font-size: inherit; font-weight: bold; text-decoration: inherit;'><span
                            style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: inherit; text-decoration: inherit;'>Namaste!</span><br
                            style='color: rgb(0, 52, 89);'></span></div>
                <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                        style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: bold; text-decoration: inherit;'>Rajah
                        Sharma</span></div>
                <div style='margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);'><span
                        style='color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: bold; text-decoration: inherit;'><br></span>
                </div>
            </div>
        </td>
    </tr>
</table>";

$header = "From: MyPortalX \r\n";

$header .= "MIME-Version: 1.0\r\n";

$header .= "Content-type: text/html\r\n";



$retval = mail ($to,$subject,$message,$header);



if( $retval == true ){

echo "<div class=\"alert alert-success\"><strong>Mail sent successfully.</strong>.<a href=\"#\" class=\"close\"
        data-dismiss=\"alert\" aria-label=\"close\">&times;</a></div>";

}else{

echo "<div class=\"alert alert-warning\"><strong>Mail not send. </strong>.<a href=\"#\" class=\"close\"
        data-dismiss=\"alert\" aria-label=\"close\">&times;</a></div>";

}

######SEND EMAIL

}

}else{

echo "<div class=\"alert alert-warning\"><strong>Database Error..! </strong>.<a href=\"#\" class=\"close\"
        data-dismiss=\"alert\" aria-label=\"close\">&times;</a></div>";

}



}else{

echo "<div class=\"alert alert-warning\"><strong>username already in use. </strong>.<a href=\"#\" class=\"close\"
        data-dismiss=\"alert\" aria-label=\"close\">&times;</a></div>";

}

}else{

echo "<div class=\"alert alert-warning\"><strong>Email id already exist. </strong>.<a href=\"#\" class=\"close\"
        data-dismiss=\"alert\" aria-label=\"close\">&times;</a></div>";

}

}

$this->load->view('admin/create_student');

}</xmp></code></pre>
<p>create client view</p>
<code>application/views/admin/create_student.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('admin/sidebar');
$courseDetails=$this->Common_model->get_table_records('course_list_student');
//print_r($courseDetails);exit;

?>
<!-- START BREADCRUMB -->
<ul class="breadcrumb">
    <li><a href="<?php echo base_url()." admin/";?>">Dashboard</a></li>
    <li class="active"><a href="#">Create Member</a></li>
</ul>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-title">
    <h2>Create Member</h2>
</div>
<div class="page-content-wrap">

    <div class="col-md-12">
        <form action="#" method="post" class="form-horizontal">
            <div class="panel panel-default">
                <div class="panel-body">
                    <div class="row">
                        <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
                            <div class="form-group">
                                <label>ID #</label>
                                <input type="text" name="id_by_admin" value="M<?php echo rand(); ?>"
                                    class="form-control textfield_width">
                            </div>

                            <div class="form-group">
                                <label>Name :</label>
                                <input type="text" name="name" class="form-control textfield_width">
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
                            <div class="form-group">
                                <label>Username :</label>
                                <input type="text" name="username" class="form-control textfield_width">
                            </div>

                            <div class="form-group">
                                <label>Password :</label>
                                <input type="password" name="password" autocomplete="new-password"
                                    class="form-control textfield_width">
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
                            <div class="form-group">
                                <label>Email :</label>
                                <input type="email" name="email" class="form-control textfield_width">
                            </div>

                            <div class="form-group">
                                <label>Status :</label>
                                <select class="table-group-action-input form-control input-medium" name="status">
                                    <option value="1">Active</option>
                                    <option value="0">Note active</option>
                                </select>
                            </div>
                        </div>

                    </div>

                    <div class="form-control border_none">
                        <div class="col-md-11 col-xs-12" style="overflow-x:auto;">
                            <table>
                                <tr>
                                    <th class="course_name_headding">Course Name</th>
                                    <th class="course_name_headding">Complete on Date :</th>
                                    <th class="course_name_headding">Trained By :</th>
                                    <th class="course_name_headding">Location :</th>
                                </tr>
                                <!----------Table is mys_create_teacher------------->
                                <?php
										$courseID='';
										foreach($courseDetails as $course){
											$courseID=$courseID==''?$course->fld_id:$courseID.','.$course->fld_id;
											echo 	  
												  '<tr>
														<td class="col-md-4" value="'.$course->fld_id.'"><b>'.$course->fld_course_name.'<b>
																<input type="hidden" class="form-control" value="'.$course->fld_course_name.'" name="course_name_'.$course->fld_id.'" ><br><br></td>
														<td class="col-md-3"><input type="checkbox" name="student_counrse[]" value="'.$course->fld_id.'">&nbsp;<input name="date_'.$course->fld_id.'" class="textfield_width" type="date"><br><br></td>
														<td class="col-md-3"><input name="trained_'.$course->fld_id.'" class="textfield_width" type="text"><br><br></td>
														<td class="col-md-2"><input name="location_'.$course->fld_id.'" class="textfield_width" type="text"><br><br></td>
												  </tr>';
											
											 } ?>

                            </table>
                            <input type="hidden" class="form-control" value="<?php echo $courseID; ?>"
                                name="hidden_box" />
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-12 col-xs-12">
                            <button name="save" class="btn btn-primary btn-rounded pull-right">Save</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>

</div>


<?php
 $this->load->view('admin/footer');
?>
</xmp></code></pre>
<p>view client list</p>
<img class="img-fluid" src="image/viewclientlistadmin.png" alt="Login Page" height="100">
<br><br>
<p>view client list Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function view_create_student()
{
    $this->load->view('admin/view_create_student');
}
public function remove_student($id = 0){

if($id ==0)

echo "failed";

else {

$ret = $this->delete_user_related_data($id);

if ($ret == 1) {

echo "success";

}

else

echo "error";

}

}</xmp></code></pre>
<p>view client list view</p>
<code>application/views/admin/view_create_student.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('admin/sidebar');
error_reporting(0);
//$studentDetails=$this->Common_model->get_table_records_with_dependence('users','create_student','fld_id','fld_user_id',array('users.fld_create_by'=>'admin'));
$studentDetails=$this->Common_model->get_table_records('users',array('fld_user_type'=>'member'));
$row_cont=1;
$catRow='';
//echo '<pre>';print_r($studentDetails);die;
$CI =& get_instance();
$CI->load->model('user_model');
foreach ($studentDetails as $row){
		$email=$row->fld_email;
		$name=$row->fld_first_name;
		$das_score = $CI->user_model->get_use_das_average($row->fld_id);
		$coach_name = $CI->user_model->get_user_display_name($row->fld_parent);
		if(stripos($coach_name,'NOT FOUND') === false)
			$coachLink ='<a href="/admin/view_teacher_details?id='.$row->fld_parent.'">'.$coach_name.'</a>';
		else
			$coachLink = $coach_name;
	
			$timestamp=$row->fld_added_date;
			$generat_date=date('m/d/Y',$timestamp);
				
				
				$catRow.='<tr class="gradeA" id="tr_'.$row->fld_id.'">
							<td class="text-center">'.$row_cont.'</td>
							<td>'.$name.'</td>
							<td>'.$email.'</td>
							<td class="text-center">'.$das_score.'</td>
							<td class="text-center">'.$coachLink. '</td>
							
							<td class="text-center">'.$generat_date.'</td>
							<td class="text-center"> 
							<a href="'. base_url().'admin/view_student_details?id='.$row->fld_id.'" class="btn btn-warning right" > View</a>&nbsp;&nbsp;
							<a class="btn btn-danger  btn-circle delete_student" data-id="'.$row->fld_id.'" href="javascript:void(0);"><i class="fa fa-trash-o"></i></a></td>
						  </tr>';
			$row_cont++;
								  
	
}
?>

<!-- START BREADCRUMB
			<td><a href="'.base_url().'admin/view_student_details/'.$Row->fld_id.'" class="btn btn-warning right" > View</a></td>-->
<ul class="breadcrumb push-down-1">
    <li><a href="<?php echo base_url()." admin/";?>">Dashboard</a></li>
    <li class="active"><a href="#">View Member</a></li>
</ul>
<h2>&nbsp;&nbsp; View Member List</h2>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <!-- START WIDGETS -->
    <form action="#" class="form-horizontal" method="post">
        <div class="row">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-body panel-body-table">
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped table-actions">
                                    <thead>
                                        <tr>
                                            <th class="text-center">S.No.</th>
                                            <th class="text-center">Name</th>
                                            <th class="text-center">Email</th>
                                            <th class="text-center">DAS<br><i style="font-size:10px;">(Weekly
                                                    average)</i> </th>
                                            <th class="text-center">Coach</th>
                                            <th class="text-center">Date Created</th>
                                            <th class="text-center">actions</th>
                                        </tr>
                                    </thead>
                                    <?php echo $catRow;?>
                                    <tbody>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!-- END WIDGETS -->
</div>
<!-- END PAGE CONTENT WRAPPER -->



<script>
    $(function () {
        $(document)
            .on('click', '.delete_student', function () {

                if (confirm("Are you sure you want to delete this user?")) {

                    if (confirm("It will remove all data related to this user.\n\n **** You can't UNDO this action.****\n\nAre you still sure?")) {
                        var _id = $(this).attr('data-id');

                        $.get(home_url + "admin/remove_student/" + _id, "", function (response) {
                            console.log(response);

                            if (response = "success") {
                                $("#tr_" + _id).hide(300);
                            }
                            else {

                            }
                        });
                    }
                }
            });


    });
</script>
<!-- END SCRIPTS -->
<?php
 $this->load->view('admin/footer');
 ?>
</xmp></code></pre>
<p>message</p>
<img class="img-fluid" src="image/messageadmin.png" alt="Login Page" height="100">
<br><br>
<p>message Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function messages($member_id=0)

{ $data['member_id']=$member_id;



$this->load->view('admin/messages',$data);

}
public function send_text_message(){



$messageTxt = $_POST['messageTxt'];

$sender_id = $this->adminid;

$receiver_id = $_POST['receiver_id'];

$date = date('Y-m-d H:i:s');

$ip_address = $this->input->ip_address();



$res = "INSERT INTO `mys_chat`(`sender_id`, `receiver_id`, `massage`, `message_date_time`, `ip_address`) VALUES
('$sender_id','$receiver_id','$messageTxt' ,'$date','$ip_address')";

$this->db->query($res);

}



public function get_chat_history(){

$receiver_id = $_POST['receiver_id'];
$senderid = $this->adminid;
$Logged_sender_id = $this->adminid;


$query =$this->db->query("SELECT * FROM `mys_chat` WHERE `sender_id`= '$senderid' AND `receiver_id` = '$receiver_id' OR
`sender_id`= '$receiver_id' AND `receiver_id` = '$senderid' ORDER BY `fld_id`");

$history = $query->result_array();
// print_r($history);
// exit();
foreach($history as $chat):

$message_id = $chat['fld_id'];
$sender_id = $chat['sender_id'];

$userData = $this->db->get_where('users',array('fld_id'=> $sender_id));
if ($userData->num_rows()>0) {
$userRow = $userData->row_array();
$image_path=($userRow['fld_file_name']!='')?$userRow['fld_file_name']:'assets/uploads/member/'.'user_thumb.png';
$image = base_url().$image_path;
}


$this->load->model('user_model');
$sendername = $this->user_model->GetName($chat['sender_id']);
$messageBody = $chat['massage'];
$messagedatetime = date('d M H:i A',strtotime($chat['message_date_time']));

if($Logged_sender_id!=$sender_id){ ?>
<!-- Message. Default to the left -->
<div class="chat friend">
    <div class="chats">
        <div class="user-photo"><img src="<?php echo $image ?>" alt="John Doe" /></div>
        <p class="chat-massage">
            <?=$messageBody;?><br><span class="username">
                <?=$sendername?>
                <?=$messagedatetime;?>
            </span>
        </p>
    </div>
</div>
<!-- /.direct-chat-msg -->
<?php }else{?>
<!-- Message to the right -->
<div class="chat self">
    <div class="chates">
        <div class="user-photo"><img src="<?php echo $image ?>" alt="John Doe" /></div>
        <p class="chat-massage">
            <?=$messageBody;?><br><span class="username">
                <?=$sendername?>
                <?=$messagedatetime;?>
            </span>
        </p>
    </div>
</div>
<!-- /.direct-chat-msg -->
<?php }
			endforeach;				
			$this->db->where(array('receiver_id' => $senderid,  'sender_id' =>$receiver_id));
			$this->db->set("status","1");
			$this->db->update("chat");
	}

	public function delet_chat(){

		$receiver_id = $_POST['receiver_id'];

		$senderid =  $this->adminid;



		$query =$this->db->query("SELECT * FROM `mys_chat` WHERE `sender_id`= '$senderid' AND `receiver_id` = '$receiver_id' OR `sender_id`= '$receiver_id' AND `receiver_id` = '$senderid'");



		$history = $query->result_array();

		$date = date('d');

		// print_r($history);

		// exit();

		foreach($history as $chat):

			

			$message_id = $chat['id'];

			$sender_id = $chat['sender_id'];

	

			$this->load->model('user_model');

			$sendername = $this->user_model->GetName($chat['sender_id']);

			$messageBody = $chat['massage'];

			$messagedatetime = date('d',strtotime($chat['message_date_time']));

			

			if ($messagedatetime < $date) {

				$diffDays = abs($date - $messagedatetime);

				if($diffDays > '30'){

					$this->db->delete('mys_chat', array('id' => $message_id));

				}

			}

			endforeach;

	}</xmp></code></pre>
<p>message view</p>
<code>application/views/admin/messages.php</code>
<pre><code class="language-html"><xmp><?php

$noImg=base_url().'assets/images/user_thumb.png';
    $this->load->view('admin/sidebar');
    error_reporting(0);
    $session=$this->session->get_userdata();
    $user_id=$session['user_id'];
    //$this->db->where_in('fld_user_type',array('yogiccoach','student'));
     $this->db->order_by("fld_id", "desc"); 
 $this->db->where(array('fld_parent'=> 0,'fld_user_type'=>'yogiccoach')); 
 $getTeachers=$this->db->get('users');
 $this->db->order_by("fld_id", "desc"); 
 $this->db->where(array('fld_user_type'=>'member')); 
 $getStudents=$this->db->get('users');
    $yogi_id=$this->Common_model->get_parent_id($user_id);
    //print_r($user_id);exit;
     $member_id;
    error_reporting(0);

    if(isset($_POST['send'])){
        $image_name="";
        $file_name="";
        $error='';
        
                    
        if (!empty($_FILES['type_image']['name'])) {
            $config['file_name']=strtotime(date('Y-m-d H:i:s')).'_'.$_FILES['type_image']['name'];
            $config['upload_path'] = './assets/uploads/message_image/';
            $config['max_size']= 5*1048576; 
            $config['allowed_types'] = 'jpg|png|jpeg';
            $config['overwrite'] = true; 
            $this->load->library('upload', $config);
            $this->upload->initialize($config);
            $maxsize    = 2097152;
    $acceptable = array(
       
        'image/jpeg',
        'image/jpg',
        
        'image/png'
    );

    if(($_FILES['type_image']['size'] >= $maxsize) || ($_FILES["type_image"]["size"] == 0)) {
        $error = 'File too large. File must be less than 2 megabytes.';
    }

    elseif( (!in_array($_FILES['type_image']['type'], $acceptable))  ) {
        $error = 'Invalid file type. Only PDF, JPG and PNG types are accepted.';
    }else {
    
            $this->upload->do_upload('type_image');
                $data_image = array('upload_data' => $this->upload->data());
                $product_data['fld_image']=$data_image['upload_data']['file_name'];
                makeThumbnails($product_data['fld_image'],$config['upload_path'], 150, 150);
                makeThumbnails($product_data['fld_image'],$config['upload_path'], 250, 250);
                makeThumbnails($product_data['fld_image'],$config['upload_path'], 50, 50);
                $image_name=$product_data['fld_image'];
            }
         
        }
        if (!empty($_FILES['type_file']['name'])) {
            $config['file_name']=strtotime(date('Y-m-d H:i:s')).'_'.$_FILES['type_file']['name'];
            $config['upload_path'] = './assets/uploads/message_file/';
            $config['max_size']= 5*1048576; 
            $config['allowed_types'] = 'pdf|txt|text|doc|docx|rtf|xls';
            $config['overwrite'] = true; 
            $this->load->library('upload', $config);
            $this->upload->initialize($config);
            $maxsize    = 5*1048576;
    $acceptable1 = array(
        'application/pdf',
        'text/plain',
         'application/text',
          'application/doc  ',
           'application/docx',
            'application/rtf',
             'application/xls',
       );

    if( (!in_array($_FILES['type_file']['type'], $acceptable1))  ) {
        $error2 = 'Invalid file type. Only Pdf,Txt,Doc types are accepted.';
    }else {
            $this->upload->do_upload('type_file');
                $data_file = array('upload_data' => $this->upload->data());
                $product_data['fld_file']=$data_file['upload_data']['file_name'];
                makeThumbnails($product_data['fld_file'],$config['upload_path'], 150, 150);
                makeThumbnails($product_data['fld_file'],$config['upload_path'], 250, 250);
                makeThumbnails($product_data['fld_file'],$config['upload_path'], 50, 50);
                $file_name=$product_data['fld_file'];
            }
         
        }
        if($error){
            echo '<div class="alert alert-danger fade in" id="alert_box" style="margin-top:18px;">
                <a href="#" class="close" data-dismiss="alert" aria-label="close" title="close">×</a>'.$error.'</div>';
                                        
        }elseif($error2){
            echo '<div class="alert alert-danger fade in" id="alert_box" style="margin-top:18px;">
                <a href="#" class="close" data-dismiss="alert" aria-label="close" title="close">×</a>'.$error2.'</div>';
        }else{
     $message=$_POST['message'];
     $insertMSG=array(
                      'fld_message' => $message,
                      'fld_yogi_id' => $user_id,
                      'fld_member_id' => $member_id,                     
                      'fld_image' => $image_name,   
                      'fld_file' => $file_name,                   
                      'fld_msg_time' => time()
     
                );
     $this->db->insert('users_message',$insertMSG);
$insert_id = $this->db->insert_id();
            }
    }
?>

<!-- START BREADCRUMB -->
<ul class="breadcrumb push-down-0">
    <li><a href="<?php echo base_url()." admin"; ?>">Dashboard</a></li>
    <li class="active">Messages</li>
</ul>
<!-- END BREADCRUMB -->

<!-- START CONTENT FRAME -->
<div class="content-frame">
    <!-- START CONTENT FRAME TOP -->
    <div class="content-frame-top">
        <div class="page-title">
            <h2><span class="fa fa-comments"></span> Messages</h2>
        </div>
        <div class="pull-right">

            <button class="btn btn-default content-frame-right-toggle"><span class="fa fa-bars"></span></button>
        </div>
    </div>
    <!-- END CONTENT FRAME TOP -->

    <!-- START CONTENT FRAME RIGHT -->

    <div class="content-frame-right">

        <div class="list-group list-group-contacts border-bottom push-down-10">
            <ul class="users-list">
                <?php

                            $cuttime = date('Y-m-d H:i:s',strtotime('-10second'));
                            if($getTeachers->num_rows()>0) { ?>
                <h3>Teacher</h3>
                <?php                                 
                                foreach($getTeachers->result() as $getRow){
                                   $this->db->limit(1);
                                $this->db->order_by("ustatus", "desc"); 
                                $this->db->where(array('user_id'=>$getRow->fld_id));
                                $active=$this->db->get('status');
                                foreach($active->result() as $act){
                                $current = $act->ustatus;
                                if ($current > $cuttime) {
                                        $status = "<span class='btn btn-success'>online</span>";
                                    }else{
                                        $status = "<span class='btn btn-danger'>Offline</span>";
                                    }
                                 }
                                    ?>
                <li class="selectVendor" id="<?=$getRow->fld_id;?>"
                    title="<?php echo $getRow->fld_username.'&nbsp;'; echo $getRow->fld_last_name; ?>">
                    <a href="#" class="list-group-item">
                        <div class="list-group-status status-online"></div>
                        <img src="<?php $image_path=$getRow->fld_file_name;
                                                $image = base_url().$image_path; if(!empty($image_path)){echo $image;}else{ echo $noImg;}
                                                 ?>" class="pull-left" alt="Dmitry Ivaniuk">
                        <span class="contacts-title">
                            <?php echo $getRow->fld_username.'&nbsp;'; echo $getRow->fld_last_name; ?>
                        </span>
                        <p>
                            <?php echo $status?>
                        </p>
                    </a>
                </li>
                <?php  } } ?>
                <?php if($getStudents->num_rows()>0) { ?>
                <h3>member</h3>
                <?php foreach($getStudents->result() as $getRow1){ 
                                $this->db->limit(1);
                                $this->db->order_by("ustatus", "desc"); 
                                $this->db->where(array('user_id'=>$getRow1->fld_id));
                                $active=$this->db->get('status');
                                foreach($active->result() as $ac){
                                $current = $ac->ustatus;
                                if ($current > $cuttime) {
                                        $status = "<span class='btn btn-success'>online</span>";
                                    }else{
                                        $status = "<span class='btn btn-danger'>Offline</span>";
                                    }
                                 }  
                                ?>
                <li class="selectVendor" id="<?=$getRow1->fld_id;?>"
                    title="<?php echo $getRow1->fld_username.'&nbsp;'; echo $getRow1->fld_last_name; ?>">
                    <a href="#" class="list-group-item">
                        <!-- <div class="list-group-status status-online"></div> -->
                        <img src="<?php $image_path1=$getRow1->fld_file_name;
                                                $image1 = base_url().$image_path1; if(!empty($image_path1)){echo $image1;}else{ echo $noImg;}
                                                 ?>" class="pull-left" alt="Dmitry Ivaniuk">
                        <span class="contacts-title">
                            <?php echo $getRow1->fld_username.'&nbsp;'; echo $getRow1->fld_last_name; ?>
                        </span>
                        <p>
                            <?=$status?>
                        </p>
                    </a>
                </li>


                <?php  } } ?>
            </ul>
        </div>
    </div>
    <!-- END CONTENT FRAME RIGHT -->

    <!-- START CONTENT FRAME BODY -->
    <!-- START CONTENT FRAME BODY -->
    <div class="content-frame-body content-frame-body-left">
        <div class="chatbox">
            <div class="chatlogs">
                <div id="ReciverName_txt"></div>
                <div id="dumppy"></div>
            </div>
            <input type="hidden" id="Sender_Name" value="<?=$memberName;?>">
            <input type="hidden" id="ReciverId_txt">
            <div class="chat-from">
                <textarea></textarea>
                <button class="submit">Send</button>
            </div>
        </div>
    </div>
    <!-- END CONTENT FRAME BODY -->

    <script>
        $(function () {

            $('textarea').focus(function () {
                var is_type = 'yes';
                $.ajax({
                    url: home_url + 'member/update_is_type_status',
                    method: "POST",
                    data: { is_type: is_type },
                    success: function () {

                    }
                });
            });

            $('textarea').blur(function () {
                var is_type = 'no';
                $.ajax({
                    url: home_url + 'member/update_is_type_status',
                    method: "POST",
                    data: { is_type: is_type },
                    success: function () {

                    }
                });
            });

            $('textarea').keypress(function (event) {
                var keycode = (event.keyCode ? event.keyCode : event.which);
                if (keycode == '13') {
                    sendTxtMessage($(this).val());
                }
            });
            $('.submit').click(function () {
                sendTxtMessage($('textarea').val());
            });
            $('.selectVendor').click(function () {
                ChatSection(1);
                var receiver_id = $(this).attr('id');
                //alert(receiver_id);
                $('#ReciverId_txt').val(receiver_id);
                $('#ReciverName_txt').html($(this).attr('title'));

                GetChatHistory(receiver_id);
                deletchat(receiver_id);

            });
        });


        function sendTxtMessage(message) {
            var messageTxt = message.trim();
            if (messageTxt != '') {
                //console.log(message);
                DisplayMessage(messageTxt);

                var receiver_id = $('#ReciverId_txt').val();
                $.ajax({
                    url: home_url + 'admin/send_text_message',
                    type: 'post',
                    data: { messageTxt: messageTxt, receiver_id: receiver_id },
                    dataType: "text",
                    success: function (data) {
                        // console.log();
                        GetChatHistory(receiver_id)
                    },
                    error: function (jqXHR, status, err) {
                        // alert('Local error callback');
                    },
                });

                var height = 0;
                $('.chatlogs div').each(function (i, value) {
                    height += parseInt($(this).height());
                });

                height += '';

                $('.chatlogs').animate({ scrollTop: height });
                // $(".chatlogs").animate({ scrollTop: $(document).height() }, "fast");
                $('textarea').val('');
                $('textarea').focus();
            } else {
                $('textarea').focus();
            }
        }

        function GetChatHistory(receiver_id) {
            // alert(receiver_id);
            $.ajax({
                type: "post",
                dataType: "text",
                url: home_url + 'admin/get_chat_history',
                data: { receiver_id: receiver_id },
                success: function (data) {
                    // console.log(data);
                    $('#dumppy').html(data);
                    var height = 0;
                    $('.chatlogs div').each(function (i, value) {
                        height += parseInt($(this).height());
                    });

                    height += '';

                    $('.chatlogs').animate({ scrollTop: height });
                    // $(".chatlogs").animate({ scrollTop: $(document).height() }, "fast");
                },
                error: function (jqXHR, status, err) {
                    // alert('Local error callback');
                }
            });
        }

        setInterval(function () {
            var receiver_id = $('#ReciverId_txt').val();
            if (receiver_id != '') { GetChatHistory(receiver_id); }
        }, 3000);

        function DisplayMessage(message) {
            var Sender_Name = $('#Sender_Name').val();
            var d = new Date();
            d.setDate(d.getDate() + 50);
            var str = '<div class="chat self">';
            str += '<div class="user-photo"><img src="<?php echo base_url('assets / images / user.png')?>" alt="John Doe"/></div>';
            str += '<p class="chat-massage">' + message;
            str += '<br><span class="username" >' + Sender_Name + ' ' + d;
            str += '</p></div>';
            $('#dumppy').append(str);
        }

        function deletchat(receiver_id) {
            // alert(receiver_id);
            $.ajax({
                type: "post",
                dataType: "html",
                url: home_url + 'Member/delet_chat',
                data: { receiver_id: receiver_id },
                success: function (data) {
                    // console.log(data);
                }
            });
        }


        function ChatSection(status) {
            //chatSection
            if (status == 0) {
                $('.chatbox :input').attr('disabled', true);
            } else {
                $('.chatbox :input').removeAttr('disabled');
            }
        }
        ChatSection(0);
    </script>

    <style>
        #ReciverName_txt {
            color: #fff;
            text-align: center;
            font-weight: bolder;
            background: #2E4053;
            font-size: 20px;
            padding: 20px 0;
            margin: 0 50px 10px 55px;
            border-radius: 10px;
        }

        .select_id {
            width: 60px;
            height: 60px;
            background-color: #ccc;
            border-radius: 50%;
            overflow: hidden;

        }

        .select_id img {
            width: 100%;
        }

        ul li {
            list-style: none;
        }

        .chatbox {
            /*width:100%;*/
            min-width: 390px;
            height: 600px;
            background-color: #eae9e9;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 3px #ccc;

        }

        .chatlogs {
            height: 450px;
            background: #fff;
            overflow-x: hidden;
            overflow-y: scroll;
        }

        .users-list {
            height: 450px;
            overflow-x: hidden;
            overflow-y: scroll;
        }

        .chatlogs::-webkit-scrollbar {
            width: 10px;
        }

        .chatlogs::-webkit-scrollbar-thumb {
            border-radius: 5px;
            background: rgba(0, 0, 0, .1);
        }

        .chat {
            width: 105%;
        }

        .chats {
            width: 60%;
            display: flex;
            flex-flow: row wrap;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .chates {
            width: 60%;
            display: flex;
            flex-flow: row wrap;
            align-items: flex-start;
            margin-bottom: 20px;
            float: right;
        }

        .chat .user-photo {
            width: 40px;
            height: 40px;
            background-color: #ccc;
            border-radius: 50%;
            overflow: hidden;
        }

        .chat .user-photo img {
            width: 100%;
        }

        .chat .chat-massage {
            width: 70%;
            padding: 15px;
            margin: 20px 10px 0;
            color: #fff;
            font-size: 20px;
        }

        .friend .chat-massage {
            background-color: #F4F6F7;
            color: #000;
            text-align: left;
            border-radius: 0px 20px 20px 20px;
            padding: 5px;
        }

        .friend .user-photo {
            margin-left: 20px;
        }

        .self .chat-massage {
            background-color: #707B7C;
            order: -1;
            text-align: right;
            border-radius: 20px 0 20px 20px;
            padding: 5px;
        }

        .chat-from {
            margin-top: 30px;
            display: flex;
            align-items: flex-start;
        }

        .chat-from textarea {
            background: #fbfbfb;
            width: 90%;
            height: 50px;
            border: 2px solid #2d3945;
            border-right: none;
            resize: none;
            border-radius: 5px 0 0 5px;
            padding: 10px;
            font-size: 18px;
            color: #333;
        }

        .chat-from textarea::-webkit-scrollbar {
            width: 10px;
        }

        .chat-from textarea::-webkit-scrollbar-thumb {
            border-radius: 5px;
            background: rgba(0, 0, 0, .1);
        }

        .chat-from textarea:focus {
            background-color: #fff;
        }

        .chat-from button {
            background-color: #2d3945;
            padding: 4px 15px;
            border-radius: 0 5px 5px 0;
            font-size: 30px;
            color: #fff;
            border: none;
        }

        .friend .username {
            font-size: 8px;
            color: #cccccc;
        }

        .self .username {
            font-size: 8px;
            color: #f2f2f2;
        }
    </style>

    <?php
 $this->load->view('admin/footer');
?></xmp></code></pre>
<p>chakra reading</p>
<img class="img-fluid" src="image/chakrareadingadmin.png" alt="Login Page" height="100">
<br><br>
<p>chakra reading Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function chakra_reading($id="")

{

if(!empty($id)){

$data['user']=$this->Common_model->get_table_records1('chakra_reading',array('fld_user_id'=>$id));

}else{

$data['user']=$this->Common_model->get_table_records1('chakra_reading');

}



$this->load->view('admin/chakra_reading',$data);

}</xmp></code></pre>
<p>chakra reading view</p>
<code>application/views/admin/chakra_reading.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('admin/sidebar');
?>

<!-- START BREADCRUMB -->
<ul class="breadcrumb push-down-0">
    <li><a href="<?php echo base_url()." admin/";?>">Dashboard</a></li>
    <li class="active">Chakra Reading</li>
</ul>
<div class="page-title">
    <h2>Chakra Reading <button type="button" class="btn btn-default mb-control" data-box="#message-box-success"><img
                src="<?php echo base_url()." assets/images/";?>plus-30x30.png"></button></h2>
</div>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <!-- START WIDGETS -->
    <form action="#" class="form-horizontal" method="post">

        <div class="row">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-body panel-body-table">

                            <div class="table-responsive">
                                <table class="table table-bordered table-striped table-actions">
                                    <thead>
                                        <tr>
                                            <th width="50">#</th>
                                            <th>User Name</th>
                                            <th width="120">Uploads</th>
                                            <th width="100">Date Created</th>
                                            <th width="120">actions</th>
                                            <th width="120">Payment</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <?php
												$cnt=1;
												foreach($user as $users){
													echo "<tr>
													<td>".$cnt."</td>
													<td>".$this->Common_model->get_user_name($users->fld_user_id)."</td>
													<td><a href='".base_url('admin/upload_chakra_reading_image')."/".$users->fld_user_id."/".$users->fld_id."'>Uploads</a></td>
													<td>".date("m/d/Y",$users->fld_added_date)."</td>
													<td><a href='".base_url('admin/create_zip')."/".$users->fld_id."'>Download</a></td>
                                                                                                        <td>$".$users->fld_amt."</td>
													</tr>";
													
													$cnt++;
												}

												
												?>

                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>

                </div>
            </div>


        </div>

    </form>
    <!-- END WIDGETS -->


</div>
<!-- END PAGE CONTENT WRAPPER -->

<!-- success -->
<div class="message-box message-box-success animated fadeIn popup-scroll" id="message-box-success">
    <div class="mb-container">
        <div class="mb-middle">
            <div class="mb-title">Chakra reading</div>
            <div class="mb-content">

                <p> <b>Chakra reading: </b>Your body communicates with you. The chakras are the energy centers in your
                    body. There are 7 major and 69 minor chakras that communicate via the energy system of the sub
                    conscious mind. Our chakra imaging and report system will provide you an accurate report of what is
                    going on in the sub-conscious mind. Upon healing and clearing a particular area of the life the
                    energy will change color.
                    This is a very powerful tool to provide visual evidence to yourself or your clients about the
                    changes in the sub-conscious mind.<br /><br />
                    <b>How to use it:</b> Precisely follow the picture taking instructions. The quality of the images,
                    the background, lighting and the clothing are necessary for the correct reports. The reports are
                    based on the quality of the picture and it is the client/coach responsibility to provide the images
                    with correct specification. A processing fee is charged with each submission.
                    The fee is non-refundable and non transferable and will be charged to the credit card on account.
                    <br /><br />
                    <b>Instructions:</b><br /><br />
                </p>

                <ul class="number">
                    <li>Make sure the room is dimly lit and minimal light on the client. </li>
                    <li>The client should be as close to the wall as possible. ( about 6 inches away- no shadows)</li>
                    <li>The background has to be white. ( You can use a projector screen)</li>
                    <li>The camera person should be directly in front, about 6-8 feet away from the client.</li>
                    <li>Use the close-up & wide shot button to find the right frame ( 1 feet on top and 3-4 feet on the
                        side).</li>
                    <li>Jewelry & accessories like watch and glasses should be removed and long hair should be tied.
                    </li>
                    <li>Collar should be tucked in and sleeves should be rolled. The foot, ankle, calves & up to the
                        knees should be visible.</li>
                    <li>Watch the video to get precise instructions.</li>
                </ul>
            </div>
            <div class="mb-footer">
                <button class="btn btn-default btn-lg pull-right mb-control-close">Close</button>
            </div>
        </div>
    </div>
</div>
<!-- end success -->


<?php
 $this->load->view('admin/footer');
 ?>
</xmp></code></pre>
<p>upload chakra reading image</p>
<img class="img-fluid" src="image/uploadchakraimageadmin.png" alt="Login Page" height="100">
<br><br>
<p>upload chakra reading image Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function upload_chakra_reading_image($user_id,$f_id)

{

$data['f_id']=$f_id;

$data['user_id']=$user_id;

$data['user']=$this->Common_model->get_table_records('chakra_reading');

$this->load->view('admin/upload_chakra_reading_image',$data);

}</xmp></code></pre>
<p>upload chakra reading image view</p>
<code>application/views/admin/upload_chakra_reading_image.php</code>
<pre><code class="language-html"><xmp><?php 
defined('BASEPATH') OR exit('No direct script access allowed');
$this->load->view('admin/sidebar');
//print_r($user_id); 
error_reporting(0);
	 $this->db->select('*');
	 $this->db->where('fld_id',$user_id);
	 $q = $this->db->get('mys_users');
	 $data = $q->result_array();

foreach ($data as $dat){
    $client_id = $dat['fld_id'];
$member_parent_id = $dat['fld_parent'];
}

	 $this->db->select('*');
	 $this->db->where('fld_id',$member_parent_id);
$query = $this->db->get('mys_users');
$data_coach = $query->result_array();

foreach ($data_coach as $datas){
$member_coach_email = $datas['fld_email'];
$coach_parent_id = $datas['fld_parent'];
$coachname = $datas['fld_first_name'];
}

$this->db->select('*');
	 $this->db->where('fld_id',$coach_parent_id);
$query = $this->db->get('mys_users');
$data_admin = $query->result_array();

foreach ($data_admin as $data_adm){
$coach_admin_email = $data_adm['fld_email'];
$first_name = $data_adm['fld_first_name'];
$last_name = $data_adm['fld_last_name'];
}

$error       = false;
$ds          = DIRECTORY_SEPARATOR;
$storeFolder = 'assets/uploads/admin_upload_chakra_reading/';
$is_blank=false;
$iname=array();
if(isset($_POST['submit'])){
	 if(!empty($_FILES['filename'])) {
		 for($i=0;$i<=8;$i++){
			 if($_FILES['filename']['name'][$i]==''){
				 $is_blank=true;
				 echo '<div class="alert alert-danger">Please Select All Field</div>';
				 break;
			 }else{
				 continue;
			 }				 
		 }
			foreach ($_FILES["filename"]["name"] as $key => $name) {
				$tmp_name = $_FILES["filename"]["tmp_name"][$key];
				$iname[] = $name;
				$targetPath = FCPATH . $storeFolder . $ds;
				$targetFile =  $targetPath. $name;
				move_uploaded_file($tmp_name,$targetFile);
			
	       }
		   $insetImage=array(
			'fld_user_id'  => $user_id,
			'fld_image1'  => $iname[0],
			'fld_image2'  => $iname[1],
			'fld_image3'  => $iname[2],
			'fld_image4'  => $iname[3],
			'fld_image5'  => $iname[4],
			'fld_image6'  => $iname[5],
			'fld_image7'  => $iname[6],
			'fld_image8'  => $iname[7],
			'fld_image9'  => $iname[8],
			'fld_added_date' => time(),
            'fld_last_upload' => 1
			);
			$submit=$this->db->insert('mys_admin_upload_chakra_reading',$insetImage);
			if($this->db->affected_rows()){

        //Load email library
        // $this->load->library('email');
        // $this->email->from($coach_admin_email, 'MyportalX');
        // $this->email->to($member_coach_email);
        // $this->email->subject('Chakra Image Uploaded');
        // $this->email->message('Chakra Image Uploaded By'. $first_name. $last_name. ' Please Cheack-It-Out On MyportalX');
        //Send mail
        // if($this->email->send()){
                $email_html = '<head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><meta name="GENERATOR" content="MSHTML 11.00.10570.1001"></head><body bgcolor="#ffffff"><strong></strong><strong> </strong><strong></strong><table width="600" align="center" id="TbHeader" bgcolor="#400080" border="0" cellspacing="0" cellpadding="4"><tr><td align="center" id="TdHeader" bgcolor="#400080"><p align="center"><font color="#ffffff" face="Arial, Helvetica, sans-serif" size="6"><strong>Welcome</strong></font></p></td></tr></table><table width="600" align="center" id="TbBodyRow" border="0" cellspacing="0" cellpadding="0"><tr><td id="TdBodyRow" valign="top" bgcolor="#ffffff"><table width="100%" id="TbBody" bgcolor="#ffffff" border="0" cellspacing="0" cellpadding="4"><tr><td align="center" id="TdBody" bgcolor="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<p align="left"><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="3"><strong>Hi '. $coachname.'&nbsp;<font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="3">&nbsp;</font></strong></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p align="justify" style="margin-right: 0px;"><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="3"> Chakra Image Uploaded By'. $first_name. $last_name. ' Please Cheack-It-Out On MyportalX</font></p><br></font></font></font></p><p align="left"><br></p></td></tr></table></td></tr></table><strong></strong><strong></strong><strong> </strong><table width="600" align="center" id="TbFooter" bgcolor="#eea000" border="0" cellspacing="0" cellpadding="4"><tr><td align="center" id="TdFooter" bgcolor="#eea000"><div style="margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);"><div style="margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);"><span style="color: rgb(0, 52, 89); line-height: inherit; font-size: inherit; font-weight: bold; text-decoration: inherit;"><span style="color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: inherit; text-decoration: inherit;"><br></span></span></div><div style="margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);"><span style="color: rgb(0, 52, 89); line-height: inherit; font-size: inherit; font-weight: bold; text-decoration: inherit;"><span style="color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: inherit; text-decoration: inherit;">Regards,</span><br style="color: rgb(0, 52, 89);"></span></div><div style="margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);"><span style="color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: bold; text-decoration: inherit;">Team MyportalX</span></div><div style="margin: 0px; padding: 0px; text-align: center; color: rgb(0, 52, 89);"><span style="color: rgb(0, 52, 89); line-height: inherit; font-family: arial; font-size: inherit; font-style: normal; font-weight: bold; text-decoration: inherit;"><br></span></div></div></td></tr></table></body>';
                $subject = "Chakra Image Uploaded";
                $adminEmail = get_AdminEmailID();
                $revel = send_mail($member_coach_email, $subject,$email_html,"",$coach_admin_email);

                $notic=array(
            'sender_id' => $client_id,
            'reciver_id' => $member_parent_id,
            'message' => 'Chakra Image Uploaded By'. $first_name. $last_name. ' Please Cheack-It-Out On MyportalX',
            'urls' => "chakra_reading/".$client_id,
            'fld_date' => time()
        );

        $this->db->insert('notification',$notic);
if ($revel) {
            echo "<div class=\"alert alert-success\"><strong>Success! </strong>.<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a></div>";
			}
        else{
            $this->session->set_flashdata("email_sent","You have encountered an error");
			}
			}
		  
	 }else{
		  echo '<div class="alert alert-danger">How did you do that?O_o</div>';
	 }
  
  
} 
 
?>

<!-- START BREADCRUMB -->

<ul class="breadcrumb">
    <li><a href="<?php echo base_url().'admin';  ?>">Home</a></li>

</ul>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <!-- PAGE TITLE -->
    <div class="page-title">
        <h2>Chakra Reading</h2>
    </div>
    <!-- END PAGE TITLE -->

    <!-- PAGE CONTENT WRAPPER -->
    <div class="page-content-wrap">
        <form role="form" action="#" method="post" enctype="multipart/form-data" class="form-horizontal">
            <div class="row">
                <div class="col-md-12">

                    <!-- START BASIC ELEMENTS -->
                    <div class="panel panel-default">
                        <div class="panel-body">



                            <div class="form-group">
                                <div class="col-md-3 col-xs-12" style="padding:5px;">
                                    <div id="preview1"><img
                                            src="<?php echo base_url().'assets/' ?>uploads/chakra-reading/chakra_img01.jpg"
                                            alt="John Doe"></div> <input type="file" class="fileinput1"
                                        name="filename[]" id="filename1" /> <span class="help-block">BACK</span>
                                    <div class="form-group-separated"></div>
                                </div>
                                <div class="col-md-3 col-xs-12" style="padding:5px;">
                                    <div id="preview2"><img
                                            src="<?php echo base_url().'assets/' ?>uploads/chakra-reading/chakra_img02.jpg"
                                            alt="John Doe"></div> <input type="file" class="fileinput2"
                                        name="filename[]" id="filename2" /> <span class="help-block">FRONT: LONG</span>
                                    <div class="form-group-separated"></div>
                                </div>
                                <div class="col-md-3 col-xs-12" style="padding:5px;">
                                    <div id="preview3"><img
                                            src="<?php echo base_url().'assets/' ?>uploads/chakra-reading/chakra_img03.jpg"
                                            alt="John Doe"></div> <input type="file" class="fileinput3"
                                        name="filename[]" id="filename3" /> <span class="help-block">FRONT: SHORT</span>
                                    <div class="form-group-separated"></div>
                                </div>
                                <div class="col-md-3 col-xs-12" style="padding:5px;">
                                    <div id="preview4"><img
                                            src="<?php echo base_url().'assets/' ?>uploads/chakra-reading/chakra_img04.jpg"
                                            alt="John Doe"></div> <input type="file" class="fileinput4"
                                        name="filename[]" id="filename4" /> <span class="help-block">LEFT PROFILE</span>
                                    <div class="form-group-separated"></div>
                                </div>
                                <div class="col-md-3 col-xs-12" style="padding:5px;">
                                    <div id="preview5"><img
                                            src="<?php echo base_url().'assets/' ?>uploads/chakra-reading/chakra_img05.jpg"
                                            alt="John Doe"></div> <input type="file" class="fileinput5"
                                        name="filename[]" id="filename5" /> <span class="help-block">RIGHT
                                        PROFILE</span>
                                    <div class="form-group-separated"></div>
                                </div>
                                <div class="col-md-3 col-xs-12" style="padding:5px;">
                                    <div id="preview6"><img
                                            src="<?php echo base_url().'assets/' ?>uploads/chakra-reading/chakra_img06.jpg"
                                            alt="John Doe"></div> <input type="file" class="fileinput6"
                                        name="filename[]" id="filename6" /> <span class="help-block">RIGHT HAND</span>
                                    <div class="form-group-separated"></div>
                                </div>
                                <div class="col-md-3 col-xs-12" style="padding:5px;">
                                    <div id="preview7"><img
                                            src="<?php echo base_url().'assets/' ?>uploads/chakra-reading/chakra_img07.jpg"
                                            alt="John Doe"></div> <input type="file" class="fileinput7"
                                        name="filename[]" id="filename7" /> <span class="help-block">LEFT HAND</span>
                                    <div class="form-group-separated"></div>
                                </div>
                                <div class="col-md-3 col-xs-12" style="padding:5px;">
                                    <div id="preview8"><img
                                            src="<?php echo base_url().'assets/' ?>uploads/chakra-reading/chakra_img08.jpg"
                                            alt="John Doe"></div> <input type="file" class="fileinput8"
                                        name="filename[]" id="filename8" /> <span class="help-block">LEG FRONT</span>
                                    <div class="form-group-separated"></div>
                                </div>
                                <div class="col-md-3 col-xs-12" style="padding:5px;">
                                    <div id="preview9"><img
                                            src="<?php echo base_url().'assets/' ?>uploads/chakra-reading/chakra_img09.jpg"
                                            alt="John Doe"></div> <input type="file" class="fileinput9"
                                        name="filename[]" id="filename9" /> <span class="help-block">LEG BACK</span>
                                    <div class="form-group-separated"></div>
                                </div>


                            </div>




                            <div>
                                <button class="btn btn-default">Clear Form</button>
                                <input type="submit" name="submit" value="submit" class="btn btn-primary pull-right" />
                            </div>

                        </div>
                    </div>
                </div>
                <!-- END BASIC ELEMENTS -->
            </div>
        </form>
    </div>
    <!-- END PAGE CONTENT WRAPPER -->
</div>
<!-- END PAGE CONTENT WRAPPER -->

<!-- END PRELOADS -->

<!-- START SCRIPTS -->
<!-- START PLUGINS -->



<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / image - preview / imagepreview.js"></script>
<script type="text/javascript" src="<?php echo base_url()."
    assets/";?>js / plugins / image - preview / imagepreview - custom.js"></script>
<!-- END TEMPLATE -->
<script>
    $(function () {
        //Spinner
        $(".spinner_default").spinner()
        $(".spinner_decimal").spinner({ step: 0.01, numberFormat: "n" });
        //End spinner

        //Datepicker
        $('#dp-2').datepicker();
        $('#dp-3').datepicker({ startView: 2 });
        $('#dp-4').datepicker({ startView: 1 });
        //End Datepicker
    });
</script>
<!-- END SCRIPTS -->
<?php
 $this->load->view('admin/footer');
 ?>
</xmp></code></pre>
<p>view coaches list</p>
<img class="img-fluid" src="image/viewcoachlistreportadmin.png" alt="Login Page" height="100">
<br><br>
<p>view coaches list Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function view_coaches_list()
{
    $this->load->view('admin/view_coaches_list');
}</xmp></code></pre>
<p>view coaches list view</p>
<code>application/views/admin/view_coaches_list.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('admin/sidebar');
error_reporting(0);
$session = $this->session->get_userdata();
$adminID=$session['user_id'];
//print_r($adminID);
$cat_list=$this->Common_model->get_table_records('users',array('fld_user_type'=>'yogiccoach'));
$row_cont=1;
$catRow='';
					
foreach ($cat_list as $Row){
		$timestamp=$Row->fld_added_date;
		$startDate=date('m/d/Y',$timestamp);
		$first=$Row->fld_first_name;
		$last=$Row->fld_last_name;
		$name= $first.' '.$last;
		if(($Row->fld_status)=='1'){
			$status= 'Active';
		}
		if(($Row->fld_status)=='0'){
			$status= 'Deactive';
		}
				
				
				$catRow.='<tr class="gradeA">
							<td>'.$row_cont.'</td>
							<td>'.$Row->fld_id.'</td>
							<td>'.$name.'</td>
							<td>'.$Row->fld_sponsor.'</td>
							<td>'.$Row->fld_email.'</td>
							<td>'.$status.'</td>
							<td>'.$startDate.'</td>
							<td>'.$Row->fld_location.'</td>
						 </tr>';
			$row_cont++;
								  
}

?>

<ul class="breadcrumb push-down-1">
    <li><a href="<?php echo base_url()." admin/";?>">Dashboard</a></li>
    <li class="active">View Coaches List</li>
</ul>
<h2>&nbsp;&nbsp; View Coaches List</h2>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <!-- START WIDGETS -->
    <form action="#" class="form-horizontal" method="post">
        <div class="row">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-body panel-body-table">
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped table-actions">
                                    <thead>
                                        <tr>
                                            <th>S.No.</th>
                                            <th>Id</th>
                                            <th>Name</th>
                                            <th>Sponsor</th>
                                            <th>Email</th>
                                            <th>Status</th>
                                            <th>Date</th>
                                            <th>Location</th>
                                        </tr>
                                    </thead>
                                    <?php echo $catRow;?>
                                    <tbody>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!-- END WIDGETS -->
</div>
<!-- END PAGE CONTENT WRAPPER -->


<?php
 $this->load->view('admin/footer');
 ?>
</xmp></code></pre>
<p>view client list</p>
<img class="img-fluid" src="image/viewmemberlistadmin.png" alt="Login Page" height="100">
<br><br>
<p>view client list Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function view_members_list()
{
    $this->load->view('admin/view_members_list');
}</xmp></code></pre>
<p>view client list view</p>
<code>application/views/admin/view_members_list.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('admin/sidebar');
error_reporting(0);
$session = $this->session->get_userdata();
$adminID=$session['user_id'];
//print_r($adminID);
$cat_list=$this->Common_model->get_table_records('users',array('fld_user_type'=>'member'));
$row_cont=1;
$catRow='';
					
foreach ($cat_list as $Row){
		$timestamp=$Row->fld_added_date;
		$startDate=date('m/d/Y',$timestamp);
		$first=$Row->fld_first_name;
		$last=$Row->fld_last_name;
		$name= $first.' '.$last;
		if(($Row->fld_status)=='1'){
			$status= 'Active';
		}
		if(($Row->fld_status)=='0'){
			$status= 'Deactive';
		}
		$coachId=$Row->fld_parent;
				
		$coach=$this->Common_model->get_student_name($coachId);		
		//print_r($coach);
				
				
				$catRow.='<tr class="gradeA">
							<td>'.$row_cont.'</td>
							<td>'.$Row->fld_id.'</td>
							<td>'.$name.'</td>
							<td>'.$Row->fld_email.'</td>
							<td>'.$status.'</td>
							<td>'.$coach.'</td>
							<td>'.$startDate.'</td>
							<td>'.$Row->fld_location.'</td>
						 </tr>';
			$row_cont++;
								  
}

?>

<ul class="breadcrumb push-down-1">
    <li><a href="<?php echo base_url()." admin/";?>">Dashboard</a></li>
    <li class="active">View Member List</li>
</ul>
<h2>&nbsp;&nbsp; View Member List</h2>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <!-- START WIDGETS -->
    <form action="#" class="form-horizontal" method="post">
        <div class="row">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-body panel-body-table">
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped table-actions">
                                    <thead>
                                        <tr>
                                            <th>S.No.</th>
                                            <th>Id</th>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Status</th>
                                            <th>Coach</th>
                                            <th>Date</th>
                                            <th>Location</th>
                                        </tr>
                                    </thead>
                                    <?php echo $catRow;?>
                                    <tbody>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!-- END WIDGETS -->
</div>
<!-- END PAGE CONTENT WRAPPER -->


<?php
 $this->load->view('admin/footer');
 ?>
</xmp></code></pre>
<p>Intention setting</p>
<img class="img-fluid" src="image/intesionreportadmin.png" alt="Login Page" height="100">
<br><br>
<p>Intention setting Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function intention_setting_report()
{
    $this->load->view('admin/intention_setting_report');
}</xmp></code></pre>
<p>Intention setting view</p>
<code>application/views/admin/intention_setting_report.php</code>
<pre><code class="language-html"><xmp><?php
	$this->load->view('admin/sidebar');
	//$user_id=$_GET['user_id'];
	error_reporting(0);
	$session=$this->session->get_userdata();
	$user_id=$session['user_id'];
	//print_r($id);
	if (!empty($_POST['formDate']) && !empty($_POST['toDate']) ){
	 
		$this->db->where('fld_date_view >=',date("Y-m-d",strtotime($_POST['formDate'])));
		$this->db->where('fld_date_view <=',date("Y-m-d",strtotime($_POST['toDate'])));
		$resultValue=$this->db->get('intention_setting');
		$row_cont=1;
		$catRow='';
		$result=$resultValue->result();
		//print_r($result);exit;
		foreach ($result as $Row){
			$catRow.='<tr class="gradeA">
						<td>'.$row_cont.'</td>
						<td>'.$this->Common_model->get_student_name($Row->fld_user_id).'</td>
						<td>'.date("m/d/Y",strtotime($Row->fld_date)).'</td>
						<td>'.$Row->fld_topic.'</td>
						<td>'.$Row->fld_message.'</td>
					  </tr>';
			$row_cont++;
			
			
		}
	}


?>


<!-- START BREADCRUMB -->
<ul class="breadcrumb">
    <li><a href="<?php echo base_url()." admin"; ?>">Home</a></li>
    <li class="active">Intention setting</li>
</ul>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">
    <!-- PAGE TITLE -->
    <div class="page-title">
        <h2>Intention setting</h2>
    </div>
    <!-- END PAGE TITLE -->

    <!-- PAGE CONTENT WRAPPER -->
    <div class="page-title">
        <div class="form-group">
            <form action="#" method="post" class="form-horizontal">
                <div class="col-md-3">
                    <input type="text" name="formDate" id="formDateSchedule" class="form-control datepicker"
                        placeholder="From">
                </div>
                <div class="col-md-3">
                    <input type="text" name="toDate" id="toDateSchedule" class="form-control datepicker"
                        placeholder="To">
                </div>
                <div class="col-md-3">
                    <input type="submit" value="submit" class="btn btn-primary pull-right" id="submit_final_form">

                </div>
            </form>
        </div>
    </div>

    <div class="page-content-wrap">
        <form action="" method="post" role="form" class="form-material form-horizontal">
            <div class="row">
                <div class="col-md-12">

                    <!-- START BASIC ELEMENTS -->
                    <div class="panel panel-default">
                        <div class="panel-body panel-body-table">
                            <div class="table-responsive">
                                <?php if (!empty($_POST['formDate']) && !empty($_POST['toDate']) ){?>
                                <table class="table table-bordered table-striped table-actions">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th class="text-center">Name</th>
                                            <th>Date</th>
                                            <th>Topic</th>
                                            <th>Message</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <?php echo $catRow; ?>
                                    </tbody>
                                </table>
                                <?php } ?>

                            </div>

                        </div>

                    </div>
                    <!-- END BASIC ELEMENTS -->
                </div>
            </div>
        </form>
    </div>


    <?php
 $this->load->view('admin/footer');
 ?>
</xmp></code></pre>
<p>Gratitude Journal</p>
<img class="img-fluid" src="image/greatitudereportadmin.png" alt="Login Page" height="100">
<br><br>
<p>Gratitude Journal Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function gratitude_journal_report()

{

$this->load->view('admin/gratitude_journal_report');

}</xmp></code></pre>
<p>Gratitude Journal view</p>
<code>application/views/admin/gratitude_journal_report.php</code>
<pre><code class="language-html"><xmp><?php
	$this->load->view('admin/sidebar');
	//$user_id=$_GET['user_id'];
	error_reporting(0);
	$session=$this->session->get_userdata();
	$user_id=$session['user_id'];
	//print_r($id);
	if (!empty($_POST['formDate']) && !empty($_POST['toDate']) ){
	 
		$this->db->where('fld_date_view >=',date("Y-m-d",strtotime($_POST['formDate'])));
		$this->db->where('fld_date_view <=',date("Y-m-d",strtotime($_POST['toDate'])));
		$resultValue=$this->db->get('mys_daily_journal');
		$row_cont=1;
		$catRow='';
		$result=$resultValue->result();
		//print_r($result);exit;
		foreach ($result as $Row){
			$timestamp=$Row->fld_added_date;
			$generat_date=date('m/d/Y',$timestamp);
			$catRow.='<tr class="gradeA">
						<td>'.$row_cont.'</td>
						<td>'.$this->Common_model->get_student_name($Row->fld_user_id).'</td>
						<td>'.$generat_date.'</td>
						<td>'.$Row->fld_text_journal.'</td>
					  </tr>';
			$row_cont++;
			
			
		}
	}


?>


<!-- START BREADCRUMB -->
<ul class="breadcrumb">
    <li><a href="<?php echo base_url()." admin"; ?>">Home</a></li>
    <li class="active">Gratitude Journal</li>
</ul>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">
    <!-- PAGE TITLE -->
    <div class="page-title">
        <h2>Gratitude Journal</h2>
    </div>
    <!-- END PAGE TITLE -->

    <!-- PAGE CONTENT WRAPPER -->
    <div class="page-title">
        <div class="form-group">
            <form action="#" method="post" class="form-horizontal">
                <div class="col-md-3">
                    <input type="text" name="formDate" id="formDateSchedule" class="form-control datepicker"
                        placeholder="From">
                </div>
                <div class="col-md-3">
                    <input type="text" name="toDate" id="toDateSchedule" class="form-control datepicker"
                        placeholder="To">
                </div>
                <div class="col-md-3">
                    <input type="submit" value="submit" class="btn btn-primary pull-right" id="submit_final_form">

                </div>
            </form>
        </div>
    </div>

    <div class="page-content-wrap">
        <form action="" method="post" role="form" class="form-material form-horizontal">
            <div class="row">
                <div class="col-md-12">

                    <!-- START BASIC ELEMENTS -->
                    <div class="panel panel-default">
                        <div class="panel-body panel-body-table">
                            <div class="table-responsive">
                                <?php if (!empty($_POST['formDate']) && !empty($_POST['toDate']) ){?>
                                <table class="table table-bordered table-striped table-actions">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th class="text-center">Name</th>
                                            <th>Date</th>
                                            <th>Topic</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <?php echo $catRow; ?>
                                    </tbody>
                                </table>
                                <?php } ?>

                            </div>

                        </div>

                    </div>
                    <!-- END BASIC ELEMENTS -->
                </div>
            </div>
        </form>
    </div>





    <?php
 $this->load->view('admin/footer');
 ?>
</xmp></code></pre>
<p>Negative anrgy detox</p>
<img class="img-fluid" src="image/dahatantraadmin.png" alt="Login Page" height="100">
<br><br>
<p>Negative anrgy detox Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function daha_tantra_form()
{
    $this->load->view('admin/daha_tantra_form');
}</xmp></code></pre>
<p>Negative anrgy detox view</p>
<code>application/views/admin/daha_tantra_form.php</code>
<pre><code class="language-html"><xmp><?php
	$this->load->view('admin/sidebar');
	//$user_id=$_GET['user_id'];
	error_reporting(0);
	$session=$this->session->get_userdata();
	$user_id=$session['user_id'];
	//print_r($id);
	if (!empty($_POST['formDate']) && !empty($_POST['toDate']) ){
	 
		$this->db->where('fld_date_view >=',date("Y-m-d", strtotime($_POST['formDate'])));
		$this->db->where('fld_date_view <=',date("Y-m-d",strtotime($_POST['toDate'])));
		$resultValue=$this->db->get('negative_energy_detox');
		$row_cont=1;
		$catRow='';
		$result=$resultValue->result();
		//print_r($result);exit;
		foreach ($result as $Row){
			$catRow.='<tr class="gradeA">
						<td>'.$row_cont.'</td>
						<td>'.$this->Common_model->get_student_name($Row->fld_user_id).'</td>
						<td>'.date("m/d/Y",strtotime($Row->fld_date)).'</td>
						<td>'.$Row->fld_topic.'</td>
						<td>'.$Row->fld_message.'</td>
					  </tr>';
			$row_cont++;
			
			
		}
	}


?>


<!-- START BREADCRUMB -->
<ul class="breadcrumb">
    <li><a href="<?php echo base_url()." admin"; ?>">Home</a></li>
    <li class="active">Negative Energy</li>
</ul>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">
    <!-- PAGE TITLE -->
    <div class="page-title">
        <h2>Negative Energy Detox</h2>
    </div>
    <!-- END PAGE TITLE -->

    <!-- PAGE CONTENT WRAPPER -->
    <div class="page-title">
        <div class="form-group">
            <form action="#" method="post" class="form-horizontal">
                <div class="col-md-3">
                    <input type="text" name="formDate" id="formDateSchedule" class="form-control datepicker"
                        placeholder="From">
                </div>
                <div class="col-md-3">
                    <input type="text" name="toDate" id="toDateSchedule" class="form-control datepicker"
                        placeholder="To">
                </div>
                <div class="col-md-3">
                    <input type="submit" value="submit" class="btn btn-primary pull-right" id="submit_final_form">

                </div>
            </form>
        </div>
    </div>

    <div class="page-content-wrap">
        <form action="" method="post" role="form" class="form-material form-horizontal">
            <div class="row">
                <div class="col-md-12">

                    <!-- START BASIC ELEMENTS -->
                    <div class="panel panel-default">
                        <div class="panel-body panel-body-table">
                            <div class="table-responsive">
                                <?php if (!empty($_POST['formDate']) && !empty($_POST['toDate']) ){?>
                                <table class="table table-bordered table-striped table-actions">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th class="text-center">Name</th>
                                            <th>Date</th>
                                            <th>Topic</th>
                                            <th>Message</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <?php echo $catRow; ?>
                                    </tbody>
                                </table>
                                <?php } ?>

                            </div>

                        </div>

                    </div>
                    <!-- END BASIC ELEMENTS -->
                </div>
            </div>
        </form>
    </div>


    <?php
 $this->load->view('admin/footer');
 ?>
</xmp></code></pre>
<p>All Member</p>
<img class="img-fluid" src="image/allmemberadmin.png" alt="Login Page" height="100">
<br><br>
<p>All Member Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function allMembers()
{
    $this->load->view('admin/allMembers');
}</xmp></code></pre>
<p>All Member view</p>
<code>application/views/admin/allMembers.php</code>
<pre><code class="language-html"><xmp><?php
$this->load->view('admin/sidebar');
error_reporting(0);
$cat_list=$this->Common_model->get_table_records('users',array('fld_user_type'=>member));
$row_cont=1;
$catRow='';
					
foreach ($cat_list as $Row){
		$first=$Row->fld_first_name;
		$last=$Row->fld_last_name;
		$name= $first.' '.$last;
		
				$catRow.='<tr class="gradeA">
							<td class="memberDetails" data-id="'.$Row->fld_id.'">'.$row_cont.'</td>
							<td class="memberDetails" data-id="'.$Row->fld_id.'">'.$Row->fld_id.'</td>
							<td class="memberDetails" data-id="'.$Row->fld_id.'">'.$name.'</td>
						 </tr>';
			$row_cont++;
								  
}

?>

<ul class="breadcrumb push-down-1">
    <li><a href="<?php echo base_url()." admin";?>">Dashboard</a></li>
    <li class="active"><a href="#">View Member List</a></li>
</ul>
<h2>&nbsp;&nbsp; View Member List</h2>
<!-- END BREADCRUMB -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <!-- START WIDGETS -->
    <form action="#" class="form-horizontal" method="post">
        <div class="row">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-body panel-body-table">
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped table-actions">
                                    <thead>
                                        <tr>
                                            <th>##</th>
                                            <th>Id</th>
                                            <th>Name</th>
                                        </tr>
                                    </thead>
                                    <?php echo $catRow;?>
                                    <tbody>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!-- END WIDGETS -->
</div>
<!-- END PAGE CONTENT WRAPPER -->
<style>
    .memberDetails {
        cursor: pointer;
    }
</style>

<?php
 $this->load->view('admin/footer');
 ?>
</xmp></code></pre>
<p>profile Edit</p>
<img class="img-fluid" src="image/profileeditadmin.png" alt="Login Page" height="100">
<br><br>
<p>profile Edit Controller</p>
<code>application/controllers/admin.php</code>
<pre><code class="language-html"><xmp>public function edit_profile()
{
    $this->load->view('admin/edit_profile');
}</xmp></code></pre>
<p>profile Edit view</p>
<code>application/views/admin/edit_profile.php</code>
<pre><code class="language-html"><xmp><?php
	$this->load->view('admin/sidebar');
	error_reporting(0);
	//$session=$this->session->get_userdata();
	//$user_id=$session['user_id'];
	$session=$this->session->get_userdata();
 $user_id=$session['user_id'];
 //print_r($user_id);

	
	$userData = $this->db->get_where('users',array('fld_id'=> $user_id));
	
	if ($userData->num_rows()>0) {
	$userRow = $userData->row_array();
	}
//echo '<pre>';print_r($userRow);die;
	$image_path=($userRow['fld_file_name']!='')?$userRow['fld_file_name']:'assets/uploads/admin/'.'default.jpg';
	$image = base_url().$image_path;
	//print_r($image);
	if(isset($_REQUEST['save'])){
		$first_name=$_REQUEST['first_name'];
		$last_name=$_REQUEST['last_name'];
		$paypalId=$_REQUEST['paypalId'];
		$location=$_REQUEST['location'];
		$about_me=$_REQUEST['about_me'];
 
	$newData = array(
                  'fld_first_name' => $first_name,
                  'fld_last_name' => $last_name,
                  'fld_paypal_id' => $paypalId,
                  'fld_location' => $location,
                  'fld_about_me' => $about_me,
                  'fld_added_date' => time(),
                  'fld_modified_date' => time()
				);
		$this->db->where('fld_id', $user_id);
		$this->db->update('users', $newData);
	    if($this->db->affected_rows()){
			echo "<div   class=\"alert alert-success\"><strong>Success! </strong>.<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a></div>";
		}else{
			echo "Database Error..";
		}
	}

    $error       = false;
$ds          = DIRECTORY_SEPARATOR;
$storeFolder = 'assets/uploads/admin/';
$is_blank=true;

if ($_POST['Accept']) {
  $name = $_FILES['file']['name'];
  $tmp_name = $_FILES["file"]["tmp_name"];
  $targetPath = FCPATH . $storeFolder . $ds;
  $targetFile = $targetPath. $name;
  move_uploaded_file($tmp_name,$targetFile);
  $save_image = 'assets/uploads/admin/'.$name; 

  $this->db->where("fld_id", $user_id);
            $this->db->set("fld_file_name", $save_image);
            $this->db->update("users");
    if($this->db->affected_rows() >=0){
  header("refresh: 0");
}else{
  echo "error";
}

}
?>
<!-- <?php echo base_url(); ?>   
         START BREADCRUMB -->
<ul class="breadcrumb">
    <li><a href="<?php echo base_url()." admin"; ?>">Home</a></li>
    <li><a href="#">Edit Profile</a></li>
    <li class="active">Rajah Sharma</li>
</ul>
<!-- END BREADCRUMB -->

<!-- PAGE TITLE -->
<div class="page-title">
    <h2><span class="fa fa-cogs"></span> Edit Profile</h2>
</div>
<!-- END PAGE TITLE -->

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">
    <div class="row">
        <div class="col-md-12">
            <div class="alert alert-warning" role="alert">
                <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">×</span><span
                        class="sr-only">Close</span></button>
                <strong>Important!</strong> Main feature of this page is "Change photo" function. Press button "Change
                photo" and try to use this awesome feature.
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-3 col-sm-4 col-xs-12">

            <div class="panel panel-default">
                <div class="panel-body">
                    <h3><span class="fa fa-user"></span>
                        <?php echo $userRow['fld_first_name'];?>
                        <?php echo $userRow['fld_last_name'];?>
                    </h3>
                    <p>Administrator</p>
                    <div class="text-center" id="user_image">
                        <img src="<?php echo $image ?>" class="img-thumbnail" />
                    </div>
                </div>
                <div class="panel-body form-group-separated">
                    <div class="form-group">
                        <div class="col-md-12 col-xs-12">
                            <a href="#" class="btn btn-primary btn-block btn-rounded" data-toggle="modal"
                                data-target="#modal_change_photo">Change Photo</a>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-3 col-xs-5 control-label">#ID</label>
                        <div class="col-md-9 col-xs-7">
                            <input type="text" value="<?php echo $userRow['fld_id']; ?>" class="form-control"
                                disabled />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-3 col-xs-5 control-label">Login</label>
                        <div class="col-md-9 col-xs-7">
                            <input type="text" value="<?php echo $userRow['fld_username']; ?>" class="form-control" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-3 col-xs-5 control-label">E-mail</label>
                        <div class="col-md-9 col-xs-7">
                            <input type="text" value="<?php echo $userRow['fld_email']; ?>" class="form-control" />
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-md-12 col-xs-12">
                            <a href="#" class="btn btn-danger btn-block btn-rounded" data-toggle="modal"
                                data-target="#modal_change_password">Change password</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-9 col-sm-8 col-xs-12">
            <form action="#" class="form-horizontal">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <h3><span class="fa fa-pencil"></span> Profile</h3>
                        <p>This information lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer faucibus,
                            est quis molestie tincidunt, elit arcu faucibus erat.</p>
                    </div>
                    <div class="panel-body form-group-separated">
                        <div class="form-group">
                            <label class="col-md-3 col-xs-5 control-label">First Name</label>
                            <div class="col-md-9 col-xs-7">
                                <input type="text" name="first_name" value="<?php echo $userRow['fld_first_name']; ?>"
                                    class="form-control" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 col-xs-5 control-label">Last Name</label>
                            <div class="col-md-9 col-xs-7">
                                <input type="text" name="last_name" value="<?php echo $userRow['fld_last_name']; ?>"
                                    class="form-control" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 col-xs-5 control-label">Paypal Email Id</label>
                            <div class="col-md-9 col-xs-7">
                                <input type="text" name="paypalId" value="<?php echo $userRow['fld_paypal_id']; ?>"
                                    class="form-control" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 col-xs-5 control-label">Location</label>
                            <div class="col-md-9 col-xs-7">
                                <input type="text" name="location" value="<?php echo $userRow['fld_location']; ?>"
                                    class="form-control" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 col-xs-5 control-label">About me</label>
                            <div class="col-md-9 col-xs-7">
                                <textarea class="form-control" rows="5"
                                    name="about_me"><?php echo $userRow['fld_about_me']; ?></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-12 col-xs-12">
                                <input type="submit" value="Save" class="btn btn-primary btn-rounded pull-right"
                                    name="save">
                            </div>
                        </div>
                    </div>
                </div>
            </form>


        </div>


    </div>
</div>



<!-- MODALS -->
<div class="modal animated fadeIn" id="modal_change_photo" tabindex="-1" role="dialog" aria-labelledby="smallModalHead"
    aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">Close</span></button>
                <h4 class="modal-title" id="smallModalHead">Change photo</h4>
            </div>
            <form id="cp_crop" method="post" action="<?php echo base_url().'assets';?>/crop_image.php">
                <div class="modal-body">
                    <div class="text-center" id="cp_target">Use form below to upload file. Only .jpg files.</div>
                    <input type="hidden" name="cp_img_path" id="cp_img_path" />
                    <input type="hidden" name="ic_x" id="ic_x" />
                    <input type="hidden" name="ic_y" id="ic_y" />
                    <input type="hidden" name="ic_w" id="ic_w" />
                    <input type="hidden" name="ic_h" id="ic_h" />
                </div>
            </form>
            <form id="cp_upload" method="post" enctype="multipart/form-data" action="#">
                <div class="modal-body form-horizontal form-group-separated">
                    <div class="form-group">
                        <label class="col-md-4 control-label">New Photo</label>
                        <div class="col-md-4">
                            <input type="file" class="fileinput btn-info" name="file" id="ncp_photo"
                                data-filename-placement="inside" title="Select file" />
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <input type="submit" name="Accept" value="Accept" class="btn btn-success" disabled="disabled"
                        id="ncp_accept">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </form>

        </div>
    </div>
</div>
<form action="#" method="post" class="form-horizontal">
    <div class="modal animated fadeIn" id="modal_change_password" tabindex="-1" role="dialog"
        aria-labelledby="smallModalHead" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span
                            aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title" id="smallModalHead">Change password</h4>
                </div>
                <div id="error_container"></div>
                <div class="modal-body">

                </div>
                <div class="modal-body form-horizontal form-group-separated">
                    <div class="form-group">
                        <label class="col-md-3 control-label">Old Password</label>
                        <div class="col-md-9">
                            <input type="password" id="admin_old_password" class="form-control" required />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label">New Password</label>
                        <div class="col-md-9">
                            <input type="password" id="admin_new_password" class="form-control" required />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label">Repeat New</label>
                        <div class="col-md-9">
                            <input type="password" class="form-control" id="admin_re_password" required />
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="#" class="btn btn-danger" data-id="<?php echo $user_id ?>"
                        id="proccess_change_password_admin">Proccess</a>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</form>
<!-- EOF MODALS -->

<!-- BLUEIMP GALLERY -->
<div id="blueimp-gallery" class="blueimp-gallery blueimp-gallery-controls">
    <div class="slides"></div>
    <h3 class="title"></h3>
    <a class="prev">‹</a>
    <a class="next">›</a>
    <a class="close">×</a>
    <a class="play-pause"></a>
    <ol class="indicator"></ol>
</div>
<!-- END BLUEIMP GALLERY -->
<script>
    $(document).ready(function () {
        $("#ncp_photo").change(function () {
            var file = $(this).val();
            $("#ncp_accept").prop("disabled", false);
        });
    });
</script>

<?php
 $this->load->view('admin/footer');
?>
</xmp></code></pre>
</div>